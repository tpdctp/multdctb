var Y1=Object.getPrototypeOf;var Q1=Reflect.get;var Kc=(t,e,n)=>Q1(Y1(t),n,e);const oe={context:void 0,registry:void 0};function Vn(t){oe.context=t}function X1(){return{...oe.context,id:`${oe.context.id}${oe.context.count++}-`,count:0}}const J1=(t,e)=>t===e,At=Symbol("solid-proxy"),Wa=Symbol("solid-track"),Z1=Symbol("solid-dev-component"),Ga={equals:J1};let eo=null,zb=Zb;const Rn=1,lo=2,Wb={owned:null,cleanups:null,context:null,owner:null},qc={};var Ee=null;let se=null,Ze=null,Yt=null,Ft=null,Wl=0;const[e_,wg]=G(!1);function Si(t,e){const n=Ze,i=Ee,r=t.length===0,s=e===void 0?i:e,o=r?Wb:{owned:null,cleanups:null,context:s?s.context:null,owner:s},l=r?t:()=>t(()=>nt(()=>Wi(o)));Ee=o,Ze=null;try{return mn(l,!0)}finally{Ze=n,Ee=i}}function G(t,e){e=e?Object.assign({},Ga,e):Ga;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},i=r=>(typeof r=="function"&&(se&&se.running&&se.sources.has(n)?r=r(n.tValue):r=r(n.value)),Jb(n,r));return[Xb.bind(n),i]}function br(t,e,n){const i=Vo(t,e,!0,Rn);Es(i)}function Le(t,e,n){const i=Vo(t,e,!1,Rn);Es(i)}function ne(t,e,n){zb=s_;const i=Vo(t,e,!1,Rn),r=yr&&Me(yr);r&&(i.suspense=r),(!n||!n.render)&&(i.user=!0),Ft?Ft.push(i):Es(i)}function te(t,e,n){n=n?Object.assign({},Ga,n):Ga;const i=Vo(t,e,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=n.equals||void 0,Es(i),Xb.bind(i)}function Gb(t,e,n){let i,r,s;arguments.length===2&&typeof e=="object"||arguments.length===1?(i=!0,r=t,s=e||{}):(i=t,r=e,s=n||{});let o=null,l=qc,a=null,c=!1,u=!1,h="initialValue"in s,d=typeof i=="function"&&te(i);const g=new Set,[p,b]=(s.storage||G)(s.initialValue),[$,E]=G(void 0),[S,m]=G(void 0,{equals:!1}),[x,_]=G(h?"ready":"unresolved");if(oe.context){a=`${oe.context.id}${oe.context.count++}`;let P;s.ssrLoadFrom==="initial"?l=s.initialValue:oe.load&&(P=oe.load(a))&&(l=P[0])}function C(P,O,R,B){return o===P&&(o=null,B!==void 0&&(h=!0),(P===l||O===l)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(B,{value:O})),l=qc,se&&P&&c?(se.promises.delete(P),c=!1,mn(()=>{se.running=!0,w(O,R)},!1)):w(O,R)),O}function w(P,O){mn(()=>{O===void 0&&b(()=>P),_(O!==void 0?"errored":h?"ready":"unresolved"),E(O);for(const R of g.keys())R.decrement();g.clear()},!1)}function k(){const P=yr&&Me(yr),O=p(),R=$();if(R!==void 0&&!o)throw R;return Ze&&!Ze.user&&P&&br(()=>{S(),o&&(P.resolved&&se&&c?se.promises.add(o):g.has(P)||(P.increment(),g.add(P)))}),O}function D(P=!0){if(P!==!1&&u)return;u=!1;const O=d?d():i;if(c=se&&se.running,O==null||O===!1){C(o,nt(p));return}se&&o&&se.promises.delete(o);const R=l!==qc?l:nt(()=>r(O,{value:p(),refetching:P}));return typeof R!="object"||!(R&&"then"in R)?(C(o,R,void 0,O),R):(o=R,u=!0,queueMicrotask(()=>u=!1),mn(()=>{_(h?"refreshing":"pending"),m()},!1),R.then(B=>C(R,B,void 0,O),B=>C(R,void 0,n0(B),O)))}return Object.defineProperties(k,{state:{get:()=>x()},error:{get:()=>$()},loading:{get(){const P=x();return P==="pending"||P==="refreshing"}},latest:{get(){if(!h)return k();const P=$();if(P&&!o)throw P;return p()}}}),d?br(()=>D(!1)):D(!1),[k,{refetch:D,mutate:b}]}function ss(t){return mn(t,!1)}function nt(t){if(Ze===null)return t();const e=Ze;Ze=null;try{return t()}finally{Ze=e}}function Vt(t,e,n){const i=Array.isArray(t);let r,s=n&&n.defer;return o=>{let l;if(i){l=Array(t.length);for(let c=0;c<t.length;c++)l[c]=t[c]()}else l=t();if(s){s=!1;return}const a=nt(()=>e(l,r,o));return r=l,a}}function ui(t){ne(()=>nt(t))}function me(t){return Ee===null||(Ee.cleanups===null?Ee.cleanups=[t]:Ee.cleanups.push(t)),t}function t_(t,e){eo||(eo=Symbol("error")),Ee=Vo(void 0,void 0,!0),Ee.context={...Ee.context,[eo]:[e]},se&&se.running&&se.sources.add(Ee);try{return t()}catch(n){Ko(n)}finally{Ee=Ee.owner}}function Ru(){return Ze}function ie(){return Ee}function Yb(t,e){const n=Ee,i=Ze;Ee=t,Ze=null;try{return mn(e,!0)}catch(r){Ko(r)}finally{Ee=n,Ze=i}}function Qb(t){if(se&&se.running)return t(),se.done;const e=Ze,n=Ee;return Promise.resolve().then(()=>{Ze=e,Ee=n;let i;return yr&&(i=se||(se={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),i.done||(i.done=new Promise(r=>i.resolve=r)),i.running=!0),mn(t,!1),Ze=Ee=null,i?i.done:void 0})}function $R(){return[e_,Qb]}function n_(t){Ft.push.apply(Ft,t),t.length=0}function Ue(t,e){const n=Symbol("context");return{id:n,Provider:o_(n),defaultValue:t}}function Me(t){return Ee&&Ee.context&&Ee.context[t.id]!==void 0?Ee.context[t.id]:t.defaultValue}function Or(t){const e=te(t),n=te(()=>Lu(e()));return n.toArray=()=>{const i=n();return Array.isArray(i)?i:i!=null?[i]:[]},n}let yr;function i_(){return yr||(yr=Ue())}function Xb(){const t=se&&se.running;if(this.sources&&(t?this.tState:this.state))if((t?this.tState:this.state)===Rn)Es(this);else{const e=Yt;Yt=null,mn(()=>Qa(this),!1),Yt=e}if(Ze){const e=this.observers?this.observers.length:0;Ze.sources?(Ze.sources.push(this),Ze.sourceSlots.push(e)):(Ze.sources=[this],Ze.sourceSlots=[e]),this.observers?(this.observers.push(Ze),this.observerSlots.push(Ze.sources.length-1)):(this.observers=[Ze],this.observerSlots=[Ze.sources.length-1])}return t&&se.sources.has(this)?this.tValue:this.value}function Jb(t,e,n){let i=se&&se.running&&se.sources.has(t)?t.tValue:t.value;if(!t.comparator||!t.comparator(i,e)){if(se){const r=se.running;(r||!n&&se.sources.has(t))&&(se.sources.add(t),t.tValue=e),r||(t.value=e)}else t.value=e;t.observers&&t.observers.length&&mn(()=>{for(let r=0;r<t.observers.length;r+=1){const s=t.observers[r],o=se&&se.running;o&&se.disposed.has(s)||((o?!s.tState:!s.state)&&(s.pure?Yt.push(s):Ft.push(s),s.observers&&e0(s)),o?s.tState=Rn:s.state=Rn)}if(Yt.length>1e6)throw Yt=[],new Error},!1)}return e}function Es(t){if(!t.fn)return;Wi(t);const e=Ee,n=Ze,i=Wl;Ze=Ee=t,_g(t,se&&se.running&&se.sources.has(t)?t.tValue:t.value,i),se&&!se.running&&se.sources.has(t)&&queueMicrotask(()=>{mn(()=>{se&&(se.running=!0),Ze=Ee=t,_g(t,t.tValue,i),Ze=Ee=null},!1)}),Ze=n,Ee=e}function _g(t,e,n){let i;try{i=t.fn(e)}catch(r){return t.pure&&(se&&se.running?(t.tState=Rn,t.tOwned&&t.tOwned.forEach(Wi),t.tOwned=void 0):(t.state=Rn,t.owned&&t.owned.forEach(Wi),t.owned=null)),t.updatedAt=n+1,Ko(r)}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?Jb(t,i,!0):se&&se.running&&t.pure?(se.sources.add(t),t.tValue=i):t.value=i,t.updatedAt=n)}function Vo(t,e,n,i=Rn,r){const s={fn:t,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Ee,context:Ee?Ee.context:null,pure:n};return se&&se.running&&(s.state=0,s.tState=i),Ee===null||Ee!==Wb&&(se&&se.running&&Ee.pure?Ee.tOwned?Ee.tOwned.push(s):Ee.tOwned=[s]:Ee.owned?Ee.owned.push(s):Ee.owned=[s]),s}function Ya(t){const e=se&&se.running;if((e?t.tState:t.state)===0)return;if((e?t.tState:t.state)===lo)return Qa(t);if(t.suspense&&nt(t.suspense.inFallback))return t.suspense.effects.push(t);const n=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Wl);){if(e&&se.disposed.has(t))return;(e?t.tState:t.state)&&n.push(t)}for(let i=n.length-1;i>=0;i--){if(t=n[i],e){let r=t,s=n[i+1];for(;(r=r.owner)&&r!==s;)if(se.disposed.has(r))return}if((e?t.tState:t.state)===Rn)Es(t);else if((e?t.tState:t.state)===lo){const r=Yt;Yt=null,mn(()=>Qa(t,n[0]),!1),Yt=r}}}function mn(t,e){if(Yt)return t();let n=!1;e||(Yt=[]),Ft?n=!0:Ft=[],Wl++;try{const i=t();return r_(n),i}catch(i){n||(Ft=null),Yt=null,Ko(i)}}function r_(t){if(Yt&&(Zb(Yt),Yt=null),t)return;let e;if(se){if(!se.promises.size&&!se.queue.size){const i=se.sources,r=se.disposed;Ft.push.apply(Ft,se.effects),e=se.resolve;for(const s of Ft)"tState"in s&&(s.state=s.tState),delete s.tState;se=null,mn(()=>{for(const s of r)Wi(s);for(const s of i){if(s.value=s.tValue,s.owned)for(let o=0,l=s.owned.length;o<l;o++)Wi(s.owned[o]);s.tOwned&&(s.owned=s.tOwned),delete s.tValue,delete s.tOwned,s.tState=0}wg(!1)},!1)}else if(se.running){se.running=!1,se.effects.push.apply(se.effects,Ft),Ft=null,wg(!0);return}}const n=Ft;Ft=null,n.length&&mn(()=>zb(n),!1),e&&e()}function Zb(t){for(let e=0;e<t.length;e++)Ya(t[e])}function s_(t){let e,n=0;for(e=0;e<t.length;e++){const i=t[e];i.user?t[n++]=i:Ya(i)}if(oe.context){if(oe.count){oe.effects||(oe.effects=[]),oe.effects.push(...t.slice(0,n));return}else oe.effects&&(t=[...oe.effects,...t],n+=oe.effects.length,delete oe.effects);Vn()}for(e=0;e<n;e++)Ya(t[e])}function Qa(t,e){const n=se&&se.running;n?t.tState=0:t.state=0;for(let i=0;i<t.sources.length;i+=1){const r=t.sources[i];if(r.sources){const s=n?r.tState:r.state;s===Rn?r!==e&&(!r.updatedAt||r.updatedAt<Wl)&&Ya(r):s===lo&&Qa(r,e)}}}function e0(t){const e=se&&se.running;for(let n=0;n<t.observers.length;n+=1){const i=t.observers[n];(e?!i.tState:!i.state)&&(e?i.tState=lo:i.state=lo,i.pure?Yt.push(i):Ft.push(i),i.observers&&e0(i))}}function Wi(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),i=t.sourceSlots.pop(),r=n.observers;if(r&&r.length){const s=r.pop(),o=n.observerSlots.pop();i<r.length&&(s.sourceSlots[o]=i,r[i]=s,n.observerSlots[i]=o)}}if(se&&se.running&&t.pure){if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)Wi(t.tOwned[e]);delete t.tOwned}t0(t,!0)}else if(t.owned){for(e=t.owned.length-1;e>=0;e--)Wi(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}se&&se.running?t.tState=0:t.state=0}function t0(t,e){if(e||(t.tState=0,se.disposed.add(t)),t.owned)for(let n=0;n<t.owned.length;n++)t0(t.owned[n])}function n0(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function xg(t,e,n){try{for(const i of e)i(t)}catch(i){Ko(i,n&&n.owner||null)}}function Ko(t,e=Ee){const n=eo&&e&&e.context&&e.context[eo],i=n0(t);if(!n)throw i;Ft?Ft.push({fn(){xg(i,n,e)},state:Rn}):xg(i,n,e)}function Lu(t){if(typeof t=="function"&&!t.length)return Lu(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const i=Lu(t[n]);Array.isArray(i)?e.push.apply(e,i):e.push(i)}return e}return t}function o_(t,e){return function(i){let r;return Le(()=>r=nt(()=>(Ee.context={...Ee.context,[t]:i.value},Or(()=>i.children))),void 0),r}}const a_=Symbol("fallback");function Sg(t){for(let e=0;e<t.length;e++)t[e]()}function l_(t,e,n={}){let i=[],r=[],s=[],o=0,l=e.length>1?[]:null;return me(()=>Sg(s)),()=>{let a=t()||[],c,u;return a[Wa],nt(()=>{let d=a.length,g,p,b,$,E,S,m,x,_;if(d===0)o!==0&&(Sg(s),s=[],i=[],r=[],o=0,l&&(l=[])),n.fallback&&(i=[a_],r[0]=Si(C=>(s[0]=C,n.fallback())),o=1);else if(o===0){for(r=new Array(d),u=0;u<d;u++)i[u]=a[u],r[u]=Si(h);o=d}else{for(b=new Array(d),$=new Array(d),l&&(E=new Array(d)),S=0,m=Math.min(o,d);S<m&&i[S]===a[S];S++);for(m=o-1,x=d-1;m>=S&&x>=S&&i[m]===a[x];m--,x--)b[x]=r[m],$[x]=s[m],l&&(E[x]=l[m]);for(g=new Map,p=new Array(x+1),u=x;u>=S;u--)_=a[u],c=g.get(_),p[u]=c===void 0?-1:c,g.set(_,u);for(c=S;c<=m;c++)_=i[c],u=g.get(_),u!==void 0&&u!==-1?(b[u]=r[c],$[u]=s[c],l&&(E[u]=l[c]),u=p[u],g.set(_,u)):s[c]();for(u=S;u<d;u++)u in b?(r[u]=b[u],s[u]=$[u],l&&(l[u]=E[u],l[u](u))):r[u]=Si(h);r=r.slice(0,o=d),i=a.slice(0)}return r});function h(d){if(s[u]=d,l){const[g,p]=G(u);return l[u]=p,e(a[u],g)}return e(a[u])}}}let i0=!1;function c_(){i0=!0}function v(t,e){if(i0&&oe.context){const n=oe.context;Vn(X1());const i=nt(()=>t(e||{}));return Vn(n),i}return nt(()=>t(e||{}))}function wa(){return!0}const Mu={get(t,e,n){return e===At?n:t.get(e)},has(t,e){return e===At?!0:t.has(e)},set:wa,deleteProperty:wa,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:wa,deleteProperty:wa}},ownKeys(t){return t.keys()}};function zc(t){return(t=typeof t=="function"?t():t)?t:{}}function u_(){for(let t=0,e=this.length;t<e;++t){const n=this[t]();if(n!==void 0)return n}}function pe(...t){let e=!1;for(let s=0;s<t.length;s++){const o=t[s];e=e||!!o&&At in o,t[s]=typeof o=="function"?(e=!0,te(o)):o}if(e)return new Proxy({get(s){for(let o=t.length-1;o>=0;o--){const l=zc(t[o])[s];if(l!==void 0)return l}},has(s){for(let o=t.length-1;o>=0;o--)if(s in zc(t[o]))return!0;return!1},keys(){const s=[];for(let o=0;o<t.length;o++)s.push(...Object.keys(zc(t[o])));return[...new Set(s)]}},Mu);const n={},i={},r=new Set;for(let s=t.length-1;s>=0;s--){const o=t[s];if(!o)continue;const l=Object.getOwnPropertyNames(o);for(let a=0,c=l.length;a<c;a++){const u=l[a];if(u==="__proto__"||u==="constructor")continue;const h=Object.getOwnPropertyDescriptor(o,u);if(!r.has(u))h.get?(r.add(u),Object.defineProperty(n,u,{enumerable:!0,configurable:!0,get:u_.bind(i[u]=[h.get.bind(o)])})):(h.value!==void 0&&r.add(u),n[u]=h.value);else{const d=i[u];d?h.get?d.push(h.get.bind(o)):h.value!==void 0&&d.push(()=>h.value):n[u]===void 0&&(n[u]=h.value)}}}return n}function we(t,...e){if(At in t){const r=new Set(e.length>1?e.flat():e[0]),s=e.map(o=>new Proxy({get(l){return o.includes(l)?t[l]:void 0},has(l){return o.includes(l)&&l in t},keys(){return o.filter(l=>l in t)}},Mu));return s.push(new Proxy({get(o){return r.has(o)?void 0:t[o]},has(o){return r.has(o)?!1:o in t},keys(){return Object.keys(t).filter(o=>!r.has(o))}},Mu)),s}const n={},i=e.map(()=>({}));for(const r of Object.getOwnPropertyNames(t)){const s=Object.getOwnPropertyDescriptor(t,r),o=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let l=!1,a=0;for(const c of e)c.includes(r)&&(l=!0,o?i[a][r]=s.value:Object.defineProperty(i[a],r,s)),++a;l||(o?n[r]=s.value:Object.defineProperty(n,r,s))}return[...i,n]}function Rt(t){let e,n;const i=r=>{const s=oe.context;if(s){const[l,a]=G();oe.count||(oe.count=0),oe.count++,(n||(n=t())).then(c=>{Vn(s),oe.count--,a(()=>c.default),Vn()}),e=l}else if(!e){const[l]=Gb(()=>(n||(n=t())).then(a=>a.default));e=l}let o;return te(()=>(o=e())&&nt(()=>{if(!s)return o(r);const l=oe.context;Vn(s);const a=o(r);return Vn(l),a}))};return i.preload=()=>n||((n=t()).then(r=>e=()=>r.default),n),i}let h_=0;function Wt(){const t=oe.context;return t?`${t.id}${t.count++}`:`cl-${h_++}`}const r0=t=>`Stale read from <${t}>.`;function Gi(t){const e="fallback"in t&&{fallback:()=>t.fallback};return te(l_(()=>t.each,t.children,e||void 0))}function he(t){const e=t.keyed,n=te(()=>t.when,void 0,{equals:(i,r)=>e?i===r:!i==!r});return te(()=>{const i=n();if(i){const r=t.children;return typeof r=="function"&&r.length>0?nt(()=>r(e?i:()=>{if(!nt(n))throw r0("Show");return t.when})):r}return t.fallback},void 0,void 0)}function qo(t){let e=!1;const n=(s,o)=>s[0]===o[0]&&(e?s[1]===o[1]:!s[1]==!o[1])&&s[2]===o[2],i=Or(()=>t.children),r=te(()=>{let s=i();Array.isArray(s)||(s=[s]);for(let o=0;o<s.length;o++){const l=s[o].when;if(l)return e=!!s[o].keyed,[o,l,s[o]]}return[-1]},void 0,{equals:n});return te(()=>{const[s,o,l]=r();if(s<0)return t.fallback;const a=l.children;return typeof a=="function"&&a.length>0?nt(()=>a(e?o:()=>{if(nt(r)[0]!==s)throw r0("Match");return l.when})):a},void 0,void 0)}function sn(t){return t}let Qr;function s0(){Qr&&[...Qr].forEach(t=>t())}function o0(t){let e,n;oe.context&&oe.load&&(n=oe.load(oe.context.id+oe.context.count))&&(e=n[0]);const[i,r]=G(e,void 0);return Qr||(Qr=new Set),Qr.add(r),me(()=>Qr.delete(r)),te(()=>{let s;if(s=i()){const o=t.fallback;return typeof o=="function"&&o.length?nt(()=>o(s,()=>r())):o}return t_(()=>t.children,r)},void 0,void 0)}const d_=Ue();function _a(t){let e=0,n,i,r,s,o;const[l,a]=G(!1),c=i_(),u={increment:()=>{++e===1&&a(!0)},decrement:()=>{--e===0&&a(!1)},inFallback:l,effects:[],resolved:!1},h=ie();if(oe.context&&oe.load){const p=oe.context.id+oe.context.count;let b=oe.load(p);if(b&&(r=b[0])&&r!=="$$f"){(typeof r!="object"||!("then"in r))&&(r=Promise.resolve(r));const[$,E]=G(void 0,{equals:!1});s=$,r.then(S=>{if(S||oe.done)return S&&(o=S),E();oe.gather(p),Vn(i),E(),Vn()})}}const d=Me(d_);d&&(n=d.register(u.inFallback));let g;return me(()=>g&&g()),v(c.Provider,{value:u,get children(){return te(()=>{if(o)throw o;if(i=oe.context,s)return s(),s=void 0;i&&r==="$$f"&&Vn();const p=te(()=>t.children);return te(b=>{const $=u.inFallback(),{showContent:E=!0,showFallback:S=!0}=n?n():{};if((!$||r&&r!=="$$f")&&E)return u.resolved=!0,g&&g(),g=i=r=void 0,n_(u.effects),p();if(S)return g?b:Si(m=>(g=m,i&&(Vn({id:i.id+"f",count:0}),i=void 0),t.fallback),h)})})}})}const f_=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],p_=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...f_]),g_=new Set(["innerHTML","textContent","innerText","children"]),m_=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),b_=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function y_(t,e){const n=b_[t];return typeof n=="object"?n[e]?n.$:void 0:n}const v_=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),w_=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),__={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function x_(t,e,n){let i=n.length,r=e.length,s=i,o=0,l=0,a=e[r-1].nextSibling,c=null;for(;o<r||l<s;){if(e[o]===n[l]){o++,l++;continue}for(;e[r-1]===n[s-1];)r--,s--;if(r===o){const u=s<i?l?n[l-1].nextSibling:n[s-l]:a;for(;l<s;)t.insertBefore(n[l++],u)}else if(s===l)for(;o<r;)(!c||!c.has(e[o]))&&e[o].remove(),o++;else if(e[o]===n[s-1]&&n[l]===e[r-1]){const u=e[--r].nextSibling;t.insertBefore(n[l++],e[o++].nextSibling),t.insertBefore(n[--s],u),e[r]=n[s]}else{if(!c){c=new Map;let h=l;for(;h<s;)c.set(n[h],h++)}const u=c.get(e[o]);if(u!=null)if(l<u&&u<s){let h=o,d=1,g;for(;++h<r&&h<s&&!((g=c.get(e[h]))==null||g!==u+d);)d++;if(d>u-l){const p=e[o];for(;l<u;)t.insertBefore(n[l++],p)}else t.replaceChild(n[l++],e[o++])}else o++;else e[o++].remove()}}}const Eg="_$DX_DELEGATE";function S_(t,e,n,i={}){let r;return Si(s=>{r=s,e===document?t():U(e,t(),e.firstChild?null:void 0,n)},i.owner),()=>{r(),e.textContent=""}}function V(t,e,n){let i;const r=()=>{const o=document.createElement("template");return o.innerHTML=t,n?o.content.firstChild.firstChild:o.content.firstChild},s=e?()=>nt(()=>document.importNode(i||(i=r()),!0)):()=>(i||(i=r())).cloneNode(!0);return s.cloneNode=s,s}function Di(t,e=window.document){const n=e[Eg]||(e[Eg]=new Set);for(let i=0,r=t.length;i<r;i++){const s=t[i];n.has(s)||(n.add(s),e.addEventListener(s,l0))}}function ct(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n)}function E_(t,e,n,i){i==null?t.removeAttributeNS(e,n):t.setAttributeNS(e,n,i)}function zo(t,e){e==null?t.removeAttribute("class"):t.className=e}function a0(t,e,n,i){if(i)Array.isArray(n)?(t[`$$${e}`]=n[0],t[`$$${e}Data`]=n[1]):t[`$$${e}`]=n;else if(Array.isArray(n)){const r=n[0];t.addEventListener(e,n[0]=s=>r.call(t,n[1],s))}else t.addEventListener(e,n)}function on(t,e,n={}){const i=Object.keys(e||{}),r=Object.keys(n);let s,o;for(s=0,o=r.length;s<o;s++){const l=r[s];!l||l==="undefined"||e[l]||($g(t,l,!1),delete n[l])}for(s=0,o=i.length;s<o;s++){const l=i[s],a=!!e[l];!l||l==="undefined"||n[l]===a||!a||($g(t,l,!0),n[l]=a)}return n}function $_(t,e,n){if(!e)return n?ct(t,"style"):e;const i=t.style;if(typeof e=="string")return i.cssText=e;typeof n=="string"&&(i.cssText=n=void 0),n||(n={}),e||(e={});let r,s;for(s in n)e[s]==null&&i.removeProperty(s),delete n[s];for(s in e)r=e[s],r!==n[s]&&(i.setProperty(s,r),n[s]=r);return n}function Ln(t,e={},n,i){const r={};return i||Le(()=>r.children=os(t,e.children,r.children)),Le(()=>e.ref&&e.ref(t)),Le(()=>C_(t,e,n,!0,r,!0)),r}function CR(t,e){!oe.context&&(t.innerHTML=e)}function Gl(t,e,n){return nt(()=>t(e,n))}function U(t,e,n,i){if(n!==void 0&&!i&&(i=[]),typeof e!="function")return os(t,e,i,n);Le(r=>os(t,e(),r,n),i)}function C_(t,e,n,i,r={},s=!1){e||(e={});for(const o in r)if(!(o in e)){if(o==="children")continue;r[o]=Cg(t,o,null,r[o],n,s)}for(const o in e){if(o==="children"){i||os(t,e.children);continue}const l=e[o];r[o]=Cg(t,o,l,r[o],n,s)}}function T_(t,e,n={}){oe.completed=globalThis._$HY.completed,oe.events=globalThis._$HY.events,oe.load=globalThis._$HY.load,oe.gather=r=>kg(e,r),oe.registry=new Map,oe.context={id:n.renderId||"",count:0},kg(e,n.renderId);const i=S_(t,e,[...e.childNodes],n);return oe.context=null,i}function H(t){let e,n;if(!oe.context||!(e=oe.registry.get(n=P_()))){if(oe.context&&console.warn("Unable to find DOM nodes for hydration key:",n),!t)throw new Error("Unrecoverable Hydration Mismatch. No template for key: "+n);return t()}return oe.completed&&oe.completed.add(e),oe.registry.delete(n),e}function ee(t){let e=t,n=0,i=[];if(oe.context)for(;e;){if(e.nodeType===8){const r=e.nodeValue;if(r==="#")n++;else if(r==="/"){if(n===0)return[e,i];n--}}i.push(e),e=e.nextSibling}return[e,i]}function Ht(){oe.events&&!oe.events.queued&&(queueMicrotask(()=>{const{completed:t,events:e}=oe;for(e.queued=!1;e.length;){const[n,i]=e[0];if(!t.has(n))return;l0(i),e.shift()}}),oe.events.queued=!0)}function k_(t){return t.toLowerCase().replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function $g(t,e,n){const i=e.trim().split(/\s+/);for(let r=0,s=i.length;r<s;r++)t.classList.toggle(i[r],n)}function Cg(t,e,n,i,r,s){let o,l,a,c,u;if(e==="style")return $_(t,n,i);if(e==="classList")return on(t,n,i);if(n===i)return i;if(e==="ref")s||n(t);else if(e.slice(0,3)==="on:"){const h=e.slice(3);i&&t.removeEventListener(h,i),n&&t.addEventListener(h,n)}else if(e.slice(0,10)==="oncapture:"){const h=e.slice(10);i&&t.removeEventListener(h,i,!0),n&&t.addEventListener(h,n,!0)}else if(e.slice(0,2)==="on"){const h=e.slice(2).toLowerCase(),d=v_.has(h);if(!d&&i){const g=Array.isArray(i)?i[0]:i;t.removeEventListener(h,g)}(d||n)&&(a0(t,h,n,d),d&&Di([h]))}else if(e.slice(0,5)==="attr:")ct(t,e.slice(5),n);else if((u=e.slice(0,5)==="prop:")||(a=g_.has(e))||!r&&((c=y_(e,t.tagName))||(l=p_.has(e)))||(o=t.nodeName.includes("-")))u&&(e=e.slice(5),l=!0),e==="class"||e==="className"?zo(t,n):o&&!l&&!a?t[k_(e)]=n:t[c||e]=n;else{const h=r&&e.indexOf(":")>-1&&__[e.split(":")[0]];h?E_(t,h,e,n):ct(t,m_[e]||e,n)}return n}function l0(t){const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}}),oe.registry&&!oe.done&&(oe.done=_$HY.done=!0);n;){const i=n[e];if(i&&!n.disabled){const r=n[`${e}Data`];if(r!==void 0?i.call(n,r,t):i.call(n,t),t.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function os(t,e,n,i,r){if(oe.context){!n&&(n=[...t.childNodes]);let l=[];for(let a=0;a<n.length;a++){const c=n[a];c.nodeType===8&&c.data.slice(0,2)==="!$"?c.remove():l.push(c)}n=l}for(;typeof n=="function";)n=n();if(e===n)return n;const s=typeof e,o=i!==void 0;if(t=o&&n[0]&&n[0].parentNode||t,s==="string"||s==="number"){if(oe.context)return n;if(s==="number"&&(e=e.toString()),o){let l=n[0];l&&l.nodeType===3?l.data=e:l=document.createTextNode(e),n=jr(t,n,i,l)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||s==="boolean"){if(oe.context)return n;n=jr(t,n,i)}else{if(s==="function")return Le(()=>{let l=e();for(;typeof l=="function";)l=l();n=os(t,l,n,i)}),()=>n;if(Array.isArray(e)){const l=[],a=n&&Array.isArray(n);if(Nu(l,e,n,r))return Le(()=>n=os(t,l,n,i,!0)),()=>n;if(oe.context){if(!l.length)return n;for(let c=0;c<l.length;c++)if(l[c].parentNode)return n=l}if(l.length===0){if(n=jr(t,n,i),o)return n}else a?n.length===0?Tg(t,l,i):x_(t,n,l):(n&&jr(t),Tg(t,l));n=l}else if(e.nodeType){if(oe.context&&e.parentNode)return n=o?[e]:e;if(Array.isArray(n)){if(o)return n=jr(t,n,i,e);jr(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}else console.warn("Unrecognized value. Skipped inserting",e)}return n}function Nu(t,e,n,i){let r=!1;for(let s=0,o=e.length;s<o;s++){let l=e[s],a=n&&n[s],c;if(!(l==null||l===!0||l===!1))if((c=typeof l)=="object"&&l.nodeType)t.push(l);else if(Array.isArray(l))r=Nu(t,l,a)||r;else if(c==="function")if(i){for(;typeof l=="function";)l=l();r=Nu(t,Array.isArray(l)?l:[l],Array.isArray(a)?a:[a])||r}else t.push(l),r=!0;else{const u=String(l);a&&a.nodeType===3&&a.data===u?t.push(a):t.push(document.createTextNode(u))}}return r}function Tg(t,e,n=null){for(let i=0,r=e.length;i<r;i++)t.insertBefore(e[i],n)}function jr(t,e,n,i){if(n===void 0)return t.textContent="";const r=i||document.createTextNode("");if(e.length){let s=!1;for(let o=e.length-1;o>=0;o--){const l=e[o];if(r!==l){const a=l.parentNode===t;!s&&!o?a?t.replaceChild(r,l):t.insertBefore(r,n):a&&l.remove()}else s=!0}}else t.insertBefore(r,n);return[r]}function kg(t,e){const n=t.querySelectorAll("*[data-hk]");for(let i=0;i<n.length;i++){const r=n[i],s=r.getAttribute("data-hk");(!e||s.startsWith(e))&&!oe.registry.has(s)&&oe.registry.set(s,r)}}function P_(){const t=oe.context;return`${t.id}${t.count++}`}function A_(t){return oe.context?void 0:t.children}function O_(){}const $s=!1,D_="http://www.w3.org/2000/svg";function c0(t,e=!1){return e?document.createElementNS(D_,t):document.createElement(t)}const I_=(...t)=>(c_(),T_(...t));function rr(t){const{useShadow:e}=t,n=document.createTextNode(""),i=()=>t.mount||document.body,r=ie();let s,o=!!oe.context;return ne(()=>{o&&(ie().user=o=!1),s||(s=Yb(r,()=>te(()=>t.children)));const l=i();if(l instanceof HTMLHeadElement){const[a,c]=G(!1),u=()=>c(!0);Si(h=>U(l,()=>a()?h():s(),null)),me(u)}else{const a=c0(t.isSVG?"g":"div",t.isSVG),c=e&&a.attachShadow?a.attachShadow({mode:"open"}):a;Object.defineProperty(a,"_$host",{get(){return n.parentNode},configurable:!0}),U(c,s),l.appendChild(a),t.ref&&t.ref(a),me(()=>l.removeChild(a))}},void 0,{render:!o}),n}function Wc(t){const[e,n]=we(t,["component"]),i=te(()=>e.component);return te(()=>{const r=i();switch(typeof r){case"function":return Object.assign(r,{[Z1]:!0}),nt(()=>r(n));case"string":const s=w_.has(r),o=oe.context?H():c0(r,s);return Ln(o,n,s),o}})}var R_=()=>["%csolid-devtools","color: #fff; background: #2c4f7c; padding: 1px 4px;"];function L_(...t){console.warn(...R_(),...t)}const Xa=Symbol("store-raw"),Xr=Symbol("store-node"),_i=Symbol("store-has"),u0=Symbol("store-self");function h0(t){let e=t[At];if(!e&&(Object.defineProperty(t,At,{value:e=new Proxy(t,F_)}),!Array.isArray(t))){const n=Object.keys(t),i=Object.getOwnPropertyDescriptors(t);for(let r=0,s=n.length;r<s;r++){const o=n[r];i[o].get&&Object.defineProperty(t,o,{enumerable:i[o].enumerable,get:i[o].get.bind(e)})}}return e}function ti(t){let e;return t!=null&&typeof t=="object"&&(t[At]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function pn(t,e=new Set){let n,i,r,s;if(n=t!=null&&t[Xa])return n;if(!ti(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let o=0,l=t.length;o<l;o++)r=t[o],(i=pn(r,e))!==r&&(t[o]=i)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const o=Object.keys(t),l=Object.getOwnPropertyDescriptors(t);for(let a=0,c=o.length;a<c;a++)s=o[a],!l[s].get&&(r=t[s],(i=pn(r,e))!==r&&(t[s]=i))}return t}function Ja(t,e){let n=t[e];return n||Object.defineProperty(t,e,{value:n=Object.create(null)}),n}function co(t,e,n){if(t[e])return t[e];const[i,r]=G(n,{equals:!1,internal:!0});return i.$=r,t[e]=i}function M_(t,e){const n=Reflect.getOwnPropertyDescriptor(t,e);return!n||n.get||!n.configurable||e===At||e===Xr||(delete n.value,delete n.writable,n.get=()=>t[At][e]),n}function d0(t){Ru()&&co(Ja(t,Xr),u0)()}function N_(t){return d0(t),Reflect.ownKeys(t)}const F_={get(t,e,n){if(e===Xa)return t;if(e===At)return n;if(e===Wa)return d0(t),n;const i=Ja(t,Xr),r=i[e];let s=r?r():t[e];if(e===Xr||e===_i||e==="__proto__")return s;if(!r){const o=Object.getOwnPropertyDescriptor(t,e);Ru()&&(typeof s!="function"||t.hasOwnProperty(e))&&!(o&&o.get)&&(s=co(i,e,s)())}return ti(s)?h0(s):s},has(t,e){return e===Xa||e===At||e===Wa||e===Xr||e===_i||e==="__proto__"?!0:(Ru()&&co(Ja(t,_i),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:N_,getOwnPropertyDescriptor:M_};function rn(t,e,n,i=!1){if(!i&&t[e]===n)return;const r=t[e],s=t.length;n===void 0?(delete t[e],t[_i]&&t[_i][e]&&r!==void 0&&t[_i][e].$()):(t[e]=n,t[_i]&&t[_i][e]&&r===void 0&&t[_i][e].$());let o=Ja(t,Xr),l;if((l=co(o,e,r))&&l.$(()=>n),Array.isArray(t)&&t.length!==s){for(let a=t.length;a<s;a++)(l=o[a])&&l.$();(l=co(o,"length",s))&&l.$(t.length)}(l=o[u0])&&l.$()}function f0(t,e){const n=Object.keys(e);for(let i=0;i<n.length;i+=1){const r=n[i];rn(t,r,e[r])}}function B_(t,e){if(typeof e=="function"&&(e=e(t)),e=pn(e),Array.isArray(e)){if(t===e)return;let n=0,i=e.length;for(;n<i;n++){const r=e[n];t[n]!==r&&rn(t,n,r)}rn(t,"length",i)}else f0(t,e)}function Qs(t,e,n=[]){let i,r=t;if(e.length>1){i=e.shift();const o=typeof i,l=Array.isArray(t);if(Array.isArray(i)){for(let a=0;a<i.length;a++)Qs(t,[i[a]].concat(e),n);return}else if(l&&o==="function"){for(let a=0;a<t.length;a++)i(t[a],a)&&Qs(t,[a].concat(e),n);return}else if(l&&o==="object"){const{from:a=0,to:c=t.length-1,by:u=1}=i;for(let h=a;h<=c;h+=u)Qs(t,[h].concat(e),n);return}else if(e.length>1){Qs(t[i],e,[i].concat(n));return}r=t[i],n=[i].concat(n)}let s=e[0];typeof s=="function"&&(s=s(r,n),s===r)||i===void 0&&s==null||(s=pn(s),i===void 0||ti(r)&&ti(s)&&!Array.isArray(s)?f0(r,s):rn(t,i,s))}function hi(...[t,e]){const n=pn(t||{}),i=Array.isArray(n),r=h0(n);function s(...o){ss(()=>{i&&o.length===1?B_(n,o[0]):Qs(n,o)})}return[r,s]}const Fu=Symbol("store-root");function qr(t,e,n,i,r){const s=e[n];if(t===s)return;if(n!==Fu&&(!ti(t)||!ti(s)||r&&t[r]!==s[r])){rn(e,n,t);return}if(Array.isArray(t)){if(t.length&&s.length&&(!i||r&&t[0]&&t[0][r]!=null)){let a,c,u,h,d,g,p,b;for(u=0,h=Math.min(s.length,t.length);u<h&&(s[u]===t[u]||r&&s[u]&&t[u]&&s[u][r]===t[u][r]);u++)qr(t[u],s,u,i,r);const $=new Array(t.length),E=new Map;for(h=s.length-1,d=t.length-1;h>=u&&d>=u&&(s[h]===t[d]||r&&s[u]&&t[u]&&s[h][r]===t[d][r]);h--,d--)$[d]=s[h];if(u>d||u>h){for(c=u;c<=d;c++)rn(s,c,t[c]);for(;c<t.length;c++)rn(s,c,$[c]),qr(t[c],s,c,i,r);s.length>t.length&&rn(s,"length",t.length);return}for(p=new Array(d+1),c=d;c>=u;c--)g=t[c],b=r&&g?g[r]:g,a=E.get(b),p[c]=a===void 0?-1:a,E.set(b,c);for(a=u;a<=h;a++)g=s[a],b=r&&g?g[r]:g,c=E.get(b),c!==void 0&&c!==-1&&($[c]=s[a],c=p[c],E.set(b,c));for(c=u;c<t.length;c++)c in $?(rn(s,c,$[c]),qr(t[c],s,c,i,r)):rn(s,c,t[c])}else for(let a=0,c=t.length;a<c;a++)qr(t[a],s,a,i,r);s.length>t.length&&rn(s,"length",t.length);return}const o=Object.keys(t);for(let a=0,c=o.length;a<c;a++)qr(t[o[a]],s,o[a],i,r);const l=Object.keys(s);for(let a=0,c=l.length;a<c;a++)t[l[a]]===void 0&&rn(s,l[a],void 0)}function Pg(t,e={}){const{merge:n,key:i="id"}=e,r=pn(t);return s=>{if(!ti(s)||!ti(r))return r;const o=qr(r,{[Fu]:s},Fu,n,i);return o===void 0?s:o}}const Za=new WeakMap,p0={get(t,e){if(e===Xa)return t;const n=t[e];let i;return ti(n)?Za.get(n)||(Za.set(n,i=new Proxy(n,p0)),i):n},set(t,e,n){return rn(t,e,pn(n)),!0},deleteProperty(t,e){return rn(t,e,void 0,!0),!0}};function U_(t){return e=>{if(ti(e)){let n;(n=Za.get(e))||Za.set(e,n=new Proxy(e,p0)),t(n)}return e}}L_('`import "solid-devtools";` is an entry point for the vite plugin.\nIf you\'re seeing this message you probably forgot to add the plugin to your vite config.');const j_="modulepreload",H_=function(t){return"/"+t},Ag={},W=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=H_(s),s in Ag)return;Ag[s]=!0;const o=s.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!i)for(let u=r.length-1;u>=0;u--){const h=r[u];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":j_,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function V_(t,e){t&&e&&I_(t,e)}const Id=Ue(),K_=["title","meta"],Og=t=>t.tag+(t.name?`.${t.name}"`:""),q_=t=>{if(!oe.context){const r=document.head.querySelectorAll("[data-sm]");Array.prototype.forEach.call(r,s=>s.parentNode.removeChild(s))}const e=new Map;function n(r){if(r.ref)return r.ref;let s=document.querySelector(`[data-sm="${r.id}"]`);return s?(s.tagName.toLowerCase()!==r.tag&&(s.parentNode&&s.parentNode.removeChild(s),s=document.createElement(r.tag)),s.removeAttribute("data-sm")):s=document.createElement(r.tag),s}const i={addClientTag:r=>{let s=Og(r);if(K_.indexOf(r.tag)!==-1){e.has(s)||e.set(s,[]);let l=e.get(s),a=l.length;l=[...l,r],e.set(s,l);{let c=n(r);r.ref=c,Ln(c,r.props);let u=null;for(var o=a-1;o>=0;o--)if(l[o]!=null){u=l[o];break}c.parentNode!=document.head&&document.head.appendChild(c),u&&u.ref&&document.head.removeChild(u.ref)}return a}{let l=n(r);r.ref=l,Ln(l,r.props),l.parentNode!=document.head&&document.head.appendChild(l)}return-1},removeClientTag:(r,s)=>{const o=Og(r);if(r.ref){const l=e.get(o);if(l){if(r.ref.parentNode){r.ref.parentNode.removeChild(r.ref);for(let a=s-1;a>=0;a--)l[a]!=null&&document.head.appendChild(l[a].ref)}l[s]=null,e.set(o,l)}else r.ref.parentNode&&r.ref.parentNode.removeChild(r.ref)}}};return v(Id.Provider,{value:i,get children(){return t.children}})},Rd=(t,e,n)=>{const i=Wt();if(!Me(Id))throw new Error("<MetaProvider /> should be in the tree");return z_({tag:t,props:e,setting:n,id:i,get name(){return e.name||e.property}}),null};function z_(t){const{addClientTag:e,removeClientTag:n,addServerTag:i}=Me(Id);Le(()=>{{let r=e(t);me(()=>n(t,r))}})}const W_=t=>Rd("title",t,{escape:!0,close:!0}),Dg=t=>Rd("meta",t),Ig=t=>Rd("link",t);function G_(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function Y_([t,e],n,i){return[n?()=>n(t()):t,i?r=>e(i(r)):e]}function Q_(t){try{return document.querySelector(t)}catch{return null}}function X_(t,e){const n=Q_(`#${t}`);n?n.scrollIntoView():e&&window.scrollTo(0,0)}function J_(t,e,n,i){let r=!1;const s=l=>typeof l=="string"?{value:l}:l,o=Y_(G(s(t()),{equals:(l,a)=>l.value===a.value}),void 0,l=>(!r&&e(l),l));return n&&me(n((l=t())=>{r=!0,o[1](s(l)),r=!1})),{signal:o,utils:i}}function Z_(t){if(t){if(Array.isArray(t))return{signal:t}}else return{signal:G({value:""})};return t}function e2(){return J_(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:t,replace:e,scroll:n,state:i})=>{e?window.history.replaceState(i,"",t):window.history.pushState(i,"",t),X_(window.location.hash.slice(1),n)},t=>G_(window,"popstate",()=>t()),{go:t=>window.history.go(t)})}function t2(){let t=new Set;function e(r){return t.add(r),()=>t.delete(r)}let n=!1;function i(r,s){if(n)return!(n=!1);const o={to:r,options:s,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const l of t)l.listener({...o,from:l.location,retry:a=>{a&&(n=!0),l.navigate(r,s)}});return!o.defaultPrevented}return{subscribe:e,confirm:i}}const n2=/^(?:[a-z0-9]+:)?\/\//i,i2=/^\/+|(\/)\/+$/g;function dr(t,e=!1){const n=t.replace(i2,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function Na(t,e,n){if(n2.test(e))return;const i=dr(t),r=n&&dr(n);let s="";return!r||e.startsWith("/")?s=i:r.toLowerCase().indexOf(i.toLowerCase())!==0?s=i+r:s=r,(s||"/")+dr(e,!s)}function r2(t,e){if(t==null)throw new Error(e);return t}function g0(t,e){return dr(t).replace(/\/*(\*.*)?$/g,"")+dr(e)}function s2(t){const e={};return t.searchParams.forEach((n,i)=>{e[i]=n}),e}function o2(t,e,n){const[i,r]=t.split("/*",2),s=i.split("/").filter(Boolean),o=s.length;return l=>{const a=l.split("/").filter(Boolean),c=a.length-o;if(c<0||c>0&&r===void 0&&!e)return null;const u={path:o?"":"/",params:{}},h=d=>n===void 0?void 0:n[d];for(let d=0;d<o;d++){const g=s[d],p=a[d],b=g[0]===":",$=b?g.slice(1):g;if(b&&Gc(p,h($)))u.params[$]=p;else if(b||!Gc(p,g))return null;u.path+=`/${p}`}if(r){const d=c?a.slice(-c).join("/"):"";if(Gc(d,h(r)))u.params[r]=d;else return null}return u}}function Gc(t,e){const n=i=>i.localeCompare(t,void 0,{sensitivity:"base"})===0;return e===void 0?!0:typeof e=="string"?n(e):typeof e=="function"?e(t):Array.isArray(e)?e.some(n):e instanceof RegExp?e.test(t):!1}function a2(t){const[e,n]=t.pattern.split("/*",2),i=e.split("/").filter(Boolean);return i.reduce((r,s)=>r+(s.startsWith(":")?2:3),i.length-(n===void 0?0:1))}function m0(t){const e=new Map,n=ie();return new Proxy({},{get(i,r){return e.has(r)||Yb(n,()=>e.set(r,te(()=>t()[r]))),e.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}function l2(t,e){const n=new URLSearchParams(t);Object.entries(e).forEach(([r,s])=>{s==null||s===""?n.delete(r):n.set(r,String(s))});const i=n.toString();return i?`?${i}`:""}function b0(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let n=t.slice(0,e.index),i=t.slice(e.index+e[0].length);const r=[n,n+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(i);)r.push(n+=e[1]),i=i.slice(e[0].length);return b0(i).reduce((s,o)=>[...s,...r.map(l=>l+o)],[])}const c2=100,y0=Ue(),Yl=Ue(),Cs=()=>r2(Me(y0),"Make sure your app is wrapped in a <Router />");let uo;const Ld=()=>uo||Me(Yl)||Cs().base,u2=t=>{const e=Ld();return te(()=>e.resolvePath(t()))},h2=t=>{const e=Cs();return te(()=>{const n=t();return n!==void 0?e.renderPath(n):n})},Md=()=>Cs().navigatorFactory(),Ql=()=>Cs().location,d2=()=>Cs().isRouting,Dr=()=>{const t=Ql(),e=Md(),n=(i,r)=>{const s=nt(()=>t.pathname+l2(t.search,i)+t.hash);e(s,{scroll:!1,resolve:!1,...r})};return[t.query,n]};function f2(t,e="",n){const{component:i,data:r,children:s}=t,o=!s||Array.isArray(s)&&!s.length,l={key:t,element:i?()=>v(i,{}):()=>{const{element:a}=t;return a===void 0&&n?v(n,{}):a},preload:t.component?i.preload:t.preload,data:r};return v0(t.path).reduce((a,c)=>{for(const u of b0(c)){const h=g0(e,u),d=o?h:h.split("/*",1)[0];a.push({...l,originalPath:u,pattern:d,matcher:o2(d,!o,t.matchFilters)})}return a},[])}function p2(t,e=0){return{routes:t,score:a2(t[t.length-1])*1e4-e,matcher(n){const i=[];for(let r=t.length-1;r>=0;r--){const s=t[r],o=s.matcher(n);if(!o)return null;i.unshift({...o,route:s})}return i}}}function v0(t){return Array.isArray(t)?t:[t]}function w0(t,e="",n,i=[],r=[]){const s=v0(t);for(let o=0,l=s.length;o<l;o++){const a=s[o];if(a&&typeof a=="object"&&a.hasOwnProperty("path")){const c=f2(a,e,n);for(const u of c){i.push(u);const h=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!h)w0(a.children,u.pattern,n,i,r);else{const d=p2([...i],r.length);r.push(d)}i.pop()}}}return i.length?r:r.sort((o,l)=>l.score-o.score)}function g2(t,e){for(let n=0,i=t.length;n<i;n++){const r=t[n].matcher(e);if(r)return r}return[]}function m2(t,e){const n=new URL("http://sar"),i=te(a=>{const c=t();try{return new URL(c,n)}catch{return console.error(`Invalid path ${c}`),a}},n,{equals:(a,c)=>a.href===c.href}),r=te(()=>i().pathname),s=te(()=>i().search,!0),o=te(()=>i().hash),l=te(()=>"");return{get pathname(){return r()},get search(){return s()},get hash(){return o()},get state(){return e()},get key(){return l()},query:m0(Vt(s,()=>s2(i())))}}function b2(t,e="",n,i){const{signal:[r,s],utils:o={}}=Z_(t),l=o.parsePath||(D=>D),a=o.renderPath||(D=>D),c=o.beforeLeave||t2(),u=Na("",e),h=void 0;if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!r().value&&s({value:u,replace:!0,scroll:!1});const[d,g]=G(!1),p=async D=>{g(!0);try{await Qb(D)}finally{g(!1)}},[b,$]=G(r().value),[E,S]=G(r().state),m=m2(b,E),x=[],_={pattern:u,params:{},path:()=>u,outlet:()=>null,resolvePath(D){return Na(u,D)}};if(n)try{uo=_,_.data=n({data:void 0,params:{},location:m,navigate:w(_)})}finally{uo=void 0}function C(D,P,O){nt(()=>{if(typeof P=="number"){P&&(o.go?c.confirm(P,O)&&o.go(P):console.warn("Router integration does not support relative routing"));return}const{replace:R,resolve:B,scroll:F,state:X}={replace:!1,resolve:!0,scroll:!0,...O},re=B?D.resolvePath(P):Na("",P);if(re===void 0)throw new Error(`Path '${P}' is not a routable path`);if(x.length>=c2)throw new Error("Too many redirects");const be=b();if((re!==be||X!==E())&&!$s){if(c.confirm(re,O)){const Re=x.push({value:be,replace:R,scroll:F,state:E()});p(()=>{$(re),S(X),s0()}).then(()=>{x.length===Re&&k({value:re,state:X})})}}})}function w(D){return D=D||Me(Yl)||_,(P,O)=>C(D,P,O)}function k(D){const P=x[0];P&&((D.value!==P.value||D.state!==P.state)&&s({...D,replace:P.replace,scroll:P.scroll}),x.length=0)}Le(()=>{const{value:D,state:P}=r();nt(()=>{D!==b()&&p(()=>{$(D),S(P)})})});{let D=function(P){if(P.defaultPrevented||P.button!==0||P.metaKey||P.altKey||P.ctrlKey||P.shiftKey)return;const O=P.composedPath().find(be=>be instanceof Node&&be.nodeName.toUpperCase()==="A");if(!O||!O.hasAttribute("link"))return;const R=O.href;if(O.target||!R&&!O.hasAttribute("state"))return;const B=(O.getAttribute("rel")||"").split(/\s+/);if(O.hasAttribute("download")||B&&B.includes("external"))return;const F=new URL(R);if(F.origin!==window.location.origin||u&&F.pathname&&!F.pathname.toLowerCase().startsWith(u.toLowerCase()))return;const X=l(F.pathname+F.search+F.hash),re=O.getAttribute("state");P.preventDefault(),C(_,X,{resolve:!1,replace:O.hasAttribute("replace"),scroll:!O.hasAttribute("noscroll"),state:re&&JSON.parse(re)})};Di(["click"]),document.addEventListener("click",D),me(()=>document.removeEventListener("click",D))}return{base:_,out:h,location:m,isRouting:d,renderPath:a,parsePath:l,navigatorFactory:w,beforeLeave:c}}function y2(t,e,n,i,r){const{base:s,location:o,navigatorFactory:l}=t,{pattern:a,element:c,preload:u,data:h}=i().route,d=te(()=>i().path);u&&u();const g={parent:e,pattern:a,get child(){return n()},path:d,params:r,data:e.data,outlet:c,resolvePath(p){return Na(s.path(),p,d())}};if(h)try{uo=g,g.data=h({data:e.data,params:r,location:o,navigate:l(g)})}finally{uo=void 0}return g}const v2=V("<a link>"),w2=t=>{const{source:e,url:n,base:i,data:r,out:s}=t,o=e||e2(),l=b2(o,i,r);return v(y0.Provider,{value:l,get children(){return t.children}})},_2=t=>{const e=Cs(),n=Ld(),i=Or(()=>t.children),r=te(()=>w0(i(),g0(n.pattern,t.base||""),x2)),s=te(()=>g2(r(),e.location.pathname)),o=m0(()=>{const u=s(),h={};for(let d=0;d<u.length;d++)Object.assign(h,u[d].params);return h});e.out&&e.out.matches.push(s().map(({route:u,path:h,params:d})=>({originalPath:u.originalPath,pattern:u.pattern,path:h,params:d})));const l=[];let a;const c=te(Vt(s,(u,h,d)=>{let g=h&&u.length===h.length;const p=[];for(let b=0,$=u.length;b<$;b++){const E=h&&h[b],S=u[b];d&&E&&S.route.key===E.route.key?p[b]=d[b]:(g=!1,l[b]&&l[b](),Si(m=>{l[b]=m,p[b]=y2(e,p[b-1]||n,()=>c()[b+1],()=>s()[b],o)}))}return l.splice(u.length).forEach(b=>b()),d&&g?d:(a=p[0],p)}));return v(he,{get when(){return c()&&a},keyed:!0,children:u=>v(Yl.Provider,{value:u,get children(){return u.outlet()}})})},x2=()=>{const t=Ld();return v(he,{get when(){return t.child},keyed:!0,children:e=>v(Yl.Provider,{value:e,get children(){return e.outlet()}})})};function Bu(t){t=pe({inactiveClass:"inactive",activeClass:"active"},t);const[,e]=we(t,["href","state","class","activeClass","inactiveClass","end"]),n=u2(()=>t.href),i=h2(n),r=Ql(),s=te(()=>{const o=n();if(o===void 0)return!1;const l=dr(o.split(/[?#]/,1)[0]).toLowerCase(),a=dr(r.pathname).toLowerCase();return t.end?l===a:a.startsWith(l)});return(()=>{const o=H(v2);return Ln(o,pe(e,{get href(){return i()||t.href},get state(){return JSON.stringify(t.state)},get classList(){return{...t.class&&{[t.class]:!0},[t.inactiveClass]:!s(),[t.activeClass]:s(),...e.classList}},get"aria-current"(){return s()?"page":void 0}}),!1,!1),Ht(),o})()}function TR(t){const e=Md(),n=Ql(),{href:i,state:r}=t,s=typeof i=="function"?i({navigate:e,location:n}):i;return e(s,{replace:!0,state:r}),null}const S2=[{component:Rt(()=>W(()=>import("./_...404_-c12baca0.js"),[])),path:"/*404"},{component:Rt(()=>W(()=>import("./debug-1d6c6b00.js"),[])),path:"/debug"},{component:Rt(()=>W(()=>import("./feed-25fee3fb.js"),["assets/feed-25fee3fb.js","assets/Error-408ec9a7.js","assets/useIntersectionObserver-f51346de.js","assets/EmptyState-636701be.js"])),path:"/feed"},{component:Rt(()=>W(()=>import("./import-c0af1f97.js"),[])),path:"/import"},{component:Rt(()=>W(()=>import("./index-a4a1d825.js"),[])),path:"/"},{component:Rt(()=>W(()=>import("./l-11dac9bb.js"),[])),path:"/l"},{component:Rt(()=>W(()=>import("./playlist-1f4301aa.js"),["assets/playlist-1f4301aa.js","assets/PlaylistItem-c9db346b.js"])),path:"/playlist"},{component:Rt(()=>W(()=>import("./results-517e0bc5.js"),["assets/results-517e0bc5.js","assets/PlaylistCard-5a81cf25.js","assets/Description-e1e97fb6.js","assets/useIntersectionObserver-f51346de.js","assets/Description-813d4954.css","assets/EmptyState-636701be.js"])),path:"/results"},{component:Rt(()=>W(()=>import("./trending-374ec1b1.js"),["assets/trending-374ec1b1.js","assets/Error-408ec9a7.js"])),path:"/trending"},{component:Rt(()=>W(()=>import("./watch-63850df5.js"),["assets/watch-63850df5.js","assets/Description-e1e97fb6.js","assets/useIntersectionObserver-f51346de.js","assets/Description-813d4954.css","assets/PlaylistItem-c9db346b.js","assets/PlaylistCard-5a81cf25.js"])),path:"/watch"},{component:Rt(()=>W(()=>import("./_id_-78c7e704.js"),["assets/_id_-78c7e704.js","assets/Description-e1e97fb6.js","assets/useIntersectionObserver-f51346de.js","assets/Description-813d4954.css","assets/PlaylistCard-5a81cf25.js","assets/EmptyState-636701be.js"])),path:"/channel/:id"},{component:Rt(()=>W(()=>import("./(library)-af3af8c9.js"),[])),path:"/library"},{component:Rt(()=>W(()=>import("./downloads-9c8423dc.js"),[])),path:"/library/downloads"},{component:Rt(()=>W(()=>import("./history-a529192d.js"),["assets/history-a529192d.js","assets/useIntersectionObserver-f51346de.js"])),path:"/library/history"},{component:Rt(()=>W(()=>import("./playlists-0b402f94.js"),["assets/playlists-0b402f94.js","assets/EmptyState-636701be.js","assets/PlaylistCard-5a81cf25.js"])),path:"/library/playlists"},{component:Rt(()=>W(()=>import("./(preferences)-7f52482a.js"),[])),path:"/preferences"}],E2=()=>S2,Nd=Ue({}),$2=()=>Me(Nd),ho=Bu,C2=_2,Fd=Ql,Ts=Md,T2="$FETCH",k2=V('<div><div><p id="error-message"></p><button id="reset-errors">Clear errors and retry</button><pre>');function Yc(t){return v(o0,{fallback:(e,n)=>v(he,{get when(){return!t.fallback},get fallback(){return te(()=>!!t.fallback)()&&t.fallback(e,n)},get children(){return v(P2,{error:e})}}),get children(){return t.children}})}function P2(t){return ne(()=>console.error(t.error)),(()=>{const e=H(k2),n=e.firstChild,i=n.firstChild,r=i.nextSibling,s=r.nextSibling;return e.style.setProperty("padding","16px"),n.style.setProperty("background-color","rgba(252, 165, 165)"),n.style.setProperty("color","rgb(153, 27, 27)"),n.style.setProperty("border-radius","5px"),n.style.setProperty("overflow","scroll"),n.style.setProperty("padding","16px"),n.style.setProperty("margin-bottom","8px"),i.style.setProperty("font-weight","bold"),U(i,()=>t.error.message),a0(r,"click",s0,!0),r.style.setProperty("color","rgba(252, 165, 165)"),r.style.setProperty("background-color","rgb(153, 27, 27)"),r.style.setProperty("border-radius","5px"),r.style.setProperty("padding","4px 8px"),s.style.setProperty("margin-top","8px"),s.style.setProperty("width","100%"),U(s,()=>t.error.stack),Ht(),e})()}Di(["click"]);const A2=!1,O2=!1;function D2(){return Me(Nd),[v(O_,{}),O2,v(A_,{get children(){return $s}}),A2]}function I2(t){return Ln(document.documentElement,t,!1,!0),t.children}function R2(t){return Ln(document.head,t,!1,!0),t.children}function L2(t){{let e=Or(()=>t.children);return Ln(document.body,t,!1,!0),U(document.body,()=>{let n=e();if(n){if(Array.isArray(n)){let i=n.filter(r=>!!r);return i.length?i:null}return n}return null},null,[...document.body.childNodes]),document.body}}/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var M2=decodeURIComponent;function N2(t,e){if(typeof t!="string")throw new TypeError("argument str must be a string");for(var n={},i=e||{},r=t.split(";"),s=i.decode||M2,o=0;o<r.length;o++){var l=r[o],a=l.indexOf("=");if(!(a<0)){var c=l.substring(0,a).trim();if(n[c]==null){var u=l.substring(a+1,l.length).trim();u[0]==='"'&&(u=u.slice(1,-1)),n[c]=F2(u,s)}}}return n}function F2(t,e){try{return e(t)}catch{return t}}function B2(t={}){return Object.keys(t).reduce((e,n)=>n==="days"||t[n]===!1?e:t[n]===!0?`${e}; ${n}`:`${e}; ${n}=${t[n]}`,"")}const U2=(t,e,n)=>{const i={days:7,path:"/",...n},r=new Date(Date.now()+i.days*864e5).toUTCString();document.cookie=t+"="+encodeURIComponent(e)+"; expires="+r+B2(i)},j2=(t,e="")=>document.cookie.split("; ").reduce((n,i)=>{const r=i.split("=");return r[0]===t?decodeURIComponent(r[1]):n},"")||e;function H2(t,e){const[n,i]=G(()=>j2(t,e));return[n,(s,o={})=>{i(s),U2(t,s,o)}]}function _0(){try{return window.localStorage!==void 0&&localStorage,!0}catch{return!1}}function Bd(t,e,n="localStorage"){if(!(typeof window>"u")&&_0())switch(n){case"localStorage":localStorage.setItem(t,JSON.stringify(e));break;case"sessionStorage":sessionStorage.setItem(t,JSON.stringify(e));break;default:throw new Error(`Invalid storage: ${n}`)}}function x0(t,e,n="string",i){if(typeof window>"u")return e;const r=new URLSearchParams(window.location.search).get(t),s=i==="localStorage"&&_0()?localStorage.getItem(t):sessionStorage.getItem(t),o=r!==null?r:s;if(o!==null)switch(n){case"boolean":switch(String(o).toLowerCase()){case"true":case"1":case"on":case"yes":return!0;default:return!1}case"string":return o;case"number":return Number(o);case"json":try{const l=JSON.parse(o);return typeof l=="string"?JSON.parse(l):l}catch(l){return console.error(l),e}default:throw new Error(`Invalid type: ${n}`)}else return e}var V2={equals:!1};function Ud(t){return(...e)=>{for(const n of t)n&&n(...e)}}function K2(t){return(...e)=>{for(let n=t.length-1;n>=0;n--){const i=t[n];i&&i(...e)}}}var K=t=>typeof t=="function"&&!t.length?t():t,Rg=t=>Array.isArray(t)?t:t?[t]:[];function S0(t,...e){return typeof t=="function"?t(...e):t}var q2=me;function z2(t,e,n,i){return t.addEventListener(e,n,i),q2(t.removeEventListener.bind(t,e,n,i))}function W2(t,e,n,i){const r=()=>{Rg(K(t)).forEach(s=>{s&&Rg(K(e)).forEach(o=>z2(s,o,n,i))})};typeof t=="function"?ne(r):Le(r)}var Qc=Symbol("fallback");function Lg(t){for(const e of t)e.dispose()}function G2(t,e,n,i={}){const r=new Map;return me(()=>Lg(r.values())),()=>{const o=t()||[];return o[Wa],nt(()=>{if(!o.length)return Lg(r.values()),r.clear(),i.fallback?[Si(h=>(r.set(Qc,{dispose:h}),i.fallback()))]:[];const l=new Array(o.length),a=r.get(Qc);if(!r.size||a){a?.dispose(),r.delete(Qc);for(let u=0;u<o.length;u++){const h=o[u],d=e(h,u);s(l,h,u,d)}return l}const c=new Set(r.keys());for(let u=0;u<o.length;u++){const h=o[u],d=e(h,u);c.delete(d);const g=r.get(d);g?(l[u]=g.mapped,g.setIndex?.(u),g.setItem(()=>h)):s(l,h,u,d)}for(const u of c)r.get(u)?.dispose(),r.delete(u);return l})};function s(o,l,a,c){Si(u=>{const[h,d]=G(l),g={setItem:d,dispose:u};if(n.length>1){const[p,b]=G(a);g.setIndex=b,g.mapped=n(h,p)}else g.mapped=n(h);r.set(c,g),o[a]=g.mapped})}}function Y2(t){const{by:e}=t;return te(G2(()=>t.each,typeof e=="function"?e:n=>n[e],t.children,"fallback"in t?{fallback:()=>t.fallback}:void 0))}function xa(){return!0}var Q2={get(t,e,n){return e===At?n:t.get(e)},has(t,e){return t.has(e)},set:xa,deleteProperty:xa,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:xa,deleteProperty:xa}},ownKeys(t){return t.keys()}},X2=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g;function Mg(t){const e={};let n;for(;n=X2.exec(t);)e[n[1]]=n[2];return e}function J2(t,e){if(typeof t=="string"){if(typeof e=="string")return`${t};${e}`;t=Mg(t)}else typeof e=="string"&&(e=Mg(e));return{...t,...e}}var Xc=(t,e,n)=>{let i;for(const r of t){const s=K(r)[e];i?s&&(i=n(i,s)):i=s}return i};function Z2(...t){const e=Array.isArray(t[0]),n=e?t[0]:t;if(n.length===1)return n[0];const i=e&&t[1]?.reverseEventHandlers?K2:Ud,r={};for(const o of n){const l=K(o);for(const a in l)if(a[0]==="o"&&a[1]==="n"&&a[2]){const c=l[a],u=a.toLowerCase(),h=typeof c=="function"?c:Array.isArray(c)?c.length===1?c[0]:c[0].bind(void 0,c[1]):void 0;h?r[u]?r[u].push(h):r[u]=[h]:delete r[u]}}const s=pe(...n);return new Proxy({get(o){if(typeof o!="string")return Reflect.get(s,o);if(o==="style")return Xc(n,"style",J2);if(o==="ref"){const l=[];for(const a of n){const c=K(a)[o];typeof c=="function"&&l.push(c)}return i(l)}if(o[0]==="o"&&o[1]==="n"&&o[2]){const l=r[o.toLowerCase()];return l?i(l):Reflect.get(s,o)}return o==="class"||o==="className"?Xc(n,o,(l,a)=>`${l} ${a}`):o==="classList"?Xc(n,o,(l,a)=>({...l,...a})):Reflect.get(s,o)},has(o){return Reflect.has(s,o)},keys(){return Object.keys(s)}},Q2)}function vt(...t){return Ud(t)}var Ng=t=>t instanceof Element;function Uu(t,e){if(e(t))return t;if(typeof t=="function"&&!t.length)return Uu(t(),e);if(Array.isArray(t)){const n=[];for(const i of t){const r=Uu(i,e);r&&(Array.isArray(r)?n.push.apply(n,r):n.push(r))}return n.length?n:null}return null}function kR(t,e=Ng,n=Ng){const i=te(t),r=te(()=>Uu(i(),e));return r.toArray=()=>{const s=r();return Array.isArray(s)?s:s?[s]:[]},r}function ex(t,e,n=-1){return n in t?[...t.slice(0,n),e,...t.slice(n)]:[...t,e]}function ju(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function tx(t){return typeof t=="number"}function nx(t){return Array.isArray(t)}function zr(t){return Object.prototype.toString.call(t)==="[object String]"}function Wo(t){return typeof t=="function"}function Sn(t){return e=>`${t()}-${e}`}function Kt(t,e){return t?t===e||t.contains(e):!1}function Xs(t,e=!1){const{activeElement:n}=Qt(t);if(!n?.nodeName)return null;if(E0(n)&&n.contentDocument)return Xs(n.contentDocument.body,e);if(e){const i=n.getAttribute("aria-activedescendant");if(i){const r=Qt(n).getElementById(i);if(r)return r}}return n}function Xl(t){return Qt(t).defaultView||window}function Qt(t){return t?t.ownerDocument||t:document}function E0(t){return t.tagName==="IFRAME"}var $0=(t=>(t.Escape="Escape",t.Enter="Enter",t.Tab="Tab",t.Space=" ",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.ArrowUp="ArrowUp",t.End="End",t.Home="Home",t.PageDown="PageDown",t.PageUp="PageUp",t))($0||{});function C0(t){return typeof window>"u"||window.navigator==null?!1:window.navigator.userAgentData?.brands.some(e=>t.test(e.brand))||t.test(window.navigator.userAgent)}function jd(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.userAgentData?.platform||window.navigator.platform):!1}function Go(){return jd(/^Mac/i)}function ix(){return jd(/^iPhone/i)}function rx(){return jd(/^iPad/i)||Go()&&navigator.maxTouchPoints>1}function T0(){return ix()||rx()}function sx(){return Go()||T0()}function ox(){return C0(/AppleWebKit/i)&&!ax()}function ax(){return C0(/Chrome/i)}function Ie(t,e){return e&&(Wo(e)?e(t):e[0](e[1],t)),t?.defaultPrevented}function bt(t){return e=>{for(const n of t)Ie(e,n)}}function lx(t){return Go()?t.metaKey&&!t.ctrlKey:t.ctrlKey&&!t.metaKey}function St(t){if(t)if(cx())t.focus({preventScroll:!0});else{const e=ux(t);t.focus(),hx(e)}}var Sa=null;function cx(){if(Sa==null){Sa=!1;try{document.createElement("div").focus({get preventScroll(){return Sa=!0,!0}})}catch{}}return Sa}function ux(t){let e=t.parentNode;const n=[],i=document.scrollingElement||document.documentElement;for(;e instanceof HTMLElement&&e!==i;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&n.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;return i instanceof HTMLElement&&n.push({element:i,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft}),n}function hx(t){for(const{element:e,scrollTop:n,scrollLeft:i}of t)e.scrollTop=n,e.scrollLeft=i}var k0=["input:not([type='hidden']):not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","[tabindex]","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]:not([contenteditable='false'])"],dx=[...k0,'[tabindex]:not([tabindex="-1"]):not([disabled])'],Hd=k0.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])",fx=dx.join(':not([hidden]):not([tabindex="-1"]),');function P0(t,e){const i=Array.from(t.querySelectorAll(Hd)).filter(Fg);return e&&Fg(t)&&i.unshift(t),i.forEach((r,s)=>{if(E0(r)&&r.contentDocument){const o=r.contentDocument.body,l=P0(o,!1);i.splice(s,1,...l)}}),i}function Fg(t){return A0(t)&&!px(t)}function A0(t){return t.matches(Hd)&&Vd(t)}function px(t){return parseInt(t.getAttribute("tabindex")||"0",10)<0}function Vd(t,e){return t.nodeName!=="#comment"&&gx(t)&&mx(t,e)&&(!t.parentElement||Vd(t.parentElement,t))}function gx(t){if(!(t instanceof HTMLElement)&&!(t instanceof SVGElement))return!1;const{display:e,visibility:n}=t.style;let i=e!=="none"&&n!=="hidden"&&n!=="collapse";if(i){if(!t.ownerDocument.defaultView)return i;const{getComputedStyle:r}=t.ownerDocument.defaultView,{display:s,visibility:o}=r(t);i=s!=="none"&&o!=="hidden"&&o!=="collapse"}return i}function mx(t,e){return!t.hasAttribute("hidden")&&(t.nodeName==="DETAILS"&&e&&e.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0)}function bx(t,e){return e.some(n=>n.contains(t))}function yx(t,e,n){const i=e?.tabbable?fx:Hd,r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode(s){return e?.from?.contains(s)?NodeFilter.FILTER_REJECT:s.matches(i)&&Vd(s)&&(!n||bx(s,n))&&(!e?.accept||e.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e?.from&&(r.currentNode=e.from),r}function vx(){}function wx(t){return[t.clientX,t.clientY]}function O0(t,e){const[n,i]=t;let r=!1;const s=e.length;for(let o=s,l=0,a=o-1;l<o;a=l++){const[c,u]=e[l],[h,d]=e[a],[,g]=e[a===0?o-1:a-1]||[0,0],p=(u-d)*(n-c)-(c-h)*(i-u);if(d<u){if(i>=d&&i<u){if(p===0)return!0;p>0&&(i===d?i>g&&(r=!r):r=!r)}}else if(u<d){if(i>u&&i<=d){if(p===0)return!0;p<0&&(i===d?i<g&&(r=!r):r=!r)}}else if(i==u&&(n>=h&&n<=c||n>=c&&n<=h))return!0}return r}function $e(t,e){return pe(t,e)}var qs=new Map,Bg=new Set;function Ug(){if(typeof window>"u")return;const t=n=>{if(!n.target)return;let i=qs.get(n.target);i||(i=new Set,qs.set(n.target,i),n.target.addEventListener("transitioncancel",e)),i.add(n.propertyName)},e=n=>{if(!n.target)return;const i=qs.get(n.target);if(i&&(i.delete(n.propertyName),i.size===0&&(n.target.removeEventListener("transitioncancel",e),qs.delete(n.target)),qs.size===0)){for(const r of Bg)r();Bg.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",e)}typeof document<"u"&&(document.readyState!=="loading"?Ug():document.addEventListener("DOMContentLoaded",Ug));function jg(t,e){const n=Hg(t,e,"left"),i=Hg(t,e,"top"),r=e.offsetWidth,s=e.offsetHeight;let o=t.scrollLeft,l=t.scrollTop;const a=o+t.offsetWidth,c=l+t.offsetHeight;n<=o?o=n:n+r>a&&(o+=n+r-a),i<=l?l=i:i+s>c&&(l+=i+s-c),t.scrollLeft=o,t.scrollTop=l}function Hg(t,e,n){const i=n==="left"?"offsetLeft":"offsetTop";let r=0;for(;e.offsetParent&&(r+=e[i],e.offsetParent!==t);){if(e.offsetParent.contains(t)){r-=t[i];break}e=e.offsetParent}return r}var _x={border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:"0",position:"absolute",width:"1px","white-space":"nowrap"};function Hu(t){let e=t.startIndex??0;const n=t.startLevel??0,i=[],r=a=>{if(a==null)return"";const c=t.getKey??"key",u=zr(c)?a[c]:c(a);return u!=null?String(u):""},s=a=>{if(a==null)return"";const c=t.getTextValue??"textValue",u=zr(c)?a[c]:c(a);return u!=null?String(u):""},o=a=>{if(a==null)return!1;const c=t.getDisabled??"disabled";return(zr(c)?a[c]:c(a))??!1},l=a=>{if(a!=null)return zr(t.getSectionChildren)?a[t.getSectionChildren]:t.getSectionChildren?.(a)};for(const a of t.dataSource){if(zr(a)||tx(a)){i.push({type:"item",rawValue:a,key:String(a),textValue:String(a),disabled:o(a),level:n,index:e}),e++;continue}if(l(a)!=null){i.push({type:"section",rawValue:a,key:"",textValue:"",disabled:!1,level:n,index:e}),e++;const c=l(a)??[];if(c.length>0){const u=Hu({dataSource:c,getKey:t.getKey,getTextValue:t.getTextValue,getDisabled:t.getDisabled,getSectionChildren:t.getSectionChildren,startIndex:e,startLevel:n+1});i.push(...u),e+=u.length}}else i.push({type:"item",rawValue:a,key:r(a),textValue:s(a),disabled:o(a),level:n,index:e}),e++}return i}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/collections/src/useCollection.ts
 */function xx(t,e=[]){const n=Hu({dataSource:K(t.dataSource),getKey:K(t.getKey),getTextValue:K(t.getTextValue),getDisabled:K(t.getDisabled),getSectionChildren:K(t.getSectionChildren)}),[i,r]=G(t.factory(n));return ne(Vt([()=>K(t.dataSource),()=>K(t.getKey),()=>K(t.getTextValue),()=>K(t.getDisabled),()=>K(t.getSectionChildren),()=>t.factory,...e],([s,o,l,a,c,u])=>{const h=Hu({dataSource:s,getKey:o,getTextValue:l,getDisabled:a,getSectionChildren:c});r(()=>u(h))},{defer:!0})),i}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/22cb32d329e66c60f55d4fc4025d1d44bb015d71/packages/@react-stately/collections/src/getItemCount.ts
 */const Vg=new WeakMap;function Sx(t){let e=Vg.get(t);if(e!=null)return e;e=0;for(const n of t)n.type==="item"&&e++;return Vg.set(t,e),e}function Yo(t){const[e,n]=G(t.defaultValue?.()),i=te(()=>t.value?.()!==void 0),r=te(()=>i()?t.value?.():e());return[r,o=>{nt(()=>{const l=S0(o,r());return Object.is(l,r())||(i()||n(l),t.onChange?.(l)),l})}]}function D0(t){const[e,n]=Yo(t);return[()=>e()??!1,n]}function Ex(t){const[e,n]=Yo(t);return[()=>e()??[],n]}function ks(t={}){const[e,n]=D0({value:()=>K(t.open),defaultValue:()=>!!K(t.defaultOpen),onChange:o=>t.onOpenChange?.(o)}),i=()=>{n(!0)},r=()=>{n(!1)};return{isOpen:e,setIsOpen:n,open:i,close:r,toggle:()=>{e()?r():i()}}}function $x(t){const e=n=>{n.key===$0.Escape&&t.onEscapeKeyDown?.(n)};ne(()=>{if(K(t.isDisabled))return;const n=t.ownerDocument?.()??Qt();n.addEventListener("keydown",e),me(()=>{n.removeEventListener("keydown",e)})})}/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/81b25f4b40c54f72aeb106ca0e64e1e09655153e/packages/react/dismissable-layer/src/DismissableLayer.tsx
 *
 * Portions of this file are based on code from zag.
 * MIT Licensed, Copyright (c) 2021 Chakra UI.
 *
 * Credits to the Chakra UI team:
 * https://github.com/chakra-ui/zag/blob/d1dbf9e240803c9e3ed81ebef363739be4273de0/packages/utilities/dismissable/src/layer-stack.ts
 */const fo="data-kb-top-layer";let I0,Vu=!1;const Ti=[];function po(t){return Ti.findIndex(e=>e.node===t)}function Cx(t){return Ti[po(t)]}function Tx(t){return Ti[Ti.length-1].node===t}function R0(){return Ti.filter(t=>t.isPointerBlocking)}function kx(){return[...R0()].slice(-1)[0]}function Kd(){return R0().length>0}function L0(t){const e=po(kx()?.node);return po(t)<e}function Px(t){Ti.push(t)}function Ax(t){const e=po(t);e<0||Ti.splice(e,1)}function Ox(){Ti.forEach(({node:t})=>{t.style.pointerEvents=L0(t)?"none":"auto"})}function Dx(t){if(Kd()&&!Vu){const e=Qt(t);I0=document.body.style.pointerEvents,e.body.style.pointerEvents="none",Vu=!0}}function Ix(t){if(Kd())return;const e=Qt(t);e.body.style.pointerEvents=I0,e.body.style.length===0&&e.body.removeAttribute("style"),Vu=!1}const un={layers:Ti,isTopMostLayer:Tx,hasPointerBlockingLayer:Kd,isBelowPointerBlockingLayer:L0,addLayer:Px,removeLayer:Ax,indexOf:po,find:Cx,assignPointerEventToLayers:Ox,disableBodyPointerEvents:Dx,restoreBodyPointerEvents:Ix};/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/81b25f4b40c54f72aeb106ca0e64e1e09655153e/packages/react/focus-scope/src/FocusScope.tsx
 *
 * Portions of this file are based on code from zag.
 * MIT Licensed, Copyright (c) 2021 Chakra UI.
 *
 * Credits to the Chakra UI team:
 * https://github.com/chakra-ui/zag/blob/d1dbf9e240803c9e3ed81ebef363739be4273de0/packages/utilities/focus-scope/src/focus-on-child-unmount.ts
 * https://github.com/chakra-ui/zag/blob/d1dbf9e240803c9e3ed81ebef363739be4273de0/packages/utilities/focus-scope/src/focus-containment.ts
 */const Jc="focusScope.autoFocusOnMount",Zc="focusScope.autoFocusOnUnmount",Kg={bubbles:!1,cancelable:!0},qg={stack:[],active(){return this.stack[0]},add(t){t!==this.active()&&this.active()?.pause(),this.stack=ju(this.stack,t),this.stack.unshift(t)},remove(t){this.stack=ju(this.stack,t),this.active()?.resume()}};function Jl(t,e){const[n,i]=G(!1),r={pause(){i(!0)},resume(){i(!1)}};let s=null;const o=p=>t.onMountAutoFocus?.(p),l=p=>t.onUnmountAutoFocus?.(p),a=()=>Qt(e()),c=()=>{const p=a().createElement("span");return p.setAttribute("data-focus-trap",""),p.tabIndex=0,Object.assign(p.style,_x),p},u=()=>{const p=e();return p?P0(p,!0).filter(b=>!b.hasAttribute("data-focus-trap")):[]},h=()=>{const p=u();return p.length>0?p[0]:null},d=()=>{const p=u();return p.length>0?p[p.length-1]:null},g=()=>{const p=e();if(!p)return!1;const b=Xs(p);return!b||Kt(p,b)?!1:A0(b)};ne(()=>{const p=e();if(!p)return;qg.add(r);const b=Xs(p);if(!Kt(p,b)){const E=new CustomEvent(Jc,Kg);p.addEventListener(Jc,o),p.dispatchEvent(E),E.defaultPrevented||setTimeout(()=>{St(h()),Xs(p)===b&&St(p)},0)}me(()=>{p.removeEventListener(Jc,o),setTimeout(()=>{const E=new CustomEvent(Zc,Kg);g()&&E.preventDefault(),p.addEventListener(Zc,l),p.dispatchEvent(E),E.defaultPrevented||St(b??a().body),p.removeEventListener(Zc,l),qg.remove(r)},0)})}),ne(()=>{const p=e();if(!p||!K(t.trapFocus)||n())return;const b=E=>{const S=E.target;S?.closest(`[${fo}]`)||(Kt(p,S)?s=S:St(s))},$=E=>{const m=E.relatedTarget??Xs(p);m?.closest(`[${fo}]`)||Kt(p,m)||St(s)};a().addEventListener("focusin",b),a().addEventListener("focusout",$),me(()=>{a().removeEventListener("focusin",b),a().removeEventListener("focusout",$)})}),ne(()=>{const p=e();if(!p||!K(t.trapFocus)||n())return;const b=c();p.insertAdjacentElement("afterbegin",b);const $=c();p.insertAdjacentElement("beforeend",$);function E(m){const x=h(),_=d();m.relatedTarget===x?St(_):St(x)}b.addEventListener("focusin",E),$.addEventListener("focusin",E);const S=new MutationObserver(m=>{for(const x of m)x.previousSibling===$&&($.remove(),p.insertAdjacentElement("beforeend",$)),x.nextSibling===b&&(b.remove(),p.insertAdjacentElement("afterbegin",b))});S.observe(p,{childList:!0,subtree:!1}),me(()=>{b.removeEventListener("focusin",E),$.removeEventListener("focusin",E),b.remove(),$.remove(),S.disconnect()})})}/*!
 * Portions of this file are based on code from zag.
 * MIT Licensed, Copyright (c) 2021 Chakra UI.
 *
 * Credits to the zag team:
 * https://github.com/chakra-ui/zag/blob/c1e6c7689b22bf58741ded7cf224dd9baec2a046/packages/utilities/form-utils/src/form.ts
 */function M0(t,e){ne(Vt(t,n=>{if(n==null)return;const i=Rx(n);i!=null&&(i.addEventListener("reset",e,{passive:!0}),me(()=>{i.removeEventListener("reset",e)}))}))}function Rx(t){return Lx(t)?t.form:t.closest("form")}function Lx(t){return t.matches("textarea, input, select, button")}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/15e101b74966bd5eb719c6529ce71ce57eaed430/packages/@react-aria/live-announcer/src/LiveAnnouncer.tsx
 */const Mx="data-live-announcer";/*!
 * This file is based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/810579b671791f1593108f62cdc1893de3a220e3/packages/@react-aria/overlays/src/ariaHideOutside.ts
 */function Zl(t){ne(()=>{K(t.isDisabled)||me(Nx(K(t.targets),K(t.root)))})}const zs=new WeakMap,En=[];function Nx(t,e=document.body){const n=new Set(t),i=new Set,r=a=>{for(const d of a.querySelectorAll(`[${Mx}], [${fo}]`))n.add(d);const c=d=>{if(n.has(d)||d.parentElement&&i.has(d.parentElement)&&d.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(const g of n)if(d.contains(g))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},u=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:c}),h=c(a);if(h===NodeFilter.FILTER_ACCEPT&&s(a),h!==NodeFilter.FILTER_REJECT){let d=u.nextNode();for(;d!=null;)s(d),d=u.nextNode()}},s=a=>{const c=zs.get(a)??0;a.getAttribute("aria-hidden")==="true"&&c===0||(c===0&&a.setAttribute("aria-hidden","true"),i.add(a),zs.set(a,c+1))};En.length&&En[En.length-1].disconnect(),r(e);const o=new MutationObserver(a=>{for(const c of a)if(!(c.type!=="childList"||c.addedNodes.length===0)&&![...n,...i].some(u=>u.contains(c.target))){for(const u of c.removedNodes)u instanceof Element&&(n.delete(u),i.delete(u));for(const u of c.addedNodes)(u instanceof HTMLElement||u instanceof SVGElement)&&(u.dataset.liveAnnouncer==="true"||u.dataset.reactAriaTopLayer==="true")?n.add(u):u instanceof Element&&r(u)}});o.observe(e,{childList:!0,subtree:!0});const l={observe(){o.observe(e,{childList:!0,subtree:!0})},disconnect(){o.disconnect()}};return En.push(l),()=>{o.disconnect();for(const a of i){const c=zs.get(a);if(c==null)return;c===1?(a.removeAttribute("aria-hidden"),zs.delete(a)):zs.set(a,c-1)}l===En[En.length-1]?(En.pop(),En.length&&En[En.length-1].observe()):En.splice(En.indexOf(l),1)}}/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/81b25f4b40c54f72aeb106ca0e64e1e09655153e/packages/react/dismissable-layer/src/DismissableLayer.tsx
 *
 * Portions of this file are based on code from zag.
 * MIT Licensed, Copyright (c) 2021 Chakra UI.
 *
 * Credits to the Chakra UI team:
 * https://github.com/chakra-ui/zag/blob/d1dbf9e240803c9e3ed81ebef363739be4273de0/packages/utilities/interact-outside/src/index.ts
 */const zg="interactOutside.pointerDownOutside",Wg="interactOutside.focusOutside";function Fx(t,e){let n,i=vx;const r=()=>Qt(e()),s=h=>t.onPointerDownOutside?.(h),o=h=>t.onFocusOutside?.(h),l=h=>t.onInteractOutside?.(h),a=h=>{const d=h.target;return!(d instanceof HTMLElement)||d.closest(`[${fo}]`)||!Kt(r(),d)||Kt(e(),d)?!1:!t.shouldExcludeElement?.(d)},c=h=>{function d(){const g=e(),p=h.target;if(!g||!p||!a(h))return;const b=bt([s,l]);p.addEventListener(zg,b,{once:!0});const $=new CustomEvent(zg,{bubbles:!1,cancelable:!0,detail:{originalEvent:h,isContextMenu:h.button===2||lx(h)&&h.button===0}});p.dispatchEvent($)}h.pointerType==="touch"?(r().removeEventListener("click",d),i=d,r().addEventListener("click",d,{once:!0})):d()},u=h=>{const d=e(),g=h.target;if(!d||!g||!a(h))return;const p=bt([o,l]);g.addEventListener(Wg,p,{once:!0});const b=new CustomEvent(Wg,{bubbles:!1,cancelable:!0,detail:{originalEvent:h,isContextMenu:!1}});g.dispatchEvent(b)};ne(()=>{K(t.isDisabled)||(n=window.setTimeout(()=>{r().addEventListener("pointerdown",c,!0)},0),r().addEventListener("focusin",u,!0),me(()=>{window.clearTimeout(n),r().removeEventListener("click",i),r().removeEventListener("pointerdown",c,!0),r().removeEventListener("focusin",u,!0)}))})}/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/21a7c97dc8efa79fecca36428eec49f187294085/packages/react/presence/src/Presence.tsx
 * https://github.com/radix-ui/primitives/blob/21a7c97dc8efa79fecca36428eec49f187294085/packages/react/presence/src/useStateMachine.tsx
 */function vr(t){const[e,n]=G();let i={},r=t(),s="none";const[o,l]=Bx(t()?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ne(Vt(o,a=>{const c=Ea(i);s=a==="mounted"?c:"none"})),ne(Vt(t,a=>{if(r===a)return;const c=Ea(i);a?l("MOUNT"):i?.display==="none"?l("UNMOUNT"):l(r&&s!==c?"ANIMATION_OUT":"UNMOUNT"),r=a})),ne(Vt(e,a=>{if(a){const c=h=>{const g=Ea(i).includes(h.animationName);h.target===a&&g&&l("ANIMATION_END")},u=h=>{h.target===a&&(s=Ea(i))};a.addEventListener("animationstart",u),a.addEventListener("animationcancel",c),a.addEventListener("animationend",c),me(()=>{a.removeEventListener("animationstart",u),a.removeEventListener("animationcancel",c),a.removeEventListener("animationend",c)})}else l("ANIMATION_END")})),{isPresent:()=>["mounted","unmountSuspended"].includes(o()),setRef:a=>{a&&(i=getComputedStyle(a)),n(a)}}}function Ea(t){return t?.animationName||"none"}function Bx(t,e){const n=(o,l)=>e[o][l]??o,[i,r]=G(t);return[i,o=>{r(l=>n(l,o))}]}/*!
 * Portions of this file are based on code from floating-ui.
 * MIT Licensed, Copyright (c) 2021 Floating UI contributors.
 *
 * Credits to the Floating UI contributors:
 * https://github.com/floating-ui/floating-ui/blob/f7ce9420aa32c150eb45049f12cf3b5506715341/packages/react/src/components/FloatingOverlay.tsx
 *
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the Ariakit team:
 * https://github.com/ariakit/ariakit/blob/5d8a1f047fcadcf117073c70359663a3946b73bf/packages/ariakit/src/dialog/__utils/use-prevent-body-scroll.ts
 */const eu="data-kb-scroll-lock";function Gg(t,e){if(!t)return()=>{};const n=t.style.cssText;return Object.assign(t.style,e),()=>{t.style.cssText=n}}function Ux(t,e,n){if(!t)return()=>{};const i=t.style.getPropertyValue(e);return t.style.setProperty(e,n),()=>{i?t.style.setProperty(e,i):t.style.removeProperty(e)}}function jx(t){const e=t.getBoundingClientRect().left;return Math.round(e)+t.scrollLeft?"paddingLeft":"paddingRight"}function ec(t){ne(()=>{if(!K(t.ownerRef)||K(t.isDisabled))return;const e=Qt(K(t.ownerRef)),n=Xl(K(t.ownerRef)),{documentElement:i,body:r}=e;if(r.hasAttribute(eu))return;r.setAttribute(eu,"");const o=n.innerWidth-i.clientWidth,l=()=>Ux(i,"--scrollbar-width",`${o}px`),a=jx(i),c=()=>Gg(r,{overflow:"hidden",[a]:`${o}px`}),u=()=>{const{scrollX:d,scrollY:g,visualViewport:p}=n,b=p?.offsetLeft??0,$=p?.offsetTop??0,E=Gg(r,{position:"fixed",overflow:"hidden",top:`${-(g-Math.floor($))}px`,left:`${-(d-Math.floor(b))}px`,right:"0",[a]:`${o}px`});return()=>{E(),n.scrollTo(d,g)}},h=Ud([l(),T0()?u():c()]);me(()=>{h(),r.removeAttribute(eu)})})}function yt(t){return e=>(t(e),()=>t(void 0))}/*!
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the ariakit team:
 * https://github.com/ariakit/ariakit/blob/8a13899ff807bbf39f3d89d2d5964042ba4d5287/packages/ariakit-react-utils/src/hooks.ts
 */function N0(t,e){const[n,i]=G(Yg(e?.()));return ne(()=>{i(t()?.tagName.toLowerCase()||Yg(e?.()))}),n}function Yg(t){return zr(t)?t:void 0}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/a13802d8be6f83af1450e56f7a88527b10d9cadf/packages/@react-stately/toggle/src/useToggleState.ts
 */function Hx(t={}){const[e,n]=D0({value:()=>K(t.isSelected),defaultValue:()=>!!K(t.defaultIsSelected),onChange:s=>t.onSelectedChange?.(s)});return{isSelected:e,setIsSelected:s=>{!K(t.isReadOnly)&&!K(t.isDisabled)&&n(s)},toggle:()=>{!K(t.isReadOnly)&&!K(t.isDisabled)&&n(!e())}}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/70e7caf1946c423bc9aa9cb0e50dbdbe953d239b/packages/@react-aria/label/src/useField.ts
 */const F0=["id","name","validationState","required","disabled","readOnly"];function B0(t){const e=`form-control-${Wt()}`;t=$e({id:e},t);const[n,i]=G(),[r,s]=G(),[o,l]=G(),[a,c]=G(),u=(p,b,$)=>{const E=$!=null||n()!=null;return[$,n(),E&&b!=null?p:void 0].filter(Boolean).join(" ")||void 0},h=p=>[o(),a(),p].filter(Boolean).join(" ")||void 0,d=te(()=>({"data-valid":K(t.validationState)==="valid"?"":void 0,"data-invalid":K(t.validationState)==="invalid"?"":void 0,"data-required":K(t.required)?"":void 0,"data-disabled":K(t.disabled)?"":void 0,"data-readonly":K(t.readOnly)?"":void 0}));return{formControlContext:{name:()=>K(t.name)??K(t.id),dataset:d,validationState:()=>K(t.validationState),isRequired:()=>K(t.required),isDisabled:()=>K(t.disabled),isReadOnly:()=>K(t.readOnly),labelId:n,fieldId:r,descriptionId:o,errorMessageId:a,getAriaLabelledBy:u,getAriaDescribedBy:h,generateId:Sn(()=>K(t.id)),registerLabel:yt(i),registerField:yt(s),registerDescription:yt(l),registerErrorMessage:yt(c)}}}const qd=Ue();function Ps(){const t=Me(qd);if(t===void 0)throw new Error("[kobalte]: `useFormControlContext` must be used within a `FormControlContext.Provider` component");return t}const U0=["id","aria-label","aria-labelledby","aria-describedby"];function j0(t){const e=Ps();return t=$e({id:e.generateId("field")},t),ne(()=>me(e.registerField(K(t.id)))),{fieldProps:{id:()=>K(t.id),ariaLabel:()=>K(t["aria-label"]),ariaLabelledBy:()=>e.getAriaLabelledBy(K(t.id),K(t["aria-label"]),K(t["aria-labelledby"])),ariaDescribedBy:()=>e.getAriaDescribedBy(K(t["aria-describedby"]))}}}function ot(t){const[e,n]=we(t,["asChild","as","children"]);if(!e.asChild)return v(Wc,pe({get component(){return e.as}},n,{get children(){return e.children}}));const i=Or(()=>e.children);if(Qg(i())){const r=Xg(n,i()?.props??{});return v(Wc,r)}if(nx(i())){const r=i().find(Qg);if(r){const s=()=>v(Gi,{get each(){return i()},children:l=>v(he,{when:l===r,fallback:l,get children(){return r.props.children}})}),o=Xg(n,r?.props??{});return v(Wc,pe(o,{children:s}))}}throw new Error("[kobalte]: Component is expected to render `asChild` but no children `As` component was found.")}const Vx=Symbol("$$KobalteAsComponent");function Qg(t){return t?.[Vx]===!0}function Xg(t,e){return Z2([t,e],{reverseEventHandlers:!0})}function Kx(t){const e=Ps();t=$e({id:e.generateId("error-message")},t);const[n,i]=we(t,["forceMount"]),r=()=>e.validationState()==="invalid";return ne(()=>{r()&&me(e.registerErrorMessage(i.id))}),v(he,{get when(){return n.forceMount||r()},get children(){return v(ot,pe({as:"div"},()=>e.dataset(),i))}})}function H0(t){let e;const n=Ps();t=$e({id:n.generateId("label")},t);const[i,r]=we(t,["ref"]),s=N0(()=>e,()=>"label");return ne(()=>me(n.registerLabel(r.id))),v(ot,pe({as:"label",ref(o){const l=vt(a=>e=a,i.ref);typeof l=="function"&&l(o)},get for(){return te(()=>s()==="label")()?n.fieldId():void 0}},()=>n.dataset(),r))}const qx={"ar-AE":{dismiss:""},"bg-BG":{dismiss:""},"cs-CZ":{dismiss:"Odstranit"},"da-DK":{dismiss:"Luk"},"de-DE":{dismiss:"Schlieen"},"el-GR":{dismiss:""},"en-US":{dismiss:"Dismiss"},"es-ES":{dismiss:"Descartar"},"et-EE":{dismiss:"Lpeta"},"fi-FI":{dismiss:"Hylk"},"fr-FR":{dismiss:"Rejeter"},"he-IL":{dismiss:""},"hr-HR":{dismiss:"Odbaci"},"hu-HU":{dismiss:"Elutasts"},"it-IT":{dismiss:"Ignora"},"ja-JP":{dismiss:""},"ko-KR":{dismiss:""},"lt-LT":{dismiss:"Atmesti"},"lv-LV":{dismiss:"Nerdt"},"nb-NO":{dismiss:"Lukk"},"nl-NL":{dismiss:"Negeren"},"pl-PL":{dismiss:"Zignoruj"},"pt-BR":{dismiss:"Descartar"},"pt-PT":{dismiss:"Dispensar"},"ro-RO":{dismiss:"Revocare"},"ru-RU":{dismiss:""},"sk-SK":{dismiss:"Zrui"},"sl-SI":{dismiss:"Opusti"},"sr-SP":{dismiss:"Odbaci"},"sv-SE":{dismiss:"Avvisa"},"tr-TR":{dismiss:"Kapat"},"uk-UA":{dismiss:""},"zh-CN":{dismiss:""},"zh-TW":{dismiss:""}};/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/b35d5c02fe900badccd0cf1a8f23bb593419f238/packages/@react-aria/i18n/src/utils.ts
 */const zx=new Set(["Avst","Arab","Armi","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),Wx=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function Gx(t){if(Intl.Locale){const n=new Intl.Locale(t).maximize().script??"";return zx.has(n)}const e=t.split("-")[0];return Wx.has(e)}function Yx(t){return Gx(t)?"rtl":"ltr"}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/b35d5c02fe900badccd0cf1a8f23bb593419f238/packages/@react-aria/i18n/src/useDefaultLocale.ts
 */function V0(){let t=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([t])}catch{t="en-US"}return{locale:t,direction:Yx(t)}}let Ku=V0();const Js=new Set;function Jg(){Ku=V0();for(const t of Js)t(Ku)}function Qx(){const[t,e]=G(Ku),n=te(()=>t());return ui(()=>{Js.size===0&&window.addEventListener("languagechange",Jg),Js.add(e),me(()=>{Js.delete(e),Js.size===0&&window.removeEventListener("languagechange",Jg)})}),{locale:()=>n().locale,direction:()=>n().direction}}const Xx=Ue();function tc(){const t=Qx();return Me(Xx)||t}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/b35d5c02fe900badccd0cf1a8f23bb593419f238/packages/@react-aria/i18n/src/useCollator.ts
 */const tu=new Map;function K0(t){const{locale:e}=tc(),n=te(()=>e()+(t?Object.entries(t).sort((i,r)=>i[0]<r[0]?-1:1).join():""));return te(()=>{const i=n();let r;return tu.has(i)&&(r=tu.get(i)),r||(r=new Intl.Collator(e(),t),tu.set(i,r)),r})}var qu=function(t,e){return qu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},qu(t,e)};function nc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qu(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Qe=function(){return Qe=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Qe.apply(this,arguments)};function Jx(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function nu(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var Ve;(function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(Ve||(Ve={}));var pt;(function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"})(pt||(pt={}));var as;(function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"})(as||(as={}));function Zg(t){return t.type===pt.literal}function Zx(t){return t.type===pt.argument}function q0(t){return t.type===pt.number}function z0(t){return t.type===pt.date}function W0(t){return t.type===pt.time}function G0(t){return t.type===pt.select}function Y0(t){return t.type===pt.plural}function eS(t){return t.type===pt.pound}function Q0(t){return t.type===pt.tag}function X0(t){return!!(t&&typeof t=="object"&&t.type===as.number)}function zu(t){return!!(t&&typeof t=="object"&&t.type===as.dateTime)}var J0=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,tS=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function nS(t){var e={};return t.replace(tS,function(n){var i=n.length;switch(n[0]){case"G":e.era=i===4?"long":i===5?"narrow":"short";break;case"y":e.year=i===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][i-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][i-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=i===4?"short":i===5?"narrow":"short";break;case"e":if(i<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][i-4];break;case"c":if(i<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][i-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][i-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][i-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][i-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][i-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][i-1];break;case"s":e.second=["numeric","2-digit"][i-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=i<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var iS=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function rS(t){if(t.length===0)throw new Error("Number skeleton cannot be empty");for(var e=t.split(iS).filter(function(d){return d.length>0}),n=[],i=0,r=e;i<r.length;i++){var s=r[i],o=s.split("/");if(o.length===0)throw new Error("Invalid number skeleton");for(var l=o[0],a=o.slice(1),c=0,u=a;c<u.length;c++){var h=u[c];if(h.length===0)throw new Error("Invalid number skeleton")}n.push({stem:l,options:a})}return n}function sS(t){return t.replace(/^(.*?)-/,"")}var em=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Z0=/^(@+)?(\+|#+)?[rs]?$/g,oS=/(\*)(0+)|(#+)(0+)|(0+)/g,ey=/^(0+)$/;function tm(t){var e={};return t[t.length-1]==="r"?e.roundingPriority="morePrecision":t[t.length-1]==="s"&&(e.roundingPriority="lessPrecision"),t.replace(Z0,function(n,i,r){return typeof r!="string"?(e.minimumSignificantDigits=i.length,e.maximumSignificantDigits=i.length):r==="+"?e.minimumSignificantDigits=i.length:i[0]==="#"?e.maximumSignificantDigits=i.length:(e.minimumSignificantDigits=i.length,e.maximumSignificantDigits=i.length+(typeof r=="string"?r.length:0)),""}),e}function ty(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function aS(t){var e;if(t[0]==="E"&&t[1]==="E"?(e={notation:"engineering"},t=t.slice(2)):t[0]==="E"&&(e={notation:"scientific"},t=t.slice(1)),e){var n=t.slice(0,2);if(n==="+!"?(e.signDisplay="always",t=t.slice(2)):n==="+?"&&(e.signDisplay="exceptZero",t=t.slice(2)),!ey.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function nm(t){var e={},n=ty(t);return n||e}function lS(t){for(var e={},n=0,i=t;n<i.length;n++){var r=i[n];switch(r.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=r.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=sS(r.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=Qe(Qe(Qe({},e),{notation:"scientific"}),r.options.reduce(function(a,c){return Qe(Qe({},a),nm(c))},{}));continue;case"engineering":e=Qe(Qe(Qe({},e),{notation:"engineering"}),r.options.reduce(function(a,c){return Qe(Qe({},a),nm(c))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(r.options[0]);continue;case"integer-width":if(r.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");r.options[0].replace(oS,function(a,c,u,h,d,g){if(c)e.minimumIntegerDigits=u.length;else{if(h&&d)throw new Error("We currently do not support maximum integer digits");if(g)throw new Error("We currently do not support exact integer digits")}return""});continue}if(ey.test(r.stem)){e.minimumIntegerDigits=r.stem.length;continue}if(em.test(r.stem)){if(r.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");r.stem.replace(em,function(a,c,u,h,d,g){return u==="*"?e.minimumFractionDigits=c.length:h&&h[0]==="#"?e.maximumFractionDigits=h.length:d&&g?(e.minimumFractionDigits=d.length,e.maximumFractionDigits=d.length+g.length):(e.minimumFractionDigits=c.length,e.maximumFractionDigits=c.length),""});var s=r.options[0];s==="w"?e=Qe(Qe({},e),{trailingZeroDisplay:"stripIfInteger"}):s&&(e=Qe(Qe({},e),tm(s)));continue}if(Z0.test(r.stem)){e=Qe(Qe({},e),tm(r.stem));continue}var o=ty(r.stem);o&&(e=Qe(Qe({},e),o));var l=aS(r.stem);l&&(e=Qe(Qe({},e),l))}return e}var $a={"001":["H","h"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["H","h","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["H","hB","h","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["H","h","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],CV:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["H","hB","h","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["H","h","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["H","h","hB","hb"],HR:["H","hB"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","h","K"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MW:["h","hb","H","hB"],MX:["H","h","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["H","h","hB","hb"],NL:["H","hB"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["H","hB","h","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["H","h","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["H","h","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TL:["H","hB","hb","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["H","h","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function cS(t,e){for(var n="",i=0;i<t.length;i++){var r=t.charAt(i);if(r==="j"){for(var s=0;i+1<t.length&&t.charAt(i+1)===r;)s++,i++;var o=1+(s&1),l=s<2?1:3+(s>>1),a="a",c=uS(e);for((c=="H"||c=="k")&&(l=0);l-- >0;)n+=a;for(;o-- >0;)n=c+n}else r==="J"?n+="H":n+=r}return n}function uS(t){var e=t.hourCycle;if(e===void 0&&t.hourCycles&&t.hourCycles.length&&(e=t.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n=t.language,i;n!=="root"&&(i=t.maximize().region);var r=$a[i||""]||$a[n||""]||$a["".concat(n,"-001")]||$a["001"];return r[0]}var iu,hS=new RegExp("^".concat(J0.source,"*")),dS=new RegExp("".concat(J0.source,"*$"));function ze(t,e){return{start:t,end:e}}var fS=!!String.prototype.startsWith&&"_a".startsWith("a",1),pS=!!String.fromCodePoint,gS=!!Object.fromEntries,mS=!!String.prototype.codePointAt,bS=!!String.prototype.trimStart,yS=!!String.prototype.trimEnd,vS=!!Number.isSafeInteger,wS=vS?Number.isSafeInteger:function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},Wu=!0;try{var _S=iy("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Wu=((iu=_S.exec("a"))===null||iu===void 0?void 0:iu[0])==="a"}catch{Wu=!1}var im=fS?function(e,n,i){return e.startsWith(n,i)}:function(e,n,i){return e.slice(i,i+n.length)===n},Gu=pS?String.fromCodePoint:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var i="",r=e.length,s=0,o;r>s;){if(o=e[s++],o>1114111)throw RangeError(o+" is not a valid code point");i+=o<65536?String.fromCharCode(o):String.fromCharCode(((o-=65536)>>10)+55296,o%1024+56320)}return i},rm=gS?Object.fromEntries:function(e){for(var n={},i=0,r=e;i<r.length;i++){var s=r[i],o=s[0],l=s[1];n[o]=l}return n},ny=mS?function(e,n){return e.codePointAt(n)}:function(e,n){var i=e.length;if(!(n<0||n>=i)){var r=e.charCodeAt(n),s;return r<55296||r>56319||n+1===i||(s=e.charCodeAt(n+1))<56320||s>57343?r:(r-55296<<10)+(s-56320)+65536}},xS=bS?function(e){return e.trimStart()}:function(e){return e.replace(hS,"")},SS=yS?function(e){return e.trimEnd()}:function(e){return e.replace(dS,"")};function iy(t,e){return new RegExp(t,e)}var Yu;if(Wu){var sm=iy("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Yu=function(e,n){var i;sm.lastIndex=n;var r=sm.exec(e);return(i=r[1])!==null&&i!==void 0?i:""}}else Yu=function(e,n){for(var i=[];;){var r=ny(e,n);if(r===void 0||ry(r)||TS(r))break;i.push(r),n+=r>=65536?2:1}return Gu.apply(void 0,i)};var ES=function(){function t(e,n){n===void 0&&(n={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!n.ignoreTag,this.locale=n.locale,this.requiresOtherClause=!!n.requiresOtherClause,this.shouldParseSkeletons=!!n.shouldParseSkeletons}return t.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(e,n,i){for(var r=[];!this.isEOF();){var s=this.char();if(s===123){var o=this.parseArgument(e,i);if(o.err)return o;r.push(o.val)}else{if(s===125&&e>0)break;if(s===35&&(n==="plural"||n==="selectordinal")){var l=this.clonePosition();this.bump(),r.push({type:pt.pound,location:ze(l,this.clonePosition())})}else if(s===60&&!this.ignoreTag&&this.peek()===47){if(i)break;return this.error(Ve.UNMATCHED_CLOSING_TAG,ze(this.clonePosition(),this.clonePosition()))}else if(s===60&&!this.ignoreTag&&Qu(this.peek()||0)){var o=this.parseTag(e,n);if(o.err)return o;r.push(o.val)}else{var o=this.parseLiteral(e,n);if(o.err)return o;r.push(o.val)}}}return{val:r,err:null}},t.prototype.parseTag=function(e,n){var i=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:pt.literal,value:"<".concat(r,"/>"),location:ze(i,this.clonePosition())},err:null};if(this.bumpIf(">")){var s=this.parseMessage(e+1,n,!0);if(s.err)return s;var o=s.val,l=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Qu(this.char()))return this.error(Ve.INVALID_TAG,ze(l,this.clonePosition()));var a=this.clonePosition(),c=this.parseTagName();return r!==c?this.error(Ve.UNMATCHED_CLOSING_TAG,ze(a,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:pt.tag,value:r,children:o,location:ze(i,this.clonePosition())},err:null}:this.error(Ve.INVALID_TAG,ze(l,this.clonePosition())))}else return this.error(Ve.UNCLOSED_TAG,ze(i,this.clonePosition()))}else return this.error(Ve.INVALID_TAG,ze(i,this.clonePosition()))},t.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&CS(this.char());)this.bump();return this.message.slice(e,this.offset())},t.prototype.parseLiteral=function(e,n){for(var i=this.clonePosition(),r="";;){var s=this.tryParseQuote(n);if(s){r+=s;continue}var o=this.tryParseUnquoted(e,n);if(o){r+=o;continue}var l=this.tryParseLeftAngleBracket();if(l){r+=l;continue}break}var a=ze(i,this.clonePosition());return{val:{type:pt.literal,value:r,location:a},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!$S(this.peek()||0))?(this.bump(),"<"):null},t.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var n=[this.char()];for(this.bump();!this.isEOF();){var i=this.char();if(i===39)if(this.peek()===39)n.push(39),this.bump();else{this.bump();break}else n.push(i);this.bump()}return Gu.apply(void 0,n)},t.prototype.tryParseUnquoted=function(e,n){if(this.isEOF())return null;var i=this.char();return i===60||i===123||i===35&&(n==="plural"||n==="selectordinal")||i===125&&e>0?null:(this.bump(),Gu(i))},t.prototype.parseArgument=function(e,n){var i=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(Ve.EXPECT_ARGUMENT_CLOSING_BRACE,ze(i,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(Ve.EMPTY_ARGUMENT,ze(i,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(Ve.MALFORMED_ARGUMENT,ze(i,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(Ve.EXPECT_ARGUMENT_CLOSING_BRACE,ze(i,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:pt.argument,value:r,location:ze(i,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(Ve.EXPECT_ARGUMENT_CLOSING_BRACE,ze(i,this.clonePosition())):this.parseArgumentOptions(e,n,r,i);default:return this.error(Ve.MALFORMED_ARGUMENT,ze(i,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),n=this.offset(),i=Yu(this.message,n),r=n+i.length;this.bumpTo(r);var s=this.clonePosition(),o=ze(e,s);return{value:i,location:o}},t.prototype.parseArgumentOptions=function(e,n,i,r){var s,o=this.clonePosition(),l=this.parseIdentifierIfPossible().value,a=this.clonePosition();switch(l){case"":return this.error(Ve.EXPECT_ARGUMENT_TYPE,ze(o,a));case"number":case"date":case"time":{this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var u=this.clonePosition(),h=this.parseSimpleArgStyleIfPossible();if(h.err)return h;var d=SS(h.val);if(d.length===0)return this.error(Ve.EXPECT_ARGUMENT_STYLE,ze(this.clonePosition(),this.clonePosition()));var g=ze(u,this.clonePosition());c={style:d,styleLocation:g}}var p=this.tryParseArgumentClose(r);if(p.err)return p;var b=ze(r,this.clonePosition());if(c&&im(c?.style,"::",0)){var $=xS(c.style.slice(2));if(l==="number"){var h=this.parseNumberSkeletonFromString($,c.styleLocation);return h.err?h:{val:{type:pt.number,value:i,location:b,style:h.val},err:null}}else{if($.length===0)return this.error(Ve.EXPECT_DATE_TIME_SKELETON,b);var E=$;this.locale&&(E=cS($,this.locale));var d={type:as.dateTime,pattern:E,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?nS(E):{}},S=l==="date"?pt.date:pt.time;return{val:{type:S,value:i,location:b,style:d},err:null}}}return{val:{type:l==="number"?pt.number:l==="date"?pt.date:pt.time,value:i,location:b,style:(s=c?.style)!==null&&s!==void 0?s:null},err:null}}case"plural":case"selectordinal":case"select":{var m=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(Ve.EXPECT_SELECT_ARGUMENT_OPTIONS,ze(m,Qe({},m)));this.bumpSpace();var x=this.parseIdentifierIfPossible(),_=0;if(l!=="select"&&x.value==="offset"){if(!this.bumpIf(":"))return this.error(Ve.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,ze(this.clonePosition(),this.clonePosition()));this.bumpSpace();var h=this.tryParseDecimalInteger(Ve.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Ve.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(h.err)return h;this.bumpSpace(),x=this.parseIdentifierIfPossible(),_=h.val}var C=this.tryParsePluralOrSelectOptions(e,l,n,x);if(C.err)return C;var p=this.tryParseArgumentClose(r);if(p.err)return p;var w=ze(r,this.clonePosition());return l==="select"?{val:{type:pt.select,value:i,options:rm(C.val),location:w},err:null}:{val:{type:pt.plural,value:i,options:rm(C.val),offset:_,pluralType:l==="plural"?"cardinal":"ordinal",location:w},err:null}}default:return this.error(Ve.INVALID_ARGUMENT_TYPE,ze(o,a))}},t.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(Ve.EXPECT_ARGUMENT_CLOSING_BRACE,ze(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,n=this.clonePosition();!this.isEOF();){var i=this.char();switch(i){case 39:{this.bump();var r=this.clonePosition();if(!this.bumpUntil("'"))return this.error(Ve.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,ze(r,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(n.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(n.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(e,n){var i=[];try{i=rS(e)}catch{return this.error(Ve.INVALID_NUMBER_SKELETON,n)}return{val:{type:as.number,tokens:i,location:n,parsedOptions:this.shouldParseSkeletons?lS(i):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(e,n,i,r){for(var s,o=!1,l=[],a=new Set,c=r.value,u=r.location;;){if(c.length===0){var h=this.clonePosition();if(n!=="select"&&this.bumpIf("=")){var d=this.tryParseDecimalInteger(Ve.EXPECT_PLURAL_ARGUMENT_SELECTOR,Ve.INVALID_PLURAL_ARGUMENT_SELECTOR);if(d.err)return d;u=ze(h,this.clonePosition()),c=this.message.slice(h.offset,this.offset())}else break}if(a.has(c))return this.error(n==="select"?Ve.DUPLICATE_SELECT_ARGUMENT_SELECTOR:Ve.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,u);c==="other"&&(o=!0),this.bumpSpace();var g=this.clonePosition();if(!this.bumpIf("{"))return this.error(n==="select"?Ve.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:Ve.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,ze(this.clonePosition(),this.clonePosition()));var p=this.parseMessage(e+1,n,i);if(p.err)return p;var b=this.tryParseArgumentClose(g);if(b.err)return b;l.push([c,{value:p.val,location:ze(g,this.clonePosition())}]),a.add(c),this.bumpSpace(),s=this.parseIdentifierIfPossible(),c=s.value,u=s.location}return l.length===0?this.error(n==="select"?Ve.EXPECT_SELECT_ARGUMENT_SELECTOR:Ve.EXPECT_PLURAL_ARGUMENT_SELECTOR,ze(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(Ve.MISSING_OTHER_CLAUSE,ze(this.clonePosition(),this.clonePosition())):{val:l,err:null}},t.prototype.tryParseDecimalInteger=function(e,n){var i=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(i=-1);for(var s=!1,o=0;!this.isEOF();){var l=this.char();if(l>=48&&l<=57)s=!0,o=o*10+(l-48),this.bump();else break}var a=ze(r,this.clonePosition());return s?(o*=i,wS(o)?{val:o,err:null}:this.error(n,a)):this.error(e,a)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var n=ny(this.message,e);if(n===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return n},t.prototype.error=function(e,n){return{val:null,err:{kind:e,message:this.message,location:n}}},t.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},t.prototype.bumpIf=function(e){if(im(this.message,e,this.offset())){for(var n=0;n<e.length;n++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(e){var n=this.offset(),i=this.message.indexOf(e,n);return i>=0?(this.bumpTo(i),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var n=this.offset();if(n===e)break;if(n>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&ry(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),n=this.offset(),i=this.message.charCodeAt(n+(e>=65536?2:1));return i??null},t}();function Qu(t){return t>=97&&t<=122||t>=65&&t<=90}function $S(t){return Qu(t)||t===47}function CS(t){return t===45||t===46||t>=48&&t<=57||t===95||t>=97&&t<=122||t>=65&&t<=90||t==183||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function ry(t){return t>=9&&t<=13||t===32||t===133||t>=8206&&t<=8207||t===8232||t===8233}function TS(t){return t>=33&&t<=35||t===36||t>=37&&t<=39||t===40||t===41||t===42||t===43||t===44||t===45||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||t===91||t===92||t===93||t===94||t===96||t===123||t===124||t===125||t===126||t===161||t>=162&&t<=165||t===166||t===167||t===169||t===171||t===172||t===174||t===176||t===177||t===182||t===187||t===191||t===215||t===247||t>=8208&&t<=8213||t>=8214&&t<=8215||t===8216||t===8217||t===8218||t>=8219&&t<=8220||t===8221||t===8222||t===8223||t>=8224&&t<=8231||t>=8240&&t<=8248||t===8249||t===8250||t>=8251&&t<=8254||t>=8257&&t<=8259||t===8260||t===8261||t===8262||t>=8263&&t<=8273||t===8274||t===8275||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||t===8608||t>=8609&&t<=8610||t===8611||t>=8612&&t<=8613||t===8614||t>=8615&&t<=8621||t===8622||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||t===8658||t===8659||t===8660||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||t===8968||t===8969||t===8970||t===8971||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||t===9001||t===9002||t>=9003&&t<=9083||t===9084||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||t===9655||t>=9656&&t<=9664||t===9665||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||t===9839||t>=9840&&t<=10087||t===10088||t===10089||t===10090||t===10091||t===10092||t===10093||t===10094||t===10095||t===10096||t===10097||t===10098||t===10099||t===10100||t===10101||t>=10132&&t<=10175||t>=10176&&t<=10180||t===10181||t===10182||t>=10183&&t<=10213||t===10214||t===10215||t===10216||t===10217||t===10218||t===10219||t===10220||t===10221||t===10222||t===10223||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||t===10627||t===10628||t===10629||t===10630||t===10631||t===10632||t===10633||t===10634||t===10635||t===10636||t===10637||t===10638||t===10639||t===10640||t===10641||t===10642||t===10643||t===10644||t===10645||t===10646||t===10647||t===10648||t>=10649&&t<=10711||t===10712||t===10713||t===10714||t===10715||t>=10716&&t<=10747||t===10748||t===10749||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||t===11158||t>=11159&&t<=11263||t>=11776&&t<=11777||t===11778||t===11779||t===11780||t===11781||t>=11782&&t<=11784||t===11785||t===11786||t===11787||t===11788||t===11789||t>=11790&&t<=11798||t===11799||t>=11800&&t<=11801||t===11802||t===11803||t===11804||t===11805||t>=11806&&t<=11807||t===11808||t===11809||t===11810||t===11811||t===11812||t===11813||t===11814||t===11815||t===11816||t===11817||t>=11818&&t<=11822||t===11823||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||t===11840||t===11841||t===11842||t>=11843&&t<=11855||t>=11856&&t<=11857||t===11858||t>=11859&&t<=11903||t>=12289&&t<=12291||t===12296||t===12297||t===12298||t===12299||t===12300||t===12301||t===12302||t===12303||t===12304||t===12305||t>=12306&&t<=12307||t===12308||t===12309||t===12310||t===12311||t===12312||t===12313||t===12314||t===12315||t===12316||t===12317||t>=12318&&t<=12319||t===12320||t===12336||t===64830||t===64831||t>=65093&&t<=65094}function Xu(t){t.forEach(function(e){if(delete e.location,G0(e)||Y0(e))for(var n in e.options)delete e.options[n].location,Xu(e.options[n].value);else q0(e)&&X0(e.style)||(z0(e)||W0(e))&&zu(e.style)?delete e.style.location:Q0(e)&&Xu(e.children)})}function kS(t,e){e===void 0&&(e={}),e=Qe({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var n=new ES(t,e).parse();if(n.err){var i=SyntaxError(Ve[n.err.kind]);throw i.location=n.err.location,i.originalMessage=n.err.message,i}return e?.captureLocation||Xu(n.val),n.val}function ru(t,e){var n=e&&e.cache?e.cache:RS,i=e&&e.serializer?e.serializer:IS,r=e&&e.strategy?e.strategy:AS;return r(t,{cache:n,serializer:i})}function PS(t){return t==null||typeof t=="number"||typeof t=="boolean"}function sy(t,e,n,i){var r=PS(i)?i:n(i),s=e.get(r);return typeof s>"u"&&(s=t.call(this,i),e.set(r,s)),s}function oy(t,e,n){var i=Array.prototype.slice.call(arguments,3),r=n(i),s=e.get(r);return typeof s>"u"&&(s=t.apply(this,i),e.set(r,s)),s}function zd(t,e,n,i,r){return n.bind(e,t,i,r)}function AS(t,e){var n=t.length===1?sy:oy;return zd(t,this,n,e.cache.create(),e.serializer)}function OS(t,e){return zd(t,this,oy,e.cache.create(),e.serializer)}function DS(t,e){return zd(t,this,sy,e.cache.create(),e.serializer)}var IS=function(){return JSON.stringify(arguments)};function Wd(){this.cache=Object.create(null)}Wd.prototype.get=function(t){return this.cache[t]};Wd.prototype.set=function(t,e){this.cache[t]=e};var RS={create:function(){return new Wd}},su={variadic:OS,monadic:DS},ls;(function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"})(ls||(ls={}));var ic=function(t){nc(e,t);function e(n,i,r){var s=t.call(this,n)||this;return s.code=i,s.originalMessage=r,s}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),om=function(t){nc(e,t);function e(n,i,r,s){return t.call(this,'Invalid values for "'.concat(n,'": "').concat(i,'". Options are "').concat(Object.keys(r).join('", "'),'"'),ls.INVALID_VALUE,s)||this}return e}(ic),LS=function(t){nc(e,t);function e(n,i,r){return t.call(this,'Value for "'.concat(n,'" must be of type ').concat(i),ls.INVALID_VALUE,r)||this}return e}(ic),MS=function(t){nc(e,t);function e(n,i){return t.call(this,'The intl string context variable "'.concat(n,'" was not provided to the string "').concat(i,'"'),ls.MISSING_VALUE,i)||this}return e}(ic),Jt;(function(t){t[t.literal=0]="literal",t[t.object=1]="object"})(Jt||(Jt={}));function NS(t){return t.length<2?t:t.reduce(function(e,n){var i=e[e.length-1];return!i||i.type!==Jt.literal||n.type!==Jt.literal?e.push(n):i.value+=n.value,e},[])}function FS(t){return typeof t=="function"}function Fa(t,e,n,i,r,s,o){if(t.length===1&&Zg(t[0]))return[{type:Jt.literal,value:t[0].value}];for(var l=[],a=0,c=t;a<c.length;a++){var u=c[a];if(Zg(u)){l.push({type:Jt.literal,value:u.value});continue}if(eS(u)){typeof s=="number"&&l.push({type:Jt.literal,value:n.getNumberFormat(e).format(s)});continue}var h=u.value;if(!(r&&h in r))throw new MS(h,o);var d=r[h];if(Zx(u)){(!d||typeof d=="string"||typeof d=="number")&&(d=typeof d=="string"||typeof d=="number"?String(d):""),l.push({type:typeof d=="string"?Jt.literal:Jt.object,value:d});continue}if(z0(u)){var g=typeof u.style=="string"?i.date[u.style]:zu(u.style)?u.style.parsedOptions:void 0;l.push({type:Jt.literal,value:n.getDateTimeFormat(e,g).format(d)});continue}if(W0(u)){var g=typeof u.style=="string"?i.time[u.style]:zu(u.style)?u.style.parsedOptions:i.time.medium;l.push({type:Jt.literal,value:n.getDateTimeFormat(e,g).format(d)});continue}if(q0(u)){var g=typeof u.style=="string"?i.number[u.style]:X0(u.style)?u.style.parsedOptions:void 0;g&&g.scale&&(d=d*(g.scale||1)),l.push({type:Jt.literal,value:n.getNumberFormat(e,g).format(d)});continue}if(Q0(u)){var p=u.children,b=u.value,$=r[b];if(!FS($))throw new LS(b,"function",o);var E=Fa(p,e,n,i,r,s),S=$(E.map(function(_){return _.value}));Array.isArray(S)||(S=[S]),l.push.apply(l,S.map(function(_){return{type:typeof _=="string"?Jt.literal:Jt.object,value:_}}))}if(G0(u)){var m=u.options[d]||u.options.other;if(!m)throw new om(u.value,d,Object.keys(u.options),o);l.push.apply(l,Fa(m.value,e,n,i,r));continue}if(Y0(u)){var m=u.options["=".concat(d)];if(!m){if(!Intl.PluralRules)throw new ic(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,ls.MISSING_INTL_API,o);var x=n.getPluralRules(e,{type:u.pluralType}).select(d-(u.offset||0));m=u.options[x]||u.options.other}if(!m)throw new om(u.value,d,Object.keys(u.options),o);l.push.apply(l,Fa(m.value,e,n,i,r,d-(u.offset||0)));continue}}return NS(l)}function BS(t,e){return e?Qe(Qe(Qe({},t||{}),e||{}),Object.keys(t).reduce(function(n,i){return n[i]=Qe(Qe({},t[i]),e[i]||{}),n},{})):t}function US(t,e){return e?Object.keys(t).reduce(function(n,i){return n[i]=BS(t[i],e[i]),n},Qe({},t)):t}function ou(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}function jS(t){return t===void 0&&(t={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:ru(function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return new((e=Intl.NumberFormat).bind.apply(e,nu([void 0],n,!1)))},{cache:ou(t.number),strategy:su.variadic}),getDateTimeFormat:ru(function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return new((e=Intl.DateTimeFormat).bind.apply(e,nu([void 0],n,!1)))},{cache:ou(t.dateTime),strategy:su.variadic}),getPluralRules:ru(function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return new((e=Intl.PluralRules).bind.apply(e,nu([void 0],n,!1)))},{cache:ou(t.pluralRules),strategy:su.variadic})}}var HS=function(){function t(e,n,i,r){n===void 0&&(n=t.defaultLocale);var s=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(a){var c=s.formatToParts(a);if(c.length===1)return c[0].value;var u=c.reduce(function(h,d){return!h.length||d.type!==Jt.literal||typeof h[h.length-1]!="string"?h.push(d.value):h[h.length-1]+=d.value,h},[]);return u.length<=1?u[0]||"":u},this.formatToParts=function(a){return Fa(s.ast,s.locales,s.formatters,s.formats,a,void 0,s.message)},this.resolvedOptions=function(){var a;return{locale:((a=s.resolvedLocale)===null||a===void 0?void 0:a.toString())||Intl.NumberFormat.supportedLocalesOf(s.locales)[0]}},this.getAst=function(){return s.ast},this.locales=n,this.resolvedLocale=t.resolveLocale(n),typeof e=="string"){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var o=r||{};o.formatters;var l=Jx(o,["formatters"]);this.ast=t.__parse(e,Qe(Qe({},l),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=US(t.formats,i),this.formatters=r&&r.formatters||jS(this.formatterCache)}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.resolveLocale=function(e){if(!(typeof Intl.Locale>"u")){var n=Intl.NumberFormat.supportedLocalesOf(e);return n.length>0?new Intl.Locale(n[0]):new Intl.Locale(typeof e=="string"?e:e[0])}},t.__parse=kS,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}();class VS{getStringForLocale(e,n){let i=this.messages[n];i||(i=KS(n,this.messages,this.defaultLocale),this.messages[n]=i);let r=i[e];if(!r)throw new Error(`Could not find intl message ${e} in ${n} locale`);return r}constructor(e,n="en-US"){this.messages={...e},this.defaultLocale=n}}function KS(t,e,n="en-US"){if(e[t])return e[t];let i=qS(t);if(e[i])return e[i];for(let r in e)if(r.startsWith(i+"-"))return e[r];return e[n]}function qS(t){return Intl.Locale?new Intl.Locale(t).language:t.split("-")[0]}class zS{format(e,n){let i=this.cache[e];if(!i){let s=this.messages.getStringForLocale(e,this.locale);if(!s)throw new Error(`Could not find intl message ${e} in ${this.locale} locale`);i=new HS(s,this.locale),this.cache[e]=i}let r;return n&&(r=Object.keys(n).reduce((s,o)=>(s[o]=n[o]==null?!1:n[o],s),{})),i.format(r)}constructor(e,n){this.locale=e,this.messages=n,this.cache={}}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/23c3a91e7b87952f07da9da115188bd2abd99d77/packages/@react-aria/i18n/src/useMessageFormatter.ts
 */const am=new WeakMap;function WS(t){let e=am.get(t);return e||(e=new VS(t),am.set(t,e)),e}function Gd(t){const{locale:e}=tc(),n=te(()=>new zS(e(),WS(K(t))));return te(()=>({format:(i,r)=>n().format(i,r)}))}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/selection/src/Selection.ts
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/selection/src/types.ts
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-types/shared/src/selection.d.ts
 */class kn extends Set{anchorKey;currentKey;constructor(e,n,i){super(e),e instanceof kn?(this.anchorKey=n||e.anchorKey,this.currentKey=i||e.currentKey):(this.anchorKey=n,this.currentKey=i)}}function GS(t){const[e,n]=Yo(t);return[()=>e()??new kn,n]}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/utils.ts
 */function ay(t){return sx()?t.altKey:t.ctrlKey}function Wr(t){return Go()?t.metaKey:t.ctrlKey}function lm(t){return new kn(t)}function YS(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/selection/src/useMultipleSelectionState.ts
 */function QS(t){t=$e({selectionMode:"none",selectionBehavior:"toggle"},t);const[e,n]=G(!1),[i,r]=G(),s=te(()=>{const p=K(t.selectedKeys);return p!=null?lm(p):p}),o=te(()=>{const p=K(t.defaultSelectedKeys);return p!=null?lm(p):new kn}),[l,a]=GS({value:s,defaultValue:o,onChange:p=>t.onSelectionChange?.(p)}),[c,u]=G(K(t.selectionBehavior)),h=()=>K(t.selectionMode),d=()=>K(t.disallowEmptySelection)??!1,g=p=>{(K(t.allowDuplicateSelectionEvents)||!YS(p,l()))&&a(p)};return ne(()=>{const p=l();K(t.selectionBehavior)==="replace"&&c()==="toggle"&&typeof p=="object"&&p.size===0&&u("replace")}),ne(()=>{u(K(t.selectionBehavior)??"toggle")}),{selectionMode:h,disallowEmptySelection:d,selectionBehavior:c,setSelectionBehavior:u,isFocused:e,setFocused:n,focusedKey:i,setFocusedKey:r,selectedKeys:l,setSelectedKeys:g}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/useTypeSelect.ts
 */function ly(t){const[e,n]=G(""),[i,r]=G(-1);return{typeSelectHandlers:{onKeyDown:o=>{if(K(t.isDisabled))return;const l=K(t.keyboardDelegate),a=K(t.selectionManager);if(!l.getKeyForSearch)return;const c=XS(o.key);if(!c||o.ctrlKey||o.metaKey)return;c===" "&&e().trim().length>0&&(o.preventDefault(),o.stopPropagation());let u=n(d=>d+=c),h=l.getKeyForSearch(u,a.focusedKey())??l.getKeyForSearch(u);h==null&&JS(u)&&(u=u[0],h=l.getKeyForSearch(u,a.focusedKey())??l.getKeyForSearch(u)),h!=null&&(a.setFocusedKey(h),t.onTypeSelect?.(h)),clearTimeout(i()),r(window.setTimeout(()=>n(""),500))}}}}function XS(t){return t.length===1||!/^[A-Z]/i.test(t)?t:""}function JS(t){return t.split("").every(e=>e===t[0])}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/useSelectableCollection.ts
 */function ZS(t,e,n){t=pe({selectOnFocus:()=>K(t.selectionManager).selectionBehavior()==="replace"},t);const r=()=>n?.()??e(),{direction:s}=tc();let o={top:0,left:0};W2(()=>K(t.isVirtualized)?void 0:r(),"scroll",()=>{const p=r();p&&(o={top:p.scrollTop,left:p.scrollLeft})});const{typeSelectHandlers:l}=ly({isDisabled:()=>K(t.disallowTypeAhead),keyboardDelegate:()=>K(t.keyboardDelegate),selectionManager:()=>K(t.selectionManager)}),a=p=>{Ie(p,l.onKeyDown),p.altKey&&p.key==="Tab"&&p.preventDefault();const b=e();if(!b?.contains(p.target))return;const $=K(t.selectionManager),E=K(t.selectOnFocus),S=C=>{C!=null&&($.setFocusedKey(C),p.shiftKey&&$.selectionMode()==="multiple"?$.extendSelection(C):E&&!ay(p)&&$.replaceSelection(C))},m=K(t.keyboardDelegate),x=K(t.shouldFocusWrap),_=$.focusedKey();switch(p.key){case"ArrowDown":{if(m.getKeyBelow){p.preventDefault();let C;_!=null?C=m.getKeyBelow(_):C=m.getFirstKey?.(),C==null&&x&&(C=m.getFirstKey?.(_)),S(C)}break}case"ArrowUp":{if(m.getKeyAbove){p.preventDefault();let C;_!=null?C=m.getKeyAbove(_):C=m.getLastKey?.(),C==null&&x&&(C=m.getLastKey?.(_)),S(C)}break}case"ArrowLeft":{if(m.getKeyLeftOf){p.preventDefault();const C=s()==="rtl";let w;_!=null?w=m.getKeyLeftOf(_):w=C?m.getFirstKey?.():m.getLastKey?.(),S(w)}break}case"ArrowRight":{if(m.getKeyRightOf){p.preventDefault();const C=s()==="rtl";let w;_!=null?w=m.getKeyRightOf(_):w=C?m.getLastKey?.():m.getFirstKey?.(),S(w)}break}case"Home":if(m.getFirstKey){p.preventDefault();const C=m.getFirstKey(_,Wr(p));C!=null&&($.setFocusedKey(C),Wr(p)&&p.shiftKey&&$.selectionMode()==="multiple"?$.extendSelection(C):E&&$.replaceSelection(C))}break;case"End":if(m.getLastKey){p.preventDefault();const C=m.getLastKey(_,Wr(p));C!=null&&($.setFocusedKey(C),Wr(p)&&p.shiftKey&&$.selectionMode()==="multiple"?$.extendSelection(C):E&&$.replaceSelection(C))}break;case"PageDown":if(m.getKeyPageBelow&&_!=null){p.preventDefault();const C=m.getKeyPageBelow(_);S(C)}break;case"PageUp":if(m.getKeyPageAbove&&_!=null){p.preventDefault();const C=m.getKeyPageAbove(_);S(C)}break;case"a":Wr(p)&&$.selectionMode()==="multiple"&&K(t.disallowSelectAll)!==!0&&(p.preventDefault(),$.selectAll());break;case"Escape":p.defaultPrevented||(p.preventDefault(),K(t.disallowEmptySelection)||$.clearSelection());break;case"Tab":if(!K(t.allowsTabNavigation)){if(p.shiftKey)b.focus();else{const C=yx(b,{tabbable:!0});let w,k;do k=C.lastChild(),k&&(w=k);while(k);w&&!w.contains(document.activeElement)&&St(w)}break}}},c=p=>{const b=K(t.selectionManager),$=K(t.keyboardDelegate),E=K(t.selectOnFocus);if(b.isFocused()){p.currentTarget.contains(p.target)||b.setFocused(!1);return}if(p.currentTarget.contains(p.target)){if(b.setFocused(!0),b.focusedKey()==null){const S=x=>{x!=null&&(b.setFocusedKey(x),E&&b.replaceSelection(x))},m=p.relatedTarget;m&&p.currentTarget.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_FOLLOWING?S(b.lastSelectedKey()??$.getLastKey?.()):S(b.firstSelectedKey()??$.getFirstKey?.())}else if(!K(t.isVirtualized)){const S=r();if(S){S.scrollTop=o.top,S.scrollLeft=o.left;const m=S.querySelector(`[data-key="${b.focusedKey()}"]`);m&&(St(m),jg(S,m))}}}},u=p=>{const b=K(t.selectionManager);p.currentTarget.contains(p.relatedTarget)||b.setFocused(!1)},h=p=>{r()===p.target&&p.preventDefault()},d=()=>{const p=K(t.autoFocus);if(!p)return;const b=K(t.selectionManager),$=K(t.keyboardDelegate);let E;p==="first"&&(E=$.getFirstKey?.()),p==="last"&&(E=$.getLastKey?.());const S=b.selectedKeys();S.size&&(E=S.values().next().value),b.setFocused(!0),b.setFocusedKey(E);const m=e();m&&E==null&&!K(t.shouldUseVirtualFocus)&&St(m)};return ui(()=>{t.deferAutoFocus?setTimeout(d,0):d()}),ne(Vt([r,()=>K(t.isVirtualized),()=>K(t.selectionManager).focusedKey()],p=>{const[b,$,E]=p;if($)E&&t.scrollToKey?.(E);else if(E&&b){const S=b.querySelector(`[data-key="${E}"]`);S&&jg(b,S)}})),{tabIndex:te(()=>{if(!K(t.shouldUseVirtualFocus))return K(t.selectionManager).focusedKey()==null?0:-1}),onKeyDown:a,onMouseDown:h,onFocusIn:c,onFocusOut:u}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/useSelectableItem.ts
 */function cy(t,e){const n=()=>K(t.selectionManager),i=()=>K(t.key),r=()=>K(t.shouldUseVirtualFocus),s=S=>{n().selectionMode()!=="none"&&(n().selectionMode()==="single"?n().isSelected(i())&&!n().disallowEmptySelection()?n().toggleSelection(i()):n().replaceSelection(i()):S&&S.shiftKey?n().extendSelection(i()):n().selectionBehavior()==="toggle"||Wr(S)||"pointerType"in S&&S.pointerType==="touch"?n().toggleSelection(i()):n().replaceSelection(i()))},o=()=>n().isSelected(i()),l=()=>K(t.disabled)||n().isDisabled(i()),a=()=>!l()&&n().canSelectItem(i());let c=null;const u=S=>{a()&&(c=S.pointerType,S.pointerType==="mouse"&&S.button===0&&!K(t.shouldSelectOnPressUp)&&s(S))},h=S=>{a()&&S.pointerType==="mouse"&&S.button===0&&K(t.shouldSelectOnPressUp)&&K(t.allowsDifferentPressOrigin)&&s(S)},d=S=>{a()&&(K(t.shouldSelectOnPressUp)&&!K(t.allowsDifferentPressOrigin)||c!=="mouse")&&s(S)},g=S=>{!a()||!["Enter"," "].includes(S.key)||(ay(S)?n().toggleSelection(i()):s(S))},p=S=>{l()&&S.preventDefault()},b=S=>{const m=e();r()||l()||!m||S.target===m&&n().setFocusedKey(i())},$=te(()=>{if(!(r()||l()))return i()===n().focusedKey()?0:-1}),E=te(()=>K(t.virtualized)?void 0:i());return ne(Vt([e,i,r,()=>n().focusedKey(),()=>n().isFocused()],([S,m,x,_,C])=>{S&&m===_&&C&&!x&&document.activeElement!==S&&(t.focus?t.focus():St(S))})),{isSelected:o,isDisabled:l,allowsSelection:a,tabIndex:$,dataKey:E,onPointerDown:u,onPointerUp:h,onClick:d,onKeyDown:g,onMouseDown:p,onFocus:b}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/selection/src/SelectionManager.ts
 */class eE{collection;state;constructor(e,n){this.collection=e,this.state=n}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}isFocused(){return this.state.isFocused()}setFocused(e){this.state.setFocused(e)}focusedKey(){return this.state.focusedKey()}setFocusedKey(e){(e==null||this.collection().getItem(e))&&this.state.setFocusedKey(e)}selectedKeys(){return this.state.selectedKeys()}isSelected(e){if(this.state.selectionMode()==="none")return!1;const n=this.getKey(e);return n==null?!1:this.state.selectedKeys().has(n)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;const e=this.state.selectedKeys();return this.getAllSelectableKeys().every(n=>e.has(n))}firstSelectedKey(){let e;for(const n of this.state.selectedKeys()){const i=this.collection().getItem(n),r=i?.index!=null&&e?.index!=null&&i.index<e.index;(!e||r)&&(e=i)}return e?.key}lastSelectedKey(){let e;for(const n of this.state.selectedKeys()){const i=this.collection().getItem(n),r=i?.index!=null&&e?.index!=null&&i.index>e.index;(!e||r)&&(e=i)}return e?.key}extendSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(e);return}const n=this.getKey(e);if(n==null)return;const i=this.state.selectedKeys(),r=i.anchorKey||n,s=new kn(i,r,n);for(const o of this.getKeyRange(r,i.currentKey||n))s.delete(o);for(const o of this.getKeyRange(n,r))this.canSelectItem(o)&&s.add(o);this.state.setSelectedKeys(s)}getKeyRange(e,n){const i=this.collection().getItem(e),r=this.collection().getItem(n);return i&&r?i.index!=null&&r.index!=null&&i.index<=r.index?this.getKeyRangeInternal(e,n):this.getKeyRangeInternal(n,e):[]}getKeyRangeInternal(e,n){const i=[];let r=e;for(;r!=null;){const s=this.collection().getItem(r);if(s&&s.type==="item"&&i.push(r),r===n)return i;r=this.collection().getKeyAfter(r)}return[]}getKey(e){const n=this.collection().getItem(e);return n?!n||n.type!=="item"?null:n.key:e}toggleSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}const n=this.getKey(e);if(n==null)return;const i=new kn(this.state.selectedKeys());i.has(n)?i.delete(n):this.canSelectItem(n)&&(i.add(n),i.anchorKey=n,i.currentKey=n),!(this.disallowEmptySelection()&&i.size===0)&&this.state.setSelectedKeys(i)}replaceSelection(e){if(this.selectionMode()==="none")return;const n=this.getKey(e);if(n==null)return;const i=this.canSelectItem(n)?new kn([n],n,n):new kn;this.state.setSelectedKeys(i)}setSelectedKeys(e){if(this.selectionMode()==="none")return;const n=new kn;for(const i of e){const r=this.getKey(i);if(r!=null&&(n.add(r),this.selectionMode()==="single"))break}this.state.setSelectedKeys(n)}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){const e=this.state.selectedKeys();!this.disallowEmptySelection()&&e.size>0&&this.state.setSelectedKeys(new kn)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(e,n){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(e)&&!this.disallowEmptySelection()?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior()==="toggle"||n&&n.pointerType==="touch"?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys())return!0;const n=this.selectedKeys();if(e.size!==n.size)return!1;for(const i of e)if(!n.has(i))return!1;for(const i of n)if(!e.has(i))return!1;return!0}canSelectItem(e){if(this.state.selectionMode()==="none")return!1;const n=this.collection().getItem(e);return n!=null&&!n.disabled}isDisabled(e){const n=this.collection().getItem(e);return!n||n.disabled}getAllSelectableKeys(){const e=[];return(i=>{for(;i!=null;){if(this.canSelectItem(i)){const r=this.collection().getItem(i);if(!r)continue;r.type==="item"&&e.push(i)}i=this.collection().getKeyAfter(i)}})(this.collection().getFirstKey()),e}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/list/src/ListCollection.ts
 */class cm{keyMap=new Map;iterable;firstKey;lastKey;constructor(e){this.iterable=e;for(const r of e)this.keyMap.set(r.key,r);if(this.keyMap.size===0)return;let n,i=0;for(const[r,s]of this.keyMap)n?(n.nextKey=r,s.prevKey=n.key):(this.firstKey=r,s.prevKey=void 0),s.type==="item"&&(s.index=i++),n=s,n.nextKey=void 0;this.lastKey=n.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){return this.keyMap.get(e)?.prevKey}getKeyAfter(e){return this.keyMap.get(e)?.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const n=[...this.getKeys()];return this.getItem(n[e])}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/list/src/useListState.ts
 */function Yd(t){const e=QS(t),i=xx({dataSource:()=>K(t.dataSource),getKey:()=>K(t.getKey),getTextValue:()=>K(t.getTextValue),getDisabled:()=>K(t.getDisabled),getSectionChildren:()=>K(t.getSectionChildren),factory:s=>t.filter?new cm(t.filter(s)):new cm(s)},[()=>t.filter]),r=new eE(i,e);return br(()=>{const s=e.focusedKey();s!=null&&!i().getItem(s)&&e.setFocusedKey(void 0)}),{collection:i,selectionManager:()=>r}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/ListKeyboardDelegate.ts
 */class uy{collection;ref;collator;constructor(e,n,i){this.collection=e,this.ref=n,this.collator=i}getKeyBelow(e){let n=this.collection().getKeyAfter(e);for(;n!=null;){const i=this.collection().getItem(n);if(i&&i.type==="item"&&!i.disabled)return n;n=this.collection().getKeyAfter(n)}}getKeyAbove(e){let n=this.collection().getKeyBefore(e);for(;n!=null;){const i=this.collection().getItem(n);if(i&&i.type==="item"&&!i.disabled)return n;n=this.collection().getKeyBefore(n)}}getFirstKey(){let e=this.collection().getFirstKey();for(;e!=null;){const n=this.collection().getItem(e);if(n&&n.type==="item"&&!n.disabled)return e;e=this.collection().getKeyAfter(e)}}getLastKey(){let e=this.collection().getLastKey();for(;e!=null;){const n=this.collection().getItem(e);if(n&&n.type==="item"&&!n.disabled)return e;e=this.collection().getKeyBefore(e)}}getItem(e){return this.ref?.()?.querySelector(`[data-key="${e}"]`)??null}getKeyPageAbove(e){const n=this.ref?.();let i=this.getItem(e);if(!n||!i)return;const r=Math.max(0,i.offsetTop+i.offsetHeight-n.offsetHeight);let s=e;for(;s&&i&&i.offsetTop>r;)s=this.getKeyAbove(s),i=s!=null?this.getItem(s):null;return s}getKeyPageBelow(e){const n=this.ref?.();let i=this.getItem(e);if(!n||!i)return;const r=Math.min(n.scrollHeight,i.offsetTop-i.offsetHeight+n.offsetHeight);let s=e;for(;s&&i&&i.offsetTop<r;)s=this.getKeyBelow(s),i=s!=null?this.getItem(s):null;return s}getKeyForSearch(e,n){const i=this.collator?.();if(!i)return;let r=n!=null?this.getKeyBelow(n):this.getFirstKey();for(;r!=null;){const s=this.collection().getItem(r);if(s){const o=s.textValue.slice(0,e.length);if(s.textValue&&i.compare(o,e)===0)return r}r=this.getKeyBelow(r)}}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/useSelectableList.ts
 */function hy(t,e,n){const i=K0({usage:"search",sensitivity:"base"}),r=te(()=>{const s=K(t.keyboardDelegate);return s||new uy(t.collection,e,i)});return ZS({selectionManager:()=>K(t.selectionManager),keyboardDelegate:r,autoFocus:()=>K(t.autoFocus),deferAutoFocus:()=>K(t.deferAutoFocus),shouldFocusWrap:()=>K(t.shouldFocusWrap),disallowEmptySelection:()=>K(t.disallowEmptySelection),selectOnFocus:()=>K(t.selectOnFocus),disallowTypeAhead:()=>K(t.disallowTypeAhead),shouldUseVirtualFocus:()=>K(t.shouldUseVirtualFocus),allowsTabNavigation:()=>K(t.allowsTabNavigation),isVirtualized:()=>K(t.isVirtualized),scrollToKey:s=>K(t.scrollToKey)?.(s)},e,n)}const[Qd,Qo]=hi({toasts:[]});function tE(t){Qo("toasts",e=>[...e,t])}function nE(t){return Qd.toasts.find(e=>e.id===t)}function iE(t,e){const n=Qd.toasts.findIndex(i=>i.id===t);n!=-1&&Qo("toasts",i=>[...i.slice(0,n),e,...i.slice(n+1)])}function rE(t){Qo("toasts",e=>e.id===t,"dismiss",!0)}function sE(t){Qo("toasts",e=>e.filter(n=>n.id!==t))}function oE(){Qo("toasts",[])}const wr={toasts:()=>Qd.toasts,add:tE,get:nE,update:iE,dismiss:rE,remove:sE,clear:oE};let aE=0;function dy(t,e){const n=aE++;return wr.add({id:n,toastComponent:t,dismiss:!1,update:!1,region:e?.region}),n}function Ju(t,e){wr.update(t,{id:t,toastComponent:e,dismiss:!1,update:!0})}function lE(t,e,n){const i=dy(r=>e({get toastId(){return r.toastId},state:"pending"}),n);return(Wo(t)?t():t).then(r=>Ju(i,s=>e({get toastId(){return s.toastId},state:"fulfilled",data:r}))).catch(r=>Ju(i,s=>e({get toastId(){return s.toastId},state:"rejected",error:r}))),i}function cE(t){return wr.dismiss(t),t}function uE(){wr.clear()}const As={show:dy,update:Ju,promise:lE,dismiss:cE,clear:uE};/*!
 * Portions of this file are based on code from ariakit
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the ariakit team:
 * https://github.com/hope-ui/hope-ui/blob/54125b130195f37161dbeeea0c21dc3b198bc3ac/packages/core/src/button/is-button.ts
 */const hE=["button","color","file","image","reset","submit"];function dE(t){const e=t.tagName.toLowerCase();return e==="button"?!0:e==="input"&&t.type?hE.indexOf(t.type)!==-1:!1}function Ir(t){let e;t=$e({type:"button"},t);const[n,i]=we(t,["ref","type","disabled"]),r=N0(()=>e,()=>"button"),s=te(()=>{const a=r();return a==null?!1:dE({tagName:a,type:n.type})}),o=te(()=>r()==="input"),l=te(()=>r()==="a"&&e?.getAttribute("href")!=null);return v(ot,pe({as:"button",ref(a){const c=vt(u=>e=u,n.ref);typeof c=="function"&&c(a)},get type(){return s()||o()?n.type:void 0},get role(){return!s()&&!l()?"button":void 0},get tabIndex(){return!s()&&!l()&&!n.disabled?0:void 0},get disabled(){return s()||o()?n.disabled:void 0},get"aria-disabled"(){return!s()&&!o()&&n.disabled?!0:void 0},get"data-disabled"(){return n.disabled?"":void 0}},i))}const fy=Ue();function py(){return Me(fy)}function fE(){const t=py();if(t===void 0)throw new Error("[kobalte]: `useDomCollectionContext` must be used within a `DomCollectionProvider` component");return t}/*!
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the Ariakit team:
 * https://github.com/ariakit/ariakit/blob/da142672eddefa99365773ced72171facc06fdcb/packages/ariakit/src/collection/collection-state.ts
 */function gy(t,e){return!!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING)}function pE(t,e){const n=e.ref();if(!n)return-1;let i=t.length;if(!i)return-1;for(;i--;){const r=t[i]?.ref();if(r&&gy(r,n))return i+1}return 0}function gE(t){const e=t.map((i,r)=>[r,i]);let n=!1;return e.sort(([i,r],[s,o])=>{const l=r.ref(),a=o.ref();return l===a||!l||!a?0:gy(l,a)?(i>s&&(n=!0),-1):(i<s&&(n=!0),1)}),n?e.map(([i,r])=>r):t}function my(t,e){const n=gE(t);t!==n&&e(n)}function mE(t){const e=t[0],n=t[t.length-1]?.ref();let i=e?.ref()?.parentElement;for(;i;){if(n&&i.contains(n))return i;i=i.parentElement}return Qt(i).body}function bE(t,e){ne(()=>{const n=setTimeout(()=>{my(t(),e)});me(()=>clearTimeout(n))})}function yE(t,e){if(typeof IntersectionObserver!="function"){bE(t,e);return}let n=[];ne(()=>{const i=()=>{const o=!!n.length;n=t(),o&&my(t(),e)},r=mE(t()),s=new IntersectionObserver(i,{root:r});t().forEach(o=>{const l=o.ref();l&&s.observe(l)}),me(()=>s.disconnect())})}/*!
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the Ariakit team:
 * https://github.com/ariakit/ariakit/blob/da142672eddefa99365773ced72171facc06fdcb/packages/ariakit/src/collection/collection.tsx
 * https://github.com/ariakit/ariakit/blob/da142672eddefa99365773ced72171facc06fdcb/packages/ariakit/src/collection/collection-state.ts
 * https://github.com/ariakit/ariakit/blob/da142672eddefa99365773ced72171facc06fdcb/packages/ariakit/src/collection/collection-item.ts
 */function vE(t={}){const[e,n]=Ex({value:()=>K(t.items),onChange:s=>t.onItemsChange?.(s)});yE(e,n);const i=s=>(n(o=>{const l=pE(o,s);return ex(o,s,l)}),()=>{n(o=>{const l=o.filter(a=>a.ref()!==s.ref());return o.length===l.length?o:l})});return{DomCollectionProvider:s=>v(fy.Provider,{value:{registerItem:i},get children(){return s.children}})}}function wE(t){const e=fE();t=$e({shouldRegisterItem:!0},t),ne(()=>{if(!t.shouldRegisterItem)return;const n=e.registerItem(t.getItem());me(n)})}const by=Ue();function Os(){const t=Me(by);if(t===void 0)throw new Error("[kobalte]: `useDialogContext` must be used within a `Dialog` component");return t}function _E(t){const e=Os(),[n,i]=we(t,["aria-label","onClick"]),r=Gd(()=>qx);return v(Ir,pe({get"aria-label"(){return n["aria-label"]||r().format("dismiss")},onClick:o=>{Ie(o,n.onClick),e.close()}},i))}const yy=Ue();function xE(){return Me(yy)}function Xo(t){let e;const n=xE(),[i,r]=we(t,["ref","disableOutsidePointerEvents","excludedElements","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","bypassTopMostLayerCheck"]),s=new Set([]),o=h=>{s.add(h);const d=n?.registerNestedLayer(h);return()=>{s.delete(h),d?.()}};Fx({shouldExcludeElement:h=>e?i.excludedElements?.some(d=>Kt(d(),h))||[...s].some(d=>Kt(d,h)):!1,onPointerDownOutside:h=>{!e||un.isBelowPointerBlockingLayer(e)||!i.bypassTopMostLayerCheck&&!un.isTopMostLayer(e)||(i.onPointerDownOutside?.(h),i.onInteractOutside?.(h),h.defaultPrevented||i.onDismiss?.())},onFocusOutside:h=>{i.onFocusOutside?.(h),i.onInteractOutside?.(h),h.defaultPrevented||i.onDismiss?.()}},()=>e),$x({ownerDocument:()=>Qt(e),onEscapeKeyDown:h=>{!e||!un.isTopMostLayer(e)||(i.onEscapeKeyDown?.(h),!h.defaultPrevented&&i.onDismiss&&(h.preventDefault(),i.onDismiss()))}}),ui(()=>{if(!e)return;un.addLayer({node:e,isPointerBlocking:i.disableOutsidePointerEvents,dismiss:i.onDismiss});const h=n?.registerNestedLayer(e);un.assignPointerEventToLayers(),un.disableBodyPointerEvents(e),me(()=>{e&&(un.removeLayer(e),h?.(),un.assignPointerEventToLayers(),un.restoreBodyPointerEvents(e))})}),ne(Vt([()=>e,()=>i.disableOutsidePointerEvents],([h,d])=>{if(!h)return;const g=un.find(h);g&&g.isPointerBlocking!==d&&(g.isPointerBlocking=d,un.assignPointerEventToLayers()),d&&un.disableBodyPointerEvents(h),me(()=>{un.restoreBodyPointerEvents(h)})},{defer:!0}));const u={registerNestedLayer:o};return v(yy.Provider,{value:u,get children(){return v(ot,pe({as:"div",ref(h){const d=vt(g=>e=g,i.ref);typeof d=="function"&&d(h)}},r))}})}function SE(t){let e;const n=Os();t=$e({id:n.generateId("content")},t);const[i,r]=we(t,["ref","onOpenAutoFocus","onCloseAutoFocus","onPointerDownOutside","onFocusOutside","onInteractOutside"]);let s=!1,o=!1;const l=h=>{i.onPointerDownOutside?.(h),n.modal()&&h.detail.isContextMenu&&h.preventDefault()},a=h=>{i.onFocusOutside?.(h),n.modal()&&h.preventDefault()},c=h=>{i.onInteractOutside?.(h),!n.modal()&&(h.defaultPrevented||(s=!0,h.detail.originalEvent.type==="pointerdown"&&(o=!0)),Kt(n.triggerRef(),h.target)&&h.preventDefault(),h.detail.originalEvent.type==="focusin"&&o&&h.preventDefault())},u=h=>{i.onCloseAutoFocus?.(h),n.modal()?(h.preventDefault(),St(n.triggerRef())):(h.defaultPrevented||(s||St(n.triggerRef()),h.preventDefault()),s=!1,o=!1)};return Zl({isDisabled:()=>!(n.isOpen()&&n.modal()),targets:()=>e?[e]:[]}),ec({ownerRef:()=>e,isDisabled:()=>!(n.isOpen()&&(n.modal()||n.preventScroll()))}),Jl({trapFocus:()=>n.isOpen()&&n.modal(),onMountAutoFocus:i.onOpenAutoFocus,onUnmountAutoFocus:u},()=>e),ne(()=>me(n.registerContentId(r.id))),v(he,{get when(){return n.contentPresence.isPresent()},get children(){return v(Xo,pe({ref(h){const d=vt(g=>{n.contentPresence.setRef(g),e=g},i.ref);typeof d=="function"&&d(h)},role:"dialog",tabIndex:-1,get disableOutsidePointerEvents(){return te(()=>!!n.modal())()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},get"aria-labelledby"(){return n.titleId()},get"aria-describedby"(){return n.descriptionId()},get"data-expanded"(){return n.isOpen()?"":void 0},get"data-closed"(){return n.isOpen()?void 0:""},onPointerDownOutside:l,onFocusOutside:a,onInteractOutside:c,get onDismiss(){return n.close}},r))}})}function EE(t){const e=Os();t=$e({id:e.generateId("description")},t);const[n,i]=we(t,["id"]);return ne(()=>me(e.registerDescriptionId(n.id))),v(ot,pe({as:"p",get id(){return n.id}},i))}function $E(t){const e=Os(),[n,i]=we(t,["ref","style","onPointerDown"]),r=s=>{Ie(s,n.onPointerDown),s.target===s.currentTarget&&s.preventDefault()};return v(he,{get when(){return e.overlayPresence.isPresent()},get children(){return v(ot,pe({as:"div",ref(s){const o=vt(e.overlayPresence.setRef,n.ref);typeof o=="function"&&o(s)},get style(){return{"pointer-events":"auto",...n.style}},get"data-expanded"(){return e.isOpen()?"":void 0},get"data-closed"(){return e.isOpen()?void 0:""},onPointerDown:r},i))}})}function CE(t){const e=Os();return v(he,{get when(){return e.contentPresence.isPresent()||e.overlayPresence.isPresent()},get children(){return v(rr,t)}})}function TE(t){const e=`dialog-${Wt()}`;t=$e({id:e,modal:!0,preventScroll:!1},t);const[n,i]=G(),[r,s]=G(),[o,l]=G(),[a,c]=G(),u=ks({open:()=>t.open,defaultOpen:()=>t.defaultOpen,onOpenChange:b=>t.onOpenChange?.(b)}),h=()=>t.forceMount||u.isOpen(),d=vr(h),g=vr(h),p={isOpen:u.isOpen,modal:()=>t.modal??!0,preventScroll:()=>t.preventScroll??!1,contentId:n,titleId:r,descriptionId:o,triggerRef:a,overlayPresence:d,contentPresence:g,close:u.close,toggle:u.toggle,setTriggerRef:c,generateId:Sn(()=>t.id),registerContentId:yt(i),registerTitleId:yt(s),registerDescriptionId:yt(l)};return v(by.Provider,{value:p,get children(){return t.children}})}function kE(t){const e=Os();t=$e({id:e.generateId("title")},t);const[n,i]=we(t,["id"]);return ne(()=>me(e.registerTitleId(n.id))),v(ot,pe({as:"h2",get id(){return n.id}},i))}const vy=Ue();function wy(){const t=Me(vy);if(t===void 0)throw new Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return t}const PE=V('<svg display="block" viewBox="0 0 30 30"><g><path fill="none" d="M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z"></path><path stroke="none" d="M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z">'),Zu=30,um=Zu/2,AE={top:180,right:-90,bottom:0,left:90};function rc(t){const e=wy();t=$e({size:Zu},t);const[n,i]=we(t,["ref","style","children","size"]),r=()=>e.currentPlacement().split("-")[0],s=OE(e.contentRef),o=()=>s()?.getPropertyValue("background-color")||"none",l=()=>s()?.getPropertyValue(`border-${r()}-color`)||"none",a=()=>s()?.getPropertyValue(`border-${r()}-width`)||"0px",c=()=>parseInt(a())*2*(Zu/n.size),u=()=>`rotate(${AE[r()]} ${um} ${um})`;return v(ot,pe({as:"div",ref(h){const d=vt(e.setArrowRef,n.ref);typeof d=="function"&&d(h)},"aria-hidden":"true",get style(){return{position:"absolute","font-size":`${n.size}px`,width:"1em",height:"1em","pointer-events":"none",fill:o(),stroke:l(),"stroke-width":c(),...n.style}}},i,{get children(){const h=H(PE),d=h.firstChild;return d.firstChild.nextSibling,Le(()=>ct(d,"transform",u())),h}}))}function OE(t){const[e,n]=G();return ne(()=>{const i=t();i&&n(Xl(i).getComputedStyle(i))}),e}function sc(t){const e=wy(),[n,i]=we(t,["ref","style"]);return v(ot,pe({as:"div",ref(r){const s=vt(e.setPositionerRef,n.ref);typeof s=="function"&&s(r)},"data-popper-positioner":"",get style(){return{position:"absolute",top:0,left:0,"min-width":"max-content",...n.style}}},i))}const DE=["top","right","bottom","left"],Yi=Math.min,gn=Math.max,el=Math.round,Ca=Math.floor,Qi=t=>({x:t,y:t}),IE={left:"right",right:"left",bottom:"top",top:"bottom"},RE={start:"end",end:"start"};function eh(t,e,n){return gn(t,Yi(e,n))}function Rr(t,e){return typeof t=="function"?t(e):t}function Xi(t){return t.split("-")[0]}function Ds(t){return t.split("-")[1]}function _y(t){return t==="x"?"y":"x"}function Xd(t){return t==="y"?"height":"width"}function Jo(t){return["top","bottom"].includes(Xi(t))?"y":"x"}function Jd(t){return _y(Jo(t))}function LE(t,e,n){n===void 0&&(n=!1);const i=Ds(t),r=Jd(t),s=Xd(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=tl(o)),[o,tl(o)]}function ME(t){const e=tl(t);return[th(t),e,th(e)]}function th(t){return t.replace(/start|end/g,e=>RE[e])}function NE(t,e,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?r:i:e?i:r;case"left":case"right":return e?s:o;default:return[]}}function FE(t,e,n,i){const r=Ds(t);let s=NE(Xi(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(th)))),s}function tl(t){return t.replace(/left|right|bottom|top/g,e=>IE[e])}function BE(t){return{top:0,right:0,bottom:0,left:0,...t}}function xy(t){return typeof t!="number"?BE(t):{top:t,right:t,bottom:t,left:t}}function nl(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function hm(t,e,n){let{reference:i,floating:r}=t;const s=Jo(e),o=Jd(e),l=Xd(o),a=Xi(e),c=s==="y",u=i.x+i.width/2-r.width/2,h=i.y+i.height/2-r.height/2,d=i[l]/2-r[l]/2;let g;switch(a){case"top":g={x:u,y:i.y-r.height};break;case"bottom":g={x:u,y:i.y+i.height};break;case"right":g={x:i.x+i.width,y:h};break;case"left":g={x:i.x-r.width,y:h};break;default:g={x:i.x,y:i.y}}switch(Ds(e)){case"start":g[o]-=d*(n&&c?-1:1);break;case"end":g[o]+=d*(n&&c?-1:1);break}return g}const UE=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:h}=hm(c,i,a),d=i,g={},p=0;for(let b=0;b<l.length;b++){const{name:$,fn:E}=l[b],{x:S,y:m,data:x,reset:_}=await E({x:u,y:h,initialPlacement:i,placement:d,strategy:r,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});if(u=S??u,h=m??h,g={...g,[$]:{...g[$],...x}},_&&p<=50){p++,typeof _=="object"&&(_.placement&&(d=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:u,y:h}=hm(c,d,a)),b=-1;continue}}return{x:u,y:h,placement:d,strategy:r,middlewareData:g}};async function go(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:l,strategy:a}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:g=0}=Rr(e,t),p=xy(g),$=l[d?h==="floating"?"reference":"floating":h],E=nl(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement($)))==null||n?$:$.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:c,rootBoundary:u,strategy:a})),S=h==="floating"?{...o.floating,x:i,y:r}:o.reference,m=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),x=await(s.isElement==null?void 0:s.isElement(m))?await(s.getScale==null?void 0:s.getScale(m))||{x:1,y:1}:{x:1,y:1},_=nl(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:S,offsetParent:m,strategy:a}):S);return{top:(E.top-_.top+p.top)/x.y,bottom:(_.bottom-E.bottom+p.bottom)/x.y,left:(E.left-_.left+p.left)/x.x,right:(_.right-E.right+p.right)/x.x}}const jE=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:l,middlewareData:a}=e,{element:c,padding:u=0}=Rr(t,e)||{};if(c==null)return{};const h=xy(u),d={x:n,y:i},g=Jd(r),p=Xd(g),b=await o.getDimensions(c),$=g==="y",E=$?"top":"left",S=$?"bottom":"right",m=$?"clientHeight":"clientWidth",x=s.reference[p]+s.reference[g]-d[g]-s.floating[p],_=d[g]-s.reference[g],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let w=C?C[m]:0;(!w||!await(o.isElement==null?void 0:o.isElement(C)))&&(w=l.floating[m]||s.floating[p]);const k=x/2-_/2,D=w/2-b[p]/2-1,P=Yi(h[E],D),O=Yi(h[S],D),R=P,B=w-b[p]-O,F=w/2-b[p]/2+k,X=eh(R,F,B),re=!a.arrow&&Ds(r)!=null&&F!=X&&s.reference[p]/2-(F<R?P:O)-b[p]/2<0,be=re?F<R?F-R:F-B:0;return{[g]:d[g]+be,data:{[g]:X,centerOffset:F-X-be,...re&&{alignmentOffset:be}},reset:re}}}),HE=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:l,platform:a,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:b=!0,...$}=Rr(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const E=Xi(r),S=Xi(l)===l,m=await(a.isRTL==null?void 0:a.isRTL(c.floating)),x=d||(S||!b?[tl(l)]:ME(l));!d&&p!=="none"&&x.push(...FE(l,b,p,m));const _=[l,...x],C=await go(e,$),w=[];let k=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&w.push(C[E]),h){const R=LE(r,o,m);w.push(C[R[0]],C[R[1]])}if(k=[...k,{placement:r,overflows:w}],!w.every(R=>R<=0)){var D,P;const R=(((D=s.flip)==null?void 0:D.index)||0)+1,B=_[R];if(B)return{data:{index:R,overflows:k},reset:{placement:B}};let F=(P=k.filter(X=>X.overflows[0]<=0).sort((X,re)=>X.overflows[1]-re.overflows[1])[0])==null?void 0:P.placement;if(!F)switch(g){case"bestFit":{var O;const X=(O=k.map(re=>[re.placement,re.overflows.filter(be=>be>0).reduce((be,Re)=>be+Re,0)]).sort((re,be)=>re[1]-be[1])[0])==null?void 0:O[0];X&&(F=X);break}case"initialPlacement":F=l;break}if(r!==F)return{reset:{placement:F}}}return{}}}};function dm(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function fm(t){return DE.some(e=>t[e]>=0)}const VE=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=Rr(t,e);switch(i){case"referenceHidden":{const s=await go(e,{...r,elementContext:"reference"}),o=dm(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:fm(o)}}}case"escaped":{const s=await go(e,{...r,altBoundary:!0}),o=dm(s,n.floating);return{data:{escapedOffsets:o,escaped:fm(o)}}}default:return{}}}}};async function KE(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=Xi(n),l=Ds(n),a=Jo(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&a?-1:1,h=Rr(e,t);let{mainAxis:d,crossAxis:g,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return l&&typeof p=="number"&&(g=l==="end"?p*-1:p),a?{x:g*u,y:d*c}:{x:d*c,y:g*u}}const qE=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,r=await KE(e,t);return{x:n+r.x,y:i+r.y,data:r}}}},zE=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:$=>{let{x:E,y:S}=$;return{x:E,y:S}}},...a}=Rr(t,e),c={x:n,y:i},u=await go(e,a),h=Jo(Xi(r)),d=_y(h);let g=c[d],p=c[h];if(s){const $=d==="y"?"top":"left",E=d==="y"?"bottom":"right",S=g+u[$],m=g-u[E];g=eh(S,g,m)}if(o){const $=h==="y"?"top":"left",E=h==="y"?"bottom":"right",S=p+u[$],m=p-u[E];p=eh(S,p,m)}const b=l.fn({...e,[d]:g,[h]:p});return{...b,data:{x:b.x-n,y:b.y-i}}}}},WE=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:i,platform:r,elements:s}=e,{apply:o=()=>{},...l}=Rr(t,e),a=await go(e,l),c=Xi(n),u=Ds(n),h=Jo(n)==="y",{width:d,height:g}=i.floating;let p,b;c==="top"||c==="bottom"?(p=c,b=u===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(b=c,p=u==="end"?"top":"bottom");const $=g-a[p],E=d-a[b],S=!e.middlewareData.shift;let m=$,x=E;if(h){const C=d-a.left-a.right;x=u||S?Yi(E,C):C}else{const C=g-a.top-a.bottom;m=u||S?Yi($,C):C}if(S&&!u){const C=gn(a.left,0),w=gn(a.right,0),k=gn(a.top,0),D=gn(a.bottom,0);h?x=d-2*(C!==0||w!==0?C+w:gn(a.left,a.right)):m=g-2*(k!==0||D!==0?k+D:gn(a.top,a.bottom))}await o({...e,availableWidth:x,availableHeight:m});const _=await r.getDimensions(s.floating);return d!==_.width||g!==_.height?{reset:{rects:!0}}:{}}}};function Ji(t){return Sy(t)?(t.nodeName||"").toLowerCase():"#document"}function bn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ii(t){var e;return(e=(Sy(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Sy(t){return t instanceof Node||t instanceof bn(t).Node}function ki(t){return t instanceof Element||t instanceof bn(t).Element}function ni(t){return t instanceof HTMLElement||t instanceof bn(t).HTMLElement}function pm(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof bn(t).ShadowRoot}function Zo(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Mn(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function GE(t){return["table","td","th"].includes(Ji(t))}function Zd(t){const e=ef(),n=Mn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function YE(t){let e=cs(t);for(;ni(e)&&!oc(e);){if(Zd(e))return e;e=cs(e)}return null}function ef(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function oc(t){return["html","body","#document"].includes(Ji(t))}function Mn(t){return bn(t).getComputedStyle(t)}function ac(t){return ki(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function cs(t){if(Ji(t)==="html")return t;const e=t.assignedSlot||t.parentNode||pm(t)&&t.host||Ii(t);return pm(e)?e.host:e}function Ey(t){const e=cs(t);return oc(e)?t.ownerDocument?t.ownerDocument.body:t.body:ni(e)&&Zo(e)?e:Ey(e)}function mo(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=Ey(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=bn(r);return s?e.concat(o,o.visualViewport||[],Zo(r)?r:[],o.frameElement&&n?mo(o.frameElement):[]):e.concat(r,mo(r,[],n))}function $y(t){const e=Mn(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=ni(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,l=el(n)!==s||el(i)!==o;return l&&(n=s,i=o),{width:n,height:i,$:l}}function tf(t){return ki(t)?t:t.contextElement}function Jr(t){const e=tf(t);if(!ni(e))return Qi(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=$y(e);let o=(s?el(n.width):n.width)/i,l=(s?el(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const QE=Qi(0);function Cy(t){const e=bn(t);return!ef()||!e.visualViewport?QE:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function XE(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==bn(t)?!1:e}function _r(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=tf(t);let o=Qi(1);e&&(i?ki(i)&&(o=Jr(i)):o=Jr(t));const l=XE(s,n,i)?Cy(s):Qi(0);let a=(r.left+l.x)/o.x,c=(r.top+l.y)/o.y,u=r.width/o.x,h=r.height/o.y;if(s){const d=bn(s),g=i&&ki(i)?bn(i):i;let p=d.frameElement;for(;p&&i&&g!==d;){const b=Jr(p),$=p.getBoundingClientRect(),E=Mn(p),S=$.left+(p.clientLeft+parseFloat(E.paddingLeft))*b.x,m=$.top+(p.clientTop+parseFloat(E.paddingTop))*b.y;a*=b.x,c*=b.y,u*=b.x,h*=b.y,a+=S,c+=m,p=bn(p).frameElement}}return nl({width:u,height:h,x:a,y:c})}function JE(t){let{rect:e,offsetParent:n,strategy:i}=t;const r=ni(n),s=Ii(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},l=Qi(1);const a=Qi(0);if((r||!r&&i!=="fixed")&&((Ji(n)!=="body"||Zo(s))&&(o=ac(n)),ni(n))){const c=_r(n);l=Jr(n),a.x=c.x+n.clientLeft,a.y=c.y+n.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-o.scrollLeft*l.x+a.x,y:e.y*l.y-o.scrollTop*l.y+a.y}}function ZE(t){return Array.from(t.getClientRects())}function Ty(t){return _r(Ii(t)).left+ac(t).scrollLeft}function e$(t){const e=Ii(t),n=ac(t),i=t.ownerDocument.body,r=gn(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=gn(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+Ty(t);const l=-n.scrollTop;return Mn(i).direction==="rtl"&&(o+=gn(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:l}}function t$(t,e){const n=bn(t),i=Ii(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,l=0,a=0;if(r){s=r.width,o=r.height;const c=ef();(!c||c&&e==="fixed")&&(l=r.offsetLeft,a=r.offsetTop)}return{width:s,height:o,x:l,y:a}}function n$(t,e){const n=_r(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=ni(t)?Jr(t):Qi(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,a=r*s.x,c=i*s.y;return{width:o,height:l,x:a,y:c}}function gm(t,e,n){let i;if(e==="viewport")i=t$(t,n);else if(e==="document")i=e$(Ii(t));else if(ki(e))i=n$(e,n);else{const r=Cy(t);i={...e,x:e.x-r.x,y:e.y-r.y}}return nl(i)}function ky(t,e){const n=cs(t);return n===e||!ki(n)||oc(n)?!1:Mn(n).position==="fixed"||ky(n,e)}function i$(t,e){const n=e.get(t);if(n)return n;let i=mo(t,[],!1).filter(l=>ki(l)&&Ji(l)!=="body"),r=null;const s=Mn(t).position==="fixed";let o=s?cs(t):t;for(;ki(o)&&!oc(o);){const l=Mn(o),a=Zd(o);!a&&l.position==="fixed"&&(r=null),(s?!a&&!r:!a&&l.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Zo(o)&&!a&&ky(t,o))?i=i.filter(u=>u!==o):r=l,o=cs(o)}return e.set(t,i),i}function r$(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?i$(e,this._c):[].concat(n),i],l=o[0],a=o.reduce((c,u)=>{const h=gm(e,u,r);return c.top=gn(h.top,c.top),c.right=Yi(h.right,c.right),c.bottom=Yi(h.bottom,c.bottom),c.left=gn(h.left,c.left),c},gm(e,l,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function s$(t){return $y(t)}function o$(t,e,n){const i=ni(e),r=Ii(e),s=n==="fixed",o=_r(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const a=Qi(0);if(i||!i&&!s)if((Ji(e)!=="body"||Zo(r))&&(l=ac(e)),i){const c=_r(e,!0,s,e);a.x=c.x+e.clientLeft,a.y=c.y+e.clientTop}else r&&(a.x=Ty(r));return{x:o.left+l.scrollLeft-a.x,y:o.top+l.scrollTop-a.y,width:o.width,height:o.height}}function mm(t,e){return!ni(t)||Mn(t).position==="fixed"?null:e?e(t):t.offsetParent}function Py(t,e){const n=bn(t);if(!ni(t))return n;let i=mm(t,e);for(;i&&GE(i)&&Mn(i).position==="static";)i=mm(i,e);return i&&(Ji(i)==="html"||Ji(i)==="body"&&Mn(i).position==="static"&&!Zd(i))?n:i||YE(t)||n}const a$=async function(t){let{reference:e,floating:n,strategy:i}=t;const r=this.getOffsetParent||Py,s=this.getDimensions;return{reference:o$(e,await r(n),i),floating:{x:0,y:0,...await s(n)}}};function l$(t){return Mn(t).direction==="rtl"}const Ay={convertOffsetParentRelativeRectToViewportRelativeRect:JE,getDocumentElement:Ii,getClippingRect:r$,getOffsetParent:Py,getElementRects:a$,getClientRects:ZE,getDimensions:s$,getScale:Jr,isElement:ki,isRTL:l$};function c$(t,e){let n=null,i;const r=Ii(t);function s(){clearTimeout(i),n&&n.disconnect(),n=null}function o(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),s();const{left:c,top:u,width:h,height:d}=t.getBoundingClientRect();if(l||e(),!h||!d)return;const g=Ca(u),p=Ca(r.clientWidth-(c+h)),b=Ca(r.clientHeight-(u+d)),$=Ca(c),S={rootMargin:-g+"px "+-p+"px "+-b+"px "+-$+"px",threshold:gn(0,Yi(1,a))||1};let m=!0;function x(_){const C=_[0].intersectionRatio;if(C!==a){if(!m)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},100)}m=!1}try{n=new IntersectionObserver(x,{...S,root:r.ownerDocument})}catch{n=new IntersectionObserver(x,S)}n.observe(t)}return o(!0),s}function u$(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=i,c=tf(t),u=r||s?[...c?mo(c):[],...mo(e)]:[];u.forEach(E=>{r&&E.addEventListener("scroll",n,{passive:!0}),s&&E.addEventListener("resize",n)});const h=c&&l?c$(c,n):null;let d=-1,g=null;o&&(g=new ResizeObserver(E=>{let[S]=E;S&&S.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{g&&g.observe(e)})),n()}),c&&!a&&g.observe(c),g.observe(e));let p,b=a?_r(t):null;a&&$();function $(){const E=_r(t);b&&(E.x!==b.x||E.y!==b.y||E.width!==b.width||E.height!==b.height)&&n(),b=E,p=requestAnimationFrame($)}return n(),()=>{u.forEach(E=>{r&&E.removeEventListener("scroll",n),s&&E.removeEventListener("resize",n)}),h&&h(),g&&g.disconnect(),g=null,a&&cancelAnimationFrame(p)}}const h$=(t,e,n)=>{const i=new Map,r={platform:Ay,...n},s={...r.platform,_c:i};return UE(t,e,{...r,platform:s})};function bm(t){const{x:e=0,y:n=0,width:i=0,height:r=0}=t??{};if(typeof DOMRect=="function")return new DOMRect(e,n,i,r);const s={x:e,y:n,width:i,height:r,top:n,right:e+i,bottom:n+r,left:e};return{...s,toJSON:()=>s}}function d$(t,e){return{contextElement:t,getBoundingClientRect:()=>{const i=e(t);return i?bm(i):t?t.getBoundingClientRect():bm()}}}function f$(t){return/^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(t)}const p$={top:"bottom",right:"left",bottom:"top",left:"right"};function g$(t,e){const[n,i]=t.split("-"),r=p$[n];return i?n==="left"||n==="right"?`${r} ${i==="start"?"top":"bottom"}`:i==="start"?`${r} ${e==="rtl"?"right":"left"}`:`${r} ${e==="rtl"?"left":"right"}`:`${r} center`}function lc(t){t=$e({getAnchorRect:h=>h?.getBoundingClientRect(),placement:"bottom",gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},t);const[e,n]=G(),[i,r]=G(),[s,o]=G(t.placement),l=()=>d$(t.anchorRef(),t.getAnchorRect),{direction:a}=tc();async function c(){const h=l(),d=e(),g=i();if(!h||!d)return;const p=(g?.clientHeight||0)/2,b=typeof t.gutter=="number"?t.gutter+p:t.gutter??p;d.style.setProperty("--kb-popper-content-overflow-padding",`${t.overflowPadding}px`),h.getBoundingClientRect();const $=[qE(({placement:_})=>{const C=!!_.split("-")[1];return{mainAxis:b,crossAxis:C?void 0:t.shift,alignmentAxis:t.shift}})];if(t.flip!==!1){const _=typeof t.flip=="string"?t.flip.split(" "):void 0;if(_!==void 0&&!_.every(f$))throw new Error("`flip` expects a spaced-delimited list of placements");$.push(HE({padding:t.overflowPadding,fallbackPlacements:_}))}(t.slide||t.overlap)&&$.push(zE({mainAxis:t.slide,crossAxis:t.overlap,padding:t.overflowPadding})),$.push(WE({padding:t.overflowPadding,apply({availableWidth:_,availableHeight:C,rects:w}){const k=Math.round(w.reference.width);_=Math.floor(_),C=Math.floor(C),d.style.setProperty("--kb-popper-anchor-width",`${k}px`),d.style.setProperty("--kb-popper-content-available-width",`${_}px`),d.style.setProperty("--kb-popper-content-available-height",`${C}px`),t.sameWidth&&(d.style.width=`${k}px`),t.fitViewport&&(d.style.maxWidth=`${_}px`,d.style.maxHeight=`${C}px`)}})),t.hideWhenDetached&&$.push(VE({padding:t.detachedPadding})),g&&$.push(jE({element:g,padding:t.arrowPadding}));const E=await h$(h,d,{placement:t.placement,strategy:"absolute",middleware:$,platform:{...Ay,isRTL:()=>a()==="rtl"}});if(o(E.placement),t.onCurrentPlacementChange?.(E.placement),!d)return;d.style.setProperty("--kb-popper-content-transform-origin",g$(E.placement,a()));const S=Math.round(E.x),m=Math.round(E.y);let x;if(t.hideWhenDetached&&(x=E.middlewareData.hide?.referenceHidden?"hidden":"visible"),Object.assign(d.style,{top:"0",left:"0",transform:`translate3d(${S}px, ${m}px, 0)`,visibility:x}),g&&E.middlewareData.arrow){const{x:_,y:C}=E.middlewareData.arrow,w=E.placement.split("-")[0];Object.assign(g.style,{left:_!=null?`${_}px`:"",top:C!=null?`${C}px`:"",[w]:"100%"})}}ne(()=>{const h=l(),d=e();if(!h||!d)return;const g=u$(h,d,c,{elementResize:typeof ResizeObserver=="function"});me(g)}),ne(()=>{const h=e(),d=t.contentRef();!h||!d||queueMicrotask(()=>{h.style.zIndex=getComputedStyle(d).zIndex})});const u={currentPlacement:s,contentRef:()=>t.contentRef(),setPositionerRef:n,setArrowRef:r};return v(vy.Provider,{value:u,get children(){return t.children}})}const Oy=Ue();function m$(){const t=Me(Oy);if(t===void 0)throw new Error("[kobalte]: `useListboxContext` must be used within a `Listbox` component");return t}const Dy=Ue();function b$(){const t=Me(Dy);if(t===void 0)throw new Error("[kobalte]: `useListboxItemContext` must be used within a `Listbox.Item` component");return t}function y$(t){let e;const n=m$(),i=`${n.generateId("item")}-${Wt()}`;t=$e({id:i},t);const[r,s]=we(t,["ref","item","aria-label","aria-labelledby","aria-describedby","onPointerMove","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[o,l]=G(),[a,c]=G(),u=()=>n.listState().selectionManager(),h=()=>u().focusedKey()===r.item.key,d=cy({key:()=>r.item.key,selectionManager:u,shouldSelectOnPressUp:n.shouldSelectOnPressUp,allowsDifferentPressOrigin:()=>n.shouldSelectOnPressUp()&&n.shouldFocusOnHover(),shouldUseVirtualFocus:n.shouldUseVirtualFocus,disabled:()=>r.item.disabled},()=>e),g=()=>{if(u().selectionMode()!=="none")return d.isSelected()},p=te(()=>!(Go()&&ox())),b=()=>p()?r["aria-label"]:void 0,$=()=>p()?o():void 0,E=()=>p()?a():void 0,S=()=>{if(!n.isVirtualized())return;const w=n.listState().collection().getItem(r.item.key)?.index;return w!=null?w+1:void 0},m=()=>{if(n.isVirtualized())return Sx(n.listState().collection())},x=w=>{Ie(w,r.onPointerMove),w.pointerType==="mouse"&&!d.isDisabled()&&n.shouldFocusOnHover()&&(St(w.currentTarget),u().setFocused(!0),u().setFocusedKey(r.item.key))},_=te(()=>({"data-disabled":d.isDisabled()?"":void 0,"data-selected":d.isSelected()?"":void 0,"data-highlighted":h()?"":void 0})),C={isSelected:d.isSelected,dataset:_,generateId:Sn(()=>s.id),registerLabelId:yt(l),registerDescriptionId:yt(c)};return v(Dy.Provider,{value:C,get children(){return v(ot,pe({as:"li",ref(w){const k=vt(D=>e=D,r.ref);typeof k=="function"&&k(w)},role:"option",get tabIndex(){return d.tabIndex()},get"aria-disabled"(){return d.isDisabled()},get"aria-selected"(){return g()},get"aria-label"(){return b()},get"aria-labelledby"(){return $()},get"aria-describedby"(){return E()},get"aria-posinset"(){return S()},get"aria-setsize"(){return m()},get"data-key"(){return d.dataKey()},get onPointerDown(){return bt([r.onPointerDown,d.onPointerDown])},get onPointerUp(){return bt([r.onPointerUp,d.onPointerUp])},get onClick(){return bt([r.onClick,d.onClick])},get onKeyDown(){return bt([r.onKeyDown,d.onKeyDown])},get onMouseDown(){return bt([r.onMouseDown,d.onMouseDown])},get onFocus(){return bt([r.onFocus,d.onFocus])},onPointerMove:x},_,s))}})}function v$(t){const e=b$();t=$e({id:e.generateId("indicator")},t);const[n,i]=we(t,["forceMount"]);return v(he,{get when(){return n.forceMount||e.isSelected()},get children(){return v(ot,pe({as:"div","aria-hidden":"true"},()=>e.dataset(),i))}})}function w$(t){let e;const n=`listbox-${Wt()}`;t=$e({id:n,selectionMode:"single",virtualized:!1},t);const[i,r]=we(t,["ref","children","renderItem","renderSection","value","defaultValue","onChange","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","state","keyboardDelegate","autoFocus","selectionMode","shouldFocusWrap","shouldUseVirtualFocus","shouldSelectOnPressUp","shouldFocusOnHover","allowDuplicateSelectionEvents","disallowEmptySelection","selectionBehavior","selectOnFocus","disallowTypeAhead","allowsTabNavigation","virtualized","scrollToItem","scrollRef","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]),s=te(()=>i.state?i.state:Yd({selectedKeys:()=>i.value,defaultSelectedKeys:()=>i.defaultValue,onSelectionChange:i.onChange,allowDuplicateSelectionEvents:()=>K(i.allowDuplicateSelectionEvents),disallowEmptySelection:()=>K(i.disallowEmptySelection),selectionBehavior:()=>K(i.selectionBehavior),selectionMode:()=>K(i.selectionMode),dataSource:()=>i.options??[],getKey:()=>i.optionValue,getTextValue:()=>i.optionTextValue,getDisabled:()=>i.optionDisabled,getSectionChildren:()=>i.optionGroupChildren})),o=hy({selectionManager:()=>s().selectionManager(),collection:()=>s().collection(),autoFocus:()=>K(i.autoFocus),shouldFocusWrap:()=>K(i.shouldFocusWrap),keyboardDelegate:()=>i.keyboardDelegate,disallowEmptySelection:()=>K(i.disallowEmptySelection),selectOnFocus:()=>K(i.selectOnFocus),disallowTypeAhead:()=>K(i.disallowTypeAhead),shouldUseVirtualFocus:()=>K(i.shouldUseVirtualFocus),allowsTabNavigation:()=>K(i.allowsTabNavigation),isVirtualized:()=>i.virtualized,scrollToKey:()=>i.scrollToItem},()=>e,()=>i.scrollRef?.()),l={listState:s,generateId:Sn(()=>r.id),shouldUseVirtualFocus:()=>t.shouldUseVirtualFocus,shouldSelectOnPressUp:()=>t.shouldSelectOnPressUp,shouldFocusOnHover:()=>t.shouldFocusOnHover,isVirtualized:()=>i.virtualized};return v(Oy.Provider,{value:l,get children(){return v(ot,pe({as:"ul",ref(a){const c=vt(u=>e=u,i.ref);typeof c=="function"&&c(a)},role:"listbox",get tabIndex(){return o.tabIndex()},get"aria-multiselectable"(){return s().selectionManager().selectionMode()==="multiple"?!0:void 0},get onKeyDown(){return bt([i.onKeyDown,o.onKeyDown])},get onMouseDown(){return bt([i.onMouseDown,o.onMouseDown])},get onFocusIn(){return bt([i.onFocusIn,o.onFocusIn])},get onFocusOut(){return bt([i.onFocusOut,o.onFocusOut])}},r,{get children(){return v(he,{get when(){return!i.virtualized},get fallback(){return i.children?.(s().collection)},get children(){return v(Y2,{get each(){return[...s().collection()]},by:"key",children:a=>v(qo,{get children(){return[v(sn,{get when(){return a().type==="section"},get children(){return i.renderSection?.(a())}}),v(sn,{get when(){return a().type==="item"},get children(){return i.renderItem?.(a())}})]}})})}})}}))}})}const Iy=Ue();function Ry(){return Me(Iy)}function Lr(){const t=Ry();if(t===void 0)throw new Error("[kobalte]: `useMenuContext` must be used within a `Menu` component");return t}const Ly=Ue();function sr(){const t=Me(Ly);if(t===void 0)throw new Error("[kobalte]: `useMenuRootContext` must be used within a `MenuRoot` component");return t}/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/81b25f4b40c54f72aeb106ca0e64e1e09655153e/packages/react/menu/src/Menu.tsx
 */function _$(t,e){return e?O0([t.clientX,t.clientY],e):!1}function x$(t){const e=sr(),n=py(),i=Ry();t=$e({placement:"bottom-start"},t);const[r,s]=we(t,["open","defaultOpen","onOpenChange"]);let o=0,l=null,a="right";const[c,u]=G(),[h,d]=G(),[g,p]=G(),[b,$]=G(),[E,S]=G(!0),[m,x]=G(s.placement),[_,C]=G([]),[w,k]=G([]),{DomCollectionProvider:D}=vE({items:w,onItemsChange:k}),P=ks({open:()=>r.open,defaultOpen:()=>r.defaultOpen,onOpenChange:J=>r.onOpenChange?.(J)}),O=vr(()=>e.forceMount()||P.isOpen()),R=Yd({selectionMode:"none",dataSource:w}),B=J=>{S(J),P.open()},F=(J=!1)=>{P.close(),J&&i&&i.close(!0)},X=J=>{S(J),P.toggle()},re=()=>{const J=b();J&&(St(J),R.selectionManager().setFocused(!0),R.selectionManager().setFocusedKey(void 0))},be=J=>{C(ae=>[...ae,J]);const Ne=i?.registerNestedMenu(J);return()=>{C(ae=>ju(ae,J)),Ne?.()}},Re=J=>a===l?.side&&_$(J,l?.area),ue=J=>{Re(J)&&J.preventDefault()},gt=J=>{Re(J)||re()},at=J=>{Re(J)&&J.preventDefault()};Zl({isDisabled:()=>!(i==null&&P.isOpen()&&e.isModal()),targets:()=>[b(),..._()].filter(Boolean)}),ne(()=>{const J=b();if(!J||!i)return;const Ne=i.registerNestedMenu(J);me(()=>{Ne()})});const ge={dataset:te(()=>({"data-expanded":P.isOpen()?"":void 0,"data-closed":P.isOpen()?void 0:""})),isOpen:P.isOpen,contentPresence:O,currentPlacement:m,pointerGraceTimeoutId:()=>o,autoFocus:E,listState:()=>R,parentMenuContext:()=>i,triggerRef:g,contentRef:b,triggerId:c,contentId:h,setTriggerRef:p,setContentRef:$,open:B,close:F,toggle:X,focusContent:re,onItemEnter:ue,onItemLeave:gt,onTriggerLeave:at,setPointerDir:J=>a=J,setPointerGraceTimeoutId:J=>o=J,setPointerGraceIntent:J=>l=J,registerNestedMenu:be,registerItemToParentDomCollection:n?.registerItem,registerTriggerId:yt(u),registerContentId:yt(d)};return v(D,{get children(){return v(Iy.Provider,{value:ge,get children(){return v(lc,pe({anchorRef:g,contentRef:b,onCurrentPlacementChange:x},s))}})}})}const My=Ue();function S$(){const t=Me(My);if(t===void 0)throw new Error("[kobalte]: `useMenuItemContext` must be used within a `Menu.Item` component");return t}function Ny(t){let e;const n=sr(),i=Lr();t=$e({id:n.generateId(`item-${Wt()}`)},t);const[r,s]=we(t,["ref","textValue","disabled","closeOnSelect","checked","indeterminate","onSelect","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[o,l]=G(),[a,c]=G(),[u,h]=G(),d=()=>i.listState().selectionManager(),g=()=>s.id,p=()=>d().focusedKey()===g(),b=()=>{r.onSelect?.(),r.closeOnSelect&&i.close(!0)};wE({getItem:()=>({ref:()=>e,type:"item",key:g(),textValue:r.textValue??u()?.textContent??e?.textContent??"",disabled:r.disabled??!1})});const $=cy({key:g,selectionManager:d,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>r.disabled},()=>e),E=k=>{Ie(k,r.onPointerMove),k.pointerType==="mouse"&&(r.disabled?i.onItemLeave(k):(i.onItemEnter(k),k.defaultPrevented||(St(k.currentTarget),i.listState().selectionManager().setFocused(!0),i.listState().selectionManager().setFocusedKey(g()))))},S=k=>{Ie(k,r.onPointerLeave),k.pointerType==="mouse"&&i.onItemLeave(k)},m=k=>{Ie(k,r.onPointerUp),!r.disabled&&k.button===0&&b()},x=k=>{if(Ie(k,r.onKeyDown),!k.repeat&&!r.disabled)switch(k.key){case"Enter":case" ":b();break}},_=te(()=>{if(r.indeterminate)return"mixed";if(r.checked!=null)return r.checked}),C=te(()=>({"data-indeterminate":r.indeterminate?"":void 0,"data-checked":r.checked&&!r.indeterminate?"":void 0,"data-disabled":r.disabled?"":void 0,"data-highlighted":p()?"":void 0})),w={isChecked:()=>r.checked,dataset:C,setLabelRef:h,generateId:Sn(()=>s.id),registerLabel:yt(l),registerDescription:yt(c)};return v(My.Provider,{value:w,get children(){return v(ot,pe({as:"div",ref(k){const D=vt(P=>e=P,r.ref);typeof D=="function"&&D(k)},get tabIndex(){return $.tabIndex()},get"aria-checked"(){return _()},get"aria-disabled"(){return r.disabled},get"aria-labelledby"(){return o()},get"aria-describedby"(){return a()},get"data-key"(){return $.dataKey()},get onPointerDown(){return bt([r.onPointerDown,$.onPointerDown])},get onPointerUp(){return bt([m,$.onPointerUp])},get onClick(){return bt([r.onClick,$.onClick])},get onKeyDown(){return bt([x,$.onKeyDown])},get onMouseDown(){return bt([r.onMouseDown,$.onMouseDown])},get onFocus(){return bt([r.onFocus,$.onFocus])},onPointerMove:E,onPointerLeave:S},C,s))}})}function E$(t){let e;const n=sr(),i=Lr();t=$e({id:n.generateId(`content-${Wt()}`)},t);const[r,s]=we(t,["ref","id","style","onOpenAutoFocus","onCloseAutoFocus","onEscapeKeyDown","onFocusOutside","onPointerEnter","onPointerMove","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]);let o=0;const l=()=>i.parentMenuContext()==null&&n.isModal(),a=hy({selectionManager:i.listState().selectionManager,collection:i.listState().collection,autoFocus:i.autoFocus,deferAutoFocus:!0,shouldFocusWrap:!0,disallowTypeAhead:()=>!i.listState().selectionManager().isFocused()},()=>e);Jl({trapFocus:()=>l()&&i.isOpen(),onMountAutoFocus:r.onOpenAutoFocus,onUnmountAutoFocus:r.onCloseAutoFocus},()=>e);const c=p=>{Kt(p.currentTarget,p.target)&&p.key==="Tab"&&i.isOpen()&&p.preventDefault()},u=p=>{r.onEscapeKeyDown?.(p),i.close(!0)},h=p=>{r.onFocusOutside?.(p),n.isModal()&&p.preventDefault()},d=p=>{Ie(p,r.onPointerEnter),i.isOpen()&&(i.parentMenuContext()?.listState().selectionManager().setFocused(!1),i.parentMenuContext()?.listState().selectionManager().setFocusedKey(void 0))},g=p=>{if(Ie(p,r.onPointerMove),p.pointerType!=="mouse")return;const b=p.target,$=o!==p.clientX;Kt(p.currentTarget,b)&&$&&(i.setPointerDir(p.clientX>o?"right":"left"),o=p.clientX)};return ne(()=>me(i.registerContentId(r.id))),v(he,{get when(){return i.contentPresence.isPresent()},get children(){return v(sc,{get children(){return v(Xo,pe({ref(p){const b=vt($=>{i.setContentRef($),i.contentPresence.setRef($),e=$},r.ref);typeof b=="function"&&b(p)},role:"menu",get id(){return r.id},get tabIndex(){return a.tabIndex()},get disableOutsidePointerEvents(){return te(()=>!!l())()&&i.isOpen()},get excludedElements(){return[i.triggerRef]},bypassTopMostLayerCheck:!0,get style(){return{"--kb-menu-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative",...r.style}},get"aria-labelledby"(){return i.triggerId()},onEscapeKeyDown:u,onFocusOutside:h,get onDismiss(){return i.close},get onKeyDown(){return bt([r.onKeyDown,a.onKeyDown,c])},get onMouseDown(){return bt([r.onMouseDown,a.onMouseDown])},get onFocusIn(){return bt([r.onFocusIn,a.onFocusIn])},get onFocusOut(){return bt([r.onFocusOut,a.onFocusOut])},onPointerEnter:d,onPointerMove:g},()=>i.dataset(),s))}})}})}function $$(t){let e;const n=sr(),i=Lr(),[r,s]=we(t,["ref"]);return ec({ownerRef:()=>e,isDisabled:()=>!(i.isOpen()&&(n.isModal()||n.preventScroll()))}),v(E$,pe({ref(o){const l=vt(a=>e=a,r.ref);typeof l=="function"&&l(o)}},s))}const Fy=Ue();function C$(){const t=Me(Fy);if(t===void 0)throw new Error("[kobalte]: `useMenuGroupContext` must be used within a `Menu.Group` component");return t}function By(t){const e=sr();t=$e({id:e.generateId(`group-${Wt()}`)},t);const[n,i]=G(),r={generateId:Sn(()=>t.id),registerLabelId:yt(i)};return v(Fy.Provider,{value:r,get children(){return v(ot,pe({as:"div",role:"group",get"aria-labelledby"(){return n()}},t))}})}function T$(t){const e=C$();t=$e({id:e.generateId("label")},t);const[n,i]=we(t,["id"]);return ne(()=>me(e.registerLabelId(n.id))),v(ot,pe({as:"span",get id(){return n.id},"aria-hidden":"true"},i))}function k$(t){const e=Lr();return t=$e({children:""},t),v(ot,pe({as:"span","aria-hidden":"true"},()=>e.dataset(),t))}function Bi(t){return v(Ny,pe({role:"menuitem",closeOnSelect:!0},t))}function P$(t){const e=S$();t=$e({id:e.generateId("indicator")},t);const[n,i]=we(t,["forceMount"]);return v(he,{get when(){return n.forceMount||e.isChecked()},get children(){return v(ot,pe({as:"div"},()=>e.dataset(),i))}})}function Uy(t){const e=Lr();return v(he,{get when(){return e.contentPresence.isPresent()},get children(){return v(rr,t)}})}const jy=Ue();function A$(){const t=Me(jy);if(t===void 0)throw new Error("[kobalte]: `useMenuRadioGroupContext` must be used within a `Menu.RadioGroup` component");return t}function O$(t){const n=sr().generateId(`radiogroup-${Wt()}`);t=$e({id:n},t);const[i,r]=we(t,["value","defaultValue","onChange","disabled"]),[s,o]=Yo({value:()=>i.value,defaultValue:()=>i.defaultValue,onChange:a=>i.onChange?.(a)}),l={isDisabled:()=>i.disabled,isSelectedValue:a=>a===s(),setSelectedValue:o};return v(jy.Provider,{value:l,get children(){return v(By,r)}})}function D$(t){const e=A$();t=$e({closeOnSelect:!1},t);const[n,i]=we(t,["value","onSelect"]);return v(Ny,pe({role:"menuitemradio",get checked(){return e.isSelectedValue(n.value)},onSelect:()=>{n.onSelect?.(),e.setSelectedValue(n.value)}},i))}function I$(t){const e=`menu-${Wt()}`;t=$e({id:e,modal:!0,preventScroll:!1},t);const[n,i]=we(t,["id","modal","preventScroll","forceMount","open","defaultOpen","onOpenChange"]),r=ks({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:o=>n.onOpenChange?.(o)}),s={isModal:()=>n.modal??!0,preventScroll:()=>n.preventScroll??!1,forceMount:()=>n.forceMount??!1,generateId:Sn(()=>n.id)};return v(Ly.Provider,{value:s,get children(){return v(x$,pe({get open(){return r.isOpen()},get onOpenChange(){return r.setIsOpen}},i))}})}function Hy(t){const e=sr(),n=Lr();t=$e({id:e.generateId("trigger")},t);const[i,r]=we(t,["ref","id","disabled","onPointerDown","onClick","onKeyDown"]),s=a=>{Ie(a,i.onPointerDown),a.currentTarget.dataset.pointerType=a.pointerType,!i.disabled&&a.pointerType!=="touch"&&a.button===0&&n.toggle(!0)},o=a=>{Ie(a,i.onClick),!i.disabled&&a.currentTarget.dataset.pointerType==="touch"&&n.toggle(!0)},l=a=>{if(Ie(a,i.onKeyDown),!i.disabled)switch(a.key){case"Enter":case" ":case"ArrowDown":a.stopPropagation(),a.preventDefault(),n.toggle("first");break;case"ArrowUp":a.stopPropagation(),a.preventDefault(),n.toggle("last");break}};return ne(()=>me(n.registerTriggerId(i.id))),v(Ir,pe({ref(a){const c=vt(n.setTriggerRef,i.ref);typeof c=="function"&&c(a)},get id(){return i.id},get disabled(){return i.disabled},"aria-haspopup":"true",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return te(()=>!!n.isOpen())()?n.contentId():void 0},onPointerDown:s,onClick:o,onKeyDown:l},()=>n.dataset(),r))}function Vy(t){const e=sr(),n=Lr(),[i,r]=we(t,["onCloseAutoFocus","onInteractOutside"]);let s=!1;return v($$,pe({onCloseAutoFocus:a=>{i.onCloseAutoFocus?.(a),s||St(n.triggerRef()),s=!1,a.preventDefault()},onInteractOutside:a=>{i.onInteractOutside?.(a),(!e.isModal()||a.detail.isContextMenu)&&(s=!0)}},r))}function Ky(t){const e=`dropdownmenu-${Wt()}`;return t=$e({id:e},t),v(I$,t)}const qy=Ue();function cc(){const t=Me(qy);if(t===void 0)throw new Error("[kobalte]: `usePopoverContext` must be used within a `Popover` component");return t}function R$(t){let e;const n=cc();t=$e({id:n.generateId("content")},t);const[i,r]=we(t,["ref","style","onOpenAutoFocus","onCloseAutoFocus","onPointerDownOutside","onFocusOutside","onInteractOutside"]);let s=!1,o=!1,l=!1;const a=d=>{i.onCloseAutoFocus?.(d),n.isModal()?(d.preventDefault(),s||St(n.triggerRef())):(d.defaultPrevented||(o||St(n.triggerRef()),d.preventDefault()),o=!1,l=!1)},c=d=>{i.onPointerDownOutside?.(d),n.isModal()&&(s=d.detail.isContextMenu)},u=d=>{i.onFocusOutside?.(d),n.isOpen()&&n.isModal()&&d.preventDefault()},h=d=>{i.onInteractOutside?.(d),!n.isModal()&&(d.defaultPrevented||(o=!0,d.detail.originalEvent.type==="pointerdown"&&(l=!0)),Kt(n.triggerRef(),d.target)&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&l&&d.preventDefault())};return Zl({isDisabled:()=>!(n.isOpen()&&n.isModal()),targets:()=>e?[e]:[]}),ec({ownerRef:()=>e,isDisabled:()=>!(n.isOpen()&&(n.isModal()||n.preventScroll()))}),Jl({trapFocus:()=>n.isOpen()&&n.isModal(),onMountAutoFocus:i.onOpenAutoFocus,onUnmountAutoFocus:a},()=>e),ne(()=>me(n.registerContentId(r.id))),v(he,{get when(){return n.contentPresence.isPresent()},get children(){return v(sc,{get children(){return v(Xo,pe({ref(d){const g=vt(p=>{n.setContentRef(p),n.contentPresence.setRef(p),e=p},i.ref);typeof g=="function"&&g(d)},role:"dialog",tabIndex:-1,get disableOutsidePointerEvents(){return te(()=>!!n.isOpen())()&&n.isModal()},get excludedElements(){return[n.triggerRef]},get style(){return{"--kb-popover-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative",...i.style}},get"aria-labelledby"(){return n.titleId()},get"aria-describedby"(){return n.descriptionId()},onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:h,get onDismiss(){return n.close}},()=>n.dataset(),r))}})}})}function L$(t){const e=cc();t=$e({id:e.generateId("description")},t);const[n,i]=we(t,["id"]);return ne(()=>me(e.registerDescriptionId(n.id))),v(ot,pe({as:"p",get id(){return n.id}},()=>e.dataset(),i))}function M$(t){const e=cc();return v(he,{get when(){return e.contentPresence.isPresent()},get children(){return v(rr,t)}})}function N$(t){const e=`popover-${Wt()}`;t=$e({id:e,modal:!1,preventScroll:!1},t);const[n,i]=we(t,["id","open","defaultOpen","onOpenChange","modal","preventScroll","forceMount","anchorRef"]),[r,s]=G(),[o,l]=G(),[a,c]=G(),[u,h]=G(),[d,g]=G(),[p,b]=G(),$=ks({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:_=>n.onOpenChange?.(_)}),E=()=>n.anchorRef?.()??r()??o(),S=vr(()=>n.forceMount||$.isOpen()),x={dataset:te(()=>({"data-expanded":$.isOpen()?"":void 0,"data-closed":$.isOpen()?void 0:""})),isOpen:$.isOpen,isModal:()=>n.modal??!1,preventScroll:()=>n.preventScroll??!1,contentPresence:S,triggerRef:o,contentId:u,titleId:d,descriptionId:p,setDefaultAnchorRef:s,setTriggerRef:l,setContentRef:c,close:$.close,toggle:$.toggle,generateId:Sn(()=>n.id),registerContentId:yt(h),registerTitleId:yt(g),registerDescriptionId:yt(b)};return v(qy.Provider,{value:x,get children(){return v(lc,pe({anchorRef:E,contentRef:a},i))}})}function F$(t){const e=cc(),[n,i]=we(t,["ref","onClick","onPointerDown"]);return v(Ir,pe({ref(o){const l=vt(e.setTriggerRef,n.ref);typeof l=="function"&&l(o)},"aria-haspopup":"dialog",get"aria-expanded"(){return e.isOpen()},get"aria-controls"(){return te(()=>!!e.isOpen())()?e.contentId():void 0},onPointerDown:o=>{Ie(o,n.onPointerDown),o.preventDefault()},onClick:o=>{Ie(o,n.onClick),e.toggle()}},()=>e.dataset(),i))}const zy=Ue();function Mr(){const t=Me(zy);if(t===void 0)throw new Error("[kobalte]: `useSelectContext` must be used within a `Select` component");return t}function B$(t){let e;const n=Mr(),[i,r]=we(t,["ref","id","style","onCloseAutoFocus","onFocusOutside"]),s=l=>{n.close()},o=l=>{i.onFocusOutside?.(l),n.isOpen()&&n.isModal()&&l.preventDefault()};return Zl({isDisabled:()=>!(n.isOpen()&&n.isModal()),targets:()=>e?[e]:[]}),ec({ownerRef:()=>e,isDisabled:()=>!(n.isOpen()&&(n.isModal()||n.preventScroll()))}),Jl({trapFocus:()=>n.isOpen()&&n.isModal(),onMountAutoFocus:l=>{l.preventDefault()},onUnmountAutoFocus:l=>{i.onCloseAutoFocus?.(l),l.defaultPrevented||(St(n.triggerRef()),l.preventDefault())}},()=>e),v(he,{get when(){return n.contentPresence.isPresent()},get children(){return v(sc,{get children(){return v(Xo,pe({ref(l){const a=vt(c=>{n.setContentRef(c),n.contentPresence.setRef(c),e=c},i.ref);typeof a=="function"&&a(l)},get disableOutsidePointerEvents(){return te(()=>!!n.isModal())()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},get style(){return{"--kb-select-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative",...i.style}},onEscapeKeyDown:s,onFocusOutside:o,get onDismiss(){return n.close}},()=>n.dataset(),r))}})}})}function U$(t){const e=Mr();return t=$e({children:""},t),v(ot,pe({as:"span","aria-hidden":"true"},()=>e.dataset(),t))}function j$(t){const e=Mr(),[n,i]=we(t,["onClick"]);return v(H0,pe({as:"span",onClick:s=>{Ie(s,n.onClick),e.isDisabled()||e.triggerRef()?.focus()}},i))}function H$(t){const e=Mr();t=$e({id:e.generateId("listbox")},t);const[n,i]=we(t,["ref","id","onKeyDown"]);return ne(()=>me(e.registerListboxId(n.id))),v(w$,pe({ref(s){const o=vt(e.setListboxRef,n.ref);typeof o=="function"&&o(s)},get id(){return n.id},get state(){return e.listState()},get virtualized(){return e.isVirtualized()},get autoFocus(){return e.autoFocus()},shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,get shouldFocusWrap(){return e.shouldFocusWrap()},get disallowTypeAhead(){return e.disallowTypeAhead()},get"aria-labelledby"(){return e.listboxAriaLabelledBy()},get renderItem(){return e.renderItem},get renderSection(){return e.renderSection},onKeyDown:s=>{Ie(s,n.onKeyDown),s.key==="Escape"&&s.preventDefault()}},i))}function V$(t){const e=Mr();return v(he,{get when(){return e.contentPresence.isPresent()},get children(){return v(rr,t)}})}function K$(t){const e=`select-${Wt()}`;t=$e({id:e,selectionMode:"single",disallowEmptySelection:!1,allowDuplicateSelectionEvents:!0,gutter:8,sameWidth:!0,modal:!1,preventScroll:!1},t);const[n,i,r,s]=we(t,["itemComponent","sectionComponent","open","defaultOpen","onOpenChange","value","defaultValue","onChange","placeholder","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","keyboardDelegate","allowDuplicateSelectionEvents","disallowEmptySelection","disallowTypeAhead","shouldFocusWrap","selectionBehavior","selectionMode","virtualized","modal","preventScroll","forceMount"],["getAnchorRect","placement","gutter","shift","flip","slide","overlap","sameWidth","fitViewport","hideWhenDetached","detachedPadding","arrowPadding","overflowPadding"],F0),[o,l]=G(),[a,c]=G(),[u,h]=G(),[d,g]=G(),[p,b]=G(),[$,E]=G(),[S,m]=G(),[x,_]=G(!0),C=ae=>{const je=n.optionValue;return je==null?String(ae):String(Wo(je)?je(ae):ae[je])},w=te(()=>{const ae=n.optionGroupChildren;return ae==null?n.options:n.options.flatMap(je=>je[ae]??je)}),k=te(()=>w().map(ae=>C(ae))),D=ae=>[...ae].map(je=>w().find(it=>C(it)===je)).filter(je=>je!=null),P=ks({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:ae=>n.onOpenChange?.(ae)}),O=Yd({selectedKeys:()=>n.value!=null?n.value.map(C):n.value,defaultSelectedKeys:()=>n.defaultValue!=null?n.defaultValue.map(C):n.defaultValue,onSelectionChange:ae=>{n.onChange?.(D(ae)),n.selectionMode==="single"&&be()},allowDuplicateSelectionEvents:()=>K(n.allowDuplicateSelectionEvents),disallowEmptySelection:()=>K(n.disallowEmptySelection),selectionBehavior:()=>K(n.selectionBehavior),selectionMode:()=>n.selectionMode,dataSource:()=>n.options??[],getKey:()=>n.optionValue,getTextValue:()=>n.optionTextValue,getDisabled:()=>n.optionDisabled,getSectionChildren:()=>n.optionGroupChildren}),R=te(()=>D(O.selectionManager().selectedKeys())),B=ae=>{O.selectionManager().toggleSelection(C(ae))},F=vr(()=>n.forceMount||P.isOpen()),X=()=>{const ae=$();ae&&St(ae)},re=ae=>{if(n.options.length<=0)return;_(ae),P.open();let je=O.selectionManager().firstSelectedKey();je==null&&(ae==="first"?je=O.collection().getFirstKey():ae==="last"&&(je=O.collection().getLastKey())),X(),O.selectionManager().setFocused(!0),O.selectionManager().setFocusedKey(je)},be=()=>{P.close(),O.selectionManager().setFocused(!1),O.selectionManager().setFocusedKey(void 0)},Re=ae=>{P.isOpen()?be():re(ae)},{formControlContext:ue}=B0(r);M0(d,()=>{const ae=n.defaultValue?[...n.defaultValue].map(C):new kn;O.selectionManager().setSelectedKeys(ae)});const gt=K0({usage:"search",sensitivity:"base"}),at=te(()=>{const ae=K(n.keyboardDelegate);return ae||new uy(O.collection,void 0,gt)}),tt=ae=>n.itemComponent?.({item:ae}),ge=ae=>n.sectionComponent?.({section:ae});ne(Vt([k],([ae])=>{const it=[...O.selectionManager().selectedKeys()].filter(ft=>ae.includes(ft));O.selectionManager().setSelectedKeys(it)},{defer:!0}));const J=te(()=>({"data-expanded":P.isOpen()?"":void 0,"data-closed":P.isOpen()?void 0:""})),Ne={dataset:J,isOpen:P.isOpen,isDisabled:()=>ue.isDisabled()??!1,isMultiple:()=>K(n.selectionMode)==="multiple",isVirtualized:()=>n.virtualized??!1,isModal:()=>n.modal??!1,preventScroll:()=>n.preventScroll??!1,disallowTypeAhead:()=>n.disallowTypeAhead??!1,shouldFocusWrap:()=>n.shouldFocusWrap??!1,selectedOptions:R,contentPresence:F,autoFocus:x,triggerRef:d,listState:()=>O,keyboardDelegate:at,triggerId:o,valueId:a,listboxId:u,listboxAriaLabelledBy:S,setListboxAriaLabelledBy:m,setTriggerRef:g,setContentRef:b,setListboxRef:E,open:re,close:be,toggle:Re,placeholder:()=>n.placeholder,renderItem:tt,renderSection:ge,removeOptionFromSelection:B,generateId:Sn(()=>K(r.id)),registerTriggerId:yt(l),registerValueId:yt(c),registerListboxId:yt(h)};return v(qd.Provider,{value:ue,get children(){return v(zy.Provider,{value:Ne,get children(){return v(lc,pe({anchorRef:d,contentRef:p},i,{get children(){return v(ot,pe({as:"div",role:"group",get id(){return K(r.id)}},()=>ue.dataset(),J,s))}}))}})}})}function q$(t){const[e,n]=we(t,["value","defaultValue","onChange","multiple"]),i=te(()=>e.value!=null?e.multiple?e.value:[e.value]:e.value),r=te(()=>e.defaultValue!=null?e.multiple?e.defaultValue:[e.defaultValue]:e.defaultValue);return v(K$,pe({get value(){return i()},get defaultValue(){return r()},onChange:o=>{e.multiple?e.onChange?.(o):e.onChange?.(o[0]??null)},get selectionMode(){return e.multiple?"multiple":"single"}},n))}function z$(t){const e=Ps(),n=Mr();t=$e({id:n.generateId("trigger")},t);const[i,r,s]=we(t,["ref","disabled","onPointerDown","onClick","onKeyDown","onFocus","onBlur"],U0),o=()=>n.listState().selectionManager(),l=()=>n.keyboardDelegate(),a=()=>i.disabled||n.isDisabled(),{fieldProps:c}=j0(r),{typeSelectHandlers:u}=ly({keyboardDelegate:l,selectionManager:o,onTypeSelect:E=>o().select(E)}),h=()=>[n.listboxAriaLabelledBy(),n.valueId()].filter(Boolean).join(" ")||void 0,d=E=>{Ie(E,i.onPointerDown),E.currentTarget.dataset.pointerType=E.pointerType,!a()&&E.pointerType!=="touch"&&E.button===0&&(E.preventDefault(),n.toggle(!0))},g=E=>{Ie(E,i.onClick),!a()&&E.currentTarget.dataset.pointerType==="touch"&&n.toggle(!0)},p=E=>{if(Ie(E,i.onKeyDown),!a())switch(Ie(E,u.onKeyDown),E.key){case"Enter":case" ":case"ArrowDown":E.stopPropagation(),E.preventDefault(),n.toggle("first");break;case"ArrowUp":E.stopPropagation(),E.preventDefault(),n.toggle("last");break;case"ArrowLeft":{if(E.preventDefault(),n.isMultiple())return;const S=o().firstSelectedKey(),m=S!=null?l().getKeyAbove?.(S):l().getFirstKey?.();m!=null&&o().select(m);break}case"ArrowRight":{if(E.preventDefault(),n.isMultiple())return;const S=o().firstSelectedKey(),m=S!=null?l().getKeyBelow?.(S):l().getFirstKey?.();m!=null&&o().select(m);break}}},b=E=>{Ie(E,i.onFocus),!o().isFocused()&&o().setFocused(!0)},$=E=>{Ie(E,i.onBlur),!n.isOpen()&&o().setFocused(!1)};return ne(()=>me(n.registerTriggerId(c.id()))),ne(()=>{n.setListboxAriaLabelledBy([c.ariaLabelledBy(),c.ariaLabel()&&!c.ariaLabelledBy()?c.id():null].filter(Boolean).join(" ")||void 0)}),v(Ir,pe({ref(E){const S=vt(n.setTriggerRef,i.ref);typeof S=="function"&&S(E)},get id(){return c.id()},get disabled(){return a()},"aria-haspopup":"listbox",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return te(()=>!!n.isOpen())()?n.listboxId():void 0},get"aria-label"(){return c.ariaLabel()},get"aria-labelledby"(){return h()},get"aria-describedby"(){return c.ariaDescribedBy()},onPointerDown:d,onClick:g,onKeyDown:p,onFocus:b,onBlur:$},()=>n.dataset(),()=>e.dataset(),s))}const W$=V("<span>");function G$(t){const e=Ps(),n=Mr();t=$e({id:n.generateId("value")},t);const[i,r]=we(t,["id","children"]),s=()=>n.listState().selectionManager(),o=()=>{const l=s().selectedKeys();return l.size===1&&l.has("")?!0:s().isEmpty()};return ne(()=>me(n.registerValueId(i.id))),(()=>{const l=H(W$);return Ln(l,pe({get id(){return i.id},get"data-placeholder-shown"(){return o()?"":void 0}},()=>e.dataset(),r),!1,!0),U(l,v(he,{get when(){return!o()},get fallback(){return n.placeholder()},get children(){return v(Y$,{state:{selectedOption:()=>n.selectedOptions()[0],selectedOptions:()=>n.selectedOptions(),remove:a=>n.removeOptionFromSelection(a),clear:()=>s().clearSelection()},get children(){return i.children}})}})),Ht(),l})()}function Y$(t){const e=Or(()=>{const n=t.children;return Wo(n)?n(t.state):n});return te(e)}const Wy=Ue();function Q$(){const t=Me(Wy);if(t===void 0)throw new Error("[kobalte]: `useTextFieldContext` must be used within a `TextField` component");return t}function X$(t){return v(J$,pe({type:"text"},t))}function J$(t){const e=Ps(),n=Q$();t=$e({id:n.generateId("input")},t);const[i,r,s]=we(t,["onInput"],U0),{fieldProps:o}=j0(r);return v(ot,pe({as:"input",get id(){return o.id()},get name(){return e.name()},get value(){return n.value()},get required(){return e.isRequired()},get disabled(){return e.isDisabled()},get readonly(){return e.isReadOnly()},get"aria-label"(){return o.ariaLabel()},get"aria-labelledby"(){return o.ariaLabelledBy()},get"aria-describedby"(){return o.ariaDescribedBy()},get"aria-invalid"(){return e.validationState()==="invalid"||void 0},get"aria-required"(){return e.isRequired()||void 0},get"aria-disabled"(){return e.isDisabled()||void 0},get"aria-readonly"(){return e.isReadOnly()||void 0},get onInput(){return bt([i.onInput,n.onInput])}},()=>e.dataset(),s))}function Z$(t){let e;const n=`textfield-${Wt()}`;t=$e({id:n},t);const[i,r,s]=we(t,["ref","value","defaultValue","onChange"],F0),[o,l]=Yo({value:()=>i.value,defaultValue:()=>i.defaultValue,onChange:h=>i.onChange?.(h)}),{formControlContext:a}=B0(r);M0(()=>e,()=>l(i.defaultValue??""));const c=h=>{if(a.isReadOnly()||a.isDisabled())return;const d=h.target;l(d.value),d.value=o()??""},u={value:o,generateId:Sn(()=>K(r.id)),onInput:c};return v(qd.Provider,{value:a,get children(){return v(Wy.Provider,{value:u,get children(){return v(ot,pe({as:"div",ref(h){const d=vt(g=>e=g,i.ref);typeof d=="function"&&d(h)},role:"group",get id(){return K(r.id)}},()=>a.dataset(),s))}})}})}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/tree/main/packages/%40react-aria/toast/intl
 */const He="{hotkey}",Gy={"ar-AE":{close:"",notifications:`(${He}) `},"bg-BG":{close:"",notifications:` (${He})`},"cs-CZ":{close:"Zavt",notifications:`Upozornn (${He})`},"da-DK":{close:"Luk",notifications:`Pmindelser (${He})`},"de-DE":{close:"Schlieen",notifications:`Benachrichtigungen (${He})`},"el-GR":{close:"",notifications:` (${He})`},"en-US":{close:"Close",notifications:`Notifications (${He})`},"es-ES":{close:"Cerrar",notifications:`Notificaciones (${He})`},"et-EE":{close:"Sule",notifications:`Teated (${He})`},"fi-FI":{close:"Sulje",notifications:`Ilmoitukset (${He})`},"fr-FR":{close:"Fermer",notifications:`Notifications (${He})`},"he-IL":{close:"",notifications:`(${He}) `},"hr-HR":{close:"Zatvori",notifications:`Obavijesti (${He})`},"hu-HU":{close:"Bezrs",notifications:`rtestsek (${He})`},"it-IT":{close:"Chiudi",notifications:`Notifiche (${He})`},"ja-JP":{close:"",notifications:` (${He})`},"ko-KR":{close:"",notifications:` (${He})`},"lt-LT":{close:"Udaryti",notifications:`Praneimai (${He})`},"lv-LV":{close:"Aizvrt",notifications:`Paziojumi (${He})`},"nb-NO":{close:"Lukk",notifications:`Varsler (${He})`},"nl-NL":{close:"Sluiten",notifications:`Meldingen (${He})`},"pl-PL":{close:"Zamknij",notifications:`Powiadomienia (${He})`},"pt-BR":{close:"Fechar",notifications:`Notificaes (${He})`},"pt-PT":{close:"Fechar",notifications:`Notificaes (${He})`},"ro-RO":{close:"nchidei",notifications:`Notificri (${He})`},"ru-RU":{close:"",notifications:` (${He})`},"sk-SK":{close:"Zatvori",notifications:`Oznmenia (${He})`},"sl-SI":{close:"Zapri",notifications:`Obvestila (${He})`},"sr-SP":{close:"Zatvori",notifications:`Obavetenja (${He})`},"sv-SE":{close:"Stng",notifications:`Aviseringar (${He})`},"tr-TR":{close:"Kapat",notifications:`Bildirimler (${He})`},"uk-UA":{close:"",notifications:` (${He})`},"zh-CN":{close:"",notifications:` (${He})`},"zh-TW":{close:"",notifications:` (${He})`}},Yy=Ue();function uc(){const t=Me(Yy);if(t===void 0)throw new Error("[kobalte]: `useToastContext` must be used within a `Toast.Root` component");return t}function eC(t){const e=uc(),[n,i]=we(t,["aria-label","onClick"]),r=Gd(()=>Gy);return v(Ir,pe({get"aria-label"(){return n["aria-label"]||r().format("close")},onClick:o=>{Ie(o,n.onClick),e.close()}},i))}function tC(t){const e=uc();t=$e({id:e.generateId("description")},t);const[n,i]=we(t,["id"]);return ne(()=>me(e.registerDescriptionId(n.id))),v(ot,pe({as:"div",get id(){return n.id}},i))}const Qy=Ue();function nf(){const t=Me(Qy);if(t===void 0)throw new Error("[kobalte]: `useToastRegionContext` must be used within a `Toast.Region` component");return t}const nC=V('<ol tabindex="-1">');function iC(t){let e;const n=nf(),[i,r]=we(t,["ref","onFocusIn","onFocusOut","onPointerMove","onPointerLeave"]),s=c=>{Ie(c,i.onFocusIn),n.pauseOnInteraction()&&!n.isPaused()&&n.pauseAllTimer()},o=c=>{Ie(c,i.onFocusOut),Kt(e,c.relatedTarget)||n.resumeAllTimer()},l=c=>{Ie(c,i.onPointerMove),n.pauseOnInteraction()&&!n.isPaused()&&n.pauseAllTimer()},a=c=>{Ie(c,i.onPointerLeave),Kt(e,Qt(e).activeElement)||n.resumeAllTimer()};return ne(Vt([()=>e,()=>n.hotkey()],([c,u])=>{if(!c)return;const h=Qt(c),d=g=>{u.every(b=>g[b]||g.code===b)&&St(c)};h.addEventListener("keydown",d),me(()=>h.removeEventListener("keydown",d))})),ne(()=>{if(!n.pauseOnPageIdle())return;const c=Xl(e);c.addEventListener("blur",n.pauseAllTimer),c.addEventListener("focus",n.resumeAllTimer),me(()=>{c.removeEventListener("blur",n.pauseAllTimer),c.removeEventListener("focus",n.resumeAllTimer)})}),(()=>{const c=H(nC);c.addEventListener("pointerleave",a),c.$$pointermove=l,c.$$focusout=o,c.$$focusin=s;const u=vt(h=>e=h,i.ref);return typeof u=="function"&&Gl(u,c),Ln(c,r,!1,!0),U(c,v(Gi,{get each(){return n.toasts()},children:h=>h.toastComponent({get toastId(){return h.id}})})),Ht(),c})()}Di(["focusin","focusout","pointermove"]);function rC(t){const e=nf(),n=uc(),[i,r]=we(t,["style"]),[s,o]=G(100);let l=0;return ne(()=>{if(e.isPaused()||n.isPersistent())return;const a=setInterval(()=>{const c=new Date().getTime()-n.closeTimerStartTime()+l,u=Math.trunc(100-c/n.duration()*100);o(u<0?0:u)});me(()=>{l+=new Date().getTime()-n.closeTimerStartTime(),clearInterval(a)})}),v(ot,pe({as:"div",get style(){return{"--kb-toast-progress-fill-width":`${s()}%`,...i.style}}},r))}function sC(t){return v(ot,pe({as:"div","aria-hidden":"true",role:"presentation"},t))}const oC=V('<div role="region" tabindex="-1">');function aC(t){const e=`toast-region-${Wt()}`;t=$e({id:e,hotkey:["altKey","KeyT"],duration:5e3,limit:3,swipeDirection:"right",swipeThreshold:50,pauseOnInteraction:!0,pauseOnPageIdle:!0,topLayer:!0},t);const[n,i]=we(t,["style","hotkey","duration","limit","swipeDirection","swipeThreshold","pauseOnInteraction","pauseOnPageIdle","topLayer","aria-label","regionId"]),r=te(()=>wr.toasts().filter(g=>g.region===n.regionId).slice(0,n.limit)),[s,o]=G(!1),l=Gd(()=>Gy),a=()=>r().length>0,c=()=>n.hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,""),u=()=>(n["aria-label"]||l().format("notifications",{hotkey:c()})).replace(He,c()),h=()=>({[fo]:n.topLayer?"":void 0}),d={isPaused:s,toasts:r,hotkey:()=>n.hotkey,duration:()=>n.duration,swipeDirection:()=>n.swipeDirection,swipeThreshold:()=>n.swipeThreshold,pauseOnInteraction:()=>n.pauseOnInteraction,pauseOnPageIdle:()=>n.pauseOnPageIdle,pauseAllTimer:()=>o(!0),resumeAllTimer:()=>o(!1),generateId:Sn(()=>i.id)};return v(Qy.Provider,{value:d,get children(){const g=H(oC);return Ln(g,pe({get"aria-label"(){return u()},get style(){return{"pointer-events":a()?n.topLayer?"auto":void 0:"none",...n.style}}},h,i),!1,!1),Ht(),g}})}const lC=V('<li role="status" tabindex="0" aria-atomic="true">'),cC="toast.swipeStart",uC="toast.swipeMove",hC="toast.swipeCancel",dC="toast.swipeEnd";function Xy(t){const e=`toast-${Wt()}`,n=nf();t=$e({id:e,priority:"high"},t);const[i,r]=we(t,["ref","toastId","style","priority","duration","persistent","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd","onEscapeKeyDown","onKeyDown","onPointerDown","onPointerMove","onPointerUp"]),[s,o]=G(!0),[l,a]=G(),[c,u]=G(),[h,d]=G(!0),g=vr(s),p=te(()=>i.duration||n.duration());let b,$=0,E=p(),S=null,m=null;const x=()=>{o(!1),d(!0)},_=()=>{wr.remove(i.toastId)},C=F=>{!F||i.persistent||(window.clearTimeout(b),$=new Date().getTime(),b=window.setTimeout(x,F))},w=()=>{C(E),i.onResume?.()},k=()=>{const F=new Date().getTime()-$;E=E-F,window.clearTimeout(b),i.onPause?.()},D=F=>{Ie(F,i.onKeyDown),F.key==="Escape"&&(i.onEscapeKeyDown?.(F),F.defaultPrevented||x())},P=F=>{Ie(F,i.onPointerDown),F.button===0&&(S={x:F.clientX,y:F.clientY})},O=F=>{if(Ie(F,i.onPointerMove),!S)return;const X=F.clientX-S.x,re=F.clientY-S.y,be=!!m,Re=["left","right"].includes(n.swipeDirection()),ue=["left","up"].includes(n.swipeDirection())?Math.min:Math.max,gt=Re?ue(0,X):0,at=Re?0:ue(0,re),tt=F.pointerType==="touch"?10:2,ge={x:gt,y:at},J={originalEvent:F,delta:ge};if(be){m=ge,Ta(uC,i.onSwipeMove,J);const{x:Ne,y:ae}=ge;F.currentTarget.setAttribute("data-swipe","move"),F.currentTarget.style.setProperty("--kb-toast-swipe-move-x",`${Ne}px`),F.currentTarget.style.setProperty("--kb-toast-swipe-move-y",`${ae}px`)}else ym(ge,n.swipeDirection(),tt)?(m=ge,Ta(cC,i.onSwipeStart,J),F.currentTarget.setAttribute("data-swipe","start"),F.target.setPointerCapture(F.pointerId)):(Math.abs(X)>tt||Math.abs(re)>tt)&&(S=null)},R=F=>{Ie(F,i.onPointerUp);const X=m,re=F.target;if(re.hasPointerCapture(F.pointerId)&&re.releasePointerCapture(F.pointerId),m=null,S=null,X){const be=F.currentTarget,Re={originalEvent:F,delta:X};if(ym(X,n.swipeDirection(),n.swipeThreshold())){Ta(dC,i.onSwipeEnd,Re);const{x:ue,y:gt}=X;F.currentTarget.setAttribute("data-swipe","end"),F.currentTarget.style.removeProperty("--kb-toast-swipe-move-x"),F.currentTarget.style.removeProperty("--kb-toast-swipe-move-y"),F.currentTarget.style.setProperty("--kb-toast-swipe-end-x",`${ue}px`),F.currentTarget.style.setProperty("--kb-toast-swipe-end-y",`${gt}px`),x()}else Ta(hC,i.onSwipeCancel,Re),F.currentTarget.setAttribute("data-swipe","cancel"),F.currentTarget.style.removeProperty("--kb-toast-swipe-move-x"),F.currentTarget.style.removeProperty("--kb-toast-swipe-move-y"),F.currentTarget.style.removeProperty("--kb-toast-swipe-end-x"),F.currentTarget.style.removeProperty("--kb-toast-swipe-end-y");be.addEventListener("click",ue=>ue.preventDefault(),{once:!0})}};ui(()=>{n.toasts().find(F=>F.id===i.toastId&&F.update)&&d(!1)}),ne(Vt(()=>n.isPaused(),F=>{F?k():w()},{defer:!0})),ne(Vt([s,p],([F,X])=>{F&&!n.isPaused()&&C(X)})),ne(Vt(()=>wr.get(i.toastId)?.dismiss,F=>F&&x())),ne(Vt(()=>g.isPresent(),F=>!F&&_()));const B={close:x,duration:p,isPersistent:()=>i.persistent??!1,closeTimerStartTime:()=>$,generateId:Sn(()=>r.id),registerTitleId:yt(a),registerDescriptionId:yt(u)};return v(he,{get when(){return g.isPresent()},get children(){return v(Yy.Provider,{value:B,get children(){const F=H(lC);F.$$pointerup=R,F.$$pointermove=O,F.$$pointerdown=P,F.$$keydown=D;const X=vt(g.setRef,i.ref);return typeof X=="function"&&Gl(X,F),Ln(F,pe({get style(){return{animation:h()?void 0:"none","user-select":"none","touch-action":"none",...i.style}},get"aria-live"(){return i.priority==="high"?"assertive":"polite"},get"aria-labelledby"(){return l()},get"aria-describedby"(){return c()},get"data-opened"(){return s()?"":void 0},get"data-closed"(){return s()?void 0:""},get"data-swipe-direction"(){return n.swipeDirection()}},r),!1,!1),Ht(),F}})}})}function ym(t,e,n=0){const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n}function Ta(t,e,n){const i=n.originalEvent.currentTarget,r=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),i.dispatchEvent(r)}Di(["keydown","pointerdown","pointermove","pointerup"]);function fC(t){const e=uc();t=$e({id:e.generateId("title")},t);const[n,i]=we(t,["id"]);return ne(()=>me(e.registerTitleId(n.id))),v(ot,pe({as:"div",get id(){return n.id}},i))}function Jy(t){const[e,n]=we(t,["children","pressed","defaultPressed","onChange","onClick"]),i=Hx({isSelected:()=>e.pressed,defaultIsSelected:()=>e.defaultPressed,onSelectedChange:s=>e.onChange?.(s),isDisabled:()=>n.disabled});return v(Ir,pe({get"aria-pressed"(){return i.isSelected()},get"data-pressed"(){return i.isSelected()?"":void 0},onClick:s=>{Ie(s,e.onClick),i.toggle()}},n,{get children(){return v(pC,{get state(){return{pressed:i.isSelected}},get children(){return e.children}})}}))}function pC(t){const e=Or(()=>{const n=t.children;return Wo(n)?n(t.state):n});return te(e)}const Zy=Ue();function rf(){const t=Me(Zy);if(t===void 0)throw new Error("[kobalte]: `useTooltipContext` must be used within a `Tooltip` component");return t}function gC(t){const e=rf();t=$e({id:e.generateId("content")},t);const[n,i]=we(t,["ref","style"]);return ne(()=>me(e.registerContentId(i.id))),v(he,{get when(){return e.contentPresence.isPresent()},get children(){return v(sc,{get children(){return v(Xo,pe({ref(r){const s=vt(o=>{e.setContentRef(o),e.contentPresence.setRef(o)},n.ref);typeof s=="function"&&s(r)},role:"tooltip",disableOutsidePointerEvents:!1,get style(){return{"--kb-tooltip-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative",...n.style}},onFocusOutside:r=>r.preventDefault(),onDismiss:()=>e.hideTooltip(!0)},()=>e.dataset(),i))}})}})}function mC(t){const e=rf();return v(he,{get when(){return e.contentPresence.isPresent()},get children(){return v(rr,t)}})}/*!
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the Ariakit team:
 * https://github.com/ariakit/ariakit/blob/84e97943ad637a582c01c9b56d880cd95f595737/packages/ariakit/src/hovercard/__utils/polygon.ts
 * https://github.com/ariakit/ariakit/blob/f2a96973de523d67e41eec983263936c489ef3e2/packages/ariakit/src/hovercard/__utils/debug-polygon.ts
 */function bC(t,e,n){const i=t.split("-")[0],r=e.getBoundingClientRect(),s=n.getBoundingClientRect(),o=[],l=r.left+r.width/2,a=r.top+r.height/2;switch(i){case"top":o.push([r.left,a]),o.push([s.left,s.bottom]),o.push([s.left,s.top]),o.push([s.right,s.top]),o.push([s.right,s.bottom]),o.push([r.right,a]);break;case"right":o.push([l,r.top]),o.push([s.left,s.top]),o.push([s.right,s.top]),o.push([s.right,s.bottom]),o.push([s.left,s.bottom]),o.push([l,r.bottom]);break;case"bottom":o.push([r.left,a]),o.push([s.left,s.top]),o.push([s.left,s.bottom]),o.push([s.right,s.bottom]),o.push([s.right,s.top]),o.push([r.right,a]);break;case"left":o.push([l,r.top]),o.push([s.right,s.top]),o.push([s.left,s.top]),o.push([s.left,s.bottom]),o.push([s.right,s.bottom]),o.push([l,r.bottom]);break}return o}const lr={};let yC=0,Hr=!1,bi,Ws;function vC(t){const e=`tooltip-${Wt()}`,n=`${++yC}`;t=$e({id:e,openDelay:700,closeDelay:300},t);const[i,r]=we(t,["id","open","defaultOpen","onOpenChange","disabled","triggerOnFocusOnly","openDelay","closeDelay","ignoreSafeArea","forceMount"]);let s;const[o,l]=G(),[a,c]=G(),[u,h]=G(),[d,g]=G(r.placement),p=ks({open:()=>i.open,defaultOpen:()=>i.defaultOpen,onOpenChange:B=>i.onOpenChange?.(B)}),b=vr(()=>i.forceMount||p.isOpen()),$=()=>{lr[n]=S},E=()=>{for(const B in lr)B!==n&&(lr[B](!0),delete lr[B])},S=(B=!1)=>{B||i.closeDelay&&i.closeDelay<=0?(window.clearTimeout(s),s=void 0,p.close()):s||(s=window.setTimeout(()=>{s=void 0,p.close()},i.closeDelay)),window.clearTimeout(bi),bi=void 0,Hr&&(window.clearTimeout(Ws),Ws=window.setTimeout(()=>{delete lr[n],Ws=void 0,Hr=!1},i.closeDelay))},m=()=>{clearTimeout(s),s=void 0,E(),$(),Hr=!0,p.open(),window.clearTimeout(bi),bi=void 0,window.clearTimeout(Ws),Ws=void 0},x=()=>{E(),$(),!p.isOpen()&&!bi&&!Hr?bi=window.setTimeout(()=>{bi=void 0,Hr=!0,m()},i.openDelay):p.isOpen()||m()},_=(B=!1)=>{!B&&i.openDelay&&i.openDelay>0&&!s?x():m()},C=()=>{window.clearTimeout(bi),bi=void 0,Hr=!1},w=()=>{window.clearTimeout(s),s=void 0},k=B=>Kt(a(),B)||Kt(u(),B),D=B=>{const F=a(),X=u();if(!(!F||!X))return bC(B,F,X)},P=B=>{const F=B.target;if(k(F)){w();return}if(!i.ignoreSafeArea){const X=D(d());if(X&&O0(wx(B),X)){w();return}}s||S()};ne(()=>{if(!p.isOpen())return;const B=Qt();B.addEventListener("pointermove",P,!0),me(()=>{B.removeEventListener("pointermove",P,!0)})}),ne(()=>{const B=a();if(!B||!p.isOpen())return;const F=re=>{const be=re.target;Kt(be,B)&&S(!0)},X=Xl();X.addEventListener("scroll",F,{capture:!0}),me(()=>{X.removeEventListener("scroll",F,{capture:!0})})}),me(()=>{clearTimeout(s),lr[n]&&delete lr[n]});const R={dataset:te(()=>({"data-expanded":p.isOpen()?"":void 0,"data-closed":p.isOpen()?void 0:""})),isOpen:p.isOpen,isDisabled:()=>i.disabled??!1,triggerOnFocusOnly:()=>i.triggerOnFocusOnly??!1,contentId:o,contentPresence:b,openTooltip:_,hideTooltip:S,cancelOpening:C,generateId:Sn(()=>t.id),registerContentId:yt(l),isTargetOnTooltip:k,setTriggerRef:c,setContentRef:h};return v(Zy.Provider,{value:R,get children(){return v(lc,pe({anchorRef:a,contentRef:u,onCurrentPlacementChange:g},r))}})}function wC(t){let e;const n=rf(),[i,r]=we(t,["ref","onPointerEnter","onPointerLeave","onPointerDown","onClick","onFocus","onBlur","onTouchStart"]);let s=!1,o=!1,l=!1;const a=()=>{s=!1},c=()=>{!n.isOpen()&&(o||l)&&n.openTooltip(l)},u=E=>{n.isOpen()&&!o&&!l&&n.hideTooltip(E)},h=E=>{Ie(E,i.onPointerEnter),!(E.pointerType==="touch"||n.triggerOnFocusOnly()||n.isDisabled()||E.defaultPrevented)&&(o=!0,c())},d=E=>{Ie(E,i.onPointerLeave),E.pointerType!=="touch"&&(o=!1,l=!1,n.isOpen()?u():n.cancelOpening())},g=E=>{Ie(E,i.onPointerDown),s=!0,Qt(e).addEventListener("pointerup",a,{once:!0})},p=E=>{Ie(E,i.onClick),o=!1,l=!1,u(!0)},b=E=>{Ie(E,i.onFocus),!(n.isDisabled()||E.defaultPrevented||s)&&(l=!0,c())},$=E=>{Ie(E,i.onBlur);const S=E.relatedTarget;n.isTargetOnTooltip(S)||(o=!1,l=!1,u(!0))};return me(()=>{Qt(e).removeEventListener("pointerup",a)}),v(ot,pe({as:"button",ref(E){const S=vt(m=>{n.setTriggerRef(m),e=m},i.ref);typeof S=="function"&&S(E)},get"aria-describedby"(){return te(()=>!!n.isOpen())()?n.contentId():void 0},onPointerEnter:h,onPointerLeave:d,onPointerDown:g,onClick:p,onFocus:b,onBlur:$},()=>n.dataset(),r))}const _C=V('<svg stroke-width="0"></svg>',2),xC=V("<title></title>",2);function _e(t,e){const n=pe(t.a,e),[i,r]=we(n,["src"]);return(()=>{const s=_C.cloneNode(!0);return Ln(s,pe({get stroke(){return t.a.stroke},get color(){return e.color||"currentColor"},get fill(){return e.color||"currentColor"},get style(){return{...e.style,overflow:"visible"}}},r,{get height(){return e.size||"1em"},get width(){return e.size||"1em"},get innerHTML(){return t.c},xmlns:"http://www.w3.org/2000/svg"}),!0,!0),U(s,()=>$s,null),U(s,(()=>{const o=te(()=>!!e.title);return()=>o()&&(()=>{const l=xC.cloneNode(!0);return U(l,()=>e.title),l})()})(),null),s})()}function SC(t){return _e({a:{viewBox:"0 0 640 512"},c:'<path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2s-6.3 25.5 4.1 33.7l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7l-105.2-82.4c39.6-40.6 66.4-86.1 79.9-118.4 3.3-7.9 3.3-16.7 0-24.6-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zm151 118.3C226 97.7 269.5 80 320 80c65.2 0 118.8 29.6 159.9 67.7C518.4 183.5 545 226 558.6 256c-12.6 28-36.6 66.8-70.9 100.9l-53.8-42.2c9.1-17.6 14.2-37.5 14.2-58.7 0-70.7-57.3-128-128-128-32.2 0-61.7 11.9-84.2 31.5l-46.1-36.1zm205.1 160.8-81.5-63.9c4.2-8.5 6.6-18.2 6.6-28.3 0-5.5-.7-10.9-2-16h2c44.2 0 80 35.8 80 80 0 9.9-1.8 19.4-5.1 28.2zm9.4 130.3C378.8 425.4 350.7 432 320 432c-65.2 0-118.8-29.6-159.9-67.7C121.6 328.5 95 286 81.4 256c8.3-18.4 21.5-41.5 39.4-64.8l-37.7-29.7c-22.8 29.7-39.1 59.3-48.6 82.2-3.3 7.9-3.3 16.7 0 24.6 14.9 35.7 46.2 87.7 93 131.1 47 43.8 111.7 80.6 192.5 80.6 47.8 0 89.9-12.9 126.2-32.5l-41.9-33zM192 256c0 70.7 57.3 128 128 128 13.3 0 26.1-2 38.2-5.8L302 334c-23.5-5.4-43.1-21.2-53.7-42.3l-56.1-44.2c-.2 2.8-.3 5.6-.3 8.5z"/>'},t)}function EC(t){return _e({a:{viewBox:"0 0 576 512"},c:'<path d="M288 80c-65.2 0-118.8 29.6-159.9 67.7C89.6 183.5 63 226 49.4 256 63 286 89.6 328.5 128 364.3c41.2 38.1 94.8 67.7 160 67.7s118.8-29.6 159.9-67.7C486.4 328.5 513 286 526.6 256c-13.6-30-40.2-72.5-78.6-108.3C406.8 109.6 353.2 80 288 80zM95.4 112.6C142.5 68.8 207.2 32 288 32s145.5 36.8 192.6 80.6c46.8 43.5 78.1 95.4 93 131.1 3.3 7.9 3.3 16.7 0 24.6-14.9 35.7-46.2 87.7-93 131.1C433.5 443.2 368.8 480 288 480s-145.5-36.8-192.6-80.6C48.6 356 17.3 304 2.5 268.3c-3.3-7.9-3.3-16.7 0-24.6C17.3 208 48.6 156 95.4 112.6zM288 336c44.2 0 80-35.8 80-80s-35.8-80-80-80h-2c1.3 5.1 2 10.5 2 16 0 35.3-28.7 64-64 64-5.5 0-10.9-.7-16-2v2c0 44.2 35.8 80 80 80zm0-208a128 128 0 1 1 0 256 128 128 0 1 1 0-256z"/>'},t)}function $C(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8 62.5-62.5 163.8-62.5 226.3 0l17.1 17.2H336c-17.7 0-32 14.3-32 32s14.3 32 32 32h127.9c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2l-17.5-17.6c-87.5-87.5-229.3-87.5-316.8 0-24.4 24.4-42 53.1-52.8 83.8-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2-4 4-6.7 8.8-8.1 14-.3 1.2-.6 2.5-.8 3.8-.3 1.7-.4 3.4-.4 5.1V448c0 17.7 14.3 32 32 32s32-14.3 32-32v-51.1l17.6 17.5c87.5 87.4 229.3 87.4 316.7 0 24.4-24.4 42.1-53.1 52.9-83.7 5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8-62.5 62.5-163.8 62.5-226.3 0l-.1-.1-17.1-17.1H176c17.7 0 32-14.3 32-32s-14.3-32-32-32H48.4c-1.6 0-3.2.1-4.8.3s-3.1.5-4.6 1z"/>'},t)}function CC(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M367.2 412.5 99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192 41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192-41.5 0-79.9 13.1-111.2 35.5l267.7 267.7zM0 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0z"/>'},t)}function PR(t){return _e({a:{viewBox:"0 0 384 512"},c:'<path d="M0 48v439.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400l153.7 107.6c4.1 2.9 9 4.4 14 4.4 13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"/>'},t)}function AR(t){return _e({a:{viewBox:"0 0 640 512"},c:'<path d="M58.9 42.1c3-6.1 9.6-9.6 16.3-8.7L320 64l244.8-30.6c6.7-.8 13.3 2.7 16.3 8.7l41.7 83.4c9 17.9-.6 39.6-19.8 45.1l-163.4 46.7c-13.9 4-28.8-1.9-36.2-14.3L320 64l-83.4 139c-7.4 12.4-22.3 18.3-36.2 14.3L37.1 170.6c-19.3-5.5-28.8-27.2-19.8-45.1l41.6-83.4zM321.1 128l54.9 91.4c14.9 24.8 44.6 36.6 72.5 28.6L576 211.6v167c0 22-15 41.2-36.4 46.6l-204.1 51c-10.2 2.6-20.9 2.6-31 0l-204.1-51C79 419.7 64 400.5 64 378.5v-167L191.6 248c27.8 8 57.6-3.8 72.5-28.6l54.8-91.4h2.2z"/>'},t)}function TC(t){return _e({a:{viewBox:"0 0 384 512"},c:'<path d="M162.4 6c-1.5-3.6-5-6-8.9-6h-19c-3.9 0-7.5 2.4-8.9 6l-20.7 51.7c-3.2 8-14.6 8-17.8 0L66.4 6c-1.5-3.6-5-6-8.9-6H48C21.5 0 0 21.5 0 48v208H384V48c0-26.5-21.5-48-48-48H230.5c-3.9 0-7.5 2.4-8.9 6l-20.7 51.7c-3.2 8-14.6 8-17.8 0L162.4 6zM0 288v32c0 35.3 28.7 64 64 64h64v64c0 35.3 28.7 64 64 64s64-28.7 64-64v-64h64c35.3 0 64-28.7 64-64v-32H0zm192 144a16 16 0 1 1 0 32 16 16 0 1 1 0-32z"/>'},t)}function kC(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M256 0c53 0 96 43 96 96v3.6c0 15.7-12.7 28.4-28.4 28.4H188.4c-15.7 0-28.4-12.7-28.4-28.4V96c0-53 43-96 96-96zM41.4 105.4c12.5-12.5 32.8-12.5 45.3 0l64 64c.7.7 1.3 1.4 1.9 2.1 14.2-7.3 30.4-11.4 47.5-11.4H312c17.1 0 33.2 4.1 47.5 11.4.6-.7 1.2-1.4 1.9-2.1l64-64c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-64 64c-.7.7-1.4 1.3-2.1 1.9 6.2 12 10.1 25.3 11.1 39.5H480c17.7 0 32 14.3 32 32s-14.3 32-32 32h-64c0 24.6-5.5 47.8-15.4 68.6 2.2 1.3 4.2 2.9 6 4.8l64 64c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0l-63.1-63.1c-24.5 21.8-55.8 36.2-90.3 39.6V240c0-8.8-7.2-16-16-16s-16 7.2-16 16v239.2c-34.5-3.4-65.8-17.8-90.3-39.6l-63 63c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l64-64c1.9-1.9 3.9-3.4 6-4.8C101.5 367.8 96 344.6 96 320H32c-17.7 0-32-14.3-32-32s14.3-32 32-32h64.3c1.1-14.1 5-27.5 11.1-39.5-.7-.6-1.4-1.2-2.1-1.9l-64-64c-12.5-12.5-12.5-32.8 0-45.3z"/>'},t)}function ev(t){return _e({a:{viewBox:"0 0 448 512"},c:'<path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7l233.4-233.3c12.5-12.5 32.8-12.5 45.3 0z"/>'},t)}function OR(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"/>'},t)}function DR(t){return _e({a:{viewBox:"0 0 320 512"},c:'<path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/>'},t)}function PC(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm113-303L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/>'},t)}function IR(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24v112c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zm-32 224a32 32 0 1 1 64 0 32 32 0 1 1-64 0z"/>'},t)}function AC(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm-81-337c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"/>'},t)}function RR(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M75 75 41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24h110.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24v104c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/>'},t)}function LR(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M272 0h124.1C408.8 0 421 5.1 430 14.1L497.9 82c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H272c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128h144v64H64v256h192v-32h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"/>'},t)}function MR(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32v242.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64v-32c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/>'},t)}function OC(t){return _e({a:{viewBox:"0 0 576 512"},c:'<path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4 142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7 0-24.6-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1-288 0zm144-64c0 35.3-28.7 64-64 64-7.1 0-13.9-1.2-20.3-3.3-5.5-1.8-11.9 1.6-11.7 7.4.3 6.9 1.3 13.8 3.2 20.7 13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1-5.8-.2-9.2 6.1-7.4 11.7 2.1 6.4 3.3 13.2 3.3 20.3z"/>'},t)}function DC(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.4c2.2 20.4 3.3 41.8 3.3 64zm28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 20.9 58.2 27 94.7zm-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6zM8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zm186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6h116.7zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.6z"/>'},t)}function IC(t){return _e({a:{viewBox:"0 0 576 512"},c:'<path d="m47.6 300.4 180.7 168.7c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9l2.6-2.4C267.2 438.6 256 404.6 256 368c0-97.2 78.8-176 176-176 28.3 0 55 6.7 78.7 18.5.9-6.5 1.3-13 1.3-19.6v-5.8c0-69.9-50.5-129.5-119.4-141-45.6-7.6-92 7.3-124.6 39.9l-12 12-12-12c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5zM576 368a144 144 0 1 0-288 0 144 144 0 1 0 288 0zm-64 0c0 8.8-7.2 16-16 16H368c-8.8 0-16-7.2-16-16s7.2-16 16-16h128c8.8 0 16 7.2 16 16z"/>'},t)}function RC(t){return _e({a:{viewBox:"0 0 576 512"},c:'<path d="m47.6 300.4 180.7 168.7c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9l2.6-2.4C267.2 438.6 256 404.6 256 368c0-97.2 78.8-176 176-176 28.3 0 55 6.7 78.7 18.5.9-6.5 1.3-13 1.3-19.6v-5.8c0-69.9-50.5-129.5-119.4-141-45.6-7.6-92 7.3-124.6 39.9l-12 12-12-12c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5zM432 512a144 144 0 1 0 0-288 144 144 0 1 0 0 288zm16-208v48h48c8.8 0 16 7.2 16 16s-7.2 16-16 16h-48v48c0 8.8-7.2 16-16 16s-16-7.2-16-16v-48h-48c-8.8 0-16-7.2-16-16s7.2-16 16-16h48v-48c0-8.8 7.2-16 16-16s16 7.2 16 16z"/>'},t)}function NR(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/>'},t)}function LC(t){return _e({a:{viewBox:"0 0 448 512"},c:'<path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32v144H48c-17.7 0-32 14.3-32 32s14.3 32 32 32h144v144c0 17.7 14.3 32 32 32s32-14.3 32-32V288h144c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/>'},t)}function MC(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M307 34.8c-11.5 5.1-19 16.6-19 29.2v64H176C78.8 128 0 206.8 0 304c0 113.3 81.5 163.9 100.2 174.1 2.5 1.4 5.3 1.9 8.1 1.9 10.9 0 19.7-8.9 19.7-19.7 0-7.5-4.3-14.4-9.8-19.5-9.4-8.9-22.2-26.4-22.2-56.8 0-53 43-96 96-96h96v64c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144a31.76 31.76 0 0 0-34.4-5.4z"/>'},t)}function NC(t){return _e({a:{viewBox:"0 0 320 512"},c:'<path d="M137.4 41.4c12.5-12.5 32.8-12.5 45.3 0l128 128c9.2 9.2 11.9 22.9 6.9 34.9S301 224.1 288 224.1H32c-12.9 0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9l128-128zm0 429.3-128-128c-9.2-9.2-11.9-22.9-6.9-34.9S19.1 288 32.1 288H288c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128c-12.5 12.5-32.8 12.5-45.3 0z"/>'},t)}function FR(t){return _e({a:{viewBox:"0 0 512 512"},c:'<path d="M313.4 32.9c26 5.2 42.9 30.5 37.7 56.5l-2.3 11.4c-5.3 26.7-15.1 52.1-28.8 75.2h144c26.5 0 48 21.5 48 48 0 18.5-10.5 34.6-25.9 42.6C497 275.4 504 288.9 504 304c0 23.4-16.8 42.9-38.9 47.1 4.4 7.3 6.9 15.8 6.9 24.9 0 21.3-13.9 39.4-33.1 45.6.7 3.3 1.1 6.8 1.1 10.4 0 26.5-21.5 48-48 48h-97.5c-19 0-37.5-5.6-53.3-16.1l-38.5-25.7C176 420.4 160 390.4 160 358.3V247.1c0-29.2 13.3-56.7 36-75l7.4-5.9c26.5-21.2 44.6-51 51.2-84.2l2.3-11.4c5.2-26 30.5-42.9 56.5-37.7zM32 192h64c17.7 0 32 14.3 32 32v224c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V224c0-17.7 14.3-32 32-32z"/>'},t)}function BR(t){return _e({a:{viewBox:"0 0 448 512"},c:'<path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0h120.4c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64s14.3-32 32-32h96l7.2-14.3zM32 128h384v320c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16v224c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16v224c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16v224c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"/>'},t)}function tv(t){return _e({a:{viewBox:"0 0 384 512"},c:'<path d="M376.6 84.5c11.3-13.6 9.5-33.8-4.1-45.1s-33.8-9.5-45.1 4.1L192 206 56.6 43.5c-11.3-13.6-31.5-15.4-45.1-4.1S-3.9 70.9 7.4 84.5L150.3 256 7.4 427.5c-11.3 13.6-9.5 33.8 4.1 45.1s33.8 9.5 45.1-4.1L192 306l135.4 162.5c11.3 13.6 31.5 15.4 45.1 4.1s15.4-31.5 4.1-45.1L233.7 256 376.6 84.5z"/>'},t)}const vm=t=>v(Ky,{get open(){return t.isOpen},get onOpenChange(){return t.onOpenChange},get children(){return[v(Hy,{class:"p-1 outline-none focus-visible:ring-2 focus-visible:ring-primary rounded-md",get children(){return v(k$,{get children(){return t.triggerIcon}})}}),v(Uy,{get children(){return v(Vy,{class:`bg-bg1 border border-bg3/80 rounded-md z-[999999]
          -top-2
          animate-in
          fade-in
          slide-in-from-top-10
          duration-200
          `,get children(){return[v(rc,{}),v(O$,{class:`max-h-[40vh] overflow-y-auto
            p-2
            `,get value(){return t.selectedValue},get onChange(){return t.onChange},get children(){return v(Gi,{get each(){return t.options},children:e=>v(D$,{get value(){return e.value??e.label},class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b last:border-none hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-primary focus-visible:outline-none",get onClick(){return e.onClick},get children(){return[v(P$,{class:"inline-flex absolute left-0",get children(){return v(ev,{fill:"currentColor",class:"h-4 w-4 mx-1 text-text1"})}}),te(()=>e.label)]}})})}})]}})}})]}});class ea{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const n={listener:e};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const bo=typeof window>"u"||"Deno"in window;function Cn(){}function FC(t,e){return typeof t=="function"?t(e):t}function nh(t){return typeof t=="number"&&t>=0&&t!==1/0}function nv(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ka(t,e,n){return hc(t)?typeof e=="function"?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function ji(t,e,n){return hc(t)?[{...e,queryKey:t},n]:[t||{},e]}function wm(t,e){const{type:n="all",exact:i,fetchStatus:r,predicate:s,queryKey:o,stale:l}=t;if(hc(o)){if(i){if(e.queryHash!==sf(o,e.options))return!1}else if(!il(e.queryKey,o))return!1}if(n!=="all"){const a=e.isActive();if(n==="active"&&!a||n==="inactive"&&a)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||typeof r<"u"&&r!==e.state.fetchStatus||s&&!s(e))}function _m(t,e){const{exact:n,fetching:i,predicate:r,mutationKey:s}=t;if(hc(s)){if(!e.options.mutationKey)return!1;if(n){if(ur(e.options.mutationKey)!==ur(s))return!1}else if(!il(e.options.mutationKey,s))return!1}return!(typeof i=="boolean"&&e.state.status==="loading"!==i||r&&!r(e))}function sf(t,e){return(e?.queryKeyHashFn||ur)(t)}function ur(t){return JSON.stringify(t,(e,n)=>rh(n)?Object.keys(n).sort().reduce((i,r)=>(i[r]=n[r],i),{}):n)}function il(t,e){return iv(t,e)}function iv(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!iv(t[n],e[n])):!1}function rv(t,e){if(t===e)return t;const n=xm(t)&&xm(e);if(n||rh(t)&&rh(e)){const i=n?t.length:Object.keys(t).length,r=n?e:Object.keys(e),s=r.length,o=n?[]:{};let l=0;for(let a=0;a<s;a++){const c=n?a:r[a];o[c]=rv(t[c],e[c]),o[c]===t[c]&&l++}return i===s&&l===i?t:o}return e}function ih(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function xm(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function rh(t){if(!Sm(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!Sm(n)||!n.hasOwnProperty("isPrototypeOf"))}function Sm(t){return Object.prototype.toString.call(t)==="[object Object]"}function hc(t){return Array.isArray(t)}function sv(t){return new Promise(e=>{setTimeout(e,t)})}function Em(t){sv(0).then(t)}function BC(){if(typeof AbortController=="function")return new AbortController}function sh(t,e,n){return n.isDataEqual!=null&&n.isDataEqual(t,e)?t:typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?rv(t,e):e}class UC extends ea{constructor(){super(),this.setup=e=>{if(!bo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const rl=new UC,$m=["online","offline"];class jC extends ea{constructor(){super(),this.setup=e=>{if(!bo&&window.addEventListener){const n=()=>e();return $m.forEach(i=>{window.addEventListener(i,n,!1)}),()=>{$m.forEach(i=>{window.removeEventListener(i,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(i=>{typeof i=="boolean"?this.setOnline(i):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const sl=new jC;function HC(t){return Math.min(1e3*2**t,3e4)}function dc(t){return(t??"online")==="online"?sl.isOnline():!0}class ov{constructor(e){this.revert=e?.revert,this.silent=e?.silent}}function Ba(t){return t instanceof ov}function av(t){let e=!1,n=0,i=!1,r,s,o;const l=new Promise(($,E)=>{s=$,o=E}),a=$=>{i||(g(new ov($)),t.abort==null||t.abort())},c=()=>{e=!0},u=()=>{e=!1},h=()=>!rl.isFocused()||t.networkMode!=="always"&&!sl.isOnline(),d=$=>{i||(i=!0,t.onSuccess==null||t.onSuccess($),r?.(),s($))},g=$=>{i||(i=!0,t.onError==null||t.onError($),r?.(),o($))},p=()=>new Promise($=>{r=E=>{const S=i||!h();return S&&$(E),S},t.onPause==null||t.onPause()}).then(()=>{r=void 0,i||t.onContinue==null||t.onContinue()}),b=()=>{if(i)return;let $;try{$=t.fn()}catch(E){$=Promise.reject(E)}Promise.resolve($).then(d).catch(E=>{var S,m;if(i)return;const x=(S=t.retry)!=null?S:3,_=(m=t.retryDelay)!=null?m:HC,C=typeof _=="function"?_(n,E):_,w=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,E);if(e||!w){g(E);return}n++,t.onFail==null||t.onFail(n,E),sv(C).then(()=>{if(h())return p()}).then(()=>{e?g(E):b()})})};return dc(t.networkMode)?b():p().then(b),{promise:l,cancel:a,continue:()=>r?.()?l:Promise.resolve(),cancelRetry:c,continueRetry:u}}const of=console;function VC(){let t=[],e=0,n=u=>{u()},i=u=>{u()};const r=u=>{let h;e++;try{h=u()}finally{e--,e||l()}return h},s=u=>{e?t.push(u):Em(()=>{n(u)})},o=u=>(...h)=>{s(()=>{u(...h)})},l=()=>{const u=t;t=[],u.length&&Em(()=>{i(()=>{u.forEach(h=>{n(h)})})})};return{batch:r,batchCalls:o,schedule:s,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{i=u}}}const Gt=VC();class lv{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nh(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(bo?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class KC extends lv{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||of,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||qC(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,n){const i=sh(this.state.data,e,this.options);return this.dispatch({data:i,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),i}setState(e,n){this.dispatch({type:"setState",state:e,setStateOptions:n})}cancel(e){var n;const i=this.promise;return(n=this.retryer)==null||n.cancel(e),i?i.then(Cn).catch(Cn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!nv(this.state.dataUpdatedAt,e)}onFocus(){var e;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,n){var i,r;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(p=>p.options.queryFn);g&&this.setOptions(g.options)}const o=BC(),l={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},a=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};a(l);const c=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(l)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),u={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:c};if(a(u),(i=this.options.behavior)==null||i.onFetch(u),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((r=u.fetchOptions)==null?void 0:r.meta)){var h;this.dispatch({type:"fetch",meta:(h=u.fetchOptions)==null?void 0:h.meta})}const d=g=>{if(Ba(g)&&g.silent||this.dispatch({type:"error",error:g}),!Ba(g)){var p,b,$,E;(p=(b=this.cache.config).onError)==null||p.call(b,g,this),($=(E=this.cache.config).onSettled)==null||$.call(E,this.state.data,g,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=av({fn:u.fetchFn,abort:o?.abort.bind(o),onSuccess:g=>{var p,b,$,E;if(typeof g>"u"){d(new Error(this.queryHash+" data is undefined"));return}this.setData(g),(p=(b=this.cache.config).onSuccess)==null||p.call(b,g,this),($=(E=this.cache.config).onSettled)==null||$.call(E,g,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:d,onFail:(g,p)=>{this.dispatch({type:"failed",failureCount:g,error:p})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const n=i=>{var r,s;switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(r=e.meta)!=null?r:null,fetchStatus:dc(this.options.networkMode)?"fetching":"paused",...!i.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:(s=e.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return Ba(o)&&o.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),Gt.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function qC(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=typeof e<"u",i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class zC extends ea{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,n,i){var r;const s=n.queryKey,o=(r=n.queryHash)!=null?r:sf(s,n);let l=this.get(o);return l||(l=new KC({cache:this,logger:e.getLogger(),queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:i,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const n=this.queriesMap[e.queryHash];n&&(e.destroy(),this.queries=this.queries.filter(i=>i!==e),n===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){Gt.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,n){const[i]=ji(e,n);return typeof i.exact>"u"&&(i.exact=!0),this.queries.find(r=>wm(i,r))}findAll(e,n){const[i]=ji(e,n);return Object.keys(i).length>0?this.queries.filter(r=>wm(i,r)):this.queries}notify(e){Gt.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}onFocus(){Gt.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){Gt.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class WC extends lv{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||of,this.observers=[],this.state=e.state||GC(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(n=>n!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,n;return(e=(n=this.retryer)==null?void 0:n.continue())!=null?e:this.execute()}async execute(){const e=()=>{var w;return this.retryer=av({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(k,D)=>{this.dispatch({type:"failed",failureCount:k,error:D})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(w=this.options.retry)!=null?w:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var i,r,s,o,l,a,c,u;if(!n){var h,d,g,p;this.dispatch({type:"loading",variables:this.options.variables}),await((h=(d=this.mutationCache.config).onMutate)==null?void 0:h.call(d,this.state.variables,this));const k=await((g=(p=this.options).onMutate)==null?void 0:g.call(p,this.state.variables));k!==this.state.context&&this.dispatch({type:"loading",context:k,variables:this.state.variables})}const w=await e();return await((i=(r=this.mutationCache.config).onSuccess)==null?void 0:i.call(r,w,this.state.variables,this.state.context,this)),await((s=(o=this.options).onSuccess)==null?void 0:s.call(o,w,this.state.variables,this.state.context)),await((l=(a=this.mutationCache.config).onSettled)==null?void 0:l.call(a,w,null,this.state.variables,this.state.context,this)),await((c=(u=this.options).onSettled)==null?void 0:c.call(u,w,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:w}),w}catch(w){try{var b,$,E,S,m,x,_,C;throw await((b=($=this.mutationCache.config).onError)==null?void 0:b.call($,w,this.state.variables,this.state.context,this)),await((E=(S=this.options).onError)==null?void 0:E.call(S,w,this.state.variables,this.state.context)),await((m=(x=this.mutationCache.config).onSettled)==null?void 0:m.call(x,void 0,w,this.state.variables,this.state.context,this)),await((_=(C=this.options).onSettled)==null?void 0:_.call(C,void 0,w,this.state.variables,this.state.context)),w}finally{this.dispatch({type:"error",error:w})}}}dispatch(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"loading":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!dc(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...i,...e.state}}};this.state=n(this.state),Gt.batch(()=>{this.observers.forEach(i=>{i.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function GC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class YC extends ea{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,n,i){const r=new WC({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(n),state:i,defaultOptions:n.mutationKey?e.getMutationDefaults(n.mutationKey):void 0});return this.add(r),r}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(n=>n!==e),this.notify({type:"removed",mutation:e})}clear(){Gt.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(n=>_m(e,n))}findAll(e){return this.mutations.filter(n=>_m(e,n))}notify(e){Gt.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const n=this.mutations.filter(i=>i.state.isPaused);return Gt.batch(()=>n.reduce((i,r)=>i.then(()=>r.continue().catch(Cn)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function QC(){return{onFetch:t=>{t.fetchFn=()=>{var e,n,i,r,s,o;const l=(e=t.fetchOptions)==null||(n=e.meta)==null?void 0:n.refetchPage,a=(i=t.fetchOptions)==null||(r=i.meta)==null?void 0:r.fetchMore,c=a?.pageParam,u=a?.direction==="forward",h=a?.direction==="backward",d=((s=t.state.data)==null?void 0:s.pages)||[],g=((o=t.state.data)==null?void 0:o.pageParams)||[];let p=g,b=!1;const $=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>{var w;if((w=t.signal)!=null&&w.aborted)b=!0;else{var k;(k=t.signal)==null||k.addEventListener("abort",()=>{b=!0})}return t.signal}})},E=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),S=(C,w,k,D)=>(p=D?[w,...p]:[...p,w],D?[k,...C]:[...C,k]),m=(C,w,k,D)=>{if(b)return Promise.reject("Cancelled");if(typeof k>"u"&&!w&&C.length)return Promise.resolve(C);const P={queryKey:t.queryKey,pageParam:k,meta:t.options.meta};$(P);const O=E(P);return Promise.resolve(O).then(B=>S(C,k,B,D))};let x;if(!d.length)x=m([]);else if(u){const C=typeof c<"u",w=C?c:oh(t.options,d);x=m(d,C,w)}else if(h){const C=typeof c<"u",w=C?c:cv(t.options,d);x=m(d,C,w,!0)}else{p=[];const C=typeof t.options.getNextPageParam>"u";x=(l&&d[0]?l(d[0],0,d):!0)?m([],C,g[0]):Promise.resolve(S([],g[0],d[0]));for(let k=1;k<d.length;k++)x=x.then(D=>{if(l&&d[k]?l(d[k],k,d):!0){const O=C?g[k]:oh(t.options,D);return m(D,C,O)}return Promise.resolve(S(D,g[k],d[k]))})}return x.then(C=>({pages:C,pageParams:p}))}}}}function oh(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function cv(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}function UR(t,e){if(t.getNextPageParam&&Array.isArray(e)){const n=oh(t,e);return typeof n<"u"&&n!==null&&n!==!1}}function jR(t,e){if(t.getPreviousPageParam&&Array.isArray(e)){const n=cv(t,e);return typeof n<"u"&&n!==null&&n!==!1}}class XC{constructor(e={}){this.queryCache=e.queryCache||new zC,this.mutationCache=e.mutationCache||new YC,this.logger=e.logger||of,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=rl.subscribe(()=>{rl.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=sl.subscribe(()=>{sl.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,n;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(e,n){const[i]=ji(e,n);return i.fetchStatus="fetching",this.queryCache.findAll(i).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,n){var i;return(i=this.queryCache.find(e,n))==null?void 0:i.state.data}ensureQueryData(e,n,i){const r=ka(e,n,i),s=this.getQueryData(r.queryKey);return s?Promise.resolve(s):this.fetchQuery(r)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:n,state:i})=>{const r=i.data;return[n,r]})}setQueryData(e,n,i){const r=this.queryCache.find(e),s=r?.state.data,o=FC(n,s);if(typeof o>"u")return;const l=ka(e),a=this.defaultQueryOptions(l);return this.queryCache.build(this,a).setData(o,{...i,manual:!0})}setQueriesData(e,n,i){return Gt.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,n,i)]))}getQueryState(e,n){var i;return(i=this.queryCache.find(e,n))==null?void 0:i.state}removeQueries(e,n){const[i]=ji(e,n),r=this.queryCache;Gt.batch(()=>{r.findAll(i).forEach(s=>{r.remove(s)})})}resetQueries(e,n,i){const[r,s]=ji(e,n,i),o=this.queryCache,l={type:"active",...r};return Gt.batch(()=>(o.findAll(r).forEach(a=>{a.reset()}),this.refetchQueries(l,s)))}cancelQueries(e,n,i){const[r,s={}]=ji(e,n,i);typeof s.revert>"u"&&(s.revert=!0);const o=Gt.batch(()=>this.queryCache.findAll(r).map(l=>l.cancel(s)));return Promise.all(o).then(Cn).catch(Cn)}invalidateQueries(e,n,i){const[r,s]=ji(e,n,i);return Gt.batch(()=>{var o,l;if(this.queryCache.findAll(r).forEach(c=>{c.invalidate()}),r.refetchType==="none")return Promise.resolve();const a={...r,type:(o=(l=r.refetchType)!=null?l:r.type)!=null?o:"active"};return this.refetchQueries(a,s)})}refetchQueries(e,n,i){const[r,s]=ji(e,n,i),o=Gt.batch(()=>this.queryCache.findAll(r).filter(a=>!a.isDisabled()).map(a=>{var c;return a.fetch(void 0,{...s,cancelRefetch:(c=s?.cancelRefetch)!=null?c:!0,meta:{refetchPage:r.refetchPage}})}));let l=Promise.all(o).then(Cn);return s!=null&&s.throwOnError||(l=l.catch(Cn)),l}fetchQuery(e,n,i){const r=ka(e,n,i),s=this.defaultQueryOptions(r);typeof s.retry>"u"&&(s.retry=!1);const o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)}prefetchQuery(e,n,i){return this.fetchQuery(e,n,i).then(Cn).catch(Cn)}fetchInfiniteQuery(e,n,i){const r=ka(e,n,i);return r.behavior=QC(),this.fetchQuery(r)}prefetchInfiniteQuery(e,n,i){return this.fetchInfiniteQuery(e,n,i).then(Cn).catch(Cn)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,n){const i=this.queryDefaults.find(r=>ur(e)===ur(r.queryKey));i?i.defaultOptions=n:this.queryDefaults.push({queryKey:e,defaultOptions:n})}getQueryDefaults(e){if(!e)return;const n=this.queryDefaults.find(i=>il(e,i.queryKey));return n?.defaultOptions}setMutationDefaults(e,n){const i=this.mutationDefaults.find(r=>ur(e)===ur(r.mutationKey));i?i.defaultOptions=n:this.mutationDefaults.push({mutationKey:e,defaultOptions:n})}getMutationDefaults(e){if(!e)return;const n=this.mutationDefaults.find(i=>il(e,i.mutationKey));return n?.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const n={...this.defaultOptions.queries,...this.getQueryDefaults(e?.queryKey),...e,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=sf(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e?.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class JC extends ea{constructor(e,n){super(),this.client=e,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),Cm(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ah(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ah(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,n){const i=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),ih(i,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=i.queryKey),this.updateQuery();const s=this.hasListeners();s&&Tm(this.currentQuery,r,this.options,i)&&this.executeFetch(),this.updateResult(n),s&&(this.currentQuery!==r||this.options.enabled!==i.enabled||this.options.staleTime!==i.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==r||this.options.enabled!==i.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const n=this.client.getQueryCache().build(this.client,e),i=this.createResult(n,e);return eT(this,i,e)&&(this.currentResult=i,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),i}getCurrentResult(){return this.currentResult}trackResult(e){const n={};return Object.keys(e).forEach(i=>{Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(i),e[i])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...n}={}){return this.fetch({...n,meta:{refetchPage:e}})}fetchOptimistic(e){const n=this.client.defaultQueryOptions(e),i=this.client.getQueryCache().build(this.client,n);return i.isFetchingOptimistic=!0,i.fetch().then(()=>this.createResult(i,n))}fetch(e){var n;return this.executeFetch({...e,cancelRefetch:(n=e.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let n=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Cn)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),bo||this.currentResult.isStale||!nh(this.options.staleTime))return;const n=nv(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(bo||this.options.enabled===!1||!nh(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||rl.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,n){const i=this.currentQuery,r=this.options,s=this.currentResult,o=this.currentResultState,l=this.currentResultOptions,a=e!==i,c=a?e.state:this.currentQueryInitialState,u=a?this.currentResult:this.previousQueryResult,{state:h}=e;let{dataUpdatedAt:d,error:g,errorUpdatedAt:p,fetchStatus:b,status:$}=h,E=!1,S=!1,m;if(n._optimisticResults){const k=this.hasListeners(),D=!k&&Cm(e,n),P=k&&Tm(e,i,n,r);(D||P)&&(b=dc(e.options.networkMode)?"fetching":"paused",d||($="loading")),n._optimisticResults==="isRestoring"&&(b="idle")}if(n.keepPreviousData&&!h.dataUpdatedAt&&u!=null&&u.isSuccess&&$!=="error")m=u.data,d=u.dataUpdatedAt,$=u.status,E=!0;else if(n.select&&typeof h.data<"u")if(s&&h.data===o?.data&&n.select===this.selectFn)m=this.selectResult;else try{this.selectFn=n.select,m=n.select(h.data),m=sh(s?.data,m,n),this.selectResult=m,this.selectError=null}catch(k){this.selectError=k}else m=h.data;if(typeof n.placeholderData<"u"&&typeof m>"u"&&$==="loading"){let k;if(s!=null&&s.isPlaceholderData&&n.placeholderData===l?.placeholderData)k=s.data;else if(k=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof k<"u")try{k=n.select(k),this.selectError=null}catch(D){this.selectError=D}typeof k<"u"&&($="success",m=sh(s?.data,k,n),S=!0)}this.selectError&&(g=this.selectError,m=this.selectResult,p=Date.now(),$="error");const x=b==="fetching",_=$==="loading",C=$==="error";return{status:$,fetchStatus:b,isLoading:_,isSuccess:$==="success",isError:C,isInitialLoading:_&&x,data:m,dataUpdatedAt:d,error:g,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:x,isRefetching:x&&!_,isLoadingError:C&&h.dataUpdatedAt===0,isPaused:b==="paused",isPlaceholderData:S,isPreviousData:E,isRefetchError:C&&h.dataUpdatedAt!==0,isStale:af(e,n),refetch:this.refetch,remove:this.remove}}updateResult(e){const n=this.currentResult,i=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,ih(i,n))return;this.currentResult=i;const r={cache:!0},s=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!this.trackedProps.size)return!0;const a=new Set(l??this.trackedProps);return this.options.useErrorBoundary&&a.add("error"),Object.keys(this.currentResult).some(c=>{const u=c;return this.currentResult[u]!==n[u]&&a.has(u)})};e?.listeners!==!1&&s()&&(r.listeners=!0),this.notify({...r,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n?.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const n={};e.type==="success"?n.onSuccess=!e.manual:e.type==="error"&&!Ba(e.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(e){Gt.batch(()=>{if(e.onSuccess){var n,i,r,s;(n=(i=this.options).onSuccess)==null||n.call(i,this.currentResult.data),(r=(s=this.options).onSettled)==null||r.call(s,this.currentResult.data,null)}else if(e.onError){var o,l,a,c;(o=(l=this.options).onError)==null||o.call(l,this.currentResult.error),(a=(c=this.options).onSettled)==null||a.call(c,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:u})=>{u(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function ZC(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Cm(t,e){return ZC(t,e)||t.state.dataUpdatedAt>0&&ah(t,e,e.refetchOnMount)}function ah(t,e,n){if(e.enabled!==!1){const i=typeof n=="function"?n(t):n;return i==="always"||i!==!1&&af(t,e)}return!1}function Tm(t,e,n,i){return n.enabled!==!1&&(t!==e||i.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&af(t,n)}function af(t,e){return t.isStaleByTime(e.staleTime)}function eT(t,e,n){return n.keepPreviousData?!1:n.placeholderData!==void 0?e.isPlaceholderData:!ih(t.getCurrentResult(),e)}function tT(t){return typeof t=="function"}function km(t,e,n){if(!tT(t)){const{queryKey:i,...r}=t;return i?{...r,queryKey:i()}:t}return typeof e=="function"?{...n,queryKey:t(),queryFn:e}:{...e,queryKey:t()}}function nT(t,e){return typeof t=="function"?t(...e):!!t}const Pm=Ue(void 0),uv=Ue(!1);function hv(t,e){return t||(e&&typeof window<"u"?(window.SolidQueryClientContext||(window.SolidQueryClientContext=Pm),window.SolidQueryClientContext):Pm)}const iT=({context:t}={})=>{const e=Me(hv(t,Me(uv)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},rT=t=>{const e=pe({contextSharing:!1},t);ui(()=>{e.client.mount()}),me(()=>e.client.unmount());const n=hv(e.context,e.contextSharing);return v(uv.Provider,{get value(){return!e.context&&e.contextSharing},get children(){return v(n.Provider,{get value(){return e.client},get children(){return e.children}})}})};function sT(t,e){const n=iT({context:t.context}),i=Symbol("empty"),r=n.defaultQueryOptions(t);r._optimisticResults="optimistic";const s=new e(n,r),[o,l]=hi(s.getOptimisticResult(r)),[a,{refetch:c,mutate:u}]=Gb(()=>new Promise(p=>{o.isFetching&&o.isLoading||(pn(o.data)===i&&p(void 0),p(pn(o.data)))}));ss(()=>{u(()=>pn(o.data)),c()});let h=[];const d=s.subscribe(p=>{h.push(()=>{ss(()=>{const b={...pn(p)};b.data===void 0&&(b.data=i),l(pn(b)),u(()=>pn(p.data)),c()})}),queueMicrotask(()=>{const b=h.pop();b&&b(),h=[]})});me(()=>d()),ui(()=>{s.setOptions(r,{listeners:!1})}),br(()=>{const p=n.defaultQueryOptions(t);s.setOptions(p)}),br(Vt(()=>o.status,()=>{if(o.isError&&!o.isFetching&&nT(s.options.useErrorBoundary,[o.error,s.getCurrentQuery()]))throw o.error}));const g={get(p,b){return b==="data"?a():Reflect.get(p,b)}};return new Proxy(o,g)}function fc(t,e,n){const[i,r]=hi(km(t,e,n));return br(()=>{const s=km(t,e,n);r(s)}),sT(i,JC)}const Gr=hi({autoplay:!1,pip:!1,muted:!1,volume:.5,speed:1,quality:"auto",theatreMode:!1,loop:!1,instance:{name:"Piped",api_url:"https://pipedapi.kavin.rocks",cache:!0,cdn:!0,last_checked:new Date().getTime(),locations:"",version:"0.0.0",registered:0,s3_enabled:!1,up_to_date:!1,image_proxy_url:"https://pipedproxy.kavin.rocks"}}),dv=Ue(Gr),oT=t=>(ui(()=>{Gr[1](x0("preferences",Gr[0],"json","localStorage"))}),ne(()=>{console.log(Gr[0],"preferences changed"),Bd("preferences",Gr[0],"localStorage")}),v(dv.Provider,{value:Gr,get children(){return t.children}})),ta=()=>Me(dv),fv=hi({loading:!1,sync:{providers:{idb:"disconnected",webrtc:"disconnected",opfs:"disconnected"},syncing:!1,lastSync:0,userId:0,users:[]},player:{small:!1,dismissed:!1,lastVideoUrl:""}}),pv=Ue(fv),aT=t=>v(pv.Provider,{value:fv,get children(){return t.children}}),Is=()=>Me(pv);function HR(t){return _e({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-adjustments-cog",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 10a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"/><path d="M6 4v4"/><path d="M6 12v8"/><path d="M13.199 14.399a2 2 0 1 0 -1.199 3.601"/><path d="M12 4v10"/><path d="M12 18v2"/><path d="M16 7a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"/><path d="M18 4v1"/><path d="M18 9v2.5"/><path d="M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M19.001 15.5v1.5"/><path d="M19.001 21v1.5"/><path d="M22.032 17.25l-1.299 .75"/><path d="M17.27 20l-1.3 .75"/><path d="M15.97 17.25l1.3 .75"/><path d="M20.733 20l1.3 .75"/>'},t)}function lT(t){return _e({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-arrow-left",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0"/><path d="M5 12l6 6"/><path d="M5 12l6 -6"/>'},t)}function gv(t){return _e({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-arrow-up-left",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7l10 10"/><path d="M16 7l-9 0l0 9"/>'},t)}function cT(t){return _e({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-clock-plus",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M20.984 12.535a9 9 0 1 0 -8.468 8.45"/><path d="M16 19h6"/><path d="M19 16v6"/><path d="M12 7v5l3 3"/>'},t)}function VR(t){return _e({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-cloud-cog",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 18.004h-5.343c-2.572 -.004 -4.657 -2.011 -4.657 -4.487c0 -2.475 2.085 -4.482 4.657 -4.482c.393 -1.762 1.794 -3.2 3.675 -3.773c1.88 -.572 3.956 -.193 5.444 1c1.488 1.19 2.162 3.007 1.77 4.769h.99c.956 0 1.822 .39 2.449 1.02"/><path d="M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M19.001 15.5v1.5"/><path d="M19.001 21v1.5"/><path d="M22.032 17.25l-1.299 .75"/><path d="M17.27 20l-1.3 .75"/><path d="M15.97 17.25l1.3 .75"/><path d="M20.733 20l1.3 .75"/>'},t)}function KR(t){return _e({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-filter-cog",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 20l-3 1v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v1.5"/><path d="M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M19.001 15.5v1.5"/><path d="M19.001 21v1.5"/><path d="M22.032 17.25l-1.299 .75"/><path d="M17.27 20l-1.3 .75"/><path d="M15.97 17.25l1.3 .75"/><path d="M20.733 20l1.3 .75"/>'},t)}function qR(t){return _e({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-photo-cog",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8h.01"/><path d="M12 21h-6a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6"/><path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3 3"/><path d="M14 14l1 -1c.48 -.461 1.016 -.684 1.551 -.67"/><path d="M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M19.001 15.5v1.5"/><path d="M19.001 21v1.5"/><path d="M22.032 17.25l-1.299 .75"/><path d="M17.27 20l-1.3 .75"/><path d="M15.97 17.25l1.3 .75"/><path d="M20.733 20l1.3 .75"/>'},t)}function uT(t){return _e({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-repeat-off",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3c0 -1.336 .873 -2.468 2.08 -2.856m3.92 -.144h10m-3 -3l3 3l-3 3"/><path d="M20 12v3a3 3 0 0 1 -.133 .886m-1.99 1.984a3 3 0 0 1 -.877 .13h-13m3 3l-3 -3l3 -3"/><path d="M3 3l18 18"/>'},t)}function hT(t){return _e({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-repeat",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3"/><path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3 -3l3 -3"/>'},t)}function dT(t){return _e({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-search",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"/><path d="M21 21l-6 -6"/>'},t)}function zR(t){return _e({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-thumb-down-filled",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 21.008a3 3 0 0 0 2.995 -2.823l.005 -.177v-4h2a3 3 0 0 0 2.98 -2.65l.015 -.173l.005 -.177l-.02 -.196l-1.006 -5.032c-.381 -1.625 -1.502 -2.796 -2.81 -2.78l-.164 .008h-8a1 1 0 0 0 -.993 .884l-.007 .116l.001 9.536a1 1 0 0 0 .5 .866a2.998 2.998 0 0 1 1.492 2.396l.007 .202v1a3 3 0 0 0 3 3z" stroke-width="0" fill="currentColor"/><path d="M5 14.008a1 1 0 0 0 .993 -.883l.007 -.117v-9a1 1 0 0 0 -.883 -.993l-.117 -.007h-1a2 2 0 0 0 -1.995 1.852l-.005 .15v7a2 2 0 0 0 1.85 1.994l.15 .005h1z" stroke-width="0" fill="currentColor"/>'},t)}function WR(t){return _e({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-thumb-up-filled",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M13 3a3 3 0 0 1 2.995 2.824l.005 .176v4h2a3 3 0 0 1 2.98 2.65l.015 .174l.005 .176l-.02 .196l-1.006 5.032c-.381 1.626 -1.502 2.796 -2.81 2.78l-.164 -.008h-8a1 1 0 0 1 -.993 -.883l-.007 -.117l.001 -9.536a1 1 0 0 1 .5 -.865a2.998 2.998 0 0 0 1.492 -2.397l.007 -.202v-1a3 3 0 0 1 3 -3z" stroke-width="0" fill="currentColor"/><path d="M5 10a1 1 0 0 1 .993 .883l.007 .117v9a1 1 0 0 1 -.883 .993l-.117 .007h-1a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-7a2 2 0 0 1 1.85 -1.995l.15 -.005h1z" stroke-width="0" fill="currentColor"/>'},t)}function lh(t){return _e({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-x",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12"/><path d="M6 6l12 12"/>'},t)}async function GR(t,e,n){if(e){const r=new URL(t);for(const s in e)e.hasOwnProperty(s)&&r.searchParams.set(s,e[s]);t=r.toString()}return(await fetch(t,n)).json()}function YR(t,e,n){if(t[e]===n)return t}function QR(t,e){return`${t}/vi/${e}/mqdefault.jpg?host=i.ytimg.com`}const fT=t=>{if(!t)return"";let e=`WEBVTT

`,n=0;for(let s of t.urls)for(let o=0;o<t.framesPerPageY;o++)for(let l=0;l<t.framesPerPageX&&!(n>=t.totalCount*t.durationPerFrame);l++){let a=l*t.frameWidth,c=o*t.frameHeight;e+=`${i(n)} --> ${i(n+t.durationPerFrame)}
`,e+=`${s}#xywh=${a},${c},${t.frameWidth},${t.frameHeight}

`,n+=t.durationPerFrame}function i(s){let o=Math.floor(s/36e5);s-=o*36e5;let l=Math.floor(s/6e4);s-=l*6e4;let a=Math.floor(s/1e3);return s-=a*1e3,`${o.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}.${s.toString().padStart(3,"0")}`}const r=new Blob([e],{type:"text/vtt"});return URL.createObjectURL(r)};function yo(){return new Promise(t=>{setTimeout(t,0)})}function ht(t){const e=n=>{let i;return n?.includes("/watch?v=")?i=n.split("/watch?v=")[1]:i=n?.match("vi(?:_webp)?/([a-zA-Z0-9_-]{11})")?.[1],i};if(t){if(t.videoId)return t.videoId;if(t.id)return t.id;if(t.url)return e(t.url);if(t.thumbnailUrl)return e(t.thumbnailUrl);if(t.thumbnail)return e(t.thumbnail)}}async function pT(t,e=5,n=1e3,i=6e4){let r=0;if(n>=i)throw new Error("minDelay should be less than maxDelay.");if(e<0)throw new Error("Number of retries should be non-negative.");for(;;)try{return await t()}catch{if(r++,r>e)throw new Error("Maximum retries reached.");const o=Math.min(n*Math.pow(2,r),i);await new Promise(l=>setTimeout(l,o))}}function gT(){return navigator.maxTouchPoints>1&&typeof screen.orientation!==void 0}const mT=V('<button id="search-back-button" class="sm:hidden bg-bg2 p-1 px-2 text-gray-500 flex items-center justify-center hover:bg-bg1 hover:text-text1 focus-visible:ring-2 focus-visible:ring-primary/80 rounded focus-visible:outline-none " aria-label="Back">'),bT=V('<button id="search-button" class="absolute right-10 top-1/2 transform -translate-y-1/2 text-gray-500 flex items-center justify-center hover:bg-bg1 hover:text-text1 focus-visible:ring-2 focus-visible:ring-primary/80 rounded focus-visible:outline-none " aria-label="Search">'),yT=V('<button id="search-clear-button" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 flex items-center justify-center hover:bg-bg1 hover:text-text1 focus-visible:ring-2 focus-visible:ring-primary/80 rounded focus-visible:outline-none " aria-label="Clear search">'),vT=V('<ul class="absolute w-screen left-0 right-0 sm:w-max sm:min-w-[30rem] sm:left-[calc(70vw-18rem)] top-10 sm:mt-1 bg-bg1 border-1 border-bg2/80 p-2 z-[999999] text-text1 rounded-md border border-bg1 shadow-md transform transition-transform duration-250 ease-in origin-center animate-in fade-in aria-[expanded]:animate-out aria-[expanded]:fade-out " aria-multiselectable="false" aria-live="polite" aria-label="Suggestions" id="search-suggestion-list">'),wT=V('<div><!#><!/><label for="search-input" class="sr-only">Search</label><input aria-haspopup="listbox" aria-owns="suggestion-list" aria-controls="suggestion-list" id="search-input" class="w-full max-w-full outline-none bg-bg1 border border-bg2 focus:ring-2 text-text1 text-sm rounded-lg focus:ring-primary focus:border-primary mx-1 py-1 px-2.5" type="combobox" placeholder="Search... (Ctrl + K)" aria-autocomplete="list"><!#><!/><!#><!/><!#><!/>'),_T=V('<button role="none" class="text-xs text-gray-500 h-8 w-8 flex items-center justify-center hover:bg-bg1 hover:text-text1 focus-visible:ring-2 focus-visible:ring-primary/80 rounded focus-visible:outline-none ">'),xT=V('<li tabindex="0"><span aria-hidden="true"></span><div class="ml-2 flex items-center"><button role="none" class="text-xs text-gray-500 h-8 w-8 flex items-center justify-center hover:bg-bg1 hover:text-text1 focus-visible:ring-2 focus-visible:ring-primary/80 rounded focus-visible:outline-none "></button><!#><!/>'),ST=()=>{const[t,e]=G(""),[n,i]=G([]),[r,s]=G(-1),[o]=Dr();ne(()=>{d(o.search_query||nt(()=>h()))});const l=()=>{const w=JSON.parse(localStorage.getItem("search_history")||"[]");console.log(w),i(w.map(k=>({value:k,isHistory:!0})))},[a]=ta(),c=fc(()=>["suggestions"],async()=>(console.log("fetching suggestions",t()),await fetch(a.instance?.api_url+"/suggestions?query="+t()).then(w=>w.json())),{get enabled(){return!!(t().length>1&&a.instance?.api_url&&g())},select:w=>{console.log(w),w&&!w.error?i(w.map(k=>({value:k,isHistory:!1}))):i([])}}),u=Ts();Is();const[h,d]=G(""),[g,p]=G(!1);function b(w){console.log(w),u(`/results?search_query=${w}`,{replace:!0})}const $=w=>{const k=w.target.value;if(k.length<1){l();return}d(k),e(k),c.refetch()},E=w=>{const D=JSON.parse(localStorage.getItem("search_history")||"[]").filter(P=>P!==w);Bd("search_history",D,"localStorage"),l()},S=w=>{const k=w.target;switch(w.key){case"ArrowDown":s(D=>{if(D===-1||n().length===0)return 0;const P=Math.min(D+1,n().length-1);return d(n()[P].value),P});break;case"ArrowUp":s(D=>{if(D===-1||n().length===0)return 0;const P=Math.max(D-1,0);return d(n()[P].value),P}),setTimeout(()=>{k.selectionStart=n()[r()].value.length,k.selectionEnd=n()[r()].value.length},0);break;case"Enter":console.log("enter",r(),n(),n()[r()]),r()>-1?(e(n()[r()].value),b(n()[r()].value),i([]),p(!1)):h().length>0&&(b(h()),e(h()),i([]),p(!1));break;case"Escape":i([]);break;case"Delete":w.ctrlKey&&r()>-1&&E(n()[r()].value);break}};ui(()=>{document.addEventListener("keydown",x),me(()=>{document.removeEventListener("keydown",x)})});let m;function x(w){w.ctrlKey&&w.key==="k"&&(w.preventDefault(),m?.focus()),w.key==="Escape"&&m?.blur()}const _=()=>{s(-1),p(!0),t()||l()},C=()=>{console.log("blur",document.activeElement);const w=document.activeElement;w&&w.id.startsWith("search-")||setTimeout(()=>{i([]),p(!1)},150)};return(()=>{const w=H(wT),k=w.firstChild,[D,P]=ee(k.nextSibling),O=D.nextSibling,R=O.nextSibling,B=R.nextSibling,[F,X]=ee(B.nextSibling),re=F.nextSibling,[be,Re]=ee(re.nextSibling),ue=be.nextSibling,[gt,at]=ee(ue.nextSibling);U(w,v(he,{get when(){return te(()=>n().length>0)()&&g()},get children(){const ge=H(mT);return ge.$$click=()=>{i([]),p(!1),m?.blur()},U(ge,v(lT,{"aria-hidden":"true",class:"w-6 h-6"})),Ht(),ge}}),D,P),R.$$keydown=S,R.addEventListener("blur",async()=>{await yo(),C()}),R.addEventListener("focus",_),R.$$input=$;const tt=m;return typeof tt=="function"?Gl(tt,R):m=R,U(w,v(he,{get when(){return h().length>0},get children(){const ge=H(bT);return ge.$$click=()=>{b(h())},U(ge,v(dT,{class:"w-5 h-5","aria-hidden":"true"})),Ht(),ge}}),F,X),U(w,v(he,{get when(){return h().length>0},get children(){const ge=H(yT);return ge.$$click=()=>{d(""),e(""),i([]),m?.focus()},U(ge,v(lh,{class:"w-5 h-5","aria-hidden":"true"})),Ht(),ge}}),be,Re),U(w,v(he,{get when(){return te(()=>n().length>0)()&&g()},get children(){return v(rr,{get children(){const ge=H(vT);return U(ge,v(Gi,{get each(){return n()},children:(J,Ne)=>(()=>{const ae=H(xT),je=ae.firstChild,it=je.nextSibling,ft=it.firstChild,Ge=ft.nextSibling,[Xe,_t]=ee(Ge.nextSibling);return ae.$$focusin=()=>{s(Ne())},ae.$$keydown=xe=>{console.log("keydown"),xe.stopPropagation(),xe.key==="Enter"&&(e(J.value),d(J.value),b(J.value),i([]),p(!1))},ae.$$click=()=>{console.log("click"),e(J.value),d(J.value),b(J.value),i([]),p(!1)},U(je,()=>J.value),ft.$$keydown=xe=>{xe.key==="Enter"&&(xe.stopPropagation(),d(J.value),m?.focus())},ft.$$click=xe=>{xe.stopPropagation(),d(J.value),m?.focus()},U(ft,v(gv,{class:"w-5 h-5","aria-hidden":"true"})),U(it,v(he,{get when(){return J.isHistory},get children(){const xe=H(_T);return xe.$$keydown=Ce=>{Ce.key==="Enter"&&J.isHistory&&(Ce.stopPropagation(),E(J.value),m?.focus())},xe.$$click=Ce=>{console.log("remove"),J.isHistory&&(Ce.stopPropagation(),E(J.value),m?.focus())},U(xe,v(lh,{class:"w-5 h-5","aria-hidden":"true"})),Le(Ce=>{const N=`search-suggestion-remove-${Ne()}`,j=`Remove suggestion ${J.value} (Ctrl+Delete)`;return N!==Ce._v$4&&ct(xe,"id",Ce._v$4=N),j!==Ce._v$5&&ct(xe,"aria-label",Ce._v$5=j),Ce},{_v$4:void 0,_v$5:void 0}),Ht(),xe}}),Xe,_t),Le(xe=>{const Ce={"text-sm leading-none text-text1 border-b border-bg2 last:border-none rounded-md flex items-center justify-between h-8 px-2 py-5 relative select-none outline-none cursor-pointer hover:bg-bg2":!0,"bg-bg2 focus-visible:ring-2 ring-primary":r()===Ne()},N=`search-option-${Ne()}`,j=r()===Ne(),Z=J.value,le=`search-suggestion-use-${Ne()}`,A=`Use suggestion ${J.value} (Enter)`;return xe._v$6=on(ae,Ce,xe._v$6),N!==xe._v$7&&ct(ae,"id",xe._v$7=N),j!==xe._v$8&&ct(ae,"aria-selected",xe._v$8=j),Z!==xe._v$9&&ct(ae,"aria-label",xe._v$9=Z),le!==xe._v$10&&ct(ft,"id",xe._v$10=le),A!==xe._v$11&&ct(ft,"aria-label",xe._v$11=A),xe},{_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0,_v$11:void 0}),Ht(),ae})()})),ge}})}}),gt,at),Le(ge=>{const J={"relative z-[999999] flex items-center transition-all duration-500 ":!0,"-left-10 sm:left-0 w-screen sm:w-auto":n().length>0&&g()},Ne=n().length>0&&g(),ae=r()>-1?`option-${r()}`:void 0;return ge._v$=on(w,J,ge._v$),Ne!==ge._v$2&&ct(R,"aria-expanded",ge._v$2=Ne),ae!==ge._v$3&&ct(R,"aria-activedescendant",ge._v$3=ae),ge},{_v$:void 0,_v$2:void 0,_v$3:void 0}),Le(()=>R.value=h()),Ht(),w})()};Di(["click","input","keydown","focusin"]);const ET=V('<div class="flex items-baseline justify-between mb-3"><!#><!/><!#><!/>'),$T=V('<div class="fixed inset-0 z-[999999] flex items-center justify-center">');function lf(t){return v(TE,{modal:!0,get open(){return t.isOpen},get onOpenChange(){return t.setIsOpen},get children(){return v(CE,{get children(){return[v($E,{class:` fixed 
    inset-0 
    z-50 
    bg-black/20
    animate-out
    fade-out
    data-[expanded]:animate-in
    data-[expanded]:fade-in
    `}),(()=>{const e=H($T);return U(e,v(SE,{class:` z-50 
    max-w-[calc(100vw-16px)] 
    max-h-[80vh]
              my-auto
    overflow-hidden
    border 
    border-bg3
    rounded-md 
    p-4 
    bg-bg1
    shadow-md 
    animate-out
    fade-out
    ease-in
    data-[expanded]:animate-in
    data-[expanded]:fade-in
    data-[expanded]:duration-300
    data-[expanded]:ease-out
    `,get children(){return[(()=>{const n=H(ET),i=n.firstChild,[r,s]=ee(i.nextSibling),o=r.nextSibling,[l,a]=ee(o.nextSibling);return U(n,v(kE,{class:"text-xl font-semibold",get children(){return t.title}}),r,s),U(n,v(_E,{class:"",get children(){return v(tv,{fill:"currentColor",class:"w-4 h-4"})}}),l,a),n})(),v(EE,{class:`text-base 
    max-h-[calc(100vh-50px)] overflow-y-auto`,get children(){return t.children}})]}})),e})()]}})}})}const Am=V("<span>"),CT=V('<div><div class="w-2 h-2 bg-white rounded-full animate-bounce"></div><div class="w-2 h-2 bg-white rounded-full animate-bounce delay-150"></div><div class="w-2 h-2 bg-white rounded-full animate-bounce delay-300">');function fr(t){const e=i=>({primary:{"bg-primary hover:bg-primary/90 shadow hover:shadow-3xl text-text1 border-transparent hover:border-primary/30 active:bg-primary/80":!0},subtle:{"bg-transparent hover:bg-bg3/80 hover:shadow-3xl text-text1 border-transparent ":!0},link:{"bg-transparent text-primary border-transparent hover:border-transparent":!0},danger:{"bg-red-600 hover:bg-red-600/90 shadow hover:shadow-3xl text-text1 border-transparent hover:border-red-600/30":!0},warning:{"bg-yellow-600 hover:bg-yellow-600/90 shadow hover:shadow-3xl text-text1 border-transparent hover:border-yellow-600/30":!0}})[i??"primary"],n=Ts();return v(Ir,{get as(){return t.as??"button"},get onClick(){return t.onClick??(()=>{t.href!==void 0&&n(t.href)})},get disabled(){return t.isDisabled},get classList(){return{"relative focus-visible:ring-4 focus-visible:ring-primary/50 focus-visible:outline-none disabled:opacity-50 disabled:cursor-not-allowed duration-300 py-1 px-3 text-sm rounded-full border-4  appearance-none ease-out cursor-pointer select-none focus:outline-none transition active:translate-y-[2px]":!0,"flex items-center justify-center":t.icon!==void 0&&t.label!==void 0,"!text-text1 !bg-bg2":t.isSelected===!0,...e(t.appearance),[t.class]:t.class!==void 0}},get children(){return[v(he,{get when(){return t.icon!==void 0},get children(){const i=H(Am);return U(i,()=>t.icon),Le(()=>i.classList.toggle("invisible",!!t.isLoading)),i}}),v(he,{get when(){return t.label!==void 0},get children(){const i=H(Am);return U(i,()=>t.label),Le(r=>{const s=t.icon!==void 0,o=!!t.isLoading;return s!==r._v$&&i.classList.toggle("ml-2",r._v$=s),o!==r._v$2&&i.classList.toggle("invisible",r._v$2=o),r},{_v$:void 0,_v$2:void 0}),i}}),v(he,{get when(){return t.isLoading},get children(){return v(TT,{class:"absolute h-full w-full top-0.5 left-0 flex items-center justify-center"})}})]}})}const TT=t=>(()=>{const e=H(CT);return Le(n=>on(e,{"flex space-x-1":!0,[t.class]:t.class!==void 0},n)),e})();function au(t){return v(Z$,{get value(){return t.value},get onChange(){return t.onInput},get validationState(){return t.validationState},get children(){return[v(H0,{class:"text-text2 text-sm",get children(){return t.name}}),v(X$,{get type(){return t.type},get placeholder(){return t.placeholder},get class(){return`bg-bg2 text-text1 outline-none focus-visible:ring-2 text-sm rounded-lg focus:ring-primary focus:border-primary block p-2.5 disabled:bg-bg2 disabled:cursor-not-allowed; ${t.class}`}}),v(Kx,{class:"text-red-500 text-sm",get children(){return t.errorMessage}})]}})}const an=()=>new Map,ch=t=>{const e=an();return t.forEach((n,i)=>{e.set(i,n)}),e},_n=(t,e,n)=>{let i=t.get(e);return i===void 0&&t.set(e,i=n()),i},kT=(t,e)=>{const n=[];for(const[i,r]of t)n.push(e(r,i));return n},PT=(t,e)=>{for(const[n,i]of t)if(e(i,n))return!0;return!1},Zi=()=>new Set,lu=t=>t[t.length-1],AT=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Pi=Array.from,OT=Array.isArray;class DT{constructor(){this._observers=an()}on(e,n){return _n(this._observers,e,Zi).add(n),n}once(e,n){const i=(...r)=>{this.off(e,i),n(...r)};this.on(e,i)}off(e,n){const i=this._observers.get(e);i!==void 0&&(i.delete(n),i.size===0&&this._observers.delete(e))}emit(e,n){return Pi((this._observers.get(e)||an()).values()).forEach(i=>i(...n))}destroy(){this._observers=an()}}class pc{constructor(){this._observers=an()}on(e,n){_n(this._observers,e,Zi).add(n)}once(e,n){const i=(...r)=>{this.off(e,i),n(...r)};this.on(e,i)}off(e,n){const i=this._observers.get(e);i!==void 0&&(i.delete(n),i.size===0&&this._observers.delete(e))}emit(e,n){return Pi((this._observers.get(e)||an()).values()).forEach(i=>i(...n))}destroy(){this._observers=an()}}const ii=Math.floor,Ua=Math.abs,IT=Math.log10,cf=(t,e)=>t<e?t:e,Nr=(t,e)=>t>e?t:e,mv=t=>t!==0?t<0:1/t<0,Ai=Date.now,RT=1200,LT=2500,ol=3e4,uh=t=>{if(t.shouldConnect&&t.ws===null){const e=new WebSocket(t.url),n=t.binaryType;let i=null;n&&(e.binaryType=n),t.ws=e,t.connecting=!0,t.connected=!1,e.onmessage=o=>{t.lastMessageReceived=Ai();const l=o.data,a=typeof l=="string"?JSON.parse(l):l;a&&a.type==="pong"&&(clearTimeout(i),i=setTimeout(s,ol/2)),t.emit("message",[a,t])};const r=o=>{t.ws!==null&&(t.ws=null,t.connecting=!1,t.connected?(t.connected=!1,t.emit("disconnect",[{type:"disconnect",error:o},t])):t.unsuccessfulReconnects++,setTimeout(uh,cf(IT(t.unsuccessfulReconnects+1)*RT,LT),t)),clearTimeout(i)},s=()=>{t.ws===e&&t.send({type:"ping"})};e.onclose=()=>r(null),e.onerror=o=>r(o),e.onopen=()=>{t.lastMessageReceived=Ai(),t.connecting=!1,t.connected=!0,t.unsuccessfulReconnects=0,t.emit("connect",[{type:"connect"},t]),i=setTimeout(s,ol/2)}}};class MT extends pc{constructor(e,{binaryType:n}={}){super(),this.url=e,this.ws=null,this.binaryType=n||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&ol<Ai()-this.lastMessageReceived&&this.ws.close()},ol/2),uh(this)}send(e){this.ws&&this.ws.send(JSON.stringify(e))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&uh(this)}}const ri=t=>new Error(t),Zn=()=>{throw ri("Method unimplemented")},si=()=>{throw ri("Unexpected case")},Om=1,Dm=2,cu=4,uu=8,vo=32,Ei=64,yn=128,gc=31,hh=63,pr=127,NT=2147483647,FT=crypto.getRandomValues.bind(crypto),BT=Math.random,bv=()=>FT(new Uint32Array(1))[0],UT=[1e7]+-1e3+-4e3+-8e3+-1e11,yv=()=>UT.replace(/[018]/g,t=>(t^bv()&15>>t/4).toString(16)),jT=String.fromCharCode,HT=t=>t.toLowerCase(),VT=/^\s*/g,KT=t=>t.replace(VT,""),qT=/([A-Z])/g,Im=(t,e)=>KT(t.replace(qT,n=>`${e}${HT(n)}`)),zT=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=e.codePointAt(r);return i},wo=typeof TextEncoder<"u"?new TextEncoder:null,WT=t=>wo.encode(t),dh=wo?WT:zT;let to=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});to&&to.decode(new Uint8Array).length===1&&(to=null);const Rm=t=>t===void 0?null:t;class GT{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let vv=new GT,uf=!0;try{typeof localStorage<"u"&&(vv=localStorage,uf=!1)}catch{}const wv=vv,YT=t=>uf||addEventListener("storage",t),QT=t=>uf||removeEventListener("storage",t),XT=Object.assign,JT=Object.keys,ZT=(t,e)=>{for(const n in t)e(t[n],n)},al=t=>JT(t).length,e3=t=>{for(const e in t)return!1;return!0},t3=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},_v=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n3=(t,e)=>t===e||al(t)===al(e)&&t3(t,(n,i)=>(n!==void 0||_v(e,i))&&e[i]===n),hf=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&hf(t,e,n+1)}},i3=()=>{},r3=t=>t,s3=(t,e)=>t===e,no=(t,e)=>{if(t==null||e==null)return s3(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!no(t.get(n),e.get(n)))return!1;break}case Object:if(al(t)!==al(e))return!1;for(const n in t)if(!_v(t,n)||!no(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!no(t[n],e[n]))return!1;break;default:return!1}return!0},o3=(t,e)=>e.includes(t),us=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name),xv=typeof window<"u"&&typeof document<"u"&&!us;let Xn;const a3=()=>{if(Xn===void 0)if(us){Xn=an();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const i=t[n];i[0]==="-"?(e!==null&&Xn.set(e,""),e=i):e!==null&&(Xn.set(e,i),e=null)}e!==null&&Xn.set(e,"")}else typeof location=="object"?(Xn=an(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");Xn.set(`--${Im(e,"-")}`,n),Xn.set(`-${Im(e,"-")}`,n)}})):Xn=an();return Xn},fh=t=>a3().has(t),ll=t=>Rm(us?process.env[t.toUpperCase()]:wv.getItem(t)),l3=t=>fh("--"+t)||ll(t)!==null;l3("production");const Lm=us&&o3({}.FORCE_COLOR,["true","1","2"]),c3=!fh("no-colors")&&(!us||process.stdout.isTTY||Lm)&&(!us||fh("color")||Lm||ll("COLORTERM")!==null||(ll("TERM")||"").includes("color")),Sv=Number.MAX_SAFE_INTEGER,u3=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&ii(t)===t),Ev=ri("Unexpected end of array"),$v=ri("Integer out of Range");class mc{constructor(e){this.arr=e,this.pos=0}}const di=t=>new mc(t),h3=t=>t.pos!==t.arr.length,d3=(t,e)=>{const n=pf(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Mt=t=>d3(t,ke(t)),xr=t=>t.arr[t.pos++],ke=t=>{let e=0,n=1;const i=t.arr.length;for(;t.pos<i;){const r=t.arr[t.pos++];if(e=e+(r&pr)*n,n*=128,r<yn)return e;if(e>Sv)throw $v}throw Ev},df=t=>{let e=t.arr[t.pos++],n=e&hh,i=64;const r=(e&Ei)>0?-1:1;if(!(e&yn))return r*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&pr)*i,i*=128,e<yn)return r*n;if(n>Sv)throw $v}throw Ev},f3=t=>{let e=ke(t);if(e===0)return"";{let n=String.fromCodePoint(xr(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(xr(t));else for(;e>0;){const i=e<1e4?e:1e4,r=t.arr.subarray(t.pos,t.pos+i);t.pos+=i,n+=String.fromCodePoint.apply(null,r),e-=i}return decodeURIComponent(escape(n))}},p3=t=>to.decode(Mt(t)),$i=to?p3:f3,ff=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},g3=t=>ff(t,4).getFloat32(0,!1),m3=t=>ff(t,8).getFloat64(0,!1),b3=t=>ff(t,8).getBigInt64(0,!1),y3=[t=>{},t=>null,df,g3,m3,b3,t=>!1,t=>!0,$i,t=>{const e=ke(t),n={};for(let i=0;i<e;i++){const r=$i(t);n[r]=hs(t)}return n},t=>{const e=ke(t),n=[];for(let i=0;i<e;i++)n.push(hs(t));return n},Mt],hs=t=>y3[127-xr(t)](t);class Mm extends mc{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),h3(this)?this.count=ke(this)+1:this.count=-1),this.count--,this.s}}class ja extends mc{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=df(this);const e=mv(this.s);this.count=1,e&&(this.s=-this.s,this.count=ke(this)+2)}return this.count--,this.s}}class hu extends mc{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=df(this),n=e&1;this.diff=ii(e/2),this.count=1,n&&(this.count=ke(this)+2)}return this.s+=this.diff,this.count--,this.s}}class v3{constructor(e){this.decoder=new ja(e),this.str=$i(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const Cv=t=>new Uint8Array(t),pf=(t,e,n)=>new Uint8Array(t,e,n),w3=t=>new Uint8Array(t),_3=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=jT(t[n]);return btoa(e)},x3=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),S3=t=>{const e=atob(t),n=Cv(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},E3=t=>{const e=Buffer.from(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},Tv=xv?_3:x3,kv=xv?S3:E3,$3=t=>{const e=Cv(t.byteLength);return e.set(t),e};class na{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Bt=()=>new na,C3=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},mt=t=>{const e=new Uint8Array(C3(t));let n=0;for(let i=0;i<t.bufs.length;i++){const r=t.bufs[i];e.set(r,n),n+=r.length}return e.set(pf(t.cbuf.buffer,0,t.cpos),n),e},T3=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(pf(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Nr(n,e)*2),t.cpos=0)},Lt=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},_o=Lt,ve=(t,e)=>{for(;e>pr;)Lt(t,yn|pr&e),e=ii(e/128);Lt(t,pr&e)},gf=(t,e)=>{const n=mv(e);for(n&&(e=-e),Lt(t,(e>hh?yn:0)|(n?Ei:0)|hh&e),e=ii(e/64);e>0;)Lt(t,(e>pr?yn:0)|pr&e),e=ii(e/128)},ph=new Uint8Array(3e4),k3=ph.length/3,P3=(t,e)=>{if(e.length<k3){const n=wo.encodeInto(e,ph).written||0;ve(t,n);for(let i=0;i<n;i++)Lt(t,ph[i])}else xt(t,dh(e))},A3=(t,e)=>{const n=unescape(encodeURIComponent(e)),i=n.length;ve(t,i);for(let r=0;r<i;r++)Lt(t,n.codePointAt(r))},ei=wo&&wo.encodeInto?P3:A3,bc=(t,e)=>{const n=t.cbuf.length,i=t.cpos,r=cf(n-i,e.length),s=e.length-r;t.cbuf.set(e.subarray(0,r),i),t.cpos+=r,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Nr(n*2,s)),t.cbuf.set(e.subarray(r)),t.cpos=s)},xt=(t,e)=>{ve(t,e.byteLength),bc(t,e)},mf=(t,e)=>{T3(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},O3=(t,e)=>mf(t,4).setFloat32(0,e,!1),D3=(t,e)=>mf(t,8).setFloat64(0,e,!1),I3=(t,e)=>mf(t,8).setBigInt64(0,e,!1),Nm=new DataView(new ArrayBuffer(4)),R3=t=>(Nm.setFloat32(0,t),Nm.getFloat32(0)===t),ds=(t,e)=>{switch(typeof e){case"string":Lt(t,119),ei(t,e);break;case"number":u3(e)&&Ua(e)<=NT?(Lt(t,125),gf(t,e)):R3(e)?(Lt(t,124),O3(t,e)):(Lt(t,123),D3(t,e));break;case"bigint":Lt(t,122),I3(t,e);break;case"object":if(e===null)Lt(t,126);else if(OT(e)){Lt(t,117),ve(t,e.length);for(let n=0;n<e.length;n++)ds(t,e[n])}else if(e instanceof Uint8Array)Lt(t,116),xt(t,e);else{Lt(t,118);const n=Object.keys(e);ve(t,n.length);for(let i=0;i<n.length;i++){const r=n[i];ei(t,r),ds(t,e[r])}}break;case"boolean":Lt(t,e?120:121);break;default:Lt(t,127)}};class Fm extends na{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&ve(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const Bm=t=>{t.count>0&&(gf(t.encoder,t.count===1?t.s:-t.s),t.count>1&&ve(t.encoder,t.count-2))};class Ha{constructor(){this.encoder=new na,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Bm(this),this.count=1,this.s=e)}toUint8Array(){return Bm(this),mt(this.encoder)}}const Um=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);gf(t.encoder,e),t.count>1&&ve(t.encoder,t.count-2)}};class du{constructor(){this.encoder=new na,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Um(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Um(this),mt(this.encoder)}}class L3{constructor(){this.sarr=[],this.s="",this.lensE=new Ha}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new na;return this.sarr.push(this.s),this.s="",ei(e,this.sarr.join("")),bc(e,this.lensE.toUint8Array()),mt(e)}}class M3{constructor(e,n){this.left=e,this.right=n}}const yi=(t,e)=>new M3(t,e);typeof DOMParser<"u"&&new DOMParser;const N3=t=>kT(t,(e,n)=>`${n}:${e};`).join(""),Ri=Symbol,On=Ri(),Sr=Ri(),Pv=Ri(),bf=Ri(),Av=Ri(),Ov=Ri(),Dv=Ri(),yf=Ri(),yc=Ri(),F3=t=>{const e=[];let n=0;for(;n<t.length;n++){const i=t[n];i.constructor===String||i.constructor===Number||i.constructor===Object&&e.push(JSON.stringify(i))}return e},jm=[Av,Dv,yf,Pv];let fu=0,Hm=Ai();const B3=(t,e)=>{const n=jm[fu],i=ll("log"),r=i!==null&&(i==="*"||i==="true"||new RegExp(i,"gi").test(e));return fu=(fu+1)%jm.length,e+=": ",r?(...s)=>{const o=Ai(),l=o-Hm;Hm=o,t(n,e,yc,...s.map(a=>typeof a=="string"||typeof a=="symbol"?a:JSON.stringify(a)),n," +"+l+"ms")}:i3},U3={[On]:yi("font-weight","bold"),[Sr]:yi("font-weight","normal"),[Pv]:yi("color","blue"),[Av]:yi("color","green"),[bf]:yi("color","grey"),[Ov]:yi("color","red"),[Dv]:yi("color","purple"),[yf]:yi("color","orange"),[yc]:yi("color","black")},j3=t=>{const e=[],n=[],i=an();let r=[],s=0;for(;s<t.length;s++){const o=t[s],l=U3[o];if(l!==void 0)i.set(l.left,l.right);else if(o.constructor===String||o.constructor===Number){const a=N3(i);s>0||a.length>0?(e.push("%c"+o),n.push(a)):e.push(o)}else break}for(s>0&&(r=n,r.unshift(e.join("")));s<t.length;s++){const o=t[s];o instanceof Symbol||r.push(o)}return r},H3=c3?j3:F3,Iv=(...t)=>{console.log(...H3(t)),V3.forEach(e=>e.print(t))},V3=Zi(),K3=t=>B3(Iv,t),Vm=t=>new Promise(t);Promise.all.bind(Promise);const q3=t=>Promise.reject(t),vf=t=>Promise.resolve(t),Rv=new Map;class z3{constructor(e){this.room=e,this.onmessage=null,this._onChange=n=>n.key===e&&this.onmessage!==null&&this.onmessage({data:kv(n.newValue||"")}),YT(this._onChange)}postMessage(e){wv.setItem(this.room,Tv(w3(e)))}close(){QT(this._onChange)}}const W3=typeof BroadcastChannel>"u"?z3:BroadcastChannel,wf=t=>_n(Rv,t,()=>{const e=Zi(),n=new W3(t);return n.onmessage=i=>e.forEach(r=>r(i.data,"broadcastchannel")),{bc:n,subs:e}}),G3=(t,e)=>(wf(t).subs.add(e),e),Y3=(t,e)=>{const n=wf(t),i=n.subs.delete(e);return i&&n.subs.size===0&&(n.bc.close(),Rv.delete(t)),i},Q3=(t,e,n=null)=>{const i=wf(t);i.bc.postMessage(e),i.subs.forEach(r=>r(e,n))},X3=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},Lv=t=>({[Symbol.iterator](){return this},next:t}),J3=(t,e)=>Lv(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),pu=(t,e)=>Lv(()=>{const{done:n,value:i}=t.next();return{done:n,value:n?void 0:e(i)}});class _f{constructor(e,n){this.clock=e,this.len=n}}class ia{constructor(){this.clients=new Map}}const Mv=(t,e,n)=>e.clients.forEach((i,r)=>{const s=t.doc.store.clients.get(r);for(let o=0;o<i.length;o++){const l=i[o];Xv(t,s,l.clock,l.len,n)}}),Z3=(t,e)=>{let n=0,i=t.length-1;for(;n<=i;){const r=ii((n+i)/2),s=t[r],o=s.clock;if(o<=e){if(e<o+s.len)return r;n=r+1}else i=r-1}return null},Nv=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&Z3(n,e.clock)!==null},xf=t=>{t.clients.forEach(e=>{e.sort((r,s)=>r.clock-s.clock);let n,i;for(n=1,i=1;n<e.length;n++){const r=e[i-1],s=e[n];r.clock+r.len>=s.clock?r.len=Nr(r.len,s.clock+s.len-r.clock):(i<n&&(e[i]=s),i++)}e.length=i})},ek=t=>{const e=new ia;for(let n=0;n<t.length;n++)t[n].clients.forEach((i,r)=>{if(!e.clients.has(r)){const s=i.slice();for(let o=n+1;o<t.length;o++)AT(s,t[o].clients.get(r)||[]);e.clients.set(r,s)}});return xf(e),e},cl=(t,e,n,i)=>{_n(t.clients,e,()=>[]).push(new _f(n,i))},tk=()=>new ia,nk=t=>{const e=tk();return t.clients.forEach((n,i)=>{const r=[];for(let s=0;s<n.length;s++){const o=n[s];if(o.deleted){const l=o.id.clock;let a=o.length;if(s+1<n.length)for(let c=n[s+1];s+1<n.length&&c.deleted;c=n[++s+1])a+=c.length;r.push(new _f(l,a))}}r.length>0&&e.clients.set(i,r)}),e},Rs=(t,e)=>{ve(t.restEncoder,e.clients.size),Pi(e.clients.entries()).sort((n,i)=>i[0]-n[0]).forEach(([n,i])=>{t.resetDsCurVal(),ve(t.restEncoder,n);const r=i.length;ve(t.restEncoder,r);for(let s=0;s<r;s++){const o=i[s];t.writeDsClock(o.clock),t.writeDsLen(o.len)}})},Sf=t=>{const e=new ia,n=ke(t.restDecoder);for(let i=0;i<n;i++){t.resetDsCurVal();const r=ke(t.restDecoder),s=ke(t.restDecoder);if(s>0){const o=_n(e.clients,r,()=>[]);for(let l=0;l<s;l++)o.push(new _f(t.readDsClock(),t.readDsLen()))}}return e},Km=(t,e,n)=>{const i=new ia,r=ke(t.restDecoder);for(let s=0;s<r;s++){t.resetDsCurVal();const o=ke(t.restDecoder),l=ke(t.restDecoder),a=n.clients.get(o)||[],c=Ut(n,o);for(let u=0;u<l;u++){const h=t.readDsClock(),d=h+t.readDsLen();if(h<c){c<d&&cl(i,o,c,d-c);let g=oi(a,h),p=a[g];for(!p.deleted&&p.id.clock<h&&(a.splice(g+1,0,ml(e,p,h-p.id.clock)),g++);g<a.length&&(p=a[g++],p.id.clock<d);)p.deleted||(d<p.id.clock+p.length&&a.splice(g,0,ml(e,p,d-p.id.clock)),p.delete(e))}else cl(i,o,h,d-h)}}if(i.clients.size>0){const s=new Er;return ve(s.restEncoder,0),Rs(s,i),s.toUint8Array()}return null},Fv=bv;class Li extends pc{constructor({guid:e=yv(),collectionid:n=null,gc:i=!0,gcFilter:r=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:l=!0}={}){super(),this.gc=i,this.gcFilter=r,this.clientID=Fv(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new Yv,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=Vm(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const a=()=>Vm(c=>{const u=h=>{(h===void 0||h===!0)&&(this.off("sync",u),c())};this.on("sync",u)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=a()),this.isSynced=c===void 0||c===!0,this.isLoaded||this.emit("load",[])}),this.whenSynced=a()}load(){const e=this._item;e!==null&&!this.shouldLoad&&st(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Pi(this.subdocs).map(e=>e.guid))}transact(e,n=null){return st(this,e,n)}get(e,n=qt){const i=_n(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),r=i.constructor;if(n!==qt&&r!==n)if(r===qt){const s=new n;s._map=i._map,i._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=s}),s._start=i._start;for(let o=s._start;o!==null;o=o.right)o.parent=s;return s._length=i._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return i}getArray(e=""){return this.get(e,Nt)}getText(e=""){return this.get(e,ps)}getMap(e=""){return this.get(e,jt)}getXmlFragment(e=""){return this.get(e,$r)}toJSON(){const e={};return this.share.forEach((n,i)=>{e[i]=n.toJSON()}),e}destroy(){Pi(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Li({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,st(e.parent.doc,i=>{const r=n.doc;e.deleted||i.subdocsAdded.add(r),i.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,n){super.on(e,n)}off(e,n){super.off(e,n)}}class Bv{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return ke(this.restDecoder)}readDsLen(){return ke(this.restDecoder)}}class Uv extends Bv{readLeftID(){return qe(ke(this.restDecoder),ke(this.restDecoder))}readRightID(){return qe(ke(this.restDecoder),ke(this.restDecoder))}readClient(){return ke(this.restDecoder)}readInfo(){return xr(this.restDecoder)}readString(){return $i(this.restDecoder)}readParentInfo(){return ke(this.restDecoder)===1}readTypeRef(){return ke(this.restDecoder)}readLen(){return ke(this.restDecoder)}readAny(){return hs(this.restDecoder)}readBuf(){return $3(Mt(this.restDecoder))}readJSON(){return JSON.parse($i(this.restDecoder))}readKey(){return $i(this.restDecoder)}}class ik{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ke(this.restDecoder),this.dsCurrVal}readDsLen(){const e=ke(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class fs extends ik{constructor(e){super(e),this.keys=[],ke(e),this.keyClockDecoder=new hu(Mt(e)),this.clientDecoder=new ja(Mt(e)),this.leftClockDecoder=new hu(Mt(e)),this.rightClockDecoder=new hu(Mt(e)),this.infoDecoder=new Mm(Mt(e),xr),this.stringDecoder=new v3(Mt(e)),this.parentInfoDecoder=new Mm(Mt(e),xr),this.typeRefDecoder=new ja(Mt(e)),this.lenDecoder=new ja(Mt(e))}readLeftID(){return new Zr(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Zr(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return hs(this.restDecoder)}readBuf(){return Mt(this.restDecoder)}readJSON(){return hs(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class jv{constructor(){this.restEncoder=Bt()}toUint8Array(){return mt(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){ve(this.restEncoder,e)}writeDsLen(e){ve(this.restEncoder,e)}}class ra extends jv{writeLeftID(e){ve(this.restEncoder,e.client),ve(this.restEncoder,e.clock)}writeRightID(e){ve(this.restEncoder,e.client),ve(this.restEncoder,e.clock)}writeClient(e){ve(this.restEncoder,e)}writeInfo(e){_o(this.restEncoder,e)}writeString(e){ei(this.restEncoder,e)}writeParentInfo(e){ve(this.restEncoder,e?1:0)}writeTypeRef(e){ve(this.restEncoder,e)}writeLen(e){ve(this.restEncoder,e)}writeAny(e){ds(this.restEncoder,e)}writeBuf(e){xt(this.restEncoder,e)}writeJSON(e){ei(this.restEncoder,JSON.stringify(e))}writeKey(e){ei(this.restEncoder,e)}}class Hv{constructor(){this.restEncoder=Bt(),this.dsCurrVal=0}toUint8Array(){return mt(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,ve(this.restEncoder,n)}writeDsLen(e){e===0&&si(),ve(this.restEncoder,e-1),this.dsCurrVal+=e}}class Er extends Hv{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new du,this.clientEncoder=new Ha,this.leftClockEncoder=new du,this.rightClockEncoder=new du,this.infoEncoder=new Fm(_o),this.stringEncoder=new L3,this.parentInfoEncoder=new Fm(_o),this.typeRefEncoder=new Ha,this.lenEncoder=new Ha}toUint8Array(){const e=Bt();return ve(e,0),xt(e,this.keyClockEncoder.toUint8Array()),xt(e,this.clientEncoder.toUint8Array()),xt(e,this.leftClockEncoder.toUint8Array()),xt(e,this.rightClockEncoder.toUint8Array()),xt(e,mt(this.infoEncoder)),xt(e,this.stringEncoder.toUint8Array()),xt(e,mt(this.parentInfoEncoder)),xt(e,this.typeRefEncoder.toUint8Array()),xt(e,this.lenEncoder.toUint8Array()),bc(e,mt(this.restEncoder)),mt(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){ds(this.restEncoder,e)}writeBuf(e){xt(this.restEncoder,e)}writeJSON(e){ds(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const rk=(t,e,n,i)=>{i=Nr(i,e[0].id.clock);const r=oi(e,i);ve(t.restEncoder,e.length-r),t.writeClient(n),ve(t.restEncoder,i);const s=e[r];s.write(t,i-s.id.clock);for(let o=r+1;o<e.length;o++)e[o].write(t,0)},Ef=(t,e,n)=>{const i=new Map;n.forEach((r,s)=>{Ut(e,s)>r&&i.set(s,r)}),vc(e).forEach((r,s)=>{n.has(s)||i.set(s,0)}),ve(t.restEncoder,i.size),Pi(i.entries()).sort((r,s)=>s[0]-r[0]).forEach(([r,s])=>{rk(t,e.clients.get(r),r,s)})},sk=(t,e)=>{const n=an(),i=ke(t.restDecoder);for(let r=0;r<i;r++){const s=ke(t.restDecoder),o=new Array(s),l=t.readClient();let a=ke(t.restDecoder);n.set(l,{i:0,refs:o});for(let c=0;c<s;c++){const u=t.readInfo();switch(gc&u){case 0:{const h=t.readLen();o[c]=new Pn(qe(l,a),h),a+=h;break}case 10:{const h=ke(t.restDecoder);o[c]=new An(qe(l,a),h),a+=h;break}default:{const h=(u&(Ei|yn))===0,d=new Ot(qe(l,a),null,(u&yn)===yn?t.readLeftID():null,null,(u&Ei)===Ei?t.readRightID():null,h?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,h&&(u&vo)===vo?t.readString():null,mw(t,u));o[c]=d,a+=d.length}}}}return n},ok=(t,e,n)=>{const i=[];let r=Pi(n.keys()).sort((g,p)=>g-p);if(r.length===0)return null;const s=()=>{if(r.length===0)return null;let g=n.get(r[r.length-1]);for(;g.refs.length===g.i;)if(r.pop(),r.length>0)g=n.get(r[r.length-1]);else return null;return g};let o=s();if(o===null&&i.length===0)return null;const l=new Yv,a=new Map,c=(g,p)=>{const b=a.get(g);(b==null||b>p)&&a.set(g,p)};let u=o.refs[o.i++];const h=new Map,d=()=>{for(const g of i){const p=g.id.client,b=n.get(p);b?(b.i--,l.clients.set(p,b.refs.slice(b.i)),n.delete(p),b.i=0,b.refs=[]):l.clients.set(p,[g]),r=r.filter($=>$!==p)}i.length=0};for(;;){if(u.constructor!==An){const p=_n(h,u.id.client,()=>Ut(e,u.id.client))-u.id.clock;if(p<0)i.push(u),c(u.id.client,u.id.clock-1),d();else{const b=u.getMissing(t,e);if(b!==null){i.push(u);const $=n.get(b)||{refs:[],i:0};if($.refs.length===$.i)c(b,Ut(e,b)),d();else{u=$.refs[$.i++];continue}}else(p===0||p<u.length)&&(u.integrate(t,p),h.set(u.id.client,u.id.clock+u.length))}}if(i.length>0)u=i.pop();else if(o!==null&&o.i<o.refs.length)u=o.refs[o.i++];else{if(o=s(),o===null)break;u=o.refs[o.i++]}}if(l.clients.size>0){const g=new Er;return Ef(g,l,new Map),ve(g.restEncoder,0),{missing:a,update:g.toUint8Array()}}return null},ak=(t,e)=>Ef(t,e.doc.store,e.beforeState),lk=(t,e,n,i=new fs(t))=>st(e,r=>{r.local=!1;let s=!1;const o=r.doc,l=o.store,a=sk(i,o),c=ok(r,l,a),u=l.pendingStructs;if(u){for(const[d,g]of u.missing)if(g<Ut(l,d)){s=!0;break}if(c){for(const[d,g]of c.missing){const p=u.missing.get(d);(p==null||p>g)&&u.missing.set(d,g)}u.update=ul([u.update,c.update])}}else l.pendingStructs=c;const h=Km(i,r,l);if(l.pendingDs){const d=new fs(di(l.pendingDs));ke(d.restDecoder);const g=Km(d,r,l);h&&g?l.pendingDs=ul([h,g]):l.pendingDs=h||g}else l.pendingDs=h;if(s){const d=l.pendingStructs.update;l.pendingStructs=null,Vv(r.doc,d)}},n,!1),Vv=(t,e,n,i=fs)=>{const r=di(e);lk(r,t,n,new i(r))},Kv=(t,e,n)=>Vv(t,e,n,Uv),ck=(t,e,n=new Map)=>{Ef(t,e.store,n),Rs(t,nk(e.store))},uk=(t,e=new Uint8Array([0]),n=new Er)=>{const i=zv(e);ck(n,t,i);const r=[n.toUint8Array()];if(t.store.pendingDs&&r.push(t.store.pendingDs),t.store.pendingStructs&&r.push($k(t.store.pendingStructs.update,e)),r.length>1){if(n.constructor===ra)return Sk(r.map((s,o)=>o===0?s:Tk(s)));if(n.constructor===Er)return ul(r)}return r[0]},qv=(t,e)=>uk(t,e,new ra),hk=t=>{const e=new Map,n=ke(t.restDecoder);for(let i=0;i<n;i++){const r=ke(t.restDecoder),s=ke(t.restDecoder);e.set(r,s)}return e},zv=t=>hk(new Bv(di(t))),Wv=(t,e)=>(ve(t.restEncoder,e.size),Pi(e.entries()).sort((n,i)=>i[0]-n[0]).forEach(([n,i])=>{ve(t.restEncoder,n),ve(t.restEncoder,i)}),t),dk=(t,e)=>Wv(t,vc(e.store)),fk=(t,e=new Hv)=>(t instanceof Map?Wv(e,t):dk(e,t),e.toUint8Array()),pk=t=>fk(t,new jv);class gk{constructor(){this.l=[]}}const qm=()=>new gk,zm=(t,e)=>t.l.push(e),Wm=(t,e)=>{const n=t.l,i=n.length;t.l=n.filter(r=>e!==r),i===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Gv=(t,e,n)=>hf(t.l,[e,n]);class Zr{constructor(e,n){this.client=e,this.clock=n}}const Pa=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,qe=(t,e)=>new Zr(t,e),mk=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw si()},Gs=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!Nv(e.ds,t.id),gh=(t,e)=>{const n=_n(t.meta,gh,Zi),i=t.doc.store;n.has(e)||(e.sv.forEach((r,s)=>{r<Ut(i,s)&&er(t,qe(s,r))}),Mv(t,e.ds,r=>{}),n.add(e))};class Yv{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const vc=t=>{const e=new Map;return t.clients.forEach((n,i)=>{const r=n[n.length-1];e.set(i,r.id.clock+r.length)}),e},Ut=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const i=n[n.length-1];return i.id.clock+i.length},Qv=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const i=n[n.length-1];if(i.id.clock+i.length!==e.id.clock)throw si()}n.push(e)},oi=(t,e)=>{let n=0,i=t.length-1,r=t[i],s=r.id.clock;if(s===e)return i;let o=ii(e/(s+r.length-1)*i);for(;n<=i;){if(r=t[o],s=r.id.clock,s<=e){if(e<s+r.length)return o;n=o+1}else i=o-1;o=ii((n+i)/2)}throw si()},bk=(t,e)=>{const n=t.clients.get(e.client);return n[oi(n,e.clock)]},gu=bk,mh=(t,e,n)=>{const i=oi(e,n),r=e[i];return r.id.clock<n&&r instanceof Ot?(e.splice(i+1,0,ml(t,r,n-r.id.clock)),i+1):i},er=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[mh(t,n,e.clock)]},Gm=(t,e,n)=>{const i=e.clients.get(n.client),r=oi(i,n.clock),s=i[r];return n.clock!==s.id.clock+s.length-1&&s.constructor!==Pn&&i.splice(r+1,0,ml(t,s,n.clock-s.id.clock+1)),s},yk=(t,e,n)=>{const i=t.clients.get(e.id.client);i[oi(i,e.id.clock)]=n},Xv=(t,e,n,i,r)=>{if(i===0)return;const s=n+i;let o=mh(t,e,n),l;do l=e[o++],s<l.id.clock+l.length&&mh(t,e,s),r(l);while(o<e.length&&e[o].id.clock<s)};class vk{constructor(e,n,i){this.doc=e,this.deleteSet=new ia,this.beforeState=vc(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=i,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Ym=(t,e)=>e.deleteSet.clients.size===0&&!PT(e.afterState,(n,i)=>e.beforeState.get(i)!==n)?!1:(xf(e.deleteSet),ak(t,e),Rs(t,e.deleteSet),!0),Qm=(t,e,n)=>{const i=e._item;(i===null||i.id.clock<(t.beforeState.get(i.id.client)||0)&&!i.deleted)&&_n(t.changed,e,Zi).add(n)},Va=(t,e)=>{let n=t[e],i=t[e-1],r=e;for(;r>0;n=i,i=t[--r-1]){if(i.deleted===n.deleted&&i.constructor===n.constructor&&i.mergeWith(n)){n instanceof Ot&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,i);continue}break}const s=e-r;return s&&t.splice(e+1-s,s),s},wk=(t,e,n)=>{for(const[i,r]of t.clients.entries()){const s=e.clients.get(i);for(let o=r.length-1;o>=0;o--){const l=r[o],a=l.clock+l.len;for(let c=oi(s,l.clock),u=s[c];c<s.length&&u.id.clock<a;u=s[++c]){const h=s[c];if(l.clock+l.len<=h.id.clock)break;h instanceof Ot&&h.deleted&&!h.keep&&n(h)&&h.gc(e,!1)}}}},_k=(t,e)=>{t.clients.forEach((n,i)=>{const r=e.clients.get(i);for(let s=n.length-1;s>=0;s--){const o=n[s],l=cf(r.length-1,1+oi(r,o.clock+o.len-1));for(let a=l,c=r[a];a>0&&c.id.clock>=o.clock;c=r[a])a-=1+Va(r,a)}})},Jv=(t,e)=>{if(e<t.length){const n=t[e],i=n.doc,r=i.store,s=n.deleteSet,o=n._mergeStructs;try{xf(s),n.afterState=vc(n.doc.store),i.emit("beforeObserverCalls",[n,i]);const l=[];n.changed.forEach((a,c)=>l.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,a)})),l.push(()=>{n.changedParentTypes.forEach((a,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(a=a.filter(u=>u.target._item===null||!u.target._item.deleted),a.forEach(u=>{u.currentTarget=c,u._path=null}),a.sort((u,h)=>u.path.length-h.path.length),Gv(c._dEH,a,n))})}),l.push(()=>i.emit("afterTransaction",[n,i])),hf(l,[]),n._needFormattingCleanup&&Uk(n)}finally{i.gc&&wk(s,r,i.gcFilter),_k(s,r),n.afterState.forEach((u,h)=>{const d=n.beforeState.get(h)||0;if(d!==u){const g=r.clients.get(h),p=Nr(oi(g,d),1);for(let b=g.length-1;b>=p;)b-=1+Va(g,b)}});for(let u=o.length-1;u>=0;u--){const{client:h,clock:d}=o[u].id,g=r.clients.get(h),p=oi(g,d);p+1<g.length&&Va(g,p+1)>1||p>0&&Va(g,p)}if(!n.local&&n.afterState.get(i.clientID)!==n.beforeState.get(i.clientID)&&(Iv(yf,On,"[yjs] ",Sr,Ov,"Changed the client-id because another client seems to be using it."),i.clientID=Fv()),i.emit("afterTransactionCleanup",[n,i]),i._observers.has("update")){const u=new ra;Ym(u,n)&&i.emit("update",[u.toUint8Array(),n.origin,i,n])}if(i._observers.has("updateV2")){const u=new Er;Ym(u,n)&&i.emit("updateV2",[u.toUint8Array(),n.origin,i,n])}const{subdocsAdded:l,subdocsLoaded:a,subdocsRemoved:c}=n;(l.size>0||c.size>0||a.size>0)&&(l.forEach(u=>{u.clientID=i.clientID,u.collectionid==null&&(u.collectionid=i.collectionid),i.subdocs.add(u)}),c.forEach(u=>i.subdocs.delete(u)),i.emit("subdocs",[{loaded:a,added:l,removed:c},i,n]),c.forEach(u=>u.destroy())),t.length<=e+1?(i._transactionCleanups=[],i.emit("afterAllTransactions",[i,t])):Jv(t,e+1)}}},st=(t,e,n=null,i=!0)=>{const r=t._transactionCleanups;let s=!1,o=null;t._transaction===null&&(s=!0,t._transaction=new vk(t,n,i),r.push(t._transaction),r.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{o=e(t._transaction)}finally{if(s){const l=t._transaction===r[0];t._transaction=null,l&&Jv(r,0)}}return o};function*xk(t){const e=ke(t.restDecoder);for(let n=0;n<e;n++){const i=ke(t.restDecoder),r=t.readClient();let s=ke(t.restDecoder);for(let o=0;o<i;o++){const l=t.readInfo();if(l===10){const a=ke(t.restDecoder);yield new An(qe(r,s),a),s+=a}else if(gc&l){const a=(l&(Ei|yn))===0,c=new Ot(qe(r,s),null,(l&yn)===yn?t.readLeftID():null,null,(l&Ei)===Ei?t.readRightID():null,a?t.readParentInfo()?t.readString():t.readLeftID():null,a&&(l&vo)===vo?t.readString():null,mw(t,l));yield c,s+=c.length}else{const a=t.readLen();yield new Pn(qe(r,s),a),s+=a}}}}class $f{constructor(e,n){this.gen=xk(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===An);return this.curr}}class Cf{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Sk=t=>ul(t,Uv,ra),Ek=(t,e)=>{if(t.constructor===Pn){const{client:n,clock:i}=t.id;return new Pn(qe(n,i+e),t.length-e)}else if(t.constructor===An){const{client:n,clock:i}=t.id;return new An(qe(n,i+e),t.length-e)}else{const n=t,{client:i,clock:r}=n.id;return new Ot(qe(i,r+e),null,qe(i,r+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},ul=(t,e=fs,n=Er)=>{if(t.length===1)return t[0];const i=t.map(u=>new e(di(u)));let r=i.map(u=>new $f(u,!0)),s=null;const o=new n,l=new Cf(o);for(;r=r.filter(d=>d.curr!==null),r.sort((d,g)=>{if(d.curr.id.client===g.curr.id.client){const p=d.curr.id.clock-g.curr.id.clock;return p===0?d.curr.constructor===g.curr.constructor?0:d.curr.constructor===An?1:-1:p}else return g.curr.id.client-d.curr.id.client}),r.length!==0;){const u=r[0],h=u.curr.id.client;if(s!==null){let d=u.curr,g=!1;for(;d!==null&&d.id.clock+d.length<=s.struct.id.clock+s.struct.length&&d.id.client>=s.struct.id.client;)d=u.next(),g=!0;if(d===null||d.id.client!==h||g&&d.id.clock>s.struct.id.clock+s.struct.length)continue;if(h!==s.struct.id.client)Vi(l,s.struct,s.offset),s={struct:d,offset:0},u.next();else if(s.struct.id.clock+s.struct.length<d.id.clock)if(s.struct.constructor===An)s.struct.length=d.id.clock+d.length-s.struct.id.clock;else{Vi(l,s.struct,s.offset);const p=d.id.clock-s.struct.id.clock-s.struct.length;s={struct:new An(qe(h,s.struct.id.clock+s.struct.length),p),offset:0}}else{const p=s.struct.id.clock+s.struct.length-d.id.clock;p>0&&(s.struct.constructor===An?s.struct.length-=p:d=Ek(d,p)),s.struct.mergeWith(d)||(Vi(l,s.struct,s.offset),s={struct:d,offset:0},u.next())}}else s={struct:u.curr,offset:0},u.next();for(let d=u.curr;d!==null&&d.id.client===h&&d.id.clock===s.struct.id.clock+s.struct.length&&d.constructor!==An;d=u.next())Vi(l,s.struct,s.offset),s={struct:d,offset:0}}s!==null&&(Vi(l,s.struct,s.offset),s=null),Tf(l);const a=i.map(u=>Sf(u)),c=ek(a);return Rs(o,c),o.toUint8Array()},$k=(t,e,n=fs,i=Er)=>{const r=zv(e),s=new i,o=new Cf(s),l=new n(di(t)),a=new $f(l,!1);for(;a.curr;){const u=a.curr,h=u.id.client,d=r.get(h)||0;if(a.curr.constructor===An){a.next();continue}if(u.id.clock+u.length>d)for(Vi(o,u,Nr(d-u.id.clock,0)),a.next();a.curr&&a.curr.id.client===h;)Vi(o,a.curr,0),a.next();else for(;a.curr&&a.curr.id.client===h&&a.curr.id.clock+a.curr.length<=d;)a.next()}Tf(o);const c=Sf(l);return Rs(s,c),s.toUint8Array()},Zv=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:mt(t.encoder.restEncoder)}),t.encoder.restEncoder=Bt(),t.written=0)},Vi=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&Zv(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),ve(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},Tf=t=>{Zv(t);const e=t.encoder.restEncoder;ve(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const i=t.clientStructs[n];ve(e,i.written),bc(e,i.restEncoder)}},Ck=(t,e,n,i)=>{const r=new n(di(t)),s=new $f(r,!1),o=new i,l=new Cf(o);for(let c=s.curr;c!==null;c=s.next())Vi(l,e(c),0);Tf(l);const a=Sf(r);return Rs(o,a),o.toUint8Array()},Tk=t=>Ck(t,r3,fs,ra),Xm="You must not compute changes after the event-handler fired.";class wc{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=kk(this.currentTarget,this.target))}deletes(e){return Nv(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw ri(Xm);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(r=>{if(r!==null){const s=n._map.get(r);let o,l;if(this.adds(s)){let a=s.left;for(;a!==null&&this.adds(a);)a=a.left;if(this.deletes(s))if(a!==null&&this.deletes(a))o="delete",l=lu(a.content.getContent());else return;else a!==null&&this.deletes(a)?(o="update",l=lu(a.content.getContent())):(o="add",l=void 0)}else if(this.deletes(s))o="delete",l=lu(s.content.getContent());else return;e.set(r,{action:o,oldValue:l})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw ri(Xm);const n=this.target,i=Zi(),r=Zi(),s=[];if(e={added:i,deleted:r,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let l=null;const a=()=>{l&&s.push(l)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((l===null||l.delete===void 0)&&(a(),l={delete:0}),l.delete+=c.length,r.add(c)):this.adds(c)?((l===null||l.insert===void 0)&&(a(),l={insert:[]}),l.insert=l.insert.concat(c.content.getContent()),i.add(c)):((l===null||l.retain===void 0)&&(a(),l={retain:0}),l.retain+=c.length);l!==null&&l.retain===void 0&&a()}this._changes=e}return e}}const kk=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let i=0,r=e._item.parent._start;for(;r!==e._item&&r!==null;)r.deleted||i++,r=r.right;n.unshift(i)}e=e._item.parent}return n},ew=80;let kf=0;class Pk{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=kf++}}const Ak=t=>{t.timestamp=kf++},tw=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=kf++},Ok=(t,e,n)=>{if(t.length>=ew){const i=t.reduce((r,s)=>r.timestamp<s.timestamp?r:s);return tw(i,e,n),i}else{const i=new Pk(e,n);return t.push(i),i}},_c=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,o)=>Ua(e-s.index)<Ua(e-o.index)?s:o);let i=t._start,r=0;for(n!==null&&(i=n.p,r=n.index,Ak(n));i.right!==null&&r<e;){if(!i.deleted&&i.countable){if(e<r+i.length)break;r+=i.length}i=i.right}for(;i.left!==null&&r>e;)i=i.left,!i.deleted&&i.countable&&(r-=i.length);for(;i.left!==null&&i.left.id.client===i.id.client&&i.left.id.clock+i.left.length===i.id.clock;)i=i.left,!i.deleted&&i.countable&&(r-=i.length);return n!==null&&Ua(n.index-r)<i.parent.length/ew?(tw(n,i,r),n):Ok(t._searchMarker,i,r)},xo=(t,e,n)=>{for(let i=t.length-1;i>=0;i--){const r=t[i];if(n>0){let s=r.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(r.index-=s.length);if(s===null||s.marker===!0){t.splice(i,1);continue}r.p=s,s.marker=!0}(e<r.index||n>0&&e===r.index)&&(r.index=Nr(e,r.index+n))}},xc=(t,e,n)=>{const i=t,r=e.changedParentTypes;for(;_n(r,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;Gv(i._eH,n,e)};class qt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=qm(),this._dEH=qm(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw Zn()}clone(){throw Zn()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){zm(this._eH,e)}observeDeep(e){zm(this._dEH,e)}unobserve(e){Wm(this._eH,e)}unobserveDeep(e){Wm(this._dEH,e)}toJSON(){}}const nw=(t,e,n)=>{e<0&&(e=t._length+e),n<0&&(n=t._length+n);let i=n-e;const r=[];let s=t._start;for(;s!==null&&i>0;){if(s.countable&&!s.deleted){const o=s.content.getContent();if(o.length<=e)e-=o.length;else{for(let l=e;l<o.length&&i>0;l++)r.push(o[l]),i--;e=0}}s=s.right}return r},iw=t=>{const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const i=n.content.getContent();for(let r=0;r<i.length;r++)e.push(i[r])}n=n.right}return e},So=(t,e)=>{let n=0,i=t._start;for(;i!==null;){if(i.countable&&!i.deleted){const r=i.content.getContent();for(let s=0;s<r.length;s++)e(r[s],n++,t)}i=i.right}},rw=(t,e)=>{const n=[];return So(t,(i,r)=>{n.push(e(i,r,t))}),n},Dk=t=>{let e=t._start,n=null,i=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),i=0,e=e.right}const r=n[i++];return n.length<=i&&(n=null),{done:!1,value:r}}}},sw=(t,e)=>{const n=_c(t,e);let i=t._start;for(n!==null&&(i=n.p,e-=n.index);i!==null;i=i.right)if(!i.deleted&&i.countable){if(e<i.length)return i.content.getContent()[e];e-=i.length}},hl=(t,e,n,i)=>{let r=n;const s=t.doc,o=s.clientID,l=s.store,a=n===null?e._start:n.right;let c=[];const u=()=>{c.length>0&&(r=new Ot(qe(o,Ut(l,o)),r,r&&r.lastId,a,a&&a.id,e,null,new Cr(c)),r.integrate(t,0),c=[])};i.forEach(h=>{if(h===null)c.push(h);else switch(h.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(h);break;default:switch(u(),h.constructor){case Uint8Array:case ArrayBuffer:r=new Ot(qe(o,Ut(l,o)),r,r&&r.lastId,a,a&&a.id,e,null,new sa(new Uint8Array(h))),r.integrate(t,0);break;case Li:r=new Ot(qe(o,Ut(l,o)),r,r&&r.lastId,a,a&&a.id,e,null,new oa(h)),r.integrate(t,0);break;default:if(h instanceof qt)r=new Ot(qe(o,Ut(l,o)),r,r&&r.lastId,a,a&&a.id,e,null,new Mi(h)),r.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},ow=()=>ri("Length exceeded!"),aw=(t,e,n,i)=>{if(n>e._length)throw ow();if(n===0)return e._searchMarker&&xo(e._searchMarker,n,i.length),hl(t,e,null,i);const r=n,s=_c(e,n);let o=e._start;for(s!==null&&(o=s.p,n-=s.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&er(t,qe(o.id.client,o.id.clock+n));break}n-=o.length}return e._searchMarker&&xo(e._searchMarker,r,i.length),hl(t,e,o,i)},Ik=(t,e,n)=>{let r=(e._searchMarker||[]).reduce((s,o)=>o.index>s.index?o:s,{index:0,p:e._start}).p;if(r)for(;r.right;)r=r.right;return hl(t,e,r,n)},lw=(t,e,n,i)=>{if(i===0)return;const r=n,s=i,o=_c(e,n);let l=e._start;for(o!==null&&(l=o.p,n-=o.index);l!==null&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&er(t,qe(l.id.client,l.id.clock+n)),n-=l.length);for(;i>0&&l!==null;)l.deleted||(i<l.length&&er(t,qe(l.id.client,l.id.clock+i)),l.delete(t),i-=l.length),l=l.right;if(i>0)throw ow();e._searchMarker&&xo(e._searchMarker,r,-s+i)},dl=(t,e,n)=>{const i=e._map.get(n);i!==void 0&&i.delete(t)},Pf=(t,e,n,i)=>{const r=e._map.get(n)||null,s=t.doc,o=s.clientID;let l;if(i==null)l=new Cr([i]);else switch(i.constructor){case Number:case Object:case Boolean:case Array:case String:l=new Cr([i]);break;case Uint8Array:l=new sa(i);break;case Li:l=new oa(i);break;default:if(i instanceof qt)l=new Mi(i);else throw new Error("Unexpected content type")}new Ot(qe(o,Ut(s.store,o)),r,r&&r.lastId,null,null,e,n,l).integrate(t,0)},Af=(t,e)=>{const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},cw=t=>{const e={};return t._map.forEach((n,i)=>{n.deleted||(e[i]=n.content.getContent()[n.length-1])}),e},uw=(t,e)=>{const n=t._map.get(e);return n!==void 0&&!n.deleted},Aa=t=>J3(t.entries(),e=>!e[1].deleted);class Rk extends wc{constructor(e,n){super(e,n),this._transaction=n}}class Nt extends qt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Nt;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Nt}clone(){const e=new Nt;return e.insert(0,this.toArray().map(n=>n instanceof qt?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(e,n){super._callObserver(e,n),xc(this,e,new Rk(this,e))}insert(e,n){this.doc!==null?st(this.doc,i=>{aw(i,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?st(this.doc,n=>{Ik(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?st(this.doc,i=>{lw(i,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return sw(this,e)}toArray(){return iw(this)}slice(e=0,n=this.length){return nw(this,e,n)}toJSON(){return this.map(e=>e instanceof qt?e.toJSON():e)}map(e){return rw(this,e)}forEach(e){So(this,e)}[Symbol.iterator](){return Dk(this)}_write(e){e.writeTypeRef(rP)}}const Lk=t=>new Nt;class Mk extends wc{constructor(e,n,i){super(e,n),this.keysChanged=i}}class jt extends qt{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((i,r)=>{this.set(r,i)}),this._prelimContent=null}_copy(){return new jt}clone(){const e=new jt;return this.forEach((n,i)=>{e.set(i,n instanceof qt?n.clone():n)}),e}_callObserver(e,n){xc(this,e,new Mk(this,e,n))}toJSON(){const e={};return this._map.forEach((n,i)=>{if(!n.deleted){const r=n.content.getContent()[n.length-1];e[i]=r instanceof qt?r.toJSON():r}}),e}get size(){return[...Aa(this._map)].length}keys(){return pu(Aa(this._map),e=>e[0])}values(){return pu(Aa(this._map),e=>e[1].content.getContent()[e[1].length-1])}entries(){return pu(Aa(this._map),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this._map.forEach((n,i)=>{n.deleted||e(n.content.getContent()[n.length-1],i,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?st(this.doc,n=>{dl(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?st(this.doc,i=>{Pf(i,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return Af(this,e)}has(e){return uw(this,e)}clear(){this.doc!==null?st(this.doc,e=>{this.forEach(function(n,i,r){dl(e,r,i)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(sP)}}const Nk=t=>new jt,Ki=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&n3(t,e);class bh{constructor(e,n,i,r){this.left=e,this.right=n,this.index=i,this.currentAttributes=r}forward(){switch(this.right===null&&si(),this.right.content.constructor){case Dt:this.right.deleted||Ls(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Jm=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case Dt:e.right.deleted||Ls(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&er(t,qe(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Oa=(t,e,n)=>{const i=new Map,r=_c(e,n);if(r){const s=new bh(r.p.left,r.p,r.index,i);return Jm(t,s,n-r.index)}else{const s=new bh(null,e._start,0,i);return Jm(t,s,n)}},hw=(t,e,n,i)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Dt&&Ki(i.get(n.right.content.key),n.right.content.value));)n.right.deleted||i.delete(n.right.content.key),n.forward();const r=t.doc,s=r.clientID;i.forEach((o,l)=>{const a=n.left,c=n.right,u=new Ot(qe(s,Ut(r.store,s)),a,a&&a.lastId,c,c&&c.id,e,null,new Dt(l,o));u.integrate(t,0),n.right=u,n.forward()})},Ls=(t,e)=>{const{key:n,value:i}=e;i===null?t.delete(n):t.set(n,i)},dw=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===Dt&&Ki(e[t.right.content.key]||null,t.right.content.value)))break;t.forward()}},fw=(t,e,n,i)=>{const r=t.doc,s=r.clientID,o=new Map;for(const l in i){const a=i[l],c=n.currentAttributes.get(l)||null;if(!Ki(c,a)){o.set(l,c);const{left:u,right:h}=n;n.right=new Ot(qe(s,Ut(r.store,s)),u,u&&u.lastId,h,h&&h.id,e,null,new Dt(l,a)),n.right.integrate(t,0),n.forward()}}return o},mu=(t,e,n,i,r)=>{n.currentAttributes.forEach((d,g)=>{r[g]===void 0&&(r[g]=null)});const s=t.doc,o=s.clientID;dw(n,r);const l=fw(t,e,n,r),a=i.constructor===String?new ai(i):i instanceof qt?new Mi(i):new Fr(i);let{left:c,right:u,index:h}=n;e._searchMarker&&xo(e._searchMarker,n.index,a.getLength()),u=new Ot(qe(o,Ut(s.store,o)),c,c&&c.lastId,u,u&&u.id,e,null,a),u.integrate(t,0),n.right=u,n.index=h,n.forward(),hw(t,e,n,l)},Zm=(t,e,n,i,r)=>{const s=t.doc,o=s.clientID;dw(n,r);const l=fw(t,e,n,r);e:for(;n.right!==null&&(i>0||l.size>0&&(n.right.deleted||n.right.content.constructor===Dt));){if(!n.right.deleted)switch(n.right.content.constructor){case Dt:{const{key:a,value:c}=n.right.content,u=r[a];if(u!==void 0){if(Ki(u,c))l.delete(a);else{if(i===0)break e;l.set(a,c)}n.right.delete(t)}else n.currentAttributes.set(a,c);break}default:i<n.right.length&&er(t,qe(n.right.id.client,n.right.id.clock+i)),i-=n.right.length;break}n.forward()}if(i>0){let a="";for(;i>0;i--)a+=`
`;n.right=new Ot(qe(o,Ut(s.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new ai(a)),n.right.integrate(t,0),n.forward()}hw(t,e,n,l)},pw=(t,e,n,i,r)=>{let s=e;const o=an();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===Dt){const c=s.content;o.set(c.key,c)}s=s.right}let l=0,a=!1;for(;e!==s;){if(n===e&&(a=!0),!e.deleted){const c=e.content;switch(c.constructor){case Dt:{const{key:u,value:h}=c,d=i.get(u)||null;(o.get(u)!==c||d===h)&&(e.delete(t),l++,!a&&(r.get(u)||null)===h&&d!==h&&(d===null?r.delete(u):r.set(u,d))),!a&&!e.deleted&&Ls(r,c);break}}}e=e.right}return l},Fk=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Dt){const i=e.content.key;n.has(i)?e.delete(t):n.add(i)}e=e.left}},Bk=t=>{let e=0;return st(t.doc,n=>{let i=t._start,r=t._start,s=an();const o=ch(s);for(;r;){if(r.deleted===!1)switch(r.content.constructor){case Dt:Ls(o,r.content);break;default:e+=pw(n,i,r,s,o),s=ch(o),i=r;break}r=r.right}}),e},Uk=t=>{const e=new Set,n=t.doc;for(const[i,r]of t.afterState.entries()){const s=t.beforeState.get(i)||0;r!==s&&Xv(t,n.store.clients.get(i),s,r,o=>{!o.deleted&&o.content.constructor===Dt&&o.constructor!==Pn&&e.add(o.parent)})}st(n,i=>{Mv(t,t.deleteSet,r=>{if(r instanceof Pn||!r.parent._hasFormatting||e.has(r.parent))return;const s=r.parent;r.content.constructor===Dt?e.add(s):Fk(i,r)});for(const r of e)Bk(r)})},eb=(t,e,n)=>{const i=n,r=ch(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Mi:case Fr:case ai:n<e.right.length&&er(t,qe(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&pw(t,s,e.right,r,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&xo(o._searchMarker,e.index,-i+n),e};class jk extends wc{constructor(e,n,i){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,i.forEach(r=>{r===null?this.childListChanged=!0:this.keysChanged.add(r)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];st(e,i=>{const r=new Map,s=new Map;let o=this.target._start,l=null;const a={};let c="",u=0,h=0;const d=()=>{if(l!==null){let g=null;switch(l){case"delete":h>0&&(g={delete:h}),h=0;break;case"insert":(typeof c=="object"||c.length>0)&&(g={insert:c},r.size>0&&(g.attributes={},r.forEach((p,b)=>{p!==null&&(g.attributes[b]=p)}))),c="";break;case"retain":u>0&&(g={retain:u},e3(a)||(g.attributes=XT({},a))),u=0;break}g&&n.push(g),l=null}};for(;o!==null;){switch(o.content.constructor){case Mi:case Fr:this.adds(o)?this.deletes(o)||(d(),l="insert",c=o.content.getContent()[0],d()):this.deletes(o)?(l!=="delete"&&(d(),l="delete"),h+=1):o.deleted||(l!=="retain"&&(d(),l="retain"),u+=1);break;case ai:this.adds(o)?this.deletes(o)||(l!=="insert"&&(d(),l="insert"),c+=o.content.str):this.deletes(o)?(l!=="delete"&&(d(),l="delete"),h+=o.length):o.deleted||(l!=="retain"&&(d(),l="retain"),u+=o.length);break;case Dt:{const{key:g,value:p}=o.content;if(this.adds(o)){if(!this.deletes(o)){const b=r.get(g)||null;Ki(b,p)?p!==null&&o.delete(i):(l==="retain"&&d(),Ki(p,s.get(g)||null)?delete a[g]:a[g]=p)}}else if(this.deletes(o)){s.set(g,p);const b=r.get(g)||null;Ki(b,p)||(l==="retain"&&d(),a[g]=b)}else if(!o.deleted){s.set(g,p);const b=a[g];b!==void 0&&(Ki(b,p)?b!==null&&o.delete(i):(l==="retain"&&d(),p===null?delete a[g]:a[g]=p))}o.deleted||(l==="insert"&&d(),Ls(r,o.content));break}}o=o.right}for(d();n.length>0;){const g=n[n.length-1];if(g.retain!==void 0&&g.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class ps extends qt{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(i=>i())}catch(i){console.error(i)}this._pending=null}_copy(){return new ps}clone(){const e=new ps;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const i=new jk(this,e,n);xc(this,e,i),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===ai&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?st(this.doc,i=>{const r=new bh(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const o=e[s];if(o.insert!==void 0){const l=!n&&typeof o.insert=="string"&&s===e.length-1&&r.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof l!="string"||l.length>0)&&mu(i,this,r,l,o.attributes||{})}else o.retain!==void 0?Zm(i,this,r,o.retain,o.attributes||{}):o.delete!==void 0&&eb(i,r,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,i){const r=[],s=new Map,o=this.doc;let l="",a=this._start;function c(){if(l.length>0){const h={};let d=!1;s.forEach((p,b)=>{d=!0,h[b]=p});const g={insert:l};d&&(g.attributes=h),r.push(g),l=""}}const u=()=>{for(;a!==null;){if(Gs(a,e)||n!==void 0&&Gs(a,n))switch(a.content.constructor){case ai:{const h=s.get("ychange");e!==void 0&&!Gs(a,e)?(h===void 0||h.user!==a.id.client||h.type!=="removed")&&(c(),s.set("ychange",i?i("removed",a.id):{type:"removed"})):n!==void 0&&!Gs(a,n)?(h===void 0||h.user!==a.id.client||h.type!=="added")&&(c(),s.set("ychange",i?i("added",a.id):{type:"added"})):h!==void 0&&(c(),s.delete("ychange")),l+=a.content.str;break}case Mi:case Fr:{c();const h={insert:a.content.getContent()[0]};if(s.size>0){const d={};h.attributes=d,s.forEach((g,p)=>{d[p]=g})}r.push(h);break}case Dt:Gs(a,e)&&(c(),Ls(s,a.content));break}a=a.right}c()};return e||n?st(o,h=>{e&&gh(h,e),n&&gh(h,n),u()},"cleanup"):u(),r}insert(e,n,i){if(n.length<=0)return;const r=this.doc;r!==null?st(r,s=>{const o=Oa(s,this,e);i||(i={},o.currentAttributes.forEach((l,a)=>{i[a]=l})),mu(s,this,o,n,i)}):this._pending.push(()=>this.insert(e,n,i))}insertEmbed(e,n,i={}){const r=this.doc;r!==null?st(r,s=>{const o=Oa(s,this,e);mu(s,this,o,n,i)}):this._pending.push(()=>this.insertEmbed(e,n,i))}delete(e,n){if(n===0)return;const i=this.doc;i!==null?st(i,r=>{eb(r,Oa(r,this,e),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,i){if(n===0)return;const r=this.doc;r!==null?st(r,s=>{const o=Oa(s,this,e);o.right!==null&&Zm(s,this,o,n,i)}):this._pending.push(()=>this.format(e,n,i))}removeAttribute(e){this.doc!==null?st(this.doc,n=>{dl(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?st(this.doc,i=>{Pf(i,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return Af(this,e)}getAttributes(){return cw(this)}_write(e){e.writeTypeRef(oP)}}const Hk=t=>new ps;class bu{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Eo||n.constructor===$r)&&n._start!==null)e=n._start;else for(;e!==null;)if(e.right!==null){e=e.right;break}else e.parent===this._root?e=null:e=e.parent._item;while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class $r extends qt{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new $r}clone(){const e=new $r;return e.insert(0,this.toArray().map(n=>n instanceof qt?n.clone():n)),e}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new bu(this,e)}querySelector(e){e=e.toUpperCase();const i=new bu(this,r=>r.nodeName&&r.nodeName.toUpperCase()===e).next();return i.done?null:i.value}querySelectorAll(e){return e=e.toUpperCase(),Pi(new bu(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){xc(this,e,new qk(this,n,e))}toString(){return rw(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},i){const r=e.createDocumentFragment();return i!==void 0&&i._createAssociation(r,this),So(this,s=>{r.insertBefore(s.toDOM(e,n,i),null)}),r}insert(e,n){this.doc!==null?st(this.doc,i=>{aw(i,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)st(this.doc,i=>{const r=e&&e instanceof qt?e._item:e;hl(i,this,r,n)});else{const i=this._prelimContent,r=e===null?0:i.findIndex(s=>s===e)+1;if(r===0&&e!==null)throw ri("Reference item not found");i.splice(r,0,...n)}}delete(e,n=1){this.doc!==null?st(this.doc,i=>{lw(i,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return iw(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return sw(this,e)}slice(e=0,n=this.length){return nw(this,e,n)}forEach(e){So(this,e)}_write(e){e.writeTypeRef(lP)}}const Vk=t=>new $r;class Eo extends $r{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((i,r)=>{this.setAttribute(r,i)}),this._prelimAttrs=null}_copy(){return new Eo(this.nodeName)}clone(){const e=new Eo(this.nodeName),n=this.getAttributes();return ZT(n,(i,r)=>{typeof i=="string"&&e.setAttribute(r,i)}),e.insert(0,this.toArray().map(i=>i instanceof qt?i.clone():i)),e}toString(){const e=this.getAttributes(),n=[],i=[];for(const l in e)i.push(l);i.sort();const r=i.length;for(let l=0;l<r;l++){const a=i[l];n.push(a+'="'+e[a]+'"')}const s=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${s}${o}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?st(this.doc,n=>{dl(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?st(this.doc,i=>{Pf(i,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return Af(this,e)}hasAttribute(e){return uw(this,e)}getAttributes(){return cw(this)}toDOM(e=document,n={},i){const r=e.createElement(this.nodeName),s=this.getAttributes();for(const o in s){const l=s[o];typeof l=="string"&&r.setAttribute(o,l)}return So(this,o=>{r.appendChild(o.toDOM(e,n,i))}),i!==void 0&&i._createAssociation(r,this),r}_write(e){e.writeTypeRef(aP),e.writeKey(this.nodeName)}}const Kk=t=>new Eo(t.readKey());class qk extends wc{constructor(e,n,i){super(e,i),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(r=>{r===null?this.childListChanged=!0:this.attributesChanged.add(r)})}}class fl extends jt{constructor(e){super(),this.hookName=e}_copy(){return new fl(this.hookName)}clone(){const e=new fl(this.hookName);return this.forEach((n,i)=>{e.set(i,n)}),e}toDOM(e=document,n={},i){const r=n[this.hookName];let s;return r!==void 0?s=r.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),i!==void 0&&i._createAssociation(s,this),s}_write(e){e.writeTypeRef(cP),e.writeKey(this.hookName)}}const zk=t=>new fl(t.readKey());class pl extends ps{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new pl}clone(){const e=new pl;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,i){const r=e.createTextNode(this.toString());return i!==void 0&&i._createAssociation(r,this),r}toString(){return this.toDelta().map(e=>{const n=[];for(const r in e.attributes){const s=[];for(const o in e.attributes[r])s.push({key:o,value:e.attributes[r][o]});s.sort((o,l)=>o.key<l.key?-1:1),n.push({nodeName:r,attrs:s})}n.sort((r,s)=>r.nodeName<s.nodeName?-1:1);let i="";for(let r=0;r<n.length;r++){const s=n[r];i+=`<${s.nodeName}`;for(let o=0;o<s.attrs.length;o++){const l=s.attrs[o];i+=` ${l.key}="${l.value}"`}i+=">"}i+=e.insert;for(let r=n.length-1;r>=0;r--)i+=`</${n[r].nodeName}>`;return i}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(uP)}}const Wk=t=>new pl;class Of{constructor(e,n){this.id=e,this.length=n}get deleted(){throw Zn()}mergeWith(e){return!1}write(e,n,i){throw Zn()}integrate(e,n){throw Zn()}}const Gk=0;class Pn extends Of{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),Qv(e.doc.store,this)}write(e,n){e.writeInfo(Gk),e.writeLen(this.length-n)}getMissing(e,n){return null}}class sa{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new sa(this.content)}splice(e){throw Zn()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const Yk=t=>new sa(t.readBuf());class $o{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new $o(this.len)}splice(e){const n=new $o(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){cl(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const Qk=t=>new $o(t.readLen()),gw=(t,e)=>new Li({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class oa{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new oa(gw(this.doc.guid,this.opts))}splice(e){throw Zn()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const Xk=t=>new oa(gw(t.readString(),t.readAny()));class Fr{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Fr(this.embed)}splice(e){throw Zn()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const Jk=t=>new Fr(t.readJSON());class Dt{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Dt(this.key,this.value)}splice(e){throw Zn()}mergeWith(e){return!1}integrate(e,n){const i=n.parent;i._searchMarker=null,i._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const Zk=t=>new Dt(t.readKey(),t.readJSON());class gl{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new gl(this.arr)}splice(e){const n=new gl(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const i=this.arr.length;e.writeLen(i-n);for(let r=n;r<i;r++){const s=this.arr[r];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const eP=t=>{const e=t.readLen(),n=[];for(let i=0;i<e;i++){const r=t.readString();r==="undefined"?n.push(void 0):n.push(JSON.parse(r))}return new gl(n)};class Cr{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Cr(this.arr)}splice(e){const n=new Cr(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const i=this.arr.length;e.writeLen(i-n);for(let r=n;r<i;r++){const s=this.arr[r];e.writeAny(s)}}getRef(){return 8}}const tP=t=>{const e=t.readLen(),n=[];for(let i=0;i<e;i++)n.push(t.readAny());return new Cr(n)};class ai{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new ai(this.str)}splice(e){const n=new ai(this.str.slice(e));this.str=this.str.slice(0,e);const i=this.str.charCodeAt(e-1);return i>=55296&&i<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const nP=t=>new ai(t.readString()),iP=[Lk,Nk,Hk,Kk,Vk,zk,Wk],rP=0,sP=1,oP=2,aP=3,lP=4,cP=5,uP=6;class Mi{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Mi(this.type._copy())}splice(e){throw Zn()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(i=>{i.deleted?i.id.clock<(e.beforeState.get(i.id.client)||0)&&e._mergeStructs.push(i):i.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(i=>{for(;i!==null;)i.gc(e,!0),i=i.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const hP=t=>new Mi(iP[t.readTypeRef()](t)),ml=(t,e,n)=>{const{client:i,clock:r}=e.id,s=new Ot(qe(i,r+n),e,qe(i,r+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=qe(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s};class Ot extends Of{constructor(e,n,i,r,s,o,l,a){super(e,a.getLength()),this.origin=i,this.left=n,this.right=r,this.rightOrigin=s,this.parent=o,this.parentSub=l,this.redone=null,this.content=a,this.info=this.content.isCountable()?Dm:0}set marker(e){(this.info&uu)>0!==e&&(this.info^=uu)}get marker(){return(this.info&uu)>0}get keep(){return(this.info&Om)>0}set keep(e){this.keep!==e&&(this.info^=Om)}get countable(){return(this.info&Dm)>0}get deleted(){return(this.info&cu)>0}set deleted(e){this.deleted!==e&&(this.info^=cu)}markDeleted(){this.info|=cu}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Ut(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Ut(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Zr&&this.id.client!==this.parent.client&&this.parent.clock>=Ut(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Gm(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=er(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Pn||this.right&&this.right.constructor===Pn)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Ot&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===Ot&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Zr){const i=gu(n,this.parent);i.constructor===Pn?this.parent=null:this.parent=i.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=Gm(e,e.doc.store,qe(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let i=this.left,r;if(i!==null)r=i.right;else if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start;const s=new Set,o=new Set;for(;r!==null&&r!==this.right;){if(o.add(r),s.add(r),Pa(this.origin,r.origin)){if(r.id.client<this.id.client)i=r,s.clear();else if(Pa(this.rightOrigin,r.rightOrigin))break}else if(r.origin!==null&&o.has(gu(e.doc.store,r.origin)))s.has(gu(e.doc.store,r.origin))||(i=r,s.clear());else break;r=r.right}this.left=i}if(this.left!==null){const i=this.left.right;this.right=i,this.left.right=this}else{let i;if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start,this.parent._start=this;this.right=i}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Qv(e.doc.store,this),this.content.integrate(e,this),Qm(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Pn(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:qe(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Pa(e.origin,this.lastId)&&this.right===e&&Pa(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(i=>{i.p===e&&(i.p=this,!this.deleted&&this.countable&&(i.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),cl(e.deleteSet,this.id.client,this.id.clock,this.length),Qm(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw si();this.content.gc(e),n?yk(e,this,new Pn(this.id,this.length)):this.content=new $o(this.length)}write(e,n){const i=n>0?qe(this.id.client,this.id.clock+n-1):this.origin,r=this.rightOrigin,s=this.parentSub,o=this.content.getRef()&gc|(i===null?0:yn)|(r===null?0:Ei)|(s===null?0:vo);if(e.writeInfo(o),i!==null&&e.writeLeftID(i),r!==null&&e.writeRightID(r),i===null&&r===null){const l=this.parent;if(l._item!==void 0){const a=l._item;if(a===null){const c=mk(l);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(a.id)}else l.constructor===String?(e.writeParentInfo(!0),e.writeString(l)):l.constructor===Zr?(e.writeParentInfo(!1),e.writeLeftID(l)):si();s!==null&&e.writeString(s)}this.content.write(e,n)}}const mw=(t,e)=>dP[e&gc](t),dP=[()=>{si()},Qk,eP,Yk,nP,Jk,Zk,hP,tP,Xk,()=>{si()}],fP=10;class An extends Of{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){si()}write(e,n){e.writeInfo(fP),ve(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const bw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},yw="__ $YJS$ __";bw[yw]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");bw[yw]=!0;var jn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Da(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ww={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(){var n=Math.floor,i=Math.abs,r=Math.pow;return function(){function s(o,l,a){function c(d,g){if(!l[d]){if(!o[d]){var p=typeof Da=="function"&&Da;if(!g&&p)return p(d,!0);if(u)return u(d,!0);var b=new Error("Cannot find module '"+d+"'");throw b.code="MODULE_NOT_FOUND",b}var $=l[d]={exports:{}};o[d][0].call($.exports,function(E){var S=o[d][1][E];return c(S||E)},$,$.exports,s,o,l,a)}return l[d].exports}for(var u=typeof Da=="function"&&Da,h=0;h<a.length;h++)c(a[h]);return c}return s}()({1:[function(s,o,l){function a(x){var _=x.length;if(0<_%4)throw new Error("Invalid string. Length must be a multiple of 4");var C=x.indexOf("=");C===-1&&(C=_);var w=C===_?0:4-C%4;return[C,w]}function c(x,_,C){return 3*(_+C)/4-C}function u(x){var _,C,w=a(x),k=w[0],D=w[1],P=new $(c(x,k,D)),O=0,R=0<D?k-4:k;for(C=0;C<R;C+=4)_=b[x.charCodeAt(C)]<<18|b[x.charCodeAt(C+1)]<<12|b[x.charCodeAt(C+2)]<<6|b[x.charCodeAt(C+3)],P[O++]=255&_>>16,P[O++]=255&_>>8,P[O++]=255&_;return D===2&&(_=b[x.charCodeAt(C)]<<2|b[x.charCodeAt(C+1)]>>4,P[O++]=255&_),D===1&&(_=b[x.charCodeAt(C)]<<10|b[x.charCodeAt(C+1)]<<4|b[x.charCodeAt(C+2)]>>2,P[O++]=255&_>>8,P[O++]=255&_),P}function h(x){return p[63&x>>18]+p[63&x>>12]+p[63&x>>6]+p[63&x]}function d(x,_,C){for(var w,k=[],D=_;D<C;D+=3)w=(16711680&x[D]<<16)+(65280&x[D+1]<<8)+(255&x[D+2]),k.push(h(w));return k.join("")}function g(x){for(var _,C=x.length,w=C%3,k=[],D=16383,P=0,O=C-w;P<O;P+=D)k.push(d(x,P,P+D>O?O:P+D));return w===1?(_=x[C-1],k.push(p[_>>2]+p[63&_<<4]+"==")):w===2&&(_=(x[C-2]<<8)+x[C-1],k.push(p[_>>10]+p[63&_>>4]+p[63&_<<2]+"=")),k.join("")}l.byteLength=function(x){var _=a(x),C=_[0],w=_[1];return 3*(C+w)/4-w},l.toByteArray=u,l.fromByteArray=g;for(var p=[],b=[],$=typeof Uint8Array>"u"?Array:Uint8Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=0,m=E.length;S<m;++S)p[S]=E[S],b[E.charCodeAt(S)]=S;b[45]=62,b[95]=63},{}],2:[function(){},{}],3:[function(s,o,l){(function(){(function(){var a=String.fromCharCode,c=Math.min;function u(f){if(2147483647<f)throw new RangeError('The value "'+f+'" is invalid for option "size"');var y=new Uint8Array(f);return y.__proto__=h.prototype,y}function h(f,y,T){if(typeof f=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(f)}return d(f,y,T)}function d(f,y,T){if(typeof f=="string")return $(f,y);if(ArrayBuffer.isView(f))return E(f);if(f==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(N(f,ArrayBuffer)||f&&N(f.buffer,ArrayBuffer))return S(f,y,T);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var I=f.valueOf&&f.valueOf();if(I!=null&&I!==f)return h.from(I,y,T);var M=m(f);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return h.from(f[Symbol.toPrimitive]("string"),y,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}function g(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(0>f)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function p(f,y,T){return g(f),0>=f||y===void 0?u(f):typeof T=="string"?u(f).fill(y,T):u(f).fill(y)}function b(f){return g(f),u(0>f?0:0|x(f))}function $(f,y){if((typeof y!="string"||y==="")&&(y="utf8"),!h.isEncoding(y))throw new TypeError("Unknown encoding: "+y);var T=0|_(f,y),I=u(T),M=I.write(f,y);return M!==T&&(I=I.slice(0,M)),I}function E(f){for(var y=0>f.length?0:0|x(f.length),T=u(y),I=0;I<y;I+=1)T[I]=255&f[I];return T}function S(f,y,T){if(0>y||f.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<y+(T||0))throw new RangeError('"length" is outside of buffer bounds');var I;return I=y===void 0&&T===void 0?new Uint8Array(f):T===void 0?new Uint8Array(f,y):new Uint8Array(f,y,T),I.__proto__=h.prototype,I}function m(f){if(h.isBuffer(f)){var y=0|x(f.length),T=u(y);return T.length===0||f.copy(T,0,0,y),T}return f.length===void 0?f.type==="Buffer"&&Array.isArray(f.data)?E(f.data):void 0:typeof f.length!="number"||j(f.length)?u(0):E(f)}function x(f){if(f>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|f}function _(f,y){if(h.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||N(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var T=f.length,I=2<arguments.length&&arguments[2]===!0;if(!I&&T===0)return 0;for(var M=!1;;)switch(y){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":return Ge(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*T;case"hex":return T>>>1;case"base64":return xe(f).length;default:if(M)return I?-1:Ge(f).length;y=(""+y).toLowerCase(),M=!0}}function C(f,y,T){var I=!1;if((y===void 0||0>y)&&(y=0),y>this.length||((T===void 0||T>this.length)&&(T=this.length),0>=T)||(T>>>=0,y>>>=0,T<=y))return"";for(f||(f="utf8");;)switch(f){case"hex":return at(this,y,T);case"utf8":case"utf-8":return be(this,y,T);case"ascii":return ue(this,y,T);case"latin1":case"binary":return gt(this,y,T);case"base64":return re(this,y,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tt(this,y,T);default:if(I)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),I=!0}}function w(f,y,T){var I=f[y];f[y]=f[T],f[T]=I}function k(f,y,T,I,M){if(f.length===0)return-1;if(typeof T=="string"?(I=T,T=0):2147483647<T?T=2147483647:-2147483648>T&&(T=-2147483648),T=+T,j(T)&&(T=M?0:f.length-1),0>T&&(T=f.length+T),T>=f.length){if(M)return-1;T=f.length-1}else if(0>T)if(M)T=0;else return-1;if(typeof y=="string"&&(y=h.from(y,I)),h.isBuffer(y))return y.length===0?-1:D(f,y,T,I,M);if(typeof y=="number")return y&=255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(f,y,T):Uint8Array.prototype.lastIndexOf.call(f,y,T):D(f,[y],T,I,M);throw new TypeError("val must be string, number or Buffer")}function D(f,y,T,I,M){function q(lt,Tt){return de===1?lt[Tt]:lt.readUInt16BE(Tt*de)}var de=1,Ae=f.length,L=y.length;if(I!==void 0&&(I=(I+"").toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(2>f.length||2>y.length)return-1;de=2,Ae/=2,L/=2,T/=2}var Y;if(M){var Q=-1;for(Y=T;Y<Ae;Y++)if(q(f,Y)!==q(y,Q===-1?0:Y-Q))Q!==-1&&(Y-=Y-Q),Q=-1;else if(Q===-1&&(Q=Y),Y-Q+1===L)return Q*de}else for(T+L>Ae&&(T=Ae-L),Y=T;0<=Y;Y--){for(var ye=!0,Je=0;Je<L;Je++)if(q(f,Y+Je)!==q(y,Je)){ye=!1;break}if(ye)return Y}return-1}function P(f,y,T,I){T=+T||0;var M=f.length-T;I?(I=+I,I>M&&(I=M)):I=M;var q=y.length;I>q/2&&(I=q/2);for(var de,Ae=0;Ae<I;++Ae){if(de=parseInt(y.substr(2*Ae,2),16),j(de))return Ae;f[T+Ae]=de}return Ae}function O(f,y,T,I){return Ce(Ge(y,f.length-T),f,T,I)}function R(f,y,T,I){return Ce(Xe(y),f,T,I)}function B(f,y,T,I){return R(f,y,T,I)}function F(f,y,T,I){return Ce(xe(y),f,T,I)}function X(f,y,T,I){return Ce(_t(y,f.length-T),f,T,I)}function re(f,y,T){return y===0&&T===f.length?Z.fromByteArray(f):Z.fromByteArray(f.slice(y,T))}function be(f,y,T){T=c(f.length,T);for(var I=[],M=y;M<T;){var q=f[M],de=null,Ae=239<q?4:223<q?3:191<q?2:1;if(M+Ae<=T){var L,Y,Q,ye;Ae===1?128>q&&(de=q):Ae===2?(L=f[M+1],(192&L)==128&&(ye=(31&q)<<6|63&L,127<ye&&(de=ye))):Ae===3?(L=f[M+1],Y=f[M+2],(192&L)==128&&(192&Y)==128&&(ye=(15&q)<<12|(63&L)<<6|63&Y,2047<ye&&(55296>ye||57343<ye)&&(de=ye))):Ae===4&&(L=f[M+1],Y=f[M+2],Q=f[M+3],(192&L)==128&&(192&Y)==128&&(192&Q)==128&&(ye=(15&q)<<18|(63&L)<<12|(63&Y)<<6|63&Q,65535<ye&&1114112>ye&&(de=ye)))}de===null?(de=65533,Ae=1):65535<de&&(de-=65536,I.push(55296|1023&de>>>10),de=56320|1023&de),I.push(de),M+=Ae}return Re(I)}function Re(f){var y=f.length;if(y<=4096)return a.apply(String,f);for(var T="",I=0;I<y;)T+=a.apply(String,f.slice(I,I+=4096));return T}function ue(f,y,T){var I="";T=c(f.length,T);for(var M=y;M<T;++M)I+=a(127&f[M]);return I}function gt(f,y,T){var I="";T=c(f.length,T);for(var M=y;M<T;++M)I+=a(f[M]);return I}function at(f,y,T){var I=f.length;(!y||0>y)&&(y=0),(!T||0>T||T>I)&&(T=I);for(var M="",q=y;q<T;++q)M+=ft(f[q]);return M}function tt(f,y,T){for(var I=f.slice(y,T),M="",q=0;q<I.length;q+=2)M+=a(I[q]+256*I[q+1]);return M}function ge(f,y,T){if(f%1!=0||0>f)throw new RangeError("offset is not uint");if(f+y>T)throw new RangeError("Trying to access beyond buffer length")}function J(f,y,T,I,M,q){if(!h.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>M||y<q)throw new RangeError('"value" argument is out of bounds');if(T+I>f.length)throw new RangeError("Index out of range")}function Ne(f,y,T,I){if(T+I>f.length)throw new RangeError("Index out of range");if(0>T)throw new RangeError("Index out of range")}function ae(f,y,T,I,M){return y=+y,T>>>=0,M||Ne(f,y,T,4),le.write(f,y,T,I,23,4),T+4}function je(f,y,T,I,M){return y=+y,T>>>=0,M||Ne(f,y,T,8),le.write(f,y,T,I,52,8),T+8}function it(f){if(f=f.split("=")[0],f=f.trim().replace(A,""),2>f.length)return"";for(;f.length%4!=0;)f+="=";return f}function ft(f){return 16>f?"0"+f.toString(16):f.toString(16)}function Ge(f,y){y=y||1/0;for(var T,I=f.length,M=null,q=[],de=0;de<I;++de){if(T=f.charCodeAt(de),55295<T&&57344>T){if(!M){if(56319<T){-1<(y-=3)&&q.push(239,191,189);continue}else if(de+1===I){-1<(y-=3)&&q.push(239,191,189);continue}M=T;continue}if(56320>T){-1<(y-=3)&&q.push(239,191,189),M=T;continue}T=(M-55296<<10|T-56320)+65536}else M&&-1<(y-=3)&&q.push(239,191,189);if(M=null,128>T){if(0>(y-=1))break;q.push(T)}else if(2048>T){if(0>(y-=2))break;q.push(192|T>>6,128|63&T)}else if(65536>T){if(0>(y-=3))break;q.push(224|T>>12,128|63&T>>6,128|63&T)}else if(1114112>T){if(0>(y-=4))break;q.push(240|T>>18,128|63&T>>12,128|63&T>>6,128|63&T)}else throw new Error("Invalid code point")}return q}function Xe(f){for(var y=[],T=0;T<f.length;++T)y.push(255&f.charCodeAt(T));return y}function _t(f,y){for(var T,I,M,q=[],de=0;de<f.length&&!(0>(y-=2));++de)T=f.charCodeAt(de),I=T>>8,M=T%256,q.push(M),q.push(I);return q}function xe(f){return Z.toByteArray(it(f))}function Ce(f,y,T,I){for(var M=0;M<I&&!(M+T>=y.length||M>=f.length);++M)y[M+T]=f[M];return M}function N(f,y){return f instanceof y||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===y.name}function j(f){return f!==f}var Z=s("base64-js"),le=s("ieee754");l.Buffer=h,l.SlowBuffer=function(f){return+f!=f&&(f=0),h.alloc(+f)},l.INSPECT_MAX_BYTES=50,l.kMaxLength=2147483647,h.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1);return f.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},f.foo()===42}catch{return!1}}(),h.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){return h.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){return h.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(f,y,T){return d(f,y,T)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(f,y,T){return p(f,y,T)},h.allocUnsafe=function(f){return b(f)},h.allocUnsafeSlow=function(f){return b(f)},h.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==h.prototype},h.compare=function(f,y){if(N(f,Uint8Array)&&(f=h.from(f,f.offset,f.byteLength)),N(y,Uint8Array)&&(y=h.from(y,y.offset,y.byteLength)),!h.isBuffer(f)||!h.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===y)return 0;for(var T=f.length,I=y.length,M=0,q=c(T,I);M<q;++M)if(f[M]!==y[M]){T=f[M],I=y[M];break}return T<I?-1:I<T?1:0},h.isEncoding=function(f){switch((f+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(f,y){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return h.alloc(0);var T;if(y===void 0)for(y=0,T=0;T<f.length;++T)y+=f[T].length;var I=h.allocUnsafe(y),M=0;for(T=0;T<f.length;++T){var q=f[T];if(N(q,Uint8Array)&&(q=h.from(q)),!h.isBuffer(q))throw new TypeError('"list" argument must be an Array of Buffers');q.copy(I,M),M+=q.length}return I},h.byteLength=_,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var f=this.length;if(f%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var y=0;y<f;y+=2)w(this,y,y+1);return this},h.prototype.swap32=function(){var f=this.length;if(f%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var y=0;y<f;y+=4)w(this,y,y+3),w(this,y+1,y+2);return this},h.prototype.swap64=function(){var f=this.length;if(f%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var y=0;y<f;y+=8)w(this,y,y+7),w(this,y+1,y+6),w(this,y+2,y+5),w(this,y+3,y+4);return this},h.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?be(this,0,f):C.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(f){if(!h.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f||h.compare(this,f)===0},h.prototype.inspect=function(){var f="",y=l.INSPECT_MAX_BYTES;return f=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(f+=" ... "),"<Buffer "+f+">"},h.prototype.compare=function(f,y,T,I,M){if(N(f,Uint8Array)&&(f=h.from(f,f.offset,f.byteLength)),!h.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(y===void 0&&(y=0),T===void 0&&(T=f?f.length:0),I===void 0&&(I=0),M===void 0&&(M=this.length),0>y||T>f.length||0>I||M>this.length)throw new RangeError("out of range index");if(I>=M&&y>=T)return 0;if(I>=M)return-1;if(y>=T)return 1;if(y>>>=0,T>>>=0,I>>>=0,M>>>=0,this===f)return 0;for(var q=M-I,de=T-y,Ae=c(q,de),L=this.slice(I,M),Y=f.slice(y,T),Q=0;Q<Ae;++Q)if(L[Q]!==Y[Q]){q=L[Q],de=Y[Q];break}return q<de?-1:de<q?1:0},h.prototype.includes=function(f,y,T){return this.indexOf(f,y,T)!==-1},h.prototype.indexOf=function(f,y,T){return k(this,f,y,T,!0)},h.prototype.lastIndexOf=function(f,y,T){return k(this,f,y,T,!1)},h.prototype.write=function(f,y,T,I){if(y===void 0)I="utf8",T=this.length,y=0;else if(T===void 0&&typeof y=="string")I=y,T=this.length,y=0;else if(isFinite(y))y>>>=0,isFinite(T)?(T>>>=0,I===void 0&&(I="utf8")):(I=T,T=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var M=this.length-y;if((T===void 0||T>M)&&(T=M),0<f.length&&(0>T||0>y)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");for(var q=!1;;)switch(I){case"hex":return P(this,f,y,T);case"utf8":case"utf-8":return O(this,f,y,T);case"ascii":return R(this,f,y,T);case"latin1":case"binary":return B(this,f,y,T);case"base64":return F(this,f,y,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,f,y,T);default:if(q)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),q=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.slice=function(f,y){var T=this.length;f=~~f,y=y===void 0?T:~~y,0>f?(f+=T,0>f&&(f=0)):f>T&&(f=T),0>y?(y+=T,0>y&&(y=0)):y>T&&(y=T),y<f&&(y=f);var I=this.subarray(f,y);return I.__proto__=h.prototype,I},h.prototype.readUIntLE=function(f,y,T){f>>>=0,y>>>=0,T||ge(f,y,this.length);for(var I=this[f],M=1,q=0;++q<y&&(M*=256);)I+=this[f+q]*M;return I},h.prototype.readUIntBE=function(f,y,T){f>>>=0,y>>>=0,T||ge(f,y,this.length);for(var I=this[f+--y],M=1;0<y&&(M*=256);)I+=this[f+--y]*M;return I},h.prototype.readUInt8=function(f,y){return f>>>=0,y||ge(f,1,this.length),this[f]},h.prototype.readUInt16LE=function(f,y){return f>>>=0,y||ge(f,2,this.length),this[f]|this[f+1]<<8},h.prototype.readUInt16BE=function(f,y){return f>>>=0,y||ge(f,2,this.length),this[f]<<8|this[f+1]},h.prototype.readUInt32LE=function(f,y){return f>>>=0,y||ge(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]},h.prototype.readUInt32BE=function(f,y){return f>>>=0,y||ge(f,4,this.length),16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])},h.prototype.readIntLE=function(f,y,T){f>>>=0,y>>>=0,T||ge(f,y,this.length);for(var I=this[f],M=1,q=0;++q<y&&(M*=256);)I+=this[f+q]*M;return M*=128,I>=M&&(I-=r(2,8*y)),I},h.prototype.readIntBE=function(f,y,T){f>>>=0,y>>>=0,T||ge(f,y,this.length);for(var I=y,M=1,q=this[f+--I];0<I&&(M*=256);)q+=this[f+--I]*M;return M*=128,q>=M&&(q-=r(2,8*y)),q},h.prototype.readInt8=function(f,y){return f>>>=0,y||ge(f,1,this.length),128&this[f]?-1*(255-this[f]+1):this[f]},h.prototype.readInt16LE=function(f,y){f>>>=0,y||ge(f,2,this.length);var T=this[f]|this[f+1]<<8;return 32768&T?4294901760|T:T},h.prototype.readInt16BE=function(f,y){f>>>=0,y||ge(f,2,this.length);var T=this[f+1]|this[f]<<8;return 32768&T?4294901760|T:T},h.prototype.readInt32LE=function(f,y){return f>>>=0,y||ge(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},h.prototype.readInt32BE=function(f,y){return f>>>=0,y||ge(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},h.prototype.readFloatLE=function(f,y){return f>>>=0,y||ge(f,4,this.length),le.read(this,f,!0,23,4)},h.prototype.readFloatBE=function(f,y){return f>>>=0,y||ge(f,4,this.length),le.read(this,f,!1,23,4)},h.prototype.readDoubleLE=function(f,y){return f>>>=0,y||ge(f,8,this.length),le.read(this,f,!0,52,8)},h.prototype.readDoubleBE=function(f,y){return f>>>=0,y||ge(f,8,this.length),le.read(this,f,!1,52,8)},h.prototype.writeUIntLE=function(f,y,T,I){if(f=+f,y>>>=0,T>>>=0,!I){var M=r(2,8*T)-1;J(this,f,y,T,M,0)}var q=1,de=0;for(this[y]=255&f;++de<T&&(q*=256);)this[y+de]=255&f/q;return y+T},h.prototype.writeUIntBE=function(f,y,T,I){if(f=+f,y>>>=0,T>>>=0,!I){var M=r(2,8*T)-1;J(this,f,y,T,M,0)}var q=T-1,de=1;for(this[y+q]=255&f;0<=--q&&(de*=256);)this[y+q]=255&f/de;return y+T},h.prototype.writeUInt8=function(f,y,T){return f=+f,y>>>=0,T||J(this,f,y,1,255,0),this[y]=255&f,y+1},h.prototype.writeUInt16LE=function(f,y,T){return f=+f,y>>>=0,T||J(this,f,y,2,65535,0),this[y]=255&f,this[y+1]=f>>>8,y+2},h.prototype.writeUInt16BE=function(f,y,T){return f=+f,y>>>=0,T||J(this,f,y,2,65535,0),this[y]=f>>>8,this[y+1]=255&f,y+2},h.prototype.writeUInt32LE=function(f,y,T){return f=+f,y>>>=0,T||J(this,f,y,4,4294967295,0),this[y+3]=f>>>24,this[y+2]=f>>>16,this[y+1]=f>>>8,this[y]=255&f,y+4},h.prototype.writeUInt32BE=function(f,y,T){return f=+f,y>>>=0,T||J(this,f,y,4,4294967295,0),this[y]=f>>>24,this[y+1]=f>>>16,this[y+2]=f>>>8,this[y+3]=255&f,y+4},h.prototype.writeIntLE=function(f,y,T,I){if(f=+f,y>>>=0,!I){var M=r(2,8*T-1);J(this,f,y,T,M-1,-M)}var q=0,de=1,Ae=0;for(this[y]=255&f;++q<T&&(de*=256);)0>f&&Ae===0&&this[y+q-1]!==0&&(Ae=1),this[y+q]=255&(f/de>>0)-Ae;return y+T},h.prototype.writeIntBE=function(f,y,T,I){if(f=+f,y>>>=0,!I){var M=r(2,8*T-1);J(this,f,y,T,M-1,-M)}var q=T-1,de=1,Ae=0;for(this[y+q]=255&f;0<=--q&&(de*=256);)0>f&&Ae===0&&this[y+q+1]!==0&&(Ae=1),this[y+q]=255&(f/de>>0)-Ae;return y+T},h.prototype.writeInt8=function(f,y,T){return f=+f,y>>>=0,T||J(this,f,y,1,127,-128),0>f&&(f=255+f+1),this[y]=255&f,y+1},h.prototype.writeInt16LE=function(f,y,T){return f=+f,y>>>=0,T||J(this,f,y,2,32767,-32768),this[y]=255&f,this[y+1]=f>>>8,y+2},h.prototype.writeInt16BE=function(f,y,T){return f=+f,y>>>=0,T||J(this,f,y,2,32767,-32768),this[y]=f>>>8,this[y+1]=255&f,y+2},h.prototype.writeInt32LE=function(f,y,T){return f=+f,y>>>=0,T||J(this,f,y,4,2147483647,-2147483648),this[y]=255&f,this[y+1]=f>>>8,this[y+2]=f>>>16,this[y+3]=f>>>24,y+4},h.prototype.writeInt32BE=function(f,y,T){return f=+f,y>>>=0,T||J(this,f,y,4,2147483647,-2147483648),0>f&&(f=4294967295+f+1),this[y]=f>>>24,this[y+1]=f>>>16,this[y+2]=f>>>8,this[y+3]=255&f,y+4},h.prototype.writeFloatLE=function(f,y,T){return ae(this,f,y,!0,T)},h.prototype.writeFloatBE=function(f,y,T){return ae(this,f,y,!1,T)},h.prototype.writeDoubleLE=function(f,y,T){return je(this,f,y,!0,T)},h.prototype.writeDoubleBE=function(f,y,T){return je(this,f,y,!1,T)},h.prototype.copy=function(f,y,T,I){if(!h.isBuffer(f))throw new TypeError("argument should be a Buffer");if(T||(T=0),I||I===0||(I=this.length),y>=f.length&&(y=f.length),y||(y=0),0<I&&I<T&&(I=T),I===T||f.length===0||this.length===0)return 0;if(0>y)throw new RangeError("targetStart out of bounds");if(0>T||T>=this.length)throw new RangeError("Index out of range");if(0>I)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),f.length-y<I-T&&(I=f.length-y+T);var M=I-T;if(this===f&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(y,T,I);else if(this===f&&T<y&&y<I)for(var q=M-1;0<=q;--q)f[q+y]=this[q+T];else Uint8Array.prototype.set.call(f,this.subarray(T,I),y);return M},h.prototype.fill=function(f,y,T,I){if(typeof f=="string"){if(typeof y=="string"?(I=y,y=0,T=this.length):typeof T=="string"&&(I=T,T=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!h.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(f.length===1){var M=f.charCodeAt(0);(I==="utf8"&&128>M||I==="latin1")&&(f=M)}}else typeof f=="number"&&(f&=255);if(0>y||this.length<y||this.length<T)throw new RangeError("Out of range index");if(T<=y)return this;y>>>=0,T=T===void 0?this.length:T>>>0,f||(f=0);var q;if(typeof f=="number")for(q=y;q<T;++q)this[q]=f;else{var de=h.isBuffer(f)?f:h.from(f,I),Ae=de.length;if(Ae===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(q=0;q<T-y;++q)this[q+y]=de[q%Ae]}return this};var A=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,s("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(s,o,l){(function(a){(function(){function c(){let h;try{h=l.storage.getItem("debug")}catch{}return!h&&typeof a<"u"&&"env"in a&&(h=a.env.DEBUG),h}l.formatArgs=function(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;h.splice(1,0,d,"color: inherit");let g=0,p=0;h[0].replace(/%[a-zA-Z%]/g,b=>{b==="%%"||(g++,b==="%c"&&(p=g))}),h.splice(p,0,d)},l.save=function(h){try{h?l.storage.setItem("debug",h):l.storage.removeItem("debug")}catch{}},l.load=c,l.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},l.storage=function(){try{return localStorage}catch{}}(),l.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),l.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],l.log=console.debug||console.log||(()=>{}),o.exports=s("./common")(l);const{formatters:u}=o.exports;u.j=function(h){try{return JSON.stringify(h)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}}).call(this)}).call(this,s("_process"))},{"./common":5,_process:12}],5:[function(s,o){o.exports=function(l){function a(h){function d(...b){if(!d.enabled)return;const $=d,E=+new Date,S=E-(g||E);$.diff=S,$.prev=g,$.curr=E,g=E,b[0]=a.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let m=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(_,C)=>{if(_==="%%")return"%";m++;const w=a.formatters[C];if(typeof w=="function"){const k=b[m];_=w.call($,k),b.splice(m,1),m--}return _}),a.formatArgs.call($,b),($.log||a.log).apply($,b)}let g,p=null;return d.namespace=h,d.useColors=a.useColors(),d.color=a.selectColor(h),d.extend=c,d.destroy=a.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>p===null?a.enabled(h):p,set:b=>{p=b}}),typeof a.init=="function"&&a.init(d),d}function c(h,d){const g=a(this.namespace+(typeof d>"u"?":":d)+h);return g.log=this.log,g}function u(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}return a.debug=a,a.default=a,a.coerce=function(h){return h instanceof Error?h.stack||h.message:h},a.disable=function(){const h=[...a.names.map(u),...a.skips.map(u).map(d=>"-"+d)].join(",");return a.enable(""),h},a.enable=function(h){a.save(h),a.names=[],a.skips=[];let d;const g=(typeof h=="string"?h:"").split(/[\s,]+/),p=g.length;for(d=0;d<p;d++)g[d]&&(h=g[d].replace(/\*/g,".*?"),h[0]==="-"?a.skips.push(new RegExp("^"+h.substr(1)+"$")):a.names.push(new RegExp("^"+h+"$")))},a.enabled=function(h){if(h[h.length-1]==="*")return!0;let d,g;for(d=0,g=a.skips.length;d<g;d++)if(a.skips[d].test(h))return!1;for(d=0,g=a.names.length;d<g;d++)if(a.names[d].test(h))return!0;return!1},a.humanize=s("ms"),a.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(l).forEach(h=>{a[h]=l[h]}),a.names=[],a.skips=[],a.formatters={},a.selectColor=function(h){let d=0;for(let g=0;g<h.length;g++)d=(d<<5)-d+h.charCodeAt(g),d|=0;return a.colors[i(d)%a.colors.length]},a.enable(a.load()),a}},{ms:11}],6:[function(s,o){function l(a,c){for(const u in c)Object.defineProperty(a,u,{value:c[u],enumerable:!0,configurable:!0});return a}o.exports=function(a,c,u){if(!a||typeof a=="string")throw new TypeError("Please pass an Error to err-code");u||(u={}),typeof c=="object"&&(u=c,c=""),c&&(u.code=c);try{return l(a,u)}catch{u.message=a.message,u.stack=a.stack;const d=function(){};return d.prototype=Object.create(Object.getPrototypeOf(a)),l(new d,u)}}},{}],7:[function(s,o){function l(P){console&&console.warn&&console.warn(P)}function a(){a.init.call(this)}function c(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}function u(P){return P._maxListeners===void 0?a.defaultMaxListeners:P._maxListeners}function h(P,O,R,B){var F,X,re;if(c(R),X=P._events,X===void 0?(X=P._events=Object.create(null),P._eventsCount=0):(X.newListener!==void 0&&(P.emit("newListener",O,R.listener?R.listener:R),X=P._events),re=X[O]),re===void 0)re=X[O]=R,++P._eventsCount;else if(typeof re=="function"?re=X[O]=B?[R,re]:[re,R]:B?re.unshift(R):re.push(R),F=u(P),0<F&&re.length>F&&!re.warned){re.warned=!0;var be=new Error("Possible EventEmitter memory leak detected. "+re.length+" "+(O+" listeners added. Use emitter.setMaxListeners() to increase limit"));be.name="MaxListenersExceededWarning",be.emitter=P,be.type=O,be.count=re.length,l(be)}return P}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(P,O,R){var B={fired:!1,wrapFn:void 0,target:P,type:O,listener:R},F=d.bind(B);return F.listener=R,B.wrapFn=F,F}function p(P,O,R){var B=P._events;if(B===void 0)return[];var F=B[O];return F===void 0?[]:typeof F=="function"?R?[F.listener||F]:[F]:R?S(F):$(F,F.length)}function b(P){var O=this._events;if(O!==void 0){var R=O[P];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}function $(P,O){for(var R=Array(O),B=0;B<O;++B)R[B]=P[B];return R}function E(P,O){for(;O+1<P.length;O++)P[O]=P[O+1];P.pop()}function S(P){for(var O=Array(P.length),R=0;R<O.length;++R)O[R]=P[R].listener||P[R];return O}function m(P,O,R){typeof P.on=="function"&&x(P,"error",O,R)}function x(P,O,R,B){if(typeof P.on=="function")B.once?P.once(O,R):P.on(O,R);else if(typeof P.addEventListener=="function")P.addEventListener(O,function F(X){B.once&&P.removeEventListener(O,F),R(X)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof P)}var _,C=typeof Reflect=="object"?Reflect:null,w=C&&typeof C.apply=="function"?C.apply:function(P,O,R){return Function.prototype.apply.call(P,O,R)};_=C&&typeof C.ownKeys=="function"?C.ownKeys:Object.getOwnPropertySymbols?function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:function(P){return Object.getOwnPropertyNames(P)};var k=Number.isNaN||function(P){return P!==P};o.exports=a,o.exports.once=function(P,O){return new Promise(function(R,B){function F(re){P.removeListener(O,X),B(re)}function X(){typeof P.removeListener=="function"&&P.removeListener("error",F),R([].slice.call(arguments))}x(P,O,X,{once:!0}),O!=="error"&&m(P,F,{once:!0})})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var D=10;Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return D},set:function(P){if(typeof P!="number"||0>P||k(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");D=P}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(P){if(typeof P!="number"||0>P||k(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(P){for(var O=[],R=1;R<arguments.length;R++)O.push(arguments[R]);var B=P==="error",F=this._events;if(F!==void 0)B=B&&F.error===void 0;else if(!B)return!1;if(B){var X;if(0<O.length&&(X=O[0]),X instanceof Error)throw X;var re=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw re.context=X,re}var be=F[P];if(be===void 0)return!1;if(typeof be=="function")w(be,this,O);else for(var Re=be.length,ue=$(be,Re),R=0;R<Re;++R)w(ue[R],this,O);return!0},a.prototype.addListener=function(P,O){return h(this,P,O,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(P,O){return h(this,P,O,!0)},a.prototype.once=function(P,O){return c(O),this.on(P,g(this,P,O)),this},a.prototype.prependOnceListener=function(P,O){return c(O),this.prependListener(P,g(this,P,O)),this},a.prototype.removeListener=function(P,O){var R,B,F,X,re;if(c(O),B=this._events,B===void 0)return this;if(R=B[P],R===void 0)return this;if(R===O||R.listener===O)--this._eventsCount==0?this._events=Object.create(null):(delete B[P],B.removeListener&&this.emit("removeListener",P,R.listener||O));else if(typeof R!="function"){for(F=-1,X=R.length-1;0<=X;X--)if(R[X]===O||R[X].listener===O){re=R[X].listener,F=X;break}if(0>F)return this;F===0?R.shift():E(R,F),R.length===1&&(B[P]=R[0]),B.removeListener!==void 0&&this.emit("removeListener",P,re||O)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(P){var O,R,B;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[P]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete R[P]),this;if(arguments.length===0){var F,X=Object.keys(R);for(B=0;B<X.length;++B)F=X[B],F!=="removeListener"&&this.removeAllListeners(F);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=R[P],typeof O=="function")this.removeListener(P,O);else if(O!==void 0)for(B=O.length-1;0<=B;B--)this.removeListener(P,O[B]);return this},a.prototype.listeners=function(P){return p(this,P,!0)},a.prototype.rawListeners=function(P){return p(this,P,!1)},a.listenerCount=function(P,O){return typeof P.listenerCount=="function"?P.listenerCount(O):b.call(P,O)},a.prototype.listenerCount=b,a.prototype.eventNames=function(){return 0<this._eventsCount?_(this._events):[]}},{}],8:[function(s,o){o.exports=function(){if(typeof globalThis>"u")return null;var l={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return l.RTCPeerConnection?l:null}},{}],9:[function(s,o,l){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */l.read=function(a,c,u,h,d){var g,p,b=8*d-h-1,$=(1<<b)-1,E=$>>1,S=-7,m=u?d-1:0,x=u?-1:1,_=a[c+m];for(m+=x,g=_&(1<<-S)-1,_>>=-S,S+=b;0<S;g=256*g+a[c+m],m+=x,S-=8);for(p=g&(1<<-S)-1,g>>=-S,S+=h;0<S;p=256*p+a[c+m],m+=x,S-=8);if(g===0)g=1-E;else{if(g===$)return p?NaN:(_?-1:1)*(1/0);p+=r(2,h),g-=E}return(_?-1:1)*p*r(2,g-h)},l.write=function(a,c,u,h,d,g){var p,b,$,E=Math.LN2,S=Math.log,m=8*g-d-1,x=(1<<m)-1,_=x>>1,C=d===23?r(2,-24)-r(2,-77):0,w=h?0:g-1,k=h?1:-1,D=0>c||c===0&&0>1/c?1:0;for(c=i(c),isNaN(c)||c===1/0?(b=isNaN(c)?1:0,p=x):(p=n(S(c)/E),1>c*($=r(2,-p))&&(p--,$*=2),c+=1<=p+_?C/$:C*r(2,1-_),2<=c*$&&(p++,$/=2),p+_>=x?(b=0,p=x):1<=p+_?(b=(c*$-1)*r(2,d),p+=_):(b=c*r(2,_-1)*r(2,d),p=0));8<=d;a[u+w]=255&b,w+=k,b/=256,d-=8);for(p=p<<d|b,m+=d;0<m;a[u+w]=255&p,w+=k,p/=256,m-=8);a[u+w-k]|=128*D}},{}],10:[function(s,o){o.exports=typeof Object.create=="function"?function(l,a){a&&(l.super_=a,l.prototype=Object.create(a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}))}:function(l,a){if(a){l.super_=a;var c=function(){};c.prototype=a.prototype,l.prototype=new c,l.prototype.constructor=l}}},{}],11:[function(s,o){var l=Math.round;function a(d){if(d+="",!(100<d.length)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(g){var p=parseFloat(g[1]),b=(g[2]||"ms").toLowerCase();return b==="years"||b==="year"||b==="yrs"||b==="yr"||b==="y"?315576e5*p:b==="weeks"||b==="week"||b==="w"?6048e5*p:b==="days"||b==="day"||b==="d"?864e5*p:b==="hours"||b==="hour"||b==="hrs"||b==="hr"||b==="h"?36e5*p:b==="minutes"||b==="minute"||b==="mins"||b==="min"||b==="m"?6e4*p:b==="seconds"||b==="second"||b==="secs"||b==="sec"||b==="s"?1e3*p:b==="milliseconds"||b==="millisecond"||b==="msecs"||b==="msec"||b==="ms"?p:void 0}}}function c(d){var g=i(d);return 864e5<=g?l(d/864e5)+"d":36e5<=g?l(d/36e5)+"h":6e4<=g?l(d/6e4)+"m":1e3<=g?l(d/1e3)+"s":d+"ms"}function u(d){var g=i(d);return 864e5<=g?h(d,g,864e5,"day"):36e5<=g?h(d,g,36e5,"hour"):6e4<=g?h(d,g,6e4,"minute"):1e3<=g?h(d,g,1e3,"second"):d+" ms"}function h(d,g,p,b){return l(d/p)+" "+b+(g>=1.5*p?"s":"")}o.exports=function(d,g){g=g||{};var p=typeof d;if(p=="string"&&0<d.length)return a(d);if(p==="number"&&isFinite(d))return g.long?u(d):c(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))}},{}],12:[function(s,o){function l(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(C){if(b===setTimeout)return setTimeout(C,0);if((b===l||!b)&&setTimeout)return b=setTimeout,setTimeout(C,0);try{return b(C,0)}catch{try{return b.call(null,C,0)}catch{return b.call(this,C,0)}}}function u(C){if($===clearTimeout)return clearTimeout(C);if(($===a||!$)&&clearTimeout)return $=clearTimeout,clearTimeout(C);try{return $(C)}catch{try{return $.call(null,C)}catch{return $.call(this,C)}}}function h(){x&&S&&(x=!1,S.length?m=S.concat(m):_=-1,m.length&&d())}function d(){if(!x){var C=c(h);x=!0;for(var w=m.length;w;){for(S=m,m=[];++_<w;)S&&S[_].run();_=-1,w=m.length}S=null,x=!1,u(C)}}function g(C,w){this.fun=C,this.array=w}function p(){}var b,$,E=o.exports={};(function(){try{b=typeof setTimeout=="function"?setTimeout:l}catch{b=l}try{$=typeof clearTimeout=="function"?clearTimeout:a}catch{$=a}})();var S,m=[],x=!1,_=-1;E.nextTick=function(C){var w=Array(arguments.length-1);if(1<arguments.length)for(var k=1;k<arguments.length;k++)w[k-1]=arguments[k];m.push(new g(C,w)),m.length!==1||x||c(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},E.title="browser",E.browser=!0,E.env={},E.argv=[],E.version="",E.versions={},E.on=p,E.addListener=p,E.once=p,E.off=p,E.removeListener=p,E.removeAllListeners=p,E.emit=p,E.prependListener=p,E.prependOnceListener=p,E.listeners=function(){return[]},E.binding=function(){throw new Error("process.binding is not supported")},E.cwd=function(){return"/"},E.chdir=function(){throw new Error("process.chdir is not supported")},E.umask=function(){return 0}},{}],13:[function(s,o){(function(l){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let a;o.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?l:window):c=>(a||(a=Promise.resolve())).then(c).catch(u=>setTimeout(()=>{throw u},0))}).call(this)}).call(this,typeof jn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:jn)},{}],14:[function(s,o){(function(l,a){(function(){var c=s("safe-buffer").Buffer,u=a.crypto||a.msCrypto;o.exports=u&&u.getRandomValues?function(h,d){if(h>4294967295)throw new RangeError("requested too many random bytes");var g=c.allocUnsafe(h);if(0<h)if(65536<h)for(var p=0;p<h;p+=65536)u.getRandomValues(g.slice(p,p+65536));else u.getRandomValues(g);return typeof d=="function"?l.nextTick(function(){d(null,g)}):g}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,s("_process"),typeof jn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:jn)},{_process:12,"safe-buffer":30}],15:[function(s,o){function l(p,b){p.prototype=Object.create(b.prototype),p.prototype.constructor=p,p.__proto__=b}function a(p,b,$){function E(m,x,_){return typeof b=="string"?b:b(m,x,_)}$||($=Error);var S=function(m){function x(_,C,w){return m.call(this,E(_,C,w))||this}return l(x,m),x}($);S.prototype.name=$.name,S.prototype.code=p,g[p]=S}function c(p,b){if(Array.isArray(p)){var $=p.length;return p=p.map(function(E){return E+""}),2<$?"one of ".concat(b," ").concat(p.slice(0,$-1).join(", "),", or ")+p[$-1]:$===2?"one of ".concat(b," ").concat(p[0]," or ").concat(p[1]):"of ".concat(b," ").concat(p[0])}return"of ".concat(b," ").concat(p+"")}function u(p,b,$){return p.substr(!$||0>$?0:+$,b.length)===b}function h(p,b,$){return($===void 0||$>p.length)&&($=p.length),p.substring($-b.length,$)===b}function d(p,b,$){return typeof $!="number"&&($=0),!($+b.length>p.length)&&p.indexOf(b,$)!==-1}var g={};a("ERR_INVALID_OPT_VALUE",function(p,b){return'The value "'+b+'" is invalid for option "'+p+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(p,b,$){var E;typeof b=="string"&&u(b,"not ")?(E="must not be",b=b.replace(/^not /,"")):E="must be";var S;if(h(p," argument"))S="The ".concat(p," ").concat(E," ").concat(c(b,"type"));else{var m=d(p,".")?"property":"argument";S='The "'.concat(p,'" ').concat(m," ").concat(E," ").concat(c(b,"type"))}return S+=". Received type ".concat(typeof $),S},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(p){return"The "+p+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(p){return"Cannot call "+p+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(p){return"Unknown encoding: "+p},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),o.exports.codes=g},{}],16:[function(s,o){(function(l){(function(){function a(E){return this instanceof a?(d.call(this,E),g.call(this,E),this.allowHalfOpen=!0,void(E&&(E.readable===!1&&(this.readable=!1),E.writable===!1&&(this.writable=!1),E.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c))))):new a(E)}function c(){this._writableState.ended||l.nextTick(u,this)}function u(E){E.end()}var h=Object.keys||function(E){var S=[];for(var m in E)S.push(m);return S};o.exports=a;var d=s("./_stream_readable"),g=s("./_stream_writable");s("inherits")(a,d);for(var p,b=h(g.prototype),$=0;$<b.length;$++)p=b[$],a.prototype[p]||(a.prototype[p]=g.prototype[p]);Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(E){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=E,this._writableState.destroyed=E)}})}).call(this)}).call(this,s("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(s,o){function l(c){return this instanceof l?void a.call(this,c):new l(c)}o.exports=l;var a=s("./_stream_transform");s("inherits")(l,a),l.prototype._transform=function(c,u,h){h(null,c)}},{"./_stream_transform":19,inherits:10}],18:[function(s,o){(function(l,a){(function(){function c(A){return tt.from(A)}function u(A){return tt.isBuffer(A)||A instanceof ge}function h(A,f,y){return typeof A.prependListener=="function"?A.prependListener(f,y):void(A._events&&A._events[f]?Array.isArray(A._events[f])?A._events[f].unshift(y):A._events[f]=[y,A._events[f]]:A.on(f,y))}function d(A,f,y){Re=Re||s("./_stream_duplex"),A=A||{},typeof y!="boolean"&&(y=f instanceof Re),this.objectMode=!!A.objectMode,y&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=Xe(this,A,"readableHighWaterMark",y),this.buffer=new it,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(!Ne&&(Ne=s("string_decoder/").StringDecoder),this.decoder=new Ne(A.encoding),this.encoding=A.encoding)}function g(A){if(Re=Re||s("./_stream_duplex"),!(this instanceof g))return new g(A);var f=this instanceof Re;this._readableState=new d(A,this,f),this.readable=!0,A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy)),at.call(this)}function p(A,f,y,T,I){ue("readableAddChunk",f);var M=A._readableState;if(f===null)M.reading=!1,m(A,M);else{var q;if(I||(q=$(M,f)),q)Z(A,q);else if(!(M.objectMode||f&&0<f.length))T||(M.reading=!1,C(A,M));else if(typeof f=="string"||M.objectMode||Object.getPrototypeOf(f)===tt.prototype||(f=c(f)),T)M.endEmitted?Z(A,new j):b(A,M,f,!0);else if(M.ended)Z(A,new Ce);else{if(M.destroyed)return!1;M.reading=!1,M.decoder&&!y?(f=M.decoder.write(f),M.objectMode||f.length!==0?b(A,M,f,!1):C(A,M)):b(A,M,f,!1)}}return!M.ended&&(M.length<M.highWaterMark||M.length===0)}function b(A,f,y,T){f.flowing&&f.length===0&&!f.sync?(f.awaitDrain=0,A.emit("data",y)):(f.length+=f.objectMode?1:y.length,T?f.buffer.unshift(y):f.buffer.push(y),f.needReadable&&x(A)),C(A,f)}function $(A,f){var y;return u(f)||typeof f=="string"||f===void 0||A.objectMode||(y=new xe("chunk",["string","Buffer","Uint8Array"],f)),y}function E(A){return 1073741824<=A?A=1073741824:(A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++),A}function S(A,f){return 0>=A||f.length===0&&f.ended?0:f.objectMode?1:A===A?(A>f.highWaterMark&&(f.highWaterMark=E(A)),A<=f.length?A:f.ended?f.length:(f.needReadable=!0,0)):f.flowing&&f.length?f.buffer.head.data.length:f.length}function m(A,f){if(ue("onEofChunk"),!f.ended){if(f.decoder){var y=f.decoder.end();y&&y.length&&(f.buffer.push(y),f.length+=f.objectMode?1:y.length)}f.ended=!0,f.sync?x(A):(f.needReadable=!1,!f.emittedReadable&&(f.emittedReadable=!0,_(A)))}}function x(A){var f=A._readableState;ue("emitReadable",f.needReadable,f.emittedReadable),f.needReadable=!1,f.emittedReadable||(ue("emitReadable",f.flowing),f.emittedReadable=!0,l.nextTick(_,A))}function _(A){var f=A._readableState;ue("emitReadable_",f.destroyed,f.length,f.ended),!f.destroyed&&(f.length||f.ended)&&(A.emit("readable"),f.emittedReadable=!1),f.needReadable=!f.flowing&&!f.ended&&f.length<=f.highWaterMark,B(A)}function C(A,f){f.readingMore||(f.readingMore=!0,l.nextTick(w,A,f))}function w(A,f){for(;!f.reading&&!f.ended&&(f.length<f.highWaterMark||f.flowing&&f.length===0);){var y=f.length;if(ue("maybeReadMore read 0"),A.read(0),y===f.length)break}f.readingMore=!1}function k(A){return function(){var f=A._readableState;ue("pipeOnDrain",f.awaitDrain),f.awaitDrain&&f.awaitDrain--,f.awaitDrain===0&&gt(A,"data")&&(f.flowing=!0,B(A))}}function D(A){var f=A._readableState;f.readableListening=0<A.listenerCount("readable"),f.resumeScheduled&&!f.paused?f.flowing=!0:0<A.listenerCount("data")&&A.resume()}function P(A){ue("readable nexttick read 0"),A.read(0)}function O(A,f){f.resumeScheduled||(f.resumeScheduled=!0,l.nextTick(R,A,f))}function R(A,f){ue("resume",f.reading),f.reading||A.read(0),f.resumeScheduled=!1,A.emit("resume"),B(A),f.flowing&&!f.reading&&A.read(0)}function B(A){var f=A._readableState;for(ue("flow",f.flowing);f.flowing&&A.read()!==null;);}function F(A,f){if(f.length===0)return null;var y;return f.objectMode?y=f.buffer.shift():!A||A>=f.length?(y=f.decoder?f.buffer.join(""):f.buffer.length===1?f.buffer.first():f.buffer.concat(f.length),f.buffer.clear()):y=f.buffer.consume(A,f.decoder),y}function X(A){var f=A._readableState;ue("endReadable",f.endEmitted),f.endEmitted||(f.ended=!0,l.nextTick(re,f,A))}function re(A,f){if(ue("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&A.length===0&&(A.endEmitted=!0,f.readable=!1,f.emit("end"),A.autoDestroy)){var y=f._writableState;(!y||y.autoDestroy&&y.finished)&&f.destroy()}}function be(A,f){for(var y=0,T=A.length;y<T;y++)if(A[y]===f)return y;return-1}o.exports=g;var Re;g.ReadableState=d;var ue;s("events").EventEmitter;var gt=function(A,f){return A.listeners(f).length},at=s("./internal/streams/stream"),tt=s("buffer").Buffer,ge=a.Uint8Array||function(){},J=s("util");ue=J&&J.debuglog?J.debuglog("stream"):function(){};var Ne,ae,je,it=s("./internal/streams/buffer_list"),ft=s("./internal/streams/destroy"),Ge=s("./internal/streams/state"),Xe=Ge.getHighWaterMark,_t=s("../errors").codes,xe=_t.ERR_INVALID_ARG_TYPE,Ce=_t.ERR_STREAM_PUSH_AFTER_EOF,N=_t.ERR_METHOD_NOT_IMPLEMENTED,j=_t.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;s("inherits")(g,at);var Z=ft.errorOrDestroy,le=["error","close","destroy","pause","resume"];Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(A){this._readableState&&(this._readableState.destroyed=A)}}),g.prototype.destroy=ft.destroy,g.prototype._undestroy=ft.undestroy,g.prototype._destroy=function(A,f){f(A)},g.prototype.push=function(A,f){var y,T=this._readableState;return T.objectMode?y=!0:typeof A=="string"&&(f=f||T.defaultEncoding,f!==T.encoding&&(A=tt.from(A,f),f=""),y=!0),p(this,A,f,!1,y)},g.prototype.unshift=function(A){return p(this,A,null,!0,!1)},g.prototype.isPaused=function(){return this._readableState.flowing===!1},g.prototype.setEncoding=function(A){Ne||(Ne=s("string_decoder/").StringDecoder);var f=new Ne(A);this._readableState.decoder=f,this._readableState.encoding=this._readableState.decoder.encoding;for(var y=this._readableState.buffer.head,T="";y!==null;)T+=f.write(y.data),y=y.next;return this._readableState.buffer.clear(),T!==""&&this._readableState.buffer.push(T),this._readableState.length=T.length,this},g.prototype.read=function(A){ue("read",A),A=parseInt(A,10);var f=this._readableState,y=A;if(A!==0&&(f.emittedReadable=!1),A===0&&f.needReadable&&((f.highWaterMark===0?0<f.length:f.length>=f.highWaterMark)||f.ended))return ue("read: emitReadable",f.length,f.ended),f.length===0&&f.ended?X(this):x(this),null;if(A=S(A,f),A===0&&f.ended)return f.length===0&&X(this),null;var T=f.needReadable;ue("need readable",T),(f.length===0||f.length-A<f.highWaterMark)&&(T=!0,ue("length less than watermark",T)),f.ended||f.reading?(T=!1,ue("reading or ended",T)):T&&(ue("do read"),f.reading=!0,f.sync=!0,f.length===0&&(f.needReadable=!0),this._read(f.highWaterMark),f.sync=!1,!f.reading&&(A=S(y,f)));var I;return I=0<A?F(A,f):null,I===null?(f.needReadable=f.length<=f.highWaterMark,A=0):(f.length-=A,f.awaitDrain=0),f.length===0&&(!f.ended&&(f.needReadable=!0),y!==A&&f.ended&&X(this)),I!==null&&this.emit("data",I),I},g.prototype._read=function(){Z(this,new N("_read()"))},g.prototype.pipe=function(A,f){function y(Ye,kt){ue("onunpipe"),Ye===Y&&kt&&kt.hasUnpiped===!1&&(kt.hasUnpiped=!0,I())}function T(){ue("onend"),A.end()}function I(){ue("cleanup"),A.removeListener("close",de),A.removeListener("finish",Ae),A.removeListener("drain",lt),A.removeListener("error",q),A.removeListener("unpipe",y),Y.removeListener("end",T),Y.removeListener("end",L),Y.removeListener("data",M),Tt=!0,Q.awaitDrain&&(!A._writableState||A._writableState.needDrain)&&lt()}function M(Ye){ue("ondata");var kt=A.write(Ye);ue("dest.write",kt),kt===!1&&((Q.pipesCount===1&&Q.pipes===A||1<Q.pipesCount&&be(Q.pipes,A)!==-1)&&!Tt&&(ue("false write response, pause",Q.awaitDrain),Q.awaitDrain++),Y.pause())}function q(Ye){ue("onerror",Ye),L(),A.removeListener("error",q),gt(A,"error")===0&&Z(A,Ye)}function de(){A.removeListener("finish",Ae),L()}function Ae(){ue("onfinish"),A.removeListener("close",de),L()}function L(){ue("unpipe"),Y.unpipe(A)}var Y=this,Q=this._readableState;switch(Q.pipesCount){case 0:Q.pipes=A;break;case 1:Q.pipes=[Q.pipes,A];break;default:Q.pipes.push(A)}Q.pipesCount+=1,ue("pipe count=%d opts=%j",Q.pipesCount,f);var ye=(!f||f.end!==!1)&&A!==l.stdout&&A!==l.stderr,Je=ye?T:L;Q.endEmitted?l.nextTick(Je):Y.once("end",Je),A.on("unpipe",y);var lt=k(Y);A.on("drain",lt);var Tt=!1;return Y.on("data",M),h(A,"error",q),A.once("close",de),A.once("finish",Ae),A.emit("pipe",Y),Q.flowing||(ue("pipe resume"),Y.resume()),A},g.prototype.unpipe=function(A){var f=this._readableState,y={hasUnpiped:!1};if(f.pipesCount===0)return this;if(f.pipesCount===1)return A&&A!==f.pipes?this:(A||(A=f.pipes),f.pipes=null,f.pipesCount=0,f.flowing=!1,A&&A.emit("unpipe",this,y),this);if(!A){var T=f.pipes,I=f.pipesCount;f.pipes=null,f.pipesCount=0,f.flowing=!1;for(var M=0;M<I;M++)T[M].emit("unpipe",this,{hasUnpiped:!1});return this}var q=be(f.pipes,A);return q===-1?this:(f.pipes.splice(q,1),f.pipesCount-=1,f.pipesCount===1&&(f.pipes=f.pipes[0]),A.emit("unpipe",this,y),this)},g.prototype.on=function(A,f){var y=at.prototype.on.call(this,A,f),T=this._readableState;return A==="data"?(T.readableListening=0<this.listenerCount("readable"),T.flowing!==!1&&this.resume()):A=="readable"&&!T.endEmitted&&!T.readableListening&&(T.readableListening=T.needReadable=!0,T.flowing=!1,T.emittedReadable=!1,ue("on readable",T.length,T.reading),T.length?x(this):!T.reading&&l.nextTick(P,this)),y},g.prototype.addListener=g.prototype.on,g.prototype.removeListener=function(A,f){var y=at.prototype.removeListener.call(this,A,f);return A==="readable"&&l.nextTick(D,this),y},g.prototype.removeAllListeners=function(A){var f=at.prototype.removeAllListeners.apply(this,arguments);return(A==="readable"||A===void 0)&&l.nextTick(D,this),f},g.prototype.resume=function(){var A=this._readableState;return A.flowing||(ue("resume"),A.flowing=!A.readableListening,O(this,A)),A.paused=!1,this},g.prototype.pause=function(){return ue("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ue("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},g.prototype.wrap=function(A){var f=this,y=this._readableState,T=!1;for(var I in A.on("end",function(){if(ue("wrapped end"),y.decoder&&!y.ended){var q=y.decoder.end();q&&q.length&&f.push(q)}f.push(null)}),A.on("data",function(q){if(ue("wrapped data"),y.decoder&&(q=y.decoder.write(q)),!(y.objectMode&&q==null)&&(y.objectMode||q&&q.length)){var de=f.push(q);de||(T=!0,A.pause())}}),A)this[I]===void 0&&typeof A[I]=="function"&&(this[I]=function(q){return function(){return A[q].apply(A,arguments)}}(I));for(var M=0;M<le.length;M++)A.on(le[M],this.emit.bind(this,le[M]));return this._read=function(q){ue("wrapped _read",q),T&&(T=!1,A.resume())},this},typeof Symbol=="function"&&(g.prototype[Symbol.asyncIterator]=function(){return ae===void 0&&(ae=s("./internal/streams/async_iterator")),ae(this)}),Object.defineProperty(g.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(g.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(g.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}}),g._fromList=F,Object.defineProperty(g.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(g.from=function(A,f){return je===void 0&&(je=s("./internal/streams/from")),je(g,A,f)})}).call(this)}).call(this,s("_process"),typeof jn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:jn)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(s,o){function l(E,S){var m=this._transformState;m.transforming=!1;var x=m.writecb;if(x===null)return this.emit("error",new g);m.writechunk=null,m.writecb=null,S!=null&&this.push(S),x(E);var _=this._readableState;_.reading=!1,(_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}function a(E){return this instanceof a?($.call(this,E),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,E&&(typeof E.transform=="function"&&(this._transform=E.transform),typeof E.flush=="function"&&(this._flush=E.flush)),void this.on("prefinish",c)):new a(E)}function c(){var E=this;typeof this._flush!="function"||this._readableState.destroyed?u(this,null,null):this._flush(function(S,m){u(E,S,m)})}function u(E,S,m){if(S)return E.emit("error",S);if(m!=null&&E.push(m),E._writableState.length)throw new b;if(E._transformState.transforming)throw new p;return E.push(null)}o.exports=a;var h=s("../errors").codes,d=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,p=h.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=h.ERR_TRANSFORM_WITH_LENGTH_0,$=s("./_stream_duplex");s("inherits")(a,$),a.prototype.push=function(E,S){return this._transformState.needTransform=!1,$.prototype.push.call(this,E,S)},a.prototype._transform=function(E,S,m){m(new d("_transform()"))},a.prototype._write=function(E,S,m){var x=this._transformState;if(x.writecb=m,x.writechunk=E,x.writeencoding=S,!x.transforming){var _=this._readableState;(x.needTransform||_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}},a.prototype._read=function(){var E=this._transformState;E.writechunk===null||E.transforming?E.needTransform=!0:(E.transforming=!0,this._transform(E.writechunk,E.writeencoding,E.afterTransform))},a.prototype._destroy=function(E,S){$.prototype._destroy.call(this,E,function(m){S(m)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(s,o){(function(l,a){(function(){function c(N){var j=this;this.next=null,this.entry=null,this.finish=function(){X(j,N)}}function u(N){return ue.from(N)}function h(N){return ue.isBuffer(N)||N instanceof gt}function d(){}function g(N,j,Z){re=re||s("./_stream_duplex"),N=N||{},typeof Z!="boolean"&&(Z=j instanceof re),this.objectMode=!!N.objectMode,Z&&(this.objectMode=this.objectMode||!!N.writableObjectMode),this.highWaterMark=ge(this,N,"writableHighWaterMark",Z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var le=N.decodeStrings===!1;this.decodeStrings=!le,this.defaultEncoding=N.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(A){C(j,A)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=N.emitClose!==!1,this.autoDestroy=!!N.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}function p(N){re=re||s("./_stream_duplex");var j=this instanceof re;return j||Ce.call(p,this)?(this._writableState=new g(N,this,j),this.writable=!0,N&&(typeof N.write=="function"&&(this._write=N.write),typeof N.writev=="function"&&(this._writev=N.writev),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.final=="function"&&(this._final=N.final)),void Re.call(this)):new p(N)}function b(N,j){var Z=new Xe;xe(N,Z),l.nextTick(j,Z)}function $(N,j,Z,le){var A;return Z===null?A=new Ge:typeof Z!="string"&&!j.objectMode&&(A=new Ne("chunk",["string","Buffer"],Z)),!A||(xe(N,A),l.nextTick(le,A),!1)}function E(N,j,Z){return N.objectMode||N.decodeStrings===!1||typeof j!="string"||(j=ue.from(j,Z)),j}function S(N,j,Z,le,A,f){if(!Z){var y=E(j,le,A);le!==y&&(Z=!0,A="buffer",le=y)}var T=j.objectMode?1:le.length;j.length+=T;var I=j.length<j.highWaterMark;if(I||(j.needDrain=!0),j.writing||j.corked){var M=j.lastBufferedRequest;j.lastBufferedRequest={chunk:le,encoding:A,isBuf:Z,callback:f,next:null},M?M.next=j.lastBufferedRequest:j.bufferedRequest=j.lastBufferedRequest,j.bufferedRequestCount+=1}else m(N,j,!1,T,le,A,f);return I}function m(N,j,Z,le,A,f,y){j.writelen=le,j.writecb=y,j.writing=!0,j.sync=!0,j.destroyed?j.onwrite(new ft("write")):Z?N._writev(A,j.onwrite):N._write(A,f,j.onwrite),j.sync=!1}function x(N,j,Z,le,A){--j.pendingcb,Z?(l.nextTick(A,le),l.nextTick(B,N,j),N._writableState.errorEmitted=!0,xe(N,le)):(A(le),N._writableState.errorEmitted=!0,xe(N,le),B(N,j))}function _(N){N.writing=!1,N.writecb=null,N.length-=N.writelen,N.writelen=0}function C(N,j){var Z=N._writableState,le=Z.sync,A=Z.writecb;if(typeof A!="function")throw new je;if(_(Z),j)x(N,Z,le,j,A);else{var f=P(Z)||N.destroyed;f||Z.corked||Z.bufferProcessing||!Z.bufferedRequest||D(N,Z),le?l.nextTick(w,N,Z,f,A):w(N,Z,f,A)}}function w(N,j,Z,le){Z||k(N,j),j.pendingcb--,le(),B(N,j)}function k(N,j){j.length===0&&j.needDrain&&(j.needDrain=!1,N.emit("drain"))}function D(N,j){j.bufferProcessing=!0;var Z=j.bufferedRequest;if(N._writev&&Z&&Z.next){var le=j.bufferedRequestCount,A=Array(le),f=j.corkedRequestsFree;f.entry=Z;for(var y=0,T=!0;Z;)A[y]=Z,Z.isBuf||(T=!1),Z=Z.next,y+=1;A.allBuffers=T,m(N,j,!0,j.length,A,"",f.finish),j.pendingcb++,j.lastBufferedRequest=null,f.next?(j.corkedRequestsFree=f.next,f.next=null):j.corkedRequestsFree=new c(j),j.bufferedRequestCount=0}else{for(;Z;){var I=Z.chunk,M=Z.encoding,q=Z.callback,de=j.objectMode?1:I.length;if(m(N,j,!1,de,I,M,q),Z=Z.next,j.bufferedRequestCount--,j.writing)break}Z===null&&(j.lastBufferedRequest=null)}j.bufferedRequest=Z,j.bufferProcessing=!1}function P(N){return N.ending&&N.length===0&&N.bufferedRequest===null&&!N.finished&&!N.writing}function O(N,j){N._final(function(Z){j.pendingcb--,Z&&xe(N,Z),j.prefinished=!0,N.emit("prefinish"),B(N,j)})}function R(N,j){j.prefinished||j.finalCalled||(typeof N._final!="function"||j.destroyed?(j.prefinished=!0,N.emit("prefinish")):(j.pendingcb++,j.finalCalled=!0,l.nextTick(O,N,j)))}function B(N,j){var Z=P(j);if(Z&&(R(N,j),j.pendingcb===0&&(j.finished=!0,N.emit("finish"),j.autoDestroy))){var le=N._readableState;(!le||le.autoDestroy&&le.endEmitted)&&N.destroy()}return Z}function F(N,j,Z){j.ending=!0,B(N,j),Z&&(j.finished?l.nextTick(Z):N.once("finish",Z)),j.ended=!0,N.writable=!1}function X(N,j,Z){var le=N.entry;for(N.entry=null;le;){var A=le.callback;j.pendingcb--,A(Z),le=le.next}j.corkedRequestsFree.next=N}o.exports=p;var re;p.WritableState=g;var be={deprecate:s("util-deprecate")},Re=s("./internal/streams/stream"),ue=s("buffer").Buffer,gt=a.Uint8Array||function(){},at=s("./internal/streams/destroy"),tt=s("./internal/streams/state"),ge=tt.getHighWaterMark,J=s("../errors").codes,Ne=J.ERR_INVALID_ARG_TYPE,ae=J.ERR_METHOD_NOT_IMPLEMENTED,je=J.ERR_MULTIPLE_CALLBACK,it=J.ERR_STREAM_CANNOT_PIPE,ft=J.ERR_STREAM_DESTROYED,Ge=J.ERR_STREAM_NULL_VALUES,Xe=J.ERR_STREAM_WRITE_AFTER_END,_t=J.ERR_UNKNOWN_ENCODING,xe=at.errorOrDestroy;s("inherits")(p,Re),g.prototype.getBuffer=function(){for(var N=this.bufferedRequest,j=[];N;)j.push(N),N=N.next;return j},function(){try{Object.defineProperty(g.prototype,"buffer",{get:be.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Ce;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ce=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(N){return!!Ce.call(this,N)||this===p&&N&&N._writableState instanceof g}})):Ce=function(N){return N instanceof this},p.prototype.pipe=function(){xe(this,new it)},p.prototype.write=function(N,j,Z){var le=this._writableState,A=!1,f=!le.objectMode&&h(N);return f&&!ue.isBuffer(N)&&(N=u(N)),typeof j=="function"&&(Z=j,j=null),f?j="buffer":!j&&(j=le.defaultEncoding),typeof Z!="function"&&(Z=d),le.ending?b(this,Z):(f||$(this,le,N,Z))&&(le.pendingcb++,A=S(this,le,f,N,j,Z)),A},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){var N=this._writableState;N.corked&&(N.corked--,!N.writing&&!N.corked&&!N.bufferProcessing&&N.bufferedRequest&&D(this,N))},p.prototype.setDefaultEncoding=function(N){if(typeof N=="string"&&(N=N.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((N+"").toLowerCase())))throw new _t(N);return this._writableState.defaultEncoding=N,this},Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),p.prototype._write=function(N,j,Z){Z(new ae("_write()"))},p.prototype._writev=null,p.prototype.end=function(N,j,Z){var le=this._writableState;return typeof N=="function"?(Z=N,N=null,j=null):typeof j=="function"&&(Z=j,j=null),N!=null&&this.write(N,j),le.corked&&(le.corked=1,this.uncork()),le.ending||F(this,le,Z),this},Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(N){this._writableState&&(this._writableState.destroyed=N)}}),p.prototype.destroy=at.destroy,p.prototype._undestroy=at.undestroy,p.prototype._destroy=function(N,j){j(N)}}).call(this)}).call(this,s("_process"),typeof jn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:jn)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(s,o){(function(l){(function(){function a(k,D,P){return D in k?Object.defineProperty(k,D,{value:P,enumerable:!0,configurable:!0,writable:!0}):k[D]=P,k}function c(k,D){return{value:k,done:D}}function u(k){var D=k[b];if(D!==null){var P=k[_].read();P!==null&&(k[m]=null,k[b]=null,k[$]=null,D(c(P,!1)))}}function h(k){l.nextTick(u,k)}function d(k,D){return function(P,O){k.then(function(){return D[S]?void P(c(void 0,!0)):void D[x](P,O)},O)}}var g,p=s("./end-of-stream"),b=Symbol("lastResolve"),$=Symbol("lastReject"),E=Symbol("error"),S=Symbol("ended"),m=Symbol("lastPromise"),x=Symbol("handlePromise"),_=Symbol("stream"),C=Object.getPrototypeOf(function(){}),w=Object.setPrototypeOf((g={get stream(){return this[_]},next:function(){var k=this,D=this[E];if(D!==null)return Promise.reject(D);if(this[S])return Promise.resolve(c(void 0,!0));if(this[_].destroyed)return new Promise(function(B,F){l.nextTick(function(){k[E]?F(k[E]):B(c(void 0,!0))})});var P,O=this[m];if(O)P=new Promise(d(O,this));else{var R=this[_].read();if(R!==null)return Promise.resolve(c(R,!1));P=new Promise(this[x])}return this[m]=P,P}},a(g,Symbol.asyncIterator,function(){return this}),a(g,"return",function(){var k=this;return new Promise(function(D,P){k[_].destroy(null,function(O){return O?void P(O):void D(c(void 0,!0))})})}),g),C);o.exports=function(k){var D,P=Object.create(w,(D={},a(D,_,{value:k,writable:!0}),a(D,b,{value:null,writable:!0}),a(D,$,{value:null,writable:!0}),a(D,E,{value:null,writable:!0}),a(D,S,{value:k._readableState.endEmitted,writable:!0}),a(D,x,{value:function(O,R){var B=P[_].read();B?(P[m]=null,P[b]=null,P[$]=null,O(c(B,!1))):(P[b]=O,P[$]=R)},writable:!0}),D));return P[m]=null,p(k,function(O){if(O&&O.code!=="ERR_STREAM_PREMATURE_CLOSE"){var R=P[$];return R!==null&&(P[m]=null,P[b]=null,P[$]=null,R(O)),void(P[E]=O)}var B=P[b];B!==null&&(P[m]=null,P[b]=null,P[$]=null,B(c(void 0,!0))),P[S]=!0}),k.on("readable",h.bind(null,P)),P}}).call(this)}).call(this,s("_process"))},{"./end-of-stream":24,_process:12}],22:[function(s,o){function l(m,x){var _=Object.keys(m);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(m);x&&(C=C.filter(function(w){return Object.getOwnPropertyDescriptor(m,w).enumerable})),_.push.apply(_,C)}return _}function a(m){for(var x,_=1;_<arguments.length;_++)x=arguments[_]==null?{}:arguments[_],_%2?l(Object(x),!0).forEach(function(C){c(m,C,x[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(x)):l(Object(x)).forEach(function(C){Object.defineProperty(m,C,Object.getOwnPropertyDescriptor(x,C))});return m}function c(m,x,_){return x in m?Object.defineProperty(m,x,{value:_,enumerable:!0,configurable:!0,writable:!0}):m[x]=_,m}function u(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function h(m,x){for(var _,C=0;C<x.length;C++)_=x[C],_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(m,_.key,_)}function d(m,x,_){return x&&h(m.prototype,x),_&&h(m,_),m}function g(m,x,_){b.prototype.copy.call(m,x,_)}var p=s("buffer"),b=p.Buffer,$=s("util"),E=$.inspect,S=E&&E.custom||"inspect";o.exports=function(){function m(){u(this,m),this.head=null,this.tail=null,this.length=0}return d(m,[{key:"push",value:function(x){var _={data:x,next:null};0<this.length?this.tail.next=_:this.head=_,this.tail=_,++this.length}},{key:"unshift",value:function(x){var _={data:x,next:this.head};this.length===0&&(this.tail=_),this.head=_,++this.length}},{key:"shift",value:function(){if(this.length!==0){var x=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,x}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(x){if(this.length===0)return"";for(var _=this.head,C=""+_.data;_=_.next;)C+=x+_.data;return C}},{key:"concat",value:function(x){if(this.length===0)return b.alloc(0);for(var _=b.allocUnsafe(x>>>0),C=this.head,w=0;C;)g(C.data,_,w),w+=C.data.length,C=C.next;return _}},{key:"consume",value:function(x,_){var C;return x<this.head.data.length?(C=this.head.data.slice(0,x),this.head.data=this.head.data.slice(x)):x===this.head.data.length?C=this.shift():C=_?this._getString(x):this._getBuffer(x),C}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(x){var _=this.head,C=1,w=_.data;for(x-=w.length;_=_.next;){var k=_.data,D=x>k.length?k.length:x;if(w+=D===k.length?k:k.slice(0,x),x-=D,x===0){D===k.length?(++C,this.head=_.next?_.next:this.tail=null):(this.head=_,_.data=k.slice(D));break}++C}return this.length-=C,w}},{key:"_getBuffer",value:function(x){var _=b.allocUnsafe(x),C=this.head,w=1;for(C.data.copy(_),x-=C.data.length;C=C.next;){var k=C.data,D=x>k.length?k.length:x;if(k.copy(_,_.length-x,0,D),x-=D,x===0){D===k.length?(++w,this.head=C.next?C.next:this.tail=null):(this.head=C,C.data=k.slice(D));break}++w}return this.length-=w,_}},{key:S,value:function(x,_){return E(this,a({},_,{depth:0,customInspect:!1}))}}]),m}()},{buffer:3,util:2}],23:[function(s,o){(function(l){(function(){function a(h,d){u(h,d),c(h)}function c(h){h._writableState&&!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function u(h,d){h.emit("error",d)}o.exports={destroy:function(h,d){var g=this,p=this._readableState&&this._readableState.destroyed,b=this._writableState&&this._writableState.destroyed;return p||b?(d?d(h):h&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,l.nextTick(u,this,h)):l.nextTick(u,this,h)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(h||null,function($){!d&&$?g._writableState?g._writableState.errorEmitted?l.nextTick(c,g):(g._writableState.errorEmitted=!0,l.nextTick(a,g,$)):l.nextTick(a,g,$):d?(l.nextTick(c,g),d($)):l.nextTick(c,g)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(h,d){var g=h._readableState,p=h._writableState;g&&g.autoDestroy||p&&p.autoDestroy?h.destroy(d):h.emit("error",d)}}}).call(this)}).call(this,s("_process"))},{_process:12}],24:[function(s,o){function l(d){var g=!1;return function(){if(!g){g=!0;for(var p=arguments.length,b=Array(p),$=0;$<p;$++)b[$]=arguments[$];d.apply(this,b)}}}function a(){}function c(d){return d.setHeader&&typeof d.abort=="function"}function u(d,g,p){if(typeof g=="function")return u(d,null,g);g||(g={}),p=l(p||a);var b=g.readable||g.readable!==!1&&d.readable,$=g.writable||g.writable!==!1&&d.writable,E=function(){d.writable||m()},S=d._writableState&&d._writableState.finished,m=function(){$=!1,S=!0,b||p.call(d)},x=d._readableState&&d._readableState.endEmitted,_=function(){b=!1,x=!0,$||p.call(d)},C=function(D){p.call(d,D)},w=function(){var D;return b&&!x?(d._readableState&&d._readableState.ended||(D=new h),p.call(d,D)):$&&!S?(d._writableState&&d._writableState.ended||(D=new h),p.call(d,D)):void 0},k=function(){d.req.on("finish",m)};return c(d)?(d.on("complete",m),d.on("abort",w),d.req?k():d.on("request",k)):$&&!d._writableState&&(d.on("end",E),d.on("close",E)),d.on("end",_),d.on("finish",m),g.error!==!1&&d.on("error",C),d.on("close",w),function(){d.removeListener("complete",m),d.removeListener("abort",w),d.removeListener("request",k),d.req&&d.req.removeListener("finish",m),d.removeListener("end",E),d.removeListener("close",E),d.removeListener("finish",m),d.removeListener("end",_),d.removeListener("error",C),d.removeListener("close",w)}}var h=s("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;o.exports=u},{"../../../errors":15}],25:[function(s,o){o.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(s,o){function l(S){var m=!1;return function(){m||(m=!0,S.apply(void 0,arguments))}}function a(S){if(S)throw S}function c(S){return S.setHeader&&typeof S.abort=="function"}function u(S,m,x,_){_=l(_);var C=!1;S.on("close",function(){C=!0}),p===void 0&&(p=s("./end-of-stream")),p(S,{readable:m,writable:x},function(k){return k?_(k):(C=!0,void _())});var w=!1;return function(k){if(!C)return w?void 0:(w=!0,c(S)?S.abort():typeof S.destroy=="function"?S.destroy():void _(k||new E("pipe")))}}function h(S){S()}function d(S,m){return S.pipe(m)}function g(S){return S.length&&typeof S[S.length-1]=="function"?S.pop():a}var p,b=s("../../../errors").codes,$=b.ERR_MISSING_ARGS,E=b.ERR_STREAM_DESTROYED;o.exports=function(){for(var S=arguments.length,m=Array(S),x=0;x<S;x++)m[x]=arguments[x];var _=g(m);if(Array.isArray(m[0])&&(m=m[0]),2>m.length)throw new $("streams");var C,w=m.map(function(k,D){var P=D<m.length-1;return u(k,P,0<D,function(O){C||(C=O),O&&w.forEach(h),P||(w.forEach(h),_(C))})});return m.reduce(d)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(s,o){function l(c,u,h){return c.highWaterMark==null?u?c[h]:null:c.highWaterMark}var a=s("../../../errors").codes.ERR_INVALID_OPT_VALUE;o.exports={getHighWaterMark:function(c,u,h,d){var g=l(u,d,h);if(g!=null){if(!(isFinite(g)&&n(g)===g)||0>g){var p=d?h:"highWaterMark";throw new a(p,g)}return n(g)}return c.objectMode?16:16384}}},{"../../../errors":15}],28:[function(s,o){o.exports=s("events").EventEmitter},{events:7}],29:[function(s,o,l){l=o.exports=s("./lib/_stream_readable.js"),l.Stream=l,l.Readable=l,l.Writable=s("./lib/_stream_writable.js"),l.Duplex=s("./lib/_stream_duplex.js"),l.Transform=s("./lib/_stream_transform.js"),l.PassThrough=s("./lib/_stream_passthrough.js"),l.finished=s("./lib/internal/streams/end-of-stream.js"),l.pipeline=s("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(s,o,l){function a(d,g){for(var p in d)g[p]=d[p]}function c(d,g,p){return h(d,g,p)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var u=s("buffer"),h=u.Buffer;h.from&&h.alloc&&h.allocUnsafe&&h.allocUnsafeSlow?o.exports=u:(a(u,l),l.Buffer=c),c.prototype=Object.create(h.prototype),a(h,c),c.from=function(d,g,p){if(typeof d=="number")throw new TypeError("Argument must not be a number");return h(d,g,p)},c.alloc=function(d,g,p){if(typeof d!="number")throw new TypeError("Argument must be a number");var b=h(d);return g===void 0?b.fill(0):typeof p=="string"?b.fill(g,p):b.fill(g),b},c.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return h(d)},c.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return u.SlowBuffer(d)}},{buffer:3}],31:[function(s,o,l){function a(w){if(!w)return"utf8";for(var k;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(k)return;w=(""+w).toLowerCase(),k=!0}}function c(w){var k=a(w);if(typeof k!="string"&&(_.isEncoding===C||!C(w)))throw new Error("Unknown encoding: "+w);return k||w}function u(w){this.encoding=c(w);var k;switch(this.encoding){case"utf16le":this.text=b,this.end=$,k=4;break;case"utf8":this.fillLast=p,k=4;break;case"base64":this.text=E,this.end=S,k=3;break;default:return this.write=m,void(this.end=x)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(k)}function h(w){return 127>=w?0:w>>5==6?2:w>>4==14?3:w>>3==30?4:w>>6==2?-1:-2}function d(w,k,D){var P=k.length-1;if(P<D)return 0;var O=h(k[P]);return 0<=O?(0<O&&(w.lastNeed=O-1),O):--P<D||O===-2?0:(O=h(k[P]),0<=O?(0<O&&(w.lastNeed=O-2),O):--P<D||O===-2?0:(O=h(k[P]),0<=O?(0<O&&(O===2?O=0:w.lastNeed=O-3),O):0))}function g(w,k){if((192&k[0])!=128)return w.lastNeed=0,"";if(1<w.lastNeed&&1<k.length){if((192&k[1])!=128)return w.lastNeed=1,"";if(2<w.lastNeed&&2<k.length&&(192&k[2])!=128)return w.lastNeed=2,""}}function p(w){var k=this.lastTotal-this.lastNeed,D=g(this,w);return D===void 0?this.lastNeed<=w.length?(w.copy(this.lastChar,k,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(w.copy(this.lastChar,k,0,w.length),void(this.lastNeed-=w.length)):D}function b(w,k){if((w.length-k)%2==0){var D=w.toString("utf16le",k);if(D){var P=D.charCodeAt(D.length-1);if(55296<=P&&56319>=P)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],D.slice(0,-1)}return D}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",k,w.length-1)}function $(w){var k=w&&w.length?this.write(w):"";if(this.lastNeed){var D=this.lastTotal-this.lastNeed;return k+this.lastChar.toString("utf16le",0,D)}return k}function E(w,k){var D=(w.length-k)%3;return D==0?w.toString("base64",k):(this.lastNeed=3-D,this.lastTotal=3,D==1?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",k,w.length-D))}function S(w){var k=w&&w.length?this.write(w):"";return this.lastNeed?k+this.lastChar.toString("base64",0,3-this.lastNeed):k}function m(w){return w.toString(this.encoding)}function x(w){return w&&w.length?this.write(w):""}var _=s("safe-buffer").Buffer,C=_.isEncoding||function(w){switch(w=""+w,w&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};l.StringDecoder=u,u.prototype.write=function(w){if(w.length===0)return"";var k,D;if(this.lastNeed){if(k=this.fillLast(w),k===void 0)return"";D=this.lastNeed,this.lastNeed=0}else D=0;return D<w.length?k?k+this.text(w,D):this.text(w,D):k||""},u.prototype.end=function(w){var k=w&&w.length?this.write(w):"";return this.lastNeed?k+"":k},u.prototype.text=function(w,k){var D=d(this,w,k);if(!this.lastNeed)return w.toString("utf8",k);this.lastTotal=D;var P=w.length-(D-this.lastNeed);return w.copy(this.lastChar,0,P),w.toString("utf8",k,P)},u.prototype.fillLast=function(w){return this.lastNeed<=w.length?(w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),void(this.lastNeed-=w.length))}},{"safe-buffer":30}],32:[function(s,o){(function(l){(function(){function a(c){try{if(!l.localStorage)return!1}catch{return!1}var u=l.localStorage[c];return u!=null&&(u+"").toLowerCase()==="true"}o.exports=function(c,u){function h(){if(!d){if(a("throwDeprecation"))throw new Error(u);a("traceDeprecation")?console.trace(u):console.warn(u),d=!0}return c.apply(this,arguments)}if(a("noDeprecation"))return c;var d=!1;return h}}).call(this)}).call(this,typeof jn>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:jn)},{}],"/":[function(s,o){function l(S){return S.replace(/a=ice-options:trickle\s\n/g,"")}function a(S){console.warn(S)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const c=s("debug")("simple-peer"),u=s("get-browser-rtc"),h=s("randombytes"),d=s("readable-stream"),g=s("queue-microtask"),p=s("err-code"),{Buffer:b}=s("buffer"),$=65536;class E extends d.Duplex{constructor(m){if(m=Object.assign({allowHalfOpen:!1},m),super(m),this._id=h(4).toString("hex").slice(0,7),this._debug("new peer %o",m),this.channelName=m.initiator?m.channelName||h(20).toString("hex"):null,this.initiator=m.initiator||!1,this.channelConfig=m.channelConfig||E.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},E.config,m.config),this.offerOptions=m.offerOptions||{},this.answerOptions=m.answerOptions||{},this.sdpTransform=m.sdpTransform||(x=>x),this.streams=m.streams||(m.stream?[m.stream]:[]),this.trickle=m.trickle===void 0||m.trickle,this.allowHalfTrickle=m.allowHalfTrickle!==void 0&&m.allowHalfTrickle,this.iceCompleteTimeout=m.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=m.wrtc&&typeof m.wrtc=="object"?m.wrtc:u(),!this._wrtc)throw p(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(x){return void this.destroy(p(x,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=x=>{this._onIceCandidate(x)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(x=>{this.destroy(p(x,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=x=>{this._setupData(x)},this.streams&&this.streams.forEach(x=>{this.addStream(x)}),this._pc.ontrack=x=>{this._onTrack(x)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(m){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof m=="string")try{m=JSON.parse(m)}catch{m={}}this._debug("signal()"),m.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),m.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(m.transceiverRequest.kind,m.transceiverRequest.init)),m.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(m.candidate):this._pendingCandidates.push(m.candidate)),m.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(m)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(x=>{this._addIceCandidate(x)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(x=>{this.destroy(p(x,"ERR_SET_REMOTE_DESCRIPTION"))}),m.sdp||m.candidate||m.renegotiate||m.transceiverRequest||this.destroy(p(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(m){const x=new this._wrtc.RTCIceCandidate(m);this._pc.addIceCandidate(x).catch(_=>{!x.address||x.address.endsWith(".local")?a("Ignoring unsupported ICE candidate."):this.destroy(p(_,"ERR_ADD_ICE_CANDIDATE"))})}send(m){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(m)}}addTransceiver(m,x){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(m,x),this._needsNegotiation()}catch(_){this.destroy(p(_,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:m,init:x}})}}addStream(m){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),m.getTracks().forEach(x=>{this.addTrack(x,m)})}}addTrack(m,x){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const _=this._senderMap.get(m)||new Map;let C=_.get(x);if(!C)C=this._pc.addTrack(m,x),_.set(x,C),this._senderMap.set(m,_),this._needsNegotiation();else throw C.removed?p(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):p(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(m,x,_){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const C=this._senderMap.get(m),w=C?C.get(_):null;if(!w)throw p(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");x&&this._senderMap.set(x,C),w.replaceTrack==null?this.destroy(p(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):w.replaceTrack(x)}removeTrack(m,x){if(this.destroying)return;if(this.destroyed)throw p(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const _=this._senderMap.get(m),C=_?_.get(x):null;if(!C)throw p(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{C.removed=!0,this._pc.removeTrack(C)}catch(w){w.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(C):this.destroy(p(w,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(m){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),m.getTracks().forEach(x=>{this.removeTrack(x,m)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,g(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw p(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(m){this._destroy(m,()=>{})}_destroy(m,x){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",m&&(m.message||m)),g(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",m&&(m.message||m)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,m&&this.emit("error",m),this.emit("close"),x()}))}_setupData(m){if(!m.channel)return this.destroy(p(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=m.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=$),this.channelName=this._channel.label,this._channel.onmessage=_=>{this._onChannelMessage(_)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=_=>{const C=_.error instanceof Error?_.error:new Error(`Datachannel error: ${_.message} ${_.filename}:${_.lineno}:${_.colno}`);this.destroy(p(C,"ERR_DATA_CHANNEL"))};let x=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(x&&this._onChannelClose(),x=!0):x=!1},5e3)}_read(){}_write(m,x,_){if(this.destroyed)return _(p(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(m)}catch(C){return this.destroy(p(C,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>$?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=_):_(null)}else this._debug("write before connect"),this._chunk=m,this._cb=_}_onFinish(){if(!this.destroyed){const m=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?m():this.once("connect",m)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(m=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(m.sdp=l(m.sdp)),m.sdp=this.sdpTransform(m.sdp);const x=()=>{if(!this.destroyed){const _=this._pc.localDescription||m;this._debug("signal"),this.emit("signal",{type:_.type,sdp:_.sdp})}};this._pc.setLocalDescription(m).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?x():this.once("_iceComplete",x))}).catch(_=>{this.destroy(p(_,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(m=>{this.destroy(p(m,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(m=>{m.mid||!m.sender.track||m.requested||(m.requested=!0,this.addTransceiver(m.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(m=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(m.sdp=l(m.sdp)),m.sdp=this.sdpTransform(m.sdp);const x=()=>{if(!this.destroyed){const _=this._pc.localDescription||m;this._debug("signal"),this.emit("signal",{type:_.type,sdp:_.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(m).then(()=>{this.destroyed||(this.trickle||this._iceComplete?x():this.once("_iceComplete",x))}).catch(_=>{this.destroy(p(_,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(m=>{this.destroy(p(m,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(p(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const m=this._pc.iceConnectionState,x=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",m,x),this.emit("iceStateChange",m,x),(m==="connected"||m==="completed")&&(this._pcReady=!0,this._maybeReady()),m==="failed"&&this.destroy(p(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),m==="closed"&&this.destroy(p(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(m){const x=_=>(Object.prototype.toString.call(_.values)==="[object Array]"&&_.values.forEach(C=>{Object.assign(_,C)}),_);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(_=>{const C=[];_.forEach(w=>{C.push(x(w))}),m(null,C)},_=>m(_)):0<this._pc.getStats.length?this._pc.getStats(_=>{if(this.destroyed)return;const C=[];_.result().forEach(w=>{const k={};w.names().forEach(D=>{k[D]=w.stat(D)}),k.id=w.id,k.type=w.type,k.timestamp=w.timestamp,C.push(x(k))}),m(null,C)},_=>m(_)):m(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const m=()=>{this.destroyed||this.getStats((x,_)=>{if(this.destroyed)return;x&&(_=[]);const C={},w={},k={};let D=!1;_.forEach(O=>{(O.type==="remotecandidate"||O.type==="remote-candidate")&&(C[O.id]=O),(O.type==="localcandidate"||O.type==="local-candidate")&&(w[O.id]=O),(O.type==="candidatepair"||O.type==="candidate-pair")&&(k[O.id]=O)});const P=O=>{D=!0;let R=w[O.localCandidateId];R&&(R.ip||R.address)?(this.localAddress=R.ip||R.address,this.localPort=+R.port):R&&R.ipAddress?(this.localAddress=R.ipAddress,this.localPort=+R.portNumber):typeof O.googLocalAddress=="string"&&(R=O.googLocalAddress.split(":"),this.localAddress=R[0],this.localPort=+R[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let B=C[O.remoteCandidateId];B&&(B.ip||B.address)?(this.remoteAddress=B.ip||B.address,this.remotePort=+B.port):B&&B.ipAddress?(this.remoteAddress=B.ipAddress,this.remotePort=+B.portNumber):typeof O.googRemoteAddress=="string"&&(B=O.googRemoteAddress.split(":"),this.remoteAddress=B[0],this.remotePort=+B[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(_.forEach(O=>{O.type==="transport"&&O.selectedCandidatePairId&&P(k[O.selectedCandidatePairId]),(O.type==="googCandidatePair"&&O.googActiveConnection==="true"||(O.type==="candidatepair"||O.type==="candidate-pair")&&O.selected)&&P(O)}),!D&&(!Object.keys(k).length||Object.keys(w).length))return void setTimeout(m,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(R){return this.destroy(p(R,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const O=this._cb;this._cb=null,O(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};m()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>$)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(m=>{this._pc.removeTrack(m),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(m){this.destroyed||(m.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:m.candidate.candidate,sdpMLineIndex:m.candidate.sdpMLineIndex,sdpMid:m.candidate.sdpMid}}):!m.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),m.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(m){if(this.destroyed)return;let x=m.data;x instanceof ArrayBuffer&&(x=b.from(x)),this.push(x)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const m=this._cb;this._cb=null,m(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(m){this.destroyed||m.streams.forEach(x=>{this._debug("on track"),this.emit("track",m.track,x),this._remoteTracks.push({track:m.track,stream:x}),this._remoteStreams.some(_=>_.id===x.id)||(this._remoteStreams.push(x),g(()=>{this._debug("on stream"),this.emit("stream",x)}))})}_debug(){const m=[].slice.call(arguments);m[0]="["+this._id+"] "+m[0],c.apply(null,m)}}E.WEBRTC_SUPPORT=!!u(),E.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},E.channelConfig={},o.exports=E},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(ww);var pP=ww.exports;const gP=vw(pP),Df=0,If=1,_w=2,xw=(t,e)=>{ve(t,Df);const n=pk(e);xt(t,n)},Sw=(t,e,n)=>{ve(t,If),xt(t,qv(e,n))},mP=(t,e,n)=>Sw(e,n,Mt(t)),Ew=(t,e,n)=>{try{Kv(e,Mt(t),n)}catch(i){console.error("Caught error while handling a Yjs update",i)}},bP=(t,e)=>{ve(t,_w),xt(t,e)},yP=Ew,vP=(t,e,n,i)=>{const r=ke(t);switch(r){case Df:mP(t,e,n);break;case If:Ew(t,n,i);break;case _w:yP(t,n,i);break;default:throw new Error("Unknown message type")}return r},yu=3e4;class wP extends pc{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=Ai();this.getLocalState()!==null&&yu/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const i=[];this.meta.forEach((r,s)=>{s!==this.clientID&&yu<=n-r.lastUpdated&&this.states.has(s)&&i.push(s)}),i.length>0&&yh(this,i,"timeout")},ii(yu/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const n=this.clientID,i=this.meta.get(n),r=i===void 0?0:i.clock+1,s=this.states.get(n);e===null?this.states.delete(n):this.states.set(n,e),this.meta.set(n,{clock:r,lastUpdated:Ai()});const o=[],l=[],a=[],c=[];e===null?c.push(n):s==null?e!=null&&o.push(n):(l.push(n),no(s,e)||a.push(n)),(o.length>0||a.length>0||c.length>0)&&this.emit("change",[{added:o,updated:a,removed:c},"local"]),this.emit("update",[{added:o,updated:l,removed:c},"local"])}setLocalStateField(e,n){const i=this.getLocalState();i!==null&&this.setLocalState({...i,[e]:n})}getStates(){return this.states}}const yh=(t,e,n)=>{const i=[];for(let r=0;r<e.length;r++){const s=e[r];if(t.states.has(s)){if(t.states.delete(s),s===t.clientID){const o=t.meta.get(s);t.meta.set(s,{clock:o.clock+1,lastUpdated:Ai()})}i.push(s)}}i.length>0&&(t.emit("change",[{added:[],updated:[],removed:i},n]),t.emit("update",[{added:[],updated:[],removed:i},n]))},bl=(t,e,n=t.states)=>{const i=e.length,r=Bt();ve(r,i);for(let s=0;s<i;s++){const o=e[s],l=n.get(o)||null,a=t.meta.get(o).clock;ve(r,o),ve(r,a),ei(r,JSON.stringify(l))}return mt(r)},_P=(t,e,n)=>{const i=di(e),r=Ai(),s=[],o=[],l=[],a=[],c=ke(i);for(let u=0;u<c;u++){const h=ke(i);let d=ke(i);const g=JSON.parse($i(i)),p=t.meta.get(h),b=t.states.get(h),$=p===void 0?0:p.clock;($<d||$===d&&g===null&&t.states.has(h))&&(g===null?h===t.clientID&&t.getLocalState()!=null?d++:t.states.delete(h):t.states.set(h,g),t.meta.set(h,{clock:d,lastUpdated:r}),p===void 0&&g!==null?s.push(h):p!==void 0&&g===null?a.push(h):g!==null&&(no(g,b)||l.push(h),o.push(h)))}(s.length>0||l.length>0||a.length>0)&&t.emit("change",[{added:s,updated:l,removed:a},n]),(s.length>0||o.length>0||a.length>0)&&t.emit("update",[{added:s,updated:o,removed:a},n])},xP=(t,e)=>{const n=dh(t).buffer,i=dh(e).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(r=>crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},r,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},$w=(t,e)=>{if(!e)return vf(t);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},e,t).then(i=>{const r=Bt();return ei(r,"AES-GCM"),xt(r,n),xt(r,new Uint8Array(i)),mt(r)})},SP=(t,e)=>{const n=Bt();return ds(n,t),$w(mt(n),e)},Cw=(t,e)=>{if(!e)return vf(t);const n=di(t);$i(n)!=="AES-GCM"&&q3(ri("Unknown encryption algorithm"));const r=Mt(n),s=Mt(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:r},e,s).then(o=>new Uint8Array(o))},EP=(t,e)=>Cw(t,e).then(n=>hs(di(new Uint8Array(n)))),Kn=K3("y-webrtc"),es=0,Tw=3,Co=1,Rf=4,yl=new Map,gr=new Map,kw=t=>{let e=!0;t.webrtcConns.forEach(n=>{n.synced||(e=!1)}),(!e&&t.synced||e&&!t.synced)&&(t.synced=e,t.provider.emit("synced",[{synced:e}]),Kn("synced ",On,t.name,Sr," with all peers"))},Pw=(t,e,n)=>{const i=di(e),r=Bt(),s=ke(i);if(t===void 0)return null;const o=t.awareness,l=t.doc;let a=!1;switch(s){case es:{ve(r,es);const c=vP(i,r,l,t);c===If&&!t.synced&&n(),c===Df&&(a=!0);break}case Tw:ve(r,Co),xt(r,bl(o,Array.from(o.getStates().keys()))),a=!0;break;case Co:_P(o,Mt(i),t);break;case Rf:{const c=xr(i)===1,u=$i(i);if(u!==t.peerId&&(t.bcConns.has(u)&&!c||!t.bcConns.has(u)&&c)){const h=[],d=[];c?(t.bcConns.add(u),d.push(u)):(t.bcConns.delete(u),h.push(u)),t.provider.emit("peers",[{added:d,removed:h,webrtcPeers:Array.from(t.webrtcConns.keys()),bcPeers:Array.from(t.bcConns)}]),Aw(t)}break}default:return console.error("Unable to compute message"),r}return a?r:null},$P=(t,e)=>{const n=t.room;return Kn("received message from ",On,t.remotePeerId,bf," (",n.name,")",Sr,yc),Pw(n,e,()=>{t.synced=!0,Kn("synced ",On,n.name,Sr," with ",On,t.remotePeerId),kw(n)})},vu=(t,e)=>{Kn("send message to ",On,t.remotePeerId,Sr,bf," (",t.room.name,")",yc);try{t.peer.send(mt(e))}catch{}},CP=(t,e)=>{Kn("broadcast message in ",On,t.name,Sr),t.webrtcConns.forEach(n=>{try{n.peer.send(e)}catch{}})};class tb{constructor(e,n,i,r){Kn("establishing connection to ",On,i),this.room=r,this.remotePeerId=i,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new gP({initiator:n,...r.provider.peerOpts}),this.peer.on("signal",s=>{Lf(e,r,{to:i,from:r.peerId,type:"signal",signal:s})}),this.peer.on("connect",()=>{Kn("connected to ",On,i),this.connected=!0;const o=r.provider.doc,l=r.awareness,a=Bt();ve(a,es),xw(a,o),vu(this,a);const c=l.getStates();if(c.size>0){const u=Bt();ve(u,Co),xt(u,bl(l,Array.from(c.keys()))),vu(this,u)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,r.webrtcConns.has(this.remotePeerId)&&(r.webrtcConns.delete(this.remotePeerId),r.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(r.webrtcConns.keys()),bcPeers:Array.from(r.bcConns)}])),kw(r),this.peer.destroy(),Kn("closed connection to ",On,i),vh(r)}),this.peer.on("error",s=>{Kn("Error in connection to ",On,i,": ",s),vh(r)}),this.peer.on("data",s=>{const o=$P(this,s);o!==null&&vu(this,o)})}destroy(){this.peer.destroy()}}const Hi=(t,e)=>$w(e,t.key).then(n=>t.mux(()=>Q3(t.name,n))),nb=(t,e)=>{t.bcconnected&&Hi(t,e),CP(t,e)},vh=t=>{yl.forEach(e=>{e.connected&&(e.send({type:"subscribe",topics:[t.name]}),t.webrtcConns.size<t.provider.maxConns&&Lf(e,t,{type:"announce",from:t.peerId}))})},Aw=t=>{if(t.provider.filterBcConns){const e=Bt();ve(e,Rf),_o(e,1),ei(e,t.peerId),Hi(t,mt(e))}};class TP{constructor(e,n,i,r){this.peerId=yv(),this.doc=e,this.awareness=n.awareness,this.provider=n,this.synced=!1,this.name=i,this.key=r,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=X3(),this.bcconnected=!1,this._bcSubscriber=s=>Cw(new Uint8Array(s),r).then(o=>this.mux(()=>{const l=Pw(this,o,()=>{});l&&Hi(this,mt(l))})),this._docUpdateHandler=(s,o)=>{const l=Bt();ve(l,es),bP(l,s),nb(this,mt(l))},this._awarenessUpdateHandler=({added:s,updated:o,removed:l},a)=>{const c=s.concat(o).concat(l),u=Bt();ve(u,Co),xt(u,bl(this.awareness,c)),nb(this,mt(u))},this._beforeUnloadHandler=()=>{yh(this.awareness,[e.clientID],"window unload"),gr.forEach(s=>{s.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),vh(this);const e=this.name;G3(e,this._bcSubscriber),this.bcconnected=!0,Aw(this);const n=Bt();ve(n,es),xw(n,this.doc),Hi(this,mt(n));const i=Bt();ve(i,es),Sw(i,this.doc),Hi(this,mt(i));const r=Bt();ve(r,Tw),Hi(this,mt(r));const s=Bt();ve(s,Co),xt(s,bl(this.awareness,[this.doc.clientID])),Hi(this,mt(s))}disconnect(){yl.forEach(n=>{n.connected&&n.send({type:"unsubscribe",topics:[this.name]})}),yh(this.awareness,[this.doc.clientID],"disconnect");const e=Bt();ve(e,Rf),_o(e,0),ei(e,this.peerId),Hi(this,mt(e)),Y3(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(n=>n.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}}const kP=(t,e,n,i)=>{if(gr.has(n))throw ri(`A Yjs Doc connected to room "${n}" already exists!`);const r=new TP(t,e,n,i);return gr.set(n,r),r},Lf=(t,e,n)=>{e.key?SP(n,e.key).then(i=>{t.send({type:"publish",topic:e.name,data:Tv(i)})}):t.send({type:"publish",topic:e.name,data:n})};class PP extends MT{constructor(e){super(e),this.providers=new Set,this.on("connect",()=>{Kn(`connected (${e})`);const n=Array.from(gr.keys());this.send({type:"subscribe",topics:n}),gr.forEach(i=>Lf(this,i,{type:"announce",from:i.peerId}))}),this.on("message",n=>{switch(n.type){case"publish":{const i=n.topic,r=gr.get(i);if(r==null||typeof i!="string")return;const s=o=>{const l=r.webrtcConns,a=r.peerId;if(o==null||o.from===a||o.to!==void 0&&o.to!==a||r.bcConns.has(o.from))return;const c=l.has(o.from)?()=>{}:()=>r.provider.emit("peers",[{removed:[],added:[o.from],webrtcPeers:Array.from(r.webrtcConns.keys()),bcPeers:Array.from(r.bcConns)}]);switch(o.type){case"announce":l.size<r.provider.maxConns&&(_n(l,o.from,()=>new tb(this,!0,o.from,r)),c());break;case"signal":o.to===a&&(_n(l,o.from,()=>new tb(this,!1,o.from,r)).peer.signal(o.signal),c());break}};r.key?typeof n.data=="string"&&EP(kv(n.data),r.key).then(s):s(n.data)}}}),this.on("disconnect",()=>Kn(`disconnect (${e})`))}}class AP extends pc{constructor(e,n,{signaling:i=["wss://y-webrtc-eu.fly.dev"],password:r=null,awareness:s=new wP(n),maxConns:o=20+ii(BT()*15),filterBcConns:l=!0,peerOpts:a={}}={}){super(),this.roomName=e,this.doc=n,this.filterBcConns=l,this.awareness=s,this.shouldConnect=!1,this.signalingUrls=i,this.signalingConns=[],this.maxConns=o,this.peerOpts=a,this.key=r?xP(r,e):vf(null),this.room=null,this.key.then(c=>{this.room=kP(n,this,e,c),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(e=>{const n=_n(yl,e,()=>new PP(e));this.signalingConns.push(n),n.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(e=>{e.providers.delete(this),e.providers.size===0&&(e.destroy(),yl.delete(e.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),gr.delete(this.roomName)}),super.destroy()}}function OP(t,e,n){const i={added:[],moved:[],deleted:[],dirty:[]};if(t.length===0)i.added=e.map((r,s)=>({index:s,value:r}));else if(e.length===0)i.deleted=t.map((r,s)=>s);else{let r,s,o,l,a,c,u=t.length,h=e.length;for(r=0,s=Math.min(u,h);r<s&&t[r]===e[r];r++);for(s=u-1,o=h-1;s>=r&&o>=r&&t[s]===e[o];s--,o--);let d=new Map,g=new Array(o+1);for(c=o;c>=r;c--)l=e[c],a=d.get(l),g[c]=a===void 0?-1:a,d.set(l,c);for(a=r;a<=s;a++)l=t[a],c=d.get(l),c!==void 0&&c!==-1?(i.moved[c]={oldIndex:a,newIndex:c,value:l},c=g[c],d.set(l,c)):n?.has(a)||i.deleted.push(a);for(c=r;c<=o;c++)c in i.moved||n?.has(c)||i.added.push({index:c,value:e[c]})}return{...i,moved:i.moved.filter(({oldIndex:r,newIndex:s})=>r!==s)}}const cr=(t,...e)=>{const n=t.map((r,s)=>"%c"+new Array(s).fill(" ").join("")+" %c"+r).join(`
`),i=t.map((r,s)=>["","background: lightgrey; color: black;"]).flat();console.log(n,...i,...e)},DP=(t,...e)=>{const n=t.map((r,s)=>"%c"+new Array(s).fill(" ").join("")+" %c"+r).join(`
`),i=t.map((r,s)=>["","background: lightgrey; color: black;"]).flat();console.error(n,...i,...e)},tn=(...t)=>console.error("UNEXPECTED CODE REACHED!!!",...t),Jn=[];let wu=null;const vl=t=>{Jn.length!==0&&(console.log("executeYjsOperations",Jn.length),t&&(wu&&clearTimeout(wu),wu=setTimeout(()=>{t.transact(()=>{console.log("ydoc.transact",Jn.length),Jn.forEach(e=>{switch(e.type){case"set":e.ymap.set(e.key,e.value);break;case"delete":e.yparent instanceof jt&&e.key?e.yparent.delete(e.key):e.yparent instanceof Nt&&e.index&&e.yparent.delete(e.index);break;case"insert":e.yarray.insert(e.index,e.content);break;default:throw tn()}})}),Jn.length=0},0)))},IP=(t,e,n,i)=>{if(n[At]){DP(["setYMap"],"trying to set a solid-proxy inside a yjs-object");return}Jn.push({type:"set",ymap:t,key:e,value:n}),vl(i)},RP=(t,e,n,i)=>{t.length>e&&(Jn.push({type:"delete",yparent:t,index:e}),Jn.push({type:"insert",yarray:t,index:e,content:[n]}),vl(i))},LP=(t,e,n)=>{t instanceof Nt&&typeof e=="number"?(Jn.push({type:"delete",yparent:t,index:e}),vl(n)):t instanceof jt&&typeof e=="string"?(Jn.push({type:"delete",yparent:t,key:e}),vl(n)):tn(t,e)},Ia=(t,e,n,i)=>{t instanceof Nt&&typeof e=="number"?RP(t,e,n,i):(t instanceof jt||t instanceof Li)&&typeof e=="string"?IP(t,e,n,i):tn(t,e,n)},_u=(t,e)=>{if(e===void 0)return t;if(t instanceof Nt&&typeof e=="number")return t.get(e);if((t instanceof jt||t instanceof Li)&&typeof e=="string")return t.get(e);tn(t,e,t[At])};function ib(t,...e){return t.concat(...e)}let MP=class{queue=[];start=performance.now();add(e){this.queue.length===0&&(this.start=performance.now(),setTimeout(()=>this.execute(),50)),this.queue.push(e)}execute(){ss(()=>this.queue.forEach(e=>e())),this.queue=[]}};const hn=t=>hi(t)[1],xu=t=>typeof t=="string"||typeof t=="number"||typeof t=="boolean";function NP(t,e,n=!1){const[i,r]=hi(e),s=new MP,o=new Map,l=(S,m)=>{const x=ib(S.moved.map(({oldIndex:k})=>k),S.deleted).sort((k,D)=>D-k);n&&cr(["optimizeMutationOperations","deleted is"],x);const _=[];x.forEach((k,D)=>{D!==0&&k-x[D-1]===1?_[_.length-1].length++:_.push({index:k,length:1})});const C=ib(S.moved.map(({newIndex:k,oldIndex:D})=>({index:k,value:m.get(D)})),S.added.map(({index:k,value:D})=>({index:k,value:a(D)}))).sort((k,D)=>k.index-D.index);n&&cr(["optimizeMutationOperations","added is"],C,S.added);const w=[];return C.forEach(({value:k,index:D},P)=>{P!==0&&k.index-C[P-1].index===1?w[w.length-1].values.push(k):w.push({index:D,values:[k]})}),{deleted:_,added:w}},a=S=>{if(n&&cr(["createYjsBranch"],S),xu(S))return S;if(Array.isArray(S)){const m=S.map(_=>a(_)),x=new Nt;return d(x,S),x.insert(0,m),x}else if(typeof S=="object"){const m=Object.entries(S).map(([_,C])=>{const w=a(C);return[_,w]}),x=new jt(m);return d(x,S),x}else tn(S,"svalue is not primitive, array or object")},c=(S,m,x,_)=>{if(n&&cr(["solidToYjs"],S,m,x,_),!m)return tn("sparent is undefined"),!1;if(!S)return tn("yparent is undefined",m),!1;xu(_)?Ia(S,x,_,t):_===void 0&&S instanceof jt?LP(S,x,t):Array.isArray(_)?u(S,m,x,_):typeof _=="object"&&h(S,m,x,_)},u=(S,m,x,_)=>{x&&!(x in m)&&hn(m)(x,[]);const C=m[x];let w=_u(S,x);if(w||(w=new Nt,Ia(S,x,w,t)),!(w instanceof Nt)){tn(w);return}const k=OP(C,_,b.get(C));n&&cr(["minimumMutationOperations"],k);const{deleted:D,added:P}=l(k,w);n&&cr(["solidArrayToYjs"],k),w.doc?.transact(()=>{D.forEach(({index:O,length:R})=>w.delete(O,R)),P.forEach(({index:O,values:R})=>w.insert(O,R))}),_.length<w.length&&w.delete(_.length,w.length-_.length)},h=(S,m,x,_)=>{x&&!(x in m)&&hn(m)(x,{});const C=x?m[x]:m;let w=_u(S,x);if(!w){w=new jt,Ia(S,x,w,t),Object.entries(_).forEach(([k,D])=>{e===void 0?tn():xu(D)?Ia(w,k,D,t):(k in C||hn(C)(k,Array.isArray(D)?[]:{}),c(w,C[k],k,D))});return}if(w instanceof jt){n&&console.info(`be careful: when setting an object in a store, the object gets shallowly merged
(see https://www.solidjs.com/docs/latest/api#createstore).
This can possibly create multiple entry-points of the same reactive value in a store:

const [store, setStore] = createStore({firstEntryPoint: "ok"});
setStore({secondEntryPoint: store.firstEntryPoint});

=> store.secondEntryPoint points at store.firstEntryPoint.

Multiple entry-points are currently not supported in yjsStore.`),C||hn(m)(x,{}),Object.entries(_).forEach(([k,D])=>c(w,C,k,D));return}tn(w)},d=(S,m)=>{S instanceof Nt?S.observe(x=>ss(()=>{if(x.transaction.local)return;let _=0;x.changes.delta.forEach(C=>{if(C.retain)_+=C.retain;else if(C.insert){const w=Array.isArray(C.insert)?C.insert.map(k=>typeof k=="object"?k.toJSON():k):[C.insert];s.add(()=>{hn(m)(k=>[...k.slice(0,_),...w,...k.slice(_,k.length)]),_+=w.length,g(S,m)})}else C.delete&&s.add(()=>{hn(m)(w=>[...w.slice(0,_),...w.slice(_+C.delete,w.length)])})})})):S.observe(x=>ss(()=>{x.keysChanged.forEach(_=>{const C=_u(S,_);if(!_){tn("keyToUpdate is null",_);return}!C&&_ in m?s.add(()=>hn(m)(_,void 0)):C instanceof Nt||C instanceof jt?s.add(()=>{hn(m)(_,Pg(C.toJSON())),d(C,m[_]),g(C,m[_])}):s.add(()=>hn(m)(_,C))})})),o.set(m,S),o.set(S,m)},g=(S,m)=>{if(!(S instanceof jt||S instanceof Nt)){tn(S,m);return}S.forEach((x,_)=>{(x instanceof jt||x instanceof Nt)&&(m[_]||hn(m)(_,Array.isArray(e)?[]:{}),d(x,m[_]),g(x,m[_]))})},p=new WeakMap,b=new Map,$={get(S,m){if(n&&console.log("property",m),m===At)return S;const x=S[m];if(m==="unshift")return S[At].unshift;let _;return x?.[At]?p.get(x)||(p.set(x,_=new Proxy(x,$)),_):x},set(S,m,x){return typeof m=="string"&&!isNaN(+m)&&(b.get(S)||b.set(S,new Set),b.get(S).add(Array.isArray(S)?+m:m)),!0},deleteProperty(S,m){return!0}},E=function(...S){[...S];let m=S.pop(),x=S.pop(),_=[[{sparent:i,yparent:t,key:""}]];for(;S.length>0;){const C=S.shift(),w=_[_.length-1];cr(["_setStore","currentLayer"],w);const k=[];typeof C=="function"?w.forEach(({sparent:D,yparent:P})=>{if(Array.isArray(D)&&P instanceof Nt){const O=D.map((R,B)=>[R,B]).filter(([R])=>C(R)).map(([R,B])=>({sparent:R,yparent:P.get(B),key:C.toString()}));k.push(...O)}else console.warn(P,D,C),tn(D,P)}):w.forEach(({sparent:D,yparent:P})=>{const O=D[C];let R="get"in P?P.get(C):void 0;R||(console.log("nextYparent is undefined",P,C),P=a(D),R=P.get(C),console.log("nextYparent is now",R,P)),console.log("nextSparent",O,R),O!==void 0&&R?k.push({sparent:O,yparent:R,key:C.toString()}):(console.warn("Failed to access sparent or yparent with key:",C,typeof O),tn())}),_.push(k)}n&&console.log("THIS IS HAPPENING"),_[_.length-1].forEach(({sparent:C,yparent:w})=>{let k=m;if(console.log("nextValue",k,w,C),typeof k=="function"){const D=U_(()=>{}).toString().replace(/\s/g,"");if(k.toString().replace(/\s/g,"")===D){b.clear();let O;p.set(C,O=new Proxy(C[x],$)),k(O),n&&console.log("PROXY is ",O,O[At]),Array.from(b.entries()).forEach(([R,B])=>{const F=o.get(R);B.forEach(X=>{n&&console.log(w,R,X,R[X]),c(F,R,X,R[X])})}),hn(C)(x,Pg(O[At]))}else k=k(C[x]),c(w,C,x,k),hn(C)(x,k),w instanceof Li||g(w,C)}else c(w,C,x,k),hn(C)(x,k)})};return Object.entries(e).forEach(([S,m])=>{if(typeof m=="object"){const x=Array.isArray(m)?t.getArray(S):t.getMap(S);d(x,i[S]),g(x,i[S])}else console.error("currently only arrays and objects are allowed")}),[i,E]}const FP=1e3;class Mf extends EventTarget{#t;#n;#o;#a=new BroadcastChannel("SharedService");#e=null;#l=new AbortController;#i;providerCallbacks=new Map;#r=0;#s=[];proxy;constructor(e,n){super(),console.log("SharedService constructor",n),this.#t=e,this.#o=n,this.#n=this.#h(),console.log("SharedService clientId",this.#n),this.#i=this.#c(),this.#a.addEventListener("message",({data:i})=>{i?.type==="provider"&&i?.sharedService===this.#t&&(console.log("SharedService provider change",i),this.#d(this.#i),this.#i=this.#c())},{signal:this.#l.signal}),this.proxy=this.#f()}async activate(e){if(console.log("SharedService activate called"),this.#e){console.warn("SharedService activate called twice");return}this.#e=new AbortController;const n=`SharedService-${this.#t}`;console.log(await navigator.locks.query()),(await navigator.locks.query()).held?.find(r=>r.name===n)&&(console.log("SharedService lock already held"),e());try{await navigator.locks.request(n,{signal:this.#e.signal,mode:"exclusive"},async r=>{console.log("SharedService lock acquired");try{await this.executeLockedSection(e)}catch(s){throw console.error("An error occurred within the lock-acquired section:",s),s}})}catch(r){throw console.error("Error in lock acquisition or execution:",r),r}finally{console.log("SharedService lock released"),this.cleanupResources()}}async executeLockedSection(e){const n=await this.#o();n.start();const i=await this.#n,r=new BroadcastChannel("SharedService");return this.listenForClientRequests(n,r,e),r.postMessage({type:"provider",sharedService:this.#t,providerId:i}),new Promise((s,o)=>{this.#e.signal.addEventListener("abort",async()=>{console.log("Cleanup"),await this.proxy.cleanup(),r.close(),o(this.#e?.signal.reason)})})}listenForClientRequests(e,n,i){n.addEventListener("message",async({data:r})=>{if(r?.type==="request"&&r?.sharedService===this.#t){console.log("SharedService request received",r);const s=await this.getPortForClient(e,r.clientId);console.log("SharedService port obtained",s),this.#u(r,s),i()}},{signal:this.#e.signal})}async getPortForClient(e,n){return console.log("SharedService getPortForClient called",n),new Promise(i=>{e.addEventListener("message",r=>{console.log("SharedService getPortForClient message received",r),i(r.ports[0])},{once:!0}),e.postMessage(n)})}cleanupResources(){this.#e&&(this.#e?.abort(),this.#e=null)}deactivate(){console.log("SharedService deactivate called"),this.#e?.abort(),this.#e=null}close(){console.log("cleanup"),this.deactivate(),this.#l.abort();for(const{reject:e}of this.providerCallbacks.values())e(new Error("SharedService closed"))}async#u(e,n){console.log("SharedService port sent to client",navigator.serviceWorker,e,n),(await navigator.serviceWorker.ready).active?.postMessage(e,[n])}async#h(){let e=null;async function n(){const i=await fetch("/clientId");console.log("SharedService clientId response",i);const r=i.headers.get("content-type");if(i.ok&&r?.startsWith("text/plain"))return i.text();throw new Error("Service worker not ready or other error")}return e=await pT(n,2,1e3,16e3),console.log("Successfully fetched clientId:",e),navigator.serviceWorker.addEventListener("message",i=>{i.data.ports=i.ports,console.log("SharedService message received FROM SERVICEWORKER",i),this.dispatchEvent(new MessageEvent("message",{data:i.data}))}),await Mf.#p(e),e}async#c(){const e=++this.#r;let n=null;const i=await this.#n;for(;!n&&e===this.#r;){const r=rb();this.#a.postMessage({type:"request",nonce:r,sharedService:this.#t,clientId:i});const s=new Promise(o=>{const l=new AbortController;this.addEventListener("message",a=>{console.log("Provider port received",a),a.data?.nonce===r&&(o(a.data.ports[0]),l.abort())},{signal:l.signal}),this.#s.push(()=>l.abort())});n=await Promise.race([s,new Promise(o=>setTimeout(()=>o(null),FP))]),n||s.then(o=>o?.close())}return n&&e===this.#r?(this.#s.forEach(r=>r()),this.#s=[],n.addEventListener("message",({data:r})=>{const s=this.providerCallbacks.get(r.nonce);r.error?s?.reject(Object.assign(new Error,r.error)):s?.resolve(r.result)}),n.start(),n):(n?.close(),null)}#d(e){e.then(n=>n?.close());for(const{reject:n}of this.providerCallbacks.values())n(new Error("SharedService provider change"))}#f(){return new Proxy({},{get:(e,n)=>async(...i)=>{const r=rb(),s=await this.#i;return console.log("finally",r,n,i),new Promise((o,l)=>{this.providerCallbacks.set(r,{resolve:o,reject:l}),s?.postMessage({nonce:r,method:n,args:i})}).finally(()=>{this.providerCallbacks.delete(r)})}})}static#p=function(){let e;return function(n){return e||(e=new Promise(i=>{navigator.locks.request(n,()=>new Promise(r=>{i()}))}))}}()}function BP(t){console.log("createSharedServicePort",t);const{port1:e,port2:n}=new MessageChannel;return console.log("Listening to message events on provider port 1",e),e.addEventListener("message",({data:i})=>{const{port1:r,port2:s}=new MessageChannel;console.log("Requesting lock",i),navigator.locks.request(i,()=>{r.close()}),r.addEventListener("message",async({data:o})=>{console.log("service worker received message",o);const l={nonce:o.nonce};try{l.result=await t[o.method](...o.args)}catch(a){const c=a instanceof Error?Object.fromEntries(Object.getOwnPropertyNames(a).map(u=>[u,a[u]])):a;l.error=c}r.postMessage(l)}),r.start(),e.postMessage(null,[s])}),e.start(),n}function rb(){return Math.random().toString(36).replace("0.","")}function UP(t){let i=2166136261;for(const r of t)i^=r,i*=16777619,i>>>=0;return i.toString(16)}class jP extends DT{constructor(e,n,i=!1){super(),this.room=e,this.ydoc=n,this.debug=i,this.log("Initializing YOpfsProvider..."),this.worker=new Worker("/OpfsWorker.js"),console.time("OPFS"),this.whenSynced=()=>new Promise(r=>{this.on("synced",()=>{r(this)})}),n.on("update",(r,s)=>{this._storeUpdate(r,s)}),n.on("destroy",()=>{this.destroy()})}worker=null;debug;PREFERRED_TRIM_SIZE=10;_updateCount=0;DEBOUNCE_TIMEOUT=1e3;_destroyed=!1;_storeTimeoutId=null;whenSynced;_sharedService=null;synced=!1;_timerId=null;_getSessionId=()=>{let e=sessionStorage.getItem("sessionId");return e||(e=Math.random().toString(36).substring(2,15),sessionStorage.setItem("sessionId",e)),e};_storeUpdate=async(e,n)=>{if(this.log("Received update from Y.Doc...",e,n),n!==this&&!this._destroyed){this._timerId&&clearTimeout(this._timerId);const i=(await navigator.locks.query()).held?.find(s=>s.name===`SharedService-${this.room}`);if(!this.synced&&!i){this.log("Waiting for sync..."),this._timerId=setTimeout(()=>{this._storeUpdate(e,n)},1e3);return}UP(e);const{updates:r}=await this._sharedService?.proxy.read();if(console.log("updates",r),this.log("Received a local Y.Doc update or an update from another provider.",e,n,this,this._updateCount),this._sharedService?.proxy.write(e),++this._updateCount>=10){this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId);const s=qv(this.ydoc),o=s.byteLength/1024/1024;console.log(`updates size: ${o} MB`),this._storeTimeoutId=setTimeout(()=>{this.log("Trimming updates file..."),this._sharedService?.proxy.trim(s),this._storeTimeoutId=null,this._updateCount=0},this.DEBOUNCE_TIMEOUT)}}};log=(...e)=>{this.debug&&console.log(...e)};sendMessage(e){return new Promise((n,i)=>{if(!this.worker){i("Worker not initialized.");return}const r=o=>{n(o.data),this.worker?.removeEventListener("message",r)},s=o=>{o instanceof ErrorEvent&&i(o),this.worker?.removeEventListener("error",s)};this.worker.onerror=s,this.worker.onmessage=r,this.worker.postMessage(e)})}activateCalled=!1;async sync(){return new Promise(async(e,n)=>{try{this.log("Synchronizing Y.Doc with OPFS..."),console.time("OPFS: getStoredUpdates"),this._sharedService=new Mf(this.room,()=>BP({read:async()=>(console.log("Calling read"),new Promise((i,r)=>{if(!this.worker){r("Worker not initialized.");return}const s=l=>{i(l.data),this.worker?.removeEventListener("message",s)},o=l=>{l instanceof ErrorEvent&&r(l),this.worker?.removeEventListener("error",o)};this.worker.onerror=o,this.worker.onmessage=s,this.worker.postMessage({action:"read",payload:{roomName:this.room}})})),write:async i=>(console.log("Calling write"),this.sendMessage({action:"write",payload:{roomName:this.room,content:i}})),trim:i=>(console.log("Calling trim"),this.sendMessage({action:"trim",payload:{roomName:this.room,content:i}})),cleanup:()=>this.sendMessage({action:"cleanup",payload:{roomName:this.room}})})),console.log("this._sharedService",this._sharedService),await this._sharedService.activate(async()=>{if(console.log("Destroyed?",this._destroyed,"synced?",this.synced),this._destroyed||this.synced||this.activateCalled)return;this.activateCalled=!0;const i=await this._sharedService?.proxy.read();console.log("res",i);const{updates:r}=i;if(console.timeEnd("OPFS: getStoredUpdates"),this.log("Received updates from OPFS.",r.length),this._updateCount=r.length,st(this.ydoc,()=>{r.forEach(s=>{Kv(this.ydoc,s,this)})},this,!1),this._destroyed)return this;this.emit("synced",[]),this.synced=!0,console.timeEnd("OPFS"),e()})}catch(i){console.error("Error syncing",i),this.destroy(),n(i)}})}destroy(){this.ydoc.off("update",this._storeUpdate),this.ydoc.off("destroy",this.destroy),this._destroyed=!0,this.worker&&this.worker.terminate(),this._sharedService?.deactivate()}}const In=Symbol(0);let wl=!1,wh=!1,qn=null,ts=null,Tn=null,fn=0,Yr=[],Nf={};const HP=()=>{},Ms=0,Ow=1,To=2,Sc=3;function VP(){wl=!0,queueMicrotask(Dw)}function Dw(){if(!Yr.length){wl=!1;return}wh=!0;for(let t=0;t<Yr.length;t++)Yr[t].$st!==Ms&&KP(Yr[t]);Yr=[],wl=!1,wh=!1}function KP(t){let e=[t];for(;t=t[In];)t.$e&&t.$st!==Ms&&e.push(t);for(let n=e.length-1;n>=0;n--)Vf(e[n])}function Iw(t){const e=_l();return la(e,t.length?t.bind(null,aa.bind(e)):t,null)}function ce(t){return la(qn,t,null)}function qP(t){return la(null,t,null)}function zi(){wh||Dw()}function Ec(){return qn}function Zt(t,e){try{return la(e,t,null)}catch(n){Ff(e,n);return}}function Rw(t,e=qn){return e?.$cx[t]}function zP(t,e,n=qn){n&&(n.$cx={...n.$cx,[t]:e})}function et(t){if(!t||!qn)return t||HP;const e=qn;return e.$d?Array.isArray(e.$d)?e.$d.push(t):e.$d=[e.$d,t]:e.$d=t,function(){e.$st!==Sc&&(t.call(null),$c(e.$d)?e.$d=null:Array.isArray(e.$d)&&e.$d.splice(e.$d.indexOf(t),1))}}function aa(t=!0){if(this.$st===Sc)return;let e=t?this.$ps||this[In]:this,n=this.$ns,i=null;for(;n&&n[In]===this;)aa.call(n,!0),sb(n),i=n.$ns,n.$ns=null,n=i;t&&sb(this),n&&(n.$ps=t?this.$ps:this),e&&(e.$ns=n)}function sb(t){t.$st=Sc,t.$d&&Lw(t),t.$s&&Ka(t,0),t.$ps&&(t.$ps.$ns=null),t[In]=null,t.$s=null,t.$o=null,t.$ps=null,t.$cx=Nf,t.$eh=null}function Lw(t){try{if(Array.isArray(t.$d))for(let e=t.$d.length-1;e>=0;e--){const n=t.$d[e];n.call(n)}else t.$d.call(t.$d);t.$d=null}catch(e){Ff(t,e)}}function la(t,e,n){const i=qn,r=ts;qn=t,ts=n;try{return e.call(t)}finally{qn=i,ts=r}}function Ff(t,e){if(!t||!t.$eh)throw e;let n=0,i=t.$eh.length,r=ob(e);for(n=0;n<i;n++)try{t.$eh[n](r);break}catch(s){r=ob(s)}if(n===i)throw r}function ob(t){return t instanceof Error?t:Error(JSON.stringify(t))}function Bf(){return this.$st===Sc?this.$v:(ts&&!this.$e&&(!Tn&&ts.$s&&ts.$s[fn]==this?fn++:Tn?Tn.push(this):Tn=[this]),this.$c&&Vf(this),this.$v)}function Mw(t){const e=$c(t)?t(this.$v):t;if(this.$ch(this.$v,e)&&(this.$v=e,this.$o))for(let n=0;n<this.$o.length;n++)Bw(this.$o[n],To);return this.$v}const Uf=function(){this[In]=null,this.$ns=null,this.$ps=null,qn&&qn.append(this)},Br=Uf.prototype;Br.$cx=Nf;Br.$eh=null;Br.$c=null;Br.$d=null;Br.append=function(t){if(t[In]=this,t.$ps=this,this.$ns)if(t.$ns){let e=t.$ns;for(;e.$ns;)e=e.$ns;e.$ns=this.$ns,this.$ns.$ps=e}else t.$ns=this.$ns,this.$ns.$ps=t;this.$ns=t,t.$cx=t.$cx===Nf?this.$cx:{...this.$cx,...t.$cx},this.$eh&&(t.$eh=t.$eh?[...t.$eh,...this.$eh]:this.$eh)};Br.dispose=function(){aa.call(this)};function _l(){return new Uf}const Nw=function(e,n,i){Uf.call(this),this.$st=n?To:Ms,this.$i=!1,this.$e=!1,this.$s=null,this.$o=null,this.$v=e,n&&(this.$c=n),i&&i.dirty&&(this.$ch=i.dirty)},jf=Nw.prototype;Object.setPrototypeOf(jf,Br);jf.$ch=WP;jf.call=Bf;function Hf(t,e,n){return new Nw(t,e,n)}function WP(t,e){return t!==e}function $c(t){return typeof t=="function"}function Vf(t){if(t.$st===Ow)for(let e=0;e<t.$s.length&&(Vf(t.$s[e]),t.$st!==To);e++);t.$st===To?Fw(t):t.$st=Ms}function ab(t){t.$ns&&t.$ns[In]===t&&aa.call(t,!1),t.$d&&Lw(t),t.$eh=t[In]?t[In].$eh:null}function Fw(t){let e=Tn,n=fn;Tn=null,fn=0;try{ab(t);const i=la(t,t.$c,t);if(Tn){if(t.$s&&Ka(t,fn),t.$s&&fn>0){t.$s.length=fn+Tn.length;for(let s=0;s<Tn.length;s++)t.$s[fn+s]=Tn[s]}else t.$s=Tn;let r;for(let s=fn;s<t.$s.length;s++)r=t.$s[s],r.$o?r.$o.push(t):r.$o=[t]}else t.$s&&fn<t.$s.length&&(Ka(t,fn),t.$s.length=fn);!t.$e&&t.$i?Mw.call(t,i):(t.$v=i,t.$i=!0)}catch(i){Ff(t,i),t.$st===To&&(ab(t),t.$s&&Ka(t,0));return}Tn=e,fn=n,t.$st=Ms}function Bw(t,e){if(!(t.$st>=e)&&(t.$e&&t.$st===Ms&&(Yr.push(t),wl||VP()),t.$st=e,t.$o))for(let n=0;n<t.$o.length;n++)Bw(t.$o[n],Ow)}function Ka(t,e){let n,i;for(let r=e;r<t.$s.length;r++)n=t.$s[r],n.$o&&(i=n.$o.indexOf(t),n.$o[i]=n.$o[n.$o.length-1],n.$o.pop())}function Kf(...t){}function or(t){return t===null}function vn(t){return typeof t>"u"}function JR(t){return or(t)||vn(t)}function ZR(t){return t?.constructor===Object}function xl(t){return typeof t=="number"&&!Number.isNaN(t)}function Pt(t){return typeof t=="string"}function eL(t){return typeof t=="boolean"}function Ci(t){return typeof t=="function"}function Dn(t){return Array.isArray(t)}const GP=Event,Uw=Symbol("DOM_EVENT");class $t extends GP{[Uw]=!0;detail;triggers=new YP;get trigger(){return this.triggers.source}get originEvent(){return this.triggers.origin}get isOriginTrusted(){return this.triggers.origin?.isTrusted??!1}constructor(e,...n){super(e,n[0]),this.detail=n[0]?.detail;const i=n[0]?.trigger;i&&this.triggers.add(i)}}class YP{chain=[];get source(){return this.chain[0]}get origin(){return this.chain[this.chain.length-1]}add(e){this.chain.push(e),QP(e)&&this.chain.push(...e.triggers)}remove(e){return this.chain.splice(this.chain.indexOf(e),1)[0]}has(e){return this.chain.some(n=>n===e)}hasType(e){return!!this.findType(e)}findType(e){return this.chain.find(n=>n.type===e)}walk(e){for(const n of this.chain){const i=e(n);if(i)return[n,i]}}[Symbol.iterator](){return this.chain.values()}}function QP(t){return!!t?.[Uw]}class qf extends EventTarget{$ts__events;addEventListener(e,n,i){return super.addEventListener(e,n,i)}removeEventListener(e,n,i){return super.removeEventListener(e,n,i)}}function fe(t,e,n,i){return t.addEventListener(e,n,i),et(()=>t.removeEventListener(e,n,i))}function lb(t){return!!t?.type.startsWith("pointer")}function qa(t){return!!t?.type.startsWith("touch")}function XP(t){return/^(click|mouse)/.test(t?.type??"")}function Sl(t){return!!t?.type.startsWith("key")}function jw(t){return Sl(t)&&(t.key==="Enter"||t.key===" ")}function Se(t,e,n){if(t)if(!n&&n!==""&&n!==0)t.removeAttribute(e);else{const i=n===!0?"":n+"";t.getAttribute(e)!==i&&t.setAttribute(e,i)}else return}function ln(t,e,n){if(t)!n&&n!==0?t.style.removeProperty(e):t.style.setProperty(e,n+"");else return}function Be(t,e){const n=Hf(t,null,e),i=Bf.bind(n);return i[In]=!0,i.set=Mw.bind(n),i}function JP(t){return $c(t)&&In in t}function li(t,e){const n=Hf(e?.initial,t,e),i=Bf.bind(n);return i[In]=!0,i}function ZP(t,e){const n=Hf(null,function(){let r=t();return $c(r)&&et(r),null},void 0);return n.$e=!0,Fw(n),aa.bind(n,!0)}function eA(t){return JP(t)&&"set"in t}const z=ZP;function ar(t){return{id:Symbol(),provide:t}}function Nn(t,e,n=Ec()){const i=!vn(e);zP(t.id,i?e:t.provide?.(),n)}function Ct(t){return Rw(t.id)}function fi(t){return!vn(Rw(t.id))}const io=Symbol(0),ro=Symbol(0),Hw=Symbol(0),Su={};class tA{$ts__events;$ts__vars;[Hw]=null;$el=Be(null);p=null;d=null;e=null;g=null;q=null;c=!1;f=Su;x=null;y=null;z;h;B=[];C=[];A=[];D=[];constructor(e,n,i){this.d=n,i?.scope&&i.scope.append(n);let r=e.state,s=e.props;if(r&&(this.h=r.create(),this.z=new Proxy(this.h,{get:(o,l)=>this.h[l]()}),Nn(r,this.h)),s&&(this.f=nA(s),i?.props))for(const o of Object.keys(i.props))this.f[o]?.set(i.props[o]);et(this.l.bind(this))}m(){Zt(()=>{for(const e of this.B)e()},this.d)}n(e){this.p||(this.p=e,this.$el.set(e),Zt(()=>{this.e=_l(),Zt(()=>{for(const n of this.C)n(this.p);this.E(),this.F()},this.e)},this.d),e.dispatchEvent(new Event("attached")))}u(){this.e?.dispose(),this.e=null,this.g=null,this.p=null,this.$el.set(null)}j(){!this.p||!this.e||!this.A.length||Zt(()=>{this.g=_l(),Zt(()=>{for(const e of this.A)e(this.p)},this.g)},this.e)}k(){this.g?.dispose(),this.g=null}l(){if(this.c)return;this.c=!0,Zt(()=>{for(const n of this.D)n(this.p)},this.d);const e=this.p;this.u(),this.d.dispose(),this.B.length=0,this.C.length=0,this.A.length=0,this.D.length=0,this.q=null,this.x=null,this.y=null,this.f=Su,this.d=null,this.z=Su,this.h=null,e&&delete e.$}i(e){e.onSetup&&this.B.push(e.onSetup.bind(e)),e.onAttach&&this.C.push(e.onAttach.bind(e)),e.onConnect&&this.A.push(e.onConnect.bind(e)),e.onDestroy&&this.D.push(e.onDestroy.bind(e))}E(){if(this.x)for(const e of Object.keys(this.x))Ci(this.x[e])?z(this.G.bind(this,e)):Se(this.p,e,this.x[e])}F(){if(this.y)for(const e of Object.keys(this.y))Ci(this.y[e])?z(this.H.bind(this,e)):ln(this.p,e,this.y[e])}G(e){Se(this.p,e,this.x[e].call(this.q))}H(e){ln(this.p,e,this.y[e].call(this.q))}}function nA(t){const e={};for(const n of Object.keys(t)){const i=t[n];e[n]=Be(i,i)}return e}let so={$$:null};function iA(t,e){return Iw(()=>{so.$$=new tA(t,Ec(),e);const n=new t;return so.$$.q=n,so.$$=null,n})}class zn extends EventTarget{$$;get el(){return this.$$.p}get $el(){return this.$$.$el()}get scope(){return this.$$.d}get attachScope(){return this.$$.e}get connectScope(){return this.$$.g}get $props(){return this.$$.f}get $state(){return this.$$.h}get state(){return this.$$.z}constructor(){super(),so.$$&&this.attach(so)}attach({$$:e}){return this.$$=e,e.i(this),this}addEventListener(e,n,i){this.listen(e,n,i)}removeEventListener(e,n,i){this.el?.removeEventListener(e,n,i)}setAttributes(e){this.$$.x||(this.$$.x={}),Object.assign(this.$$.x,e)}setStyles(e){this.$$.y||(this.$$.y={}),Object.assign(this.$$.y,e)}setCSSVars(e){this.setStyles(e)}createEvent(e,...n){return new $t(e,n[0])}dispatch(e,...n){if(!this.el)return!1;const i=e instanceof Event?e:new $t(e,n[0]);return Object.defineProperty(i,"target",{get:()=>this.$$.q}),qP(()=>(this.$$[Hw]?.(i),this.el.dispatchEvent(i)))}dispatchEvent(e){return this.dispatch(e)}listen(e,n,i){return this.el?fe(this.el,e,n,i):Kf}}class Oe extends zn{subscribe(e){return Zt(()=>z(()=>e(this.state)),this.$$.d)}destroy(){this.$$.l()}}function Fe(t,e,n){t[io]||(t[io]=new Set),t[io].add(e)}function It(t,e,n){t[ro]||(t[ro]=new Set),t[ro].add(e)}class Ur{id=Symbol(0);record;I;constructor(e){this.record=e,this.I=Object.getOwnPropertyDescriptors(e)}create(){const e={},n=new Proxy(e,{get:(i,r)=>e[r]()});for(const i of Object.keys(this.record)){const r=this.I[i].get;e[i]=r?li(r.bind(n)):Be(this.record[i])}return e}reset(e,n){for(const i of Object.keys(e))!this.I[i].get&&(!n||n(i))&&e[i].set(this.record[i])}}function ca(t){return Ct(t)}function rA(t,e){for(const n of t)n(e)}function zf(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Vw(t){return t.replace(/-./g,e=>e[1].toUpperCase())}function sA(t){return t.charAt(0).toUpperCase()+t.slice(1)}function oA(t){return Ci(t)?t():t}function El(t){return t?"true":"false"}function Kw(){const t=new Set;return{add(...e){for(const n of e)t.add(n)},empty(){for(const e of t)e();t.clear()}}}function tL(){const t=Kw();return et(t.empty),t}function _h(){let t,e;return{promise:new Promise((i,r)=>{t=i,e=r}),resolve:t,reject:e}}function aA(t){return new Promise(e=>setTimeout(e,t))}function ua(t){let e=-1,n;function i(...r){n=r,!(e>=0)&&(e=window.requestAnimationFrame(()=>{t.apply(this,n),e=-1,n=void 0}))}return i}const lA=typeof window<"u"?"requestIdleCallback"in window?window.requestIdleCallback:t=>window.setTimeout(t,1):Kf;function cA(t,e){return new Promise(n=>{lA(i=>{t?.(i),n()},e)})}const xh=Math.min,ns=Math.max,$l=Math.round,Ra=Math.floor,tr=t=>({x:t,y:t});function qw(t){return t.split("-")[0]}function uA(t){return t.split("-")[1]}function hA(t){return t==="x"?"y":"x"}function dA(t){return t==="y"?"height":"width"}function zw(t){return["top","bottom"].includes(qw(t))?"y":"x"}function fA(t){return hA(zw(t))}function Ww(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function cb(t,e,n){let{reference:i,floating:r}=t;const s=zw(e),o=fA(e),l=dA(o),a=qw(e),c=s==="y",u=i.x+i.width/2-r.width/2,h=i.y+i.height/2-r.height/2,d=i[l]/2-r[l]/2;let g;switch(a){case"top":g={x:u,y:i.y-r.height};break;case"bottom":g={x:u,y:i.y+i.height};break;case"right":g={x:i.x+i.width,y:h};break;case"left":g={x:i.x-r.width,y:h};break;default:g={x:i.x,y:i.y}}switch(uA(e)){case"start":g[o]-=d*(n&&c?-1:1);break;case"end":g[o]+=d*(n&&c?-1:1);break}return g}const pA=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:h}=cb(c,i,a),d=i,g={},p=0;for(let b=0;b<l.length;b++){const{name:$,fn:E}=l[b],{x:S,y:m,data:x,reset:_}=await E({x:u,y:h,initialPlacement:i,placement:d,strategy:r,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});if(u=S??u,h=m??h,g={...g,[$]:{...g[$],...x}},_&&p<=50){p++,typeof _=="object"&&(_.placement&&(d=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:u,y:h}=cb(c,d,a)),b=-1;continue}}return{x:u,y:h,placement:d,strategy:r,middlewareData:g}};function nr(t){return Gw(t)?(t.nodeName||"").toLowerCase():"#document"}function wn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ni(t){var e;return(e=(Gw(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Gw(t){return t instanceof Node||t instanceof wn(t).Node}function Oi(t){return t instanceof Element||t instanceof wn(t).Element}function ci(t){return t instanceof HTMLElement||t instanceof wn(t).HTMLElement}function ub(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof wn(t).ShadowRoot}function ha(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Fn(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function gA(t){return["table","td","th"].includes(nr(t))}function Wf(t){const e=Gf(),n=Fn(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function mA(t){let e=gs(t);for(;ci(e)&&!Cc(e);){if(Wf(e))return e;e=gs(e)}return null}function Gf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Cc(t){return["html","body","#document"].includes(nr(t))}function Fn(t){return wn(t).getComputedStyle(t)}function Tc(t){return Oi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function gs(t){if(nr(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ub(t)&&t.host||Ni(t);return ub(e)?e.host:e}function Yw(t){const e=gs(t);return Cc(e)?t.ownerDocument?t.ownerDocument.body:t.body:ci(e)&&ha(e)?e:Yw(e)}function ko(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=Yw(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=wn(r);return s?e.concat(o,o.visualViewport||[],ha(r)?r:[],o.frameElement&&n?ko(o.frameElement):[]):e.concat(r,ko(r,[],n))}function Qw(t){const e=Fn(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=ci(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,l=$l(n)!==s||$l(i)!==o;return l&&(n=s,i=o),{width:n,height:i,$:l}}function Yf(t){return Oi(t)?t:t.contextElement}function is(t){const e=Yf(t);if(!ci(e))return tr(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=Qw(e);let o=(s?$l(n.width):n.width)/i,l=(s?$l(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const bA=tr(0);function Xw(t){const e=wn(t);return!Gf()||!e.visualViewport?bA:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yA(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==wn(t)?!1:e}function Tr(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=Yf(t);let o=tr(1);e&&(i?Oi(i)&&(o=is(i)):o=is(t));const l=yA(s,n,i)?Xw(s):tr(0);let a=(r.left+l.x)/o.x,c=(r.top+l.y)/o.y,u=r.width/o.x,h=r.height/o.y;if(s){const d=wn(s),g=i&&Oi(i)?wn(i):i;let p=d.frameElement;for(;p&&i&&g!==d;){const b=is(p),$=p.getBoundingClientRect(),E=Fn(p),S=$.left+(p.clientLeft+parseFloat(E.paddingLeft))*b.x,m=$.top+(p.clientTop+parseFloat(E.paddingTop))*b.y;a*=b.x,c*=b.y,u*=b.x,h*=b.y,a+=S,c+=m,p=wn(p).frameElement}}return Ww({width:u,height:h,x:a,y:c})}function vA(t){let{rect:e,offsetParent:n,strategy:i}=t;const r=ci(n),s=Ni(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},l=tr(1);const a=tr(0);if((r||!r&&i!=="fixed")&&((nr(n)!=="body"||ha(s))&&(o=Tc(n)),ci(n))){const c=Tr(n);l=is(n),a.x=c.x+n.clientLeft,a.y=c.y+n.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-o.scrollLeft*l.x+a.x,y:e.y*l.y-o.scrollTop*l.y+a.y}}function wA(t){return Array.from(t.getClientRects())}function Jw(t){return Tr(Ni(t)).left+Tc(t).scrollLeft}function _A(t){const e=Ni(t),n=Tc(t),i=t.ownerDocument.body,r=ns(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=ns(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+Jw(t);const l=-n.scrollTop;return Fn(i).direction==="rtl"&&(o+=ns(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:l}}function xA(t,e){const n=wn(t),i=Ni(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,l=0,a=0;if(r){s=r.width,o=r.height;const c=Gf();(!c||c&&e==="fixed")&&(l=r.offsetLeft,a=r.offsetTop)}return{width:s,height:o,x:l,y:a}}function SA(t,e){const n=Tr(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=ci(t)?is(t):tr(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,a=r*s.x,c=i*s.y;return{width:o,height:l,x:a,y:c}}function hb(t,e,n){let i;if(e==="viewport")i=xA(t,n);else if(e==="document")i=_A(Ni(t));else if(Oi(e))i=SA(e,n);else{const r=Xw(t);i={...e,x:e.x-r.x,y:e.y-r.y}}return Ww(i)}function Zw(t,e){const n=gs(t);return n===e||!Oi(n)||Cc(n)?!1:Fn(n).position==="fixed"||Zw(n,e)}function EA(t,e){const n=e.get(t);if(n)return n;let i=ko(t,[],!1).filter(l=>Oi(l)&&nr(l)!=="body"),r=null;const s=Fn(t).position==="fixed";let o=s?gs(t):t;for(;Oi(o)&&!Cc(o);){const l=Fn(o),a=Wf(o);!a&&l.position==="fixed"&&(r=null),(s?!a&&!r:!a&&l.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||ha(o)&&!a&&Zw(t,o))?i=i.filter(u=>u!==o):r=l,o=gs(o)}return e.set(t,i),i}function $A(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?EA(e,this.mk):[].concat(n),i],l=o[0],a=o.reduce((c,u)=>{const h=hb(e,u,r);return c.top=ns(h.top,c.top),c.right=xh(h.right,c.right),c.bottom=xh(h.bottom,c.bottom),c.left=ns(h.left,c.left),c},hb(e,l,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function CA(t){return Qw(t)}function TA(t,e,n){const i=ci(e),r=Ni(e),s=n==="fixed",o=Tr(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const a=tr(0);if(i||!i&&!s)if((nr(e)!=="body"||ha(r))&&(l=Tc(e)),i){const c=Tr(e,!0,s,e);a.x=c.x+e.clientLeft,a.y=c.y+e.clientTop}else r&&(a.x=Jw(r));return{x:o.left+l.scrollLeft-a.x,y:o.top+l.scrollTop-a.y,width:o.width,height:o.height}}function db(t,e){return!ci(t)||Fn(t).position==="fixed"?null:e?e(t):t.offsetParent}function e1(t,e){const n=wn(t);if(!ci(t))return n;let i=db(t,e);for(;i&&gA(i)&&Fn(i).position==="static";)i=db(i,e);return i&&(nr(i)==="html"||nr(i)==="body"&&Fn(i).position==="static"&&!Wf(i))?n:i||mA(t)||n}const kA=async function(t){let{reference:e,floating:n,strategy:i}=t;const r=this.getOffsetParent||e1,s=this.getDimensions;return{reference:TA(e,await r(n),i),floating:{x:0,y:0,...await s(n)}}};function PA(t){return Fn(t).direction==="rtl"}const AA={convertOffsetParentRelativeRectToViewportRelativeRect:vA,getDocumentElement:Ni,getClippingRect:$A,getOffsetParent:e1,getElementRects:kA,getClientRects:wA,getDimensions:CA,getScale:is,isElement:Oi,isRTL:PA};function OA(t,e){let n=null,i;const r=Ni(t);function s(){clearTimeout(i),n&&n.disconnect(),n=null}function o(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),s();const{left:c,top:u,width:h,height:d}=t.getBoundingClientRect();if(l||e(),!h||!d)return;const g=Ra(u),p=Ra(r.clientWidth-(c+h)),b=Ra(r.clientHeight-(u+d)),$=Ra(c),S={rootMargin:-g+"px "+-p+"px "+-b+"px "+-$+"px",threshold:ns(0,xh(1,a))||1};let m=!0;function x(_){const C=_[0].intersectionRatio;if(C!==a){if(!m)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},100)}m=!1}try{n=new IntersectionObserver(x,{...S,root:r.ownerDocument})}catch{n=new IntersectionObserver(x,S)}n.observe(t)}return o(!0),s}function DA(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=i,c=Yf(t),u=r||s?[...c?ko(c):[],...ko(e)]:[];u.forEach(E=>{r&&E.addEventListener("scroll",n,{passive:!0}),s&&E.addEventListener("resize",n)});const h=c&&l?OA(c,n):null;let d=-1,g=null;o&&(g=new ResizeObserver(E=>{let[S]=E;S&&S.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{g&&g.observe(e)})),n()}),c&&!a&&g.observe(c),g.observe(e));let p,b=a?Tr(t):null;a&&$();function $(){const E=Tr(t);b&&(E.x!==b.x||E.y!==b.y||E.width!==b.width||E.height!==b.height)&&n(),b=E,p=requestAnimationFrame($)}return n(),()=>{u.forEach(E=>{r&&E.removeEventListener("scroll",n),s&&E.removeEventListener("resize",n)}),h&&h(),g&&g.disconnect(),g=null,a&&cancelAnimationFrame(p)}}const IA=(t,e,n)=>{const i=new Map,r={platform:AA,...n},s={...r.platform,mk:i};return pA(t,e,{...r,platform:s})},Eu=t=>t===null?"":t+"",RA=t=>t===null?null:t+"",LA=t=>t===null?0:Number(t),t1=t=>t!==null,MA=()=>null,NA=t=>t===null?[]:JSON.parse(t),FA=t=>t===null?{}:JSON.parse(t);function BA(t){if(t===null)return RA;switch(typeof t){case"undefined":return Eu;case"string":return Eu;case"boolean":return t1;case"number":return LA;case"function":return MA;case"object":return Dn(t)?NA:FA;default:return Eu}}const Ui=Symbol(0),n1=Symbol(0),mr=Symbol(0),Zs=Symbol(0);function De(t,e){class n extends t{static attrs;static[Ui]=null;static get observedAttributes(){if(!this[Ui]&&e.props){const r=new Map;for(const s of Object.keys(e.props)){let o=this.attrs?.[s],l=Pt(o)?o:o&&o?.attr;l!==!1&&(l||(l=zf(s)),r.set(l,{b:s,a:o&&!Pt(o)&&o?.converter||BA(e.props[s])}))}this[Ui]=r}return this[Ui]?Array.from(this[Ui].keys()):[]}$;[mr]=0;[Zs]=null;keepAlive=!1;forwardKeepAlive=!0;get scope(){return this.$.$$.d}get attachScope(){return this.$.$$.e}get connectScope(){return this.$.$$.g}get $props(){return this.$.$$.f}get $state(){return this.$.$$.h}get state(){return this.$.state}constructor(...r){if(super(...r),this.$=Zt(()=>iA(e),null),this.$.$$.i(this),e.props){const s=this.$props,o=Object.getOwnPropertyDescriptors(this);for(const l of Object.keys(o))l in e.props&&(s[l].set(this[l]),delete this[l])}}attributeChangedCallback(r,s,o){const l=this.constructor;if(!l[Ui]){super.attributeChangedCallback?.(r,s,o);return}const a=l[Ui].get(r);a&&(this[a.b]=a.a(o))}connectedCallback(){const r=this.$?.$$;if(!r||r.c)return;if(this[mr]!==2){jA.call(this);return}if(!this.isConnected)return;this.hasAttribute("keep-alive")&&(this.keepAlive=!0),r.j(),Dn(this[Zs])&&rA(this[Zs],this),this[Zs]=null;const s=super.connectedCallback;s&&Zt(()=>s.call(this),this.connectScope)}disconnectedCallback(){const r=this.$?.$$;if(!r||r.c)return;r.k();const s=super.disconnectedCallback;s&&s.call(this),!this.keepAlive&&!this.hasAttribute("keep-alive")&&setTimeout(()=>{requestAnimationFrame(()=>{this.isConnected||r.l()})},0)}[n1](){const r=this.$.$$,s=this.constructor;if(r.c)return;const o=s[Ui];if(o)for(const l of this.attributes){let a=o.get(l.name);a&&a.a&&r.f[a.b].set(a.a(this.getAttribute(l.name)))}r.m(),r.n(this),this[mr]=2,this.connectedCallback()}subscribe(r){return this.$.subscribe(r)}destroy(){this.disconnectedCallback(),this.$.destroy()}}return UA(n,e),n}function UA(t,e){const n=t.prototype,i=e.prototype;if(e.props)for(const r of Object.keys(e.props))Object.defineProperty(n,r,{enumerable:!0,configurable:!0,get(){return this.$props[r]()},set(s){this.$props[r].set(s)}});if(i[io])for(const r of i[io])Object.defineProperty(n,r,{enumerable:!0,configurable:!0,get(){return this.$[r]},set(s){this.$[r]=s}});if(i[ro])for(const r of i[ro])n[r]=function(...s){return this.$[r](...s)}}function jA(){if(this[mr]!==0)return;this[mr]=1;const t=VA(this),e=t&&window.customElements.get(t.localName),n=t&&t[mr]===2;if(t&&(!e||!n)){HA.call(this,t);return}i1.call(this,t)}async function HA(t){await window.customElements.whenDefined(t.localName),t[mr]!==2&&await new Promise(e=>(t[Zs]??=[]).push(e)),i1.call(this,t)}function i1(t){if(this.isConnected){if(t){t.keepAlive&&t.forwardKeepAlive&&(this.keepAlive=!0,this.setAttribute("keep-alive",""));const e=this.$.$$.d;e&&t.$.$$.e.append(e)}this[n1]()}}function VA(t){let e=t.parentNode,n=t.localName.split("-",1)[0]+"-";for(;e;){if(e.nodeType===1&&e.localName.startsWith(n))return e;e=e.parentNode}return null}function Pe(t,e=!1){(e||!window.customElements.get(t.tagName))&&window.customElements.define(t.tagName,t)}const KA=Symbol(0),qA=Symbol(0),zA=Symbol(0),WA=Symbol(0),GA=Symbol(0),YA=Symbol(0),QA=Symbol(0),XA=Symbol(0),JA=Symbol(0),dt={_:KA,Y:qA,A:zA,Va:WA,X:GA,Z:YA,aa:QA,$:XA,tb:JA},ZA=navigator?.userAgent.toLowerCase()||"",e4=/iphone|ipad|ipod|ios|crios|fxios/i.test(ZA),fb=/(iphone|ipod)/gi.test(navigator?.platform||""),nL=!!window.chrome,t4=!!window.safari||e4;function r1(){return n4()&&Ci(screen.orientation.unlock)}function n4(){return!vn(window.screen.orientation)&&!vn(window.screen.orientation.lock)}function i4(t){return t||(t=document.createElement("video")),t.canPlayType("application/vnd.apple.mpegurl").length>0}function iL(t){return!!document.pictureInPictureEnabled&&!t.disablePictureInPicture}function rL(t){return Ci(t?.webkitSupportsPresentationMode)&&Ci(t?.webkitSetPresentationMode)}async function r4(){const t=document.createElement("video");return t.volume=.5,await aA(0),t.volume===.5}function s4(){return window?.MediaSource??window?.WebKitMediaSource}function o4(){return window?.SourceBuffer??window?.WebKitSourceBuffer}function s1(){const t=s4();if(vn(t))return!1;const e=t&&Ci(t.isTypeSupported)&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=o4(),i=vn(n)||!vn(n.prototype)&&Ci(n.prototype.appendBuffer)&&Ci(n.prototype.remove);return!!e&&!!i}var pb;class o1 extends qf{constructor(){super(...arguments),this.W=[],this[pb]=!1}get length(){return this.W.length}get readonly(){return this[dt.X]}toArray(){return[...this.W]}[(pb=dt.X,Symbol.iterator)](){return this.W.values()}[dt._](e,n){const i=this.W.length;""+i in this||Object.defineProperty(this,i,{get(){return this.W[i]}}),!this.W.includes(e)&&(this.W.push(e),this.dispatchEvent(new $t("add",{detail:e,trigger:n})))}[dt.Y](e,n){const i=this.W.indexOf(e);i>=0&&(this[dt.$]?.(e,n),this.W.splice(i,1),this.dispatchEvent(new $t("remove",{detail:e,trigger:n})))}[dt.A](e){for(const n of[...this.W])this[dt.Y](n,e);this.W=[],this[dt.Z](!1,e),this[dt.aa]?.()}[dt.Z](e,n){this[dt.X]!==e&&(this[dt.X]=e,this.dispatchEvent(new $t("readonly-change",{detail:e,trigger:n})))}}class $u{get length(){return this.ub.length}constructor(e,n){Dn(e)?this.ub=e:!vn(e)&&!vn(n)?this.ub=[[e,n]]:this.ub=[]}start(e){return this.ub[e][0]??1/0}end(e){return this.ub[e][1]??1/0}}function gb(t){if(!t.length)return null;let e=t.start(0);for(let n=1;n<t.length;n++){const i=t.start(n);i<e&&(e=i)}return e}function mb(t){if(!t.length)return null;let e=t.end(0);for(let n=1;n<t.length;n++){const i=t.end(n);i>e&&(e=i)}return e}const Qf=new Ur({audioTracks:[],audioTrack:null,autoplay:!1,autoplayError:null,buffered:new $u,duration:0,canLoad:!1,canFullscreen:!1,canOrientScreen:r1(),canPictureInPicture:!1,canPlay:!1,controls:!1,controlsVisible:!1,crossorigin:null,currentTime:0,ended:!1,error:null,fullscreen:!1,loop:!1,logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new $u,playing:!1,playsinline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetVolume:!1,seekable:new $u,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,volume:1,waiting:!1,get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){return gb(this.buffered)??0},get bufferedEnd(){return mb(this.buffered)??0},get seekableStart(){return gb(this.seekable)??0},get seekableEnd(){return this.canPlay?mb(this.seekable)??1/0:0},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.duration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoplaying:!1,providedTitle:"",inferredTitle:"",providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null}),a4=new Set(["autoplay","canFullscreen","canLoad","canPictureInPicture","canSetVolume","controls","crossorigin","fullscreen","height","logLevel","loop","mediaHeight","mediaWidth","mediaType","muted","orientation","pictureInPicture","playsinline","pointer","providedPoster","preload","providedStreamType","inferredViewType","providedViewType","source","sources","textTrack","textTracks","providedTitle","volume","width"]);function l4(t){Qf.reset(t,e=>!a4.has(e)),zi()}const a1=ar();function We(){return Ct(a1)}const c4=eval,u4=/:\s+'?"?(.*?)'?"?\)/g,h4=/\s+not\s+/g,d4=/\s+and\s+/g,f4=/\s+or\s+/g,p4=/(\d)px/g,Ml=class Ml extends qf{constructor(e,n){super(),this.kc=Be("true"),this.lc=new Set,this.mc=Be(!0),this.$matches=li(()=>{let i=this.kc();if(i==="never")return!1;for(const r of this.lc){const s=this.oc[r](),o=Pt(s)?`'${s}'`:s+"";i=i.replace(zf(r),o)}return c4(`!!(${i})`)&&this.mc()}),this.nc=n,this.oc=e,Iw(i=>{z(this.ua.bind(this)),z(this.qc.bind(this)),this.pc=i})}get query(){return oA(this.nc)}get matches(){return this.$matches()}ua(){const e=this.query;if(e==="")return;if(e==="never"){this.kc.set(e);return}const n=e.trim().split(/\s*,\s*/g),i=n.filter(s=>s.startsWith("@media")).join(","),r=n.filter(s=>!s.startsWith("@media"));if(i.length){const s=window.matchMedia(i.replace(/@media\s/g,"")),o=()=>void this.mc.set(s.matches);o(),fe(s,"change",o)}if(r.length){const s=this.rc(r),o=Object.keys(Qf.record);for(const l of s.matchAll(/\(([-a-zA-Z]+)\s/g)){const a=Vw(l[1]);o.includes(a)&&this.lc.add(a)}this.kc.set(s)}return()=>{this.lc.clear(),this.kc.set("true"),this.mc.set(!0)}}qc(){this.$matches(),this.dispatchEvent(new Event("change"))}rc(e){return e.map(n=>"("+n.replace(u4,' == "$1")').replace(h4,"!").replace(d4," && ").replace(f4," || ").replace(p4,"$1").trim()+")").join(" || ")}destroy(){this.pc()}};Ml.create=e=>{const n=We();return new Ml(n.$state,e)};let ms=Ml;function sL(t,e){const n=new URLSearchParams;for(const i of Object.keys(e))n.set(i,e[i]+"");return t+"?"+n.toString()}function l1(t,e="preconnect"){const n=document.querySelector(`link[href="${t}"]`);if(!or(n))return!0;const i=document.createElement("link");return i.rel=e,i.href=t,i.crossOrigin="true",document.head.append(i),!0}const La={};function oL(t){if(La[t])return La[t].promise;const e=_h(),n=document.querySelector(`script[src="${t}"]`);if(!or(n))return e.resolve(),e.promise;const i=document.createElement("script");return i.src=t,i.onload=()=>{e.resolve(),delete La[t]},i.onerror=()=>{e.reject(),delete La[t]},setTimeout(()=>document.head.append(i),0),e.promise}function Cl(t){return t==="use-credentials"?"include":Pt(t)?"same-origin":void 0}const g4=Symbol(0),m4=Symbol(0),b4=Symbol(0),y4=Symbol(0),v4=Symbol(0),w4=Symbol(0),_4=Symbol(0),Ke={gc:g4,Ya:m4,$b:b4,ac:y4,Za:v4,kb:w4,lb:_4};function x4(t,e){for(let n=0,i=t.length;n<i;n++)if(Tl(t[n],e))return t[n];return null}function Tl(t,e){return e>=t.startTime&&e<t.endTime}function kc(t,e,n){let i=null;function r(){const s=Pt(e)?[e]:e,o=t.toArray().find(l=>s.includes(l.kind)&&l.mode==="showing");if(o!==i){if(!o){n(null),i=null;return}o.readyState==2?n(o):(n(null),o.addEventListener("load",()=>n(o),{once:!0})),i=o}}return r(),fe(t,"mode-change",r)}var bb,yb,vb;class Sh extends qf{constructor(e){super(),this.id="",this.label="",this.language="",this.default=!1,this.ac=!1,this.h=0,this.pb="disabled",this.bc={},this._b=[],this.Yb=[],this.Zb=[],this[bb]=0,this[yb]=null,this[vb]=null;for(const n of Object.keys(e))this[n]=e[n];this.type||(this.type="vtt"),e.content?W(()=>import("./prod-bb9d3c61.js").then(n=>n.d),[]).then(({parseText:n,VTTCue:i,VTTRegion:r})=>{e.type==="json"?this.cc(e.content,i,r):n(e.content,{type:e.type}).then(({cues:s,regions:o})=>{this.Yb=s,this._b=o,this.Ya()})}):e.src||(this[Ke.Ya]=2)}static createId(e){return`id::${e.type}-${e.kind}-${e.src??e.label}`}get metadata(){return this.bc}get regions(){return this._b}get cues(){return this.Yb}get activeCues(){return this.Zb}get readyState(){return this[Ke.Ya]}get mode(){return this.pb}set mode(e){this.setMode(e)}addCue(e,n){let i=0,r=this.Yb.length;for(i=0;i<r&&!(e.endTime<=this.Yb[i].startTime);i++);i===r?this.Yb.push(e):this.Yb.splice(i,0,e),n?.type!=="cuechange"&&this[Ke.kb]?.track.addCue(e),this.dispatchEvent(new $t("add-cue",{detail:e,trigger:n})),Tl(e,this.h)&&this[Ke.$b](this.h,n)}removeCue(e,n){const i=this.Yb.indexOf(e);if(i>=0){const r=this.Zb.includes(e);this.Yb.splice(i,1),this[Ke.kb]?.track.removeCue(e),this.dispatchEvent(new $t("remove-cue",{detail:e,trigger:n})),r&&this[Ke.$b](this.h,n)}}setMode(e,n){this.pb!==e&&(this.pb=e,e==="disabled"?(this.Zb=[],this.dc()):this.readyState===2?this[Ke.$b](this.h,n):this.ec(),this.dispatchEvent(new $t("mode-change",{detail:this,trigger:n})),this[Ke.Za]?.())}[(bb=Ke.Ya,yb=Ke.Za,vb=Ke.kb,Ke.$b)](e,n){if(this.h=e,this.mode==="disabled"||!this.Yb.length)return;const i=[];for(let s=0,o=this.Yb.length;s<o;s++){const l=this.Yb[s];Tl(l,e)&&i.push(l)}let r=i.length!==this.Zb.length;if(!r){for(let s=0;s<i.length;s++)if(!this.Zb.includes(i[s])){r=!0;break}}this.Zb=i,r&&this.dc(n)}[Ke.ac](){this.ac=!0,this.pb!=="disabled"&&this.ec()}async ec(){if(!(!this.ac||!this.src||this[Ke.Ya]>0)){this[Ke.Ya]=1,this.dispatchEvent(new $t("load-start"));try{const{parseResponse:e,VTTCue:n,VTTRegion:i}=await W(()=>import("./prod-bb9d3c61.js").then(o=>o.d),[]),r=this[Ke.gc]?.(),s=fetch(this.src,{headers:this.type==="json"?{"Content-Type":"application/json"}:void 0,credentials:Cl(r)});if(this.type==="json")this.cc(await(await s).text(),n,i);else{const{errors:o,metadata:l,regions:a,cues:c}=await e(s,{type:this.type,encoding:this.encoding});if(o[0]?.code===0)throw o[0];this.bc=l,this._b=a,this.Yb=c}this.Ya()}catch(e){this.fc(e)}}}Ya(){if(this[Ke.Ya]=2,!this.src||this.type!=="vtt"){const n=this[Ke.kb]?.track;if(n)for(const i of this.Yb)n.addCue(i)}const e=new $t("load");this[Ke.$b](this.h,e),this.dispatchEvent(e)}fc(e){this[Ke.Ya]=3,this.dispatchEvent(new $t("error",{detail:e}))}cc(e,n,i){try{const{regions:r,cues:s}=c1(e,n,i);this._b=r,this.Yb=s}catch(r){this.fc(r)}}dc(e){this.dispatchEvent(new $t("cue-change",{trigger:e}))}}const S4=/captions|subtitles/;function en(t){return S4.test(t.kind)}function c1(t,e,n){const i=JSON.parse(t);let r=[],s=[];return i.regions&&n&&(r=i.regions.map(o=>Object.assign(new n,o))),(i.cues||Dn(i))&&(s=(Dn(i)?i:i.cues).filter(o=>xl(o.startTime)&&xl(o.endTime)).map(o=>Object.assign(new e(0,0,""),o))),{regions:r,cues:s}}function ut(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}function Ns(t,e){if(t.hasAttribute("aria-label"))return;function n(){Se(t,"aria-label",e())}z(n)}function u1(t,e,n){for(;e;){if(e===t)return!0;if(n?.(e))break;e=e.parentElement}return!1}function kr(t,e){fe(t,"pointerup",n=>{n.button===0&&e(n)}),fe(t,"keydown",n=>{jw(n)&&e(n)})}function Xf(t){return qa(t)&&(t.touches.length>1||t.changedTouches.length>1)}function bs(t){let e=Ec(),n=window.requestAnimationFrame(()=>{Zt(t,e),n=-1});return()=>void window.cancelAnimationFrame(n)}function h1(t,e,n){let i,r=t,s=t.parentElement,o=t.content.firstElementChild,l=[];!o&&t.firstElementChild&&(t.innerHTML=t.firstElementChild.outerHTML,t.firstElementChild.remove(),o=t.content.firstElementChild);for(let a=0;a<e;a++)i=document.importNode(o,!0),n?.(i,a),s.insertBefore(i,r.nextSibling),l.push(i),r=i;return et(()=>{for(let a=0;a<l.length;a++)l[a].remove()}),l}function Jf(t){const e=document.createElement("template");return e.innerHTML=t,e.content}function Zf(t){return t.cloneNode(!0).firstElementChild}function d1(t,e,n,{offsetVarName:i,xOffset:r,yOffset:s,...o}){if(!t)return;const l=n.replace(" ","-").replace("-center","");if(ln(t,"visibility",e?null:"hidden"),!e)return;const a=c=>n.includes("top")?`calc(-1 * ${c})`:c;return DA(e,t,()=>{IA(e,t,{placement:l,...o}).then(({x:c,y:u})=>{Object.assign(t.style,{top:`calc(${u+"px"} + ${a(s?s+"px":`var(--${i}-y-offset, 0px)`)})`,left:`calc(${c+"px"} + ${r?r+"px":`var(--${i}-x-offset, 0px)`})`})})})}function E4(t){return getComputedStyle(t).animationName!=="none"}const $4=Symbol(0),C4=Symbol(0),Vr={_a:$4,Pa:C4};function Cu(t){return t instanceof Error?t:Error(JSON.stringify(t))}const T4=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,k4=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp4","audio/webm","audio/flac"]),P4=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,A4=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),O4=/\.(m3u8)($|\?)/i,D4=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]);function ep({src:t,type:e}){return Pt(t)&&O4.test(t)||D4.has(e)}function aL(t){return typeof window.MediaStream<"u"&&t instanceof window.MediaStream}function cn(t,e=2){return Number(t.toFixed(e))}function I4(t){return String(t).split(".")[1]?.length??0}function tp(t,e,n){return Math.max(t,Math.min(n,e))}var dn={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},wb=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],_b=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],xb=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],nn=typeof window<"u"&&typeof window.document<"u"?window.document:{},$n="fullscreenEnabled"in nn&&Object.keys(dn)||wb[0]in nn&&wb||_b[0]in nn&&_b||xb[0]in nn&&xb||[],R4={requestFullscreen:function(t){return t[$n[dn.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[$n[dn.requestFullscreen]]},get exitFullscreen(){return nn[$n[dn.exitFullscreen]].bind(nn)},get fullscreenPseudoClass(){return":"+$n[dn.fullscreen]},addEventListener:function(t,e,n){return nn.addEventListener($n[dn[t]],e,n)},removeEventListener:function(t,e,n){return nn.removeEventListener($n[dn[t]],e,n)},get fullscreenEnabled(){return!!nn[$n[dn.fullscreenEnabled]]},set fullscreenEnabled(t){},get fullscreenElement(){return nn[$n[dn.fullscreenElement]]},set fullscreenElement(t){},get onfullscreenchange(){return nn[("on"+$n[dn.fullscreenchange]).toLowerCase()]},set onfullscreenchange(t){return nn[("on"+$n[dn.fullscreenchange]).toLowerCase()]=t},get onfullscreenerror(){return nn[("on"+$n[dn.fullscreenerror]).toLowerCase()]},set onfullscreenerror(t){return nn[("on"+$n[dn.fullscreenerror]).toLowerCase()]=t}},hr=R4;const kl=hr.fullscreenEnabled;class L4 extends zn{constructor(){super(...arguments),this.ba=!1,this.ca=!1}get active(){return this.ca}get supported(){return kl}onConnect(){fe(hr,"fullscreenchange",this.da.bind(this)),fe(hr,"fullscreenerror",this.ea.bind(this)),et(this.V.bind(this))}async V(){kl&&await this.exit()}da(e){const n=Tu(this.el);n!==this.ca&&(n||(this.ba=!1),this.ca=n,this.dispatch("fullscreen-change",{detail:n,trigger:e}))}ea(e){this.ba&&(this.dispatch("fullscreen-error",{detail:null,trigger:e}),this.ba=!1)}async enter(){try{return this.ba=!0,!this.el||Tu(this.el)?void 0:(Sb(),hr.requestFullscreen(this.el))}catch(e){throw this.ba=!1,e}}async exit(){if(!(!this.el||!Tu(this.el)))return Sb(),hr.exitFullscreen()}}function M4(){return kl}function Tu(t){if(hr.fullscreenElement===t)return!0;try{return t.matches(hr.fullscreenPseudoClass)}catch{return!1}}function Sb(){if(!kl)throw Error("[vidstack] no fullscreen API")}const Nl=class Nl extends zn{constructor(){super(...arguments),this.ga=Be(this.ia()),this.fa=Be(!1)}get type(){return this.ga()}get locked(){return this.fa()}get portrait(){return this.ga().startsWith("portrait")}get landscape(){return this.ga().startsWith("landscape")}get supported(){return Nl.supported}onConnect(){if(this.supported)fe(screen.orientation,"change",this.ja.bind(this));else{const e=window.matchMedia("(orientation: landscape)");e.onchange=this.ja.bind(this),et(()=>e.onchange=null)}et(this.V.bind(this))}async V(){this.supported&&this.fa()&&await this.unlock()}ja(e){this.ga.set(this.ia()),this.dispatch("orientation-change",{detail:{orientation:ce(this.ga),lock:this.ha},trigger:e})}async lock(e){ce(this.fa)||this.ha===e||(this.ka(),await screen.orientation.lock(e),this.fa.set(!0),this.ha=e)}async unlock(){ce(this.fa)&&(this.ka(),this.ha=void 0,await screen.orientation.unlock(),this.fa.set(!1))}ka(){if(!this.supported)throw Error("[vidstack] no orientation API")}ia(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}};Nl.supported=r1();let Pl=Nl;class N4{constructor(e=void 0){this.U=null,this.wb=null,this.yb=-1,this.T=e}setTarget(e){this.U=e}getPlayer(e){return this.wb?this.wb:((e??this.U)?.dispatchEvent(new $t("find-media-player",{detail:n=>void(this.wb=n),bubbles:!0,composed:!0})),this.wb)}setPlayer(e){this.wb=e}startLoading(e){this.vb("media-start-loading",e)}play(e){this.vb("media-play-request",e)}pause(e){this.vb("media-pause-request",e)}mute(e){this.vb("media-mute-request",e)}unmute(e){this.vb("media-unmute-request",e)}enterFullscreen(e,n){this.vb("media-enter-fullscreen-request",n,e)}exitFullscreen(e,n){this.vb("media-exit-fullscreen-request",n,e)}lockScreenOrientation(e,n){this.vb("media-orientation-lock-request",n,e)}unlockScreenOrientation(e){this.vb("media-orientation-unlock-request",e)}enterPictureInPicture(e){this.vb("media-enter-pip-request",e)}exitPictureInPicture(e){this.vb("media-exit-pip-request",e)}seeking(e,n){this.vb("media-seeking-request",n,e)}seek(e,n){this.vb("media-seek-request",n,e)}seekToLiveEdge(e){this.vb("media-live-edge-request",e)}changeVolume(e,n){this.vb("media-volume-change-request",n,Math.max(0,Math.min(1,e)))}changeAudioTrack(e,n){this.vb("media-audio-track-change-request",n,e)}changeQuality(e,n){this.vb("media-quality-change-request",n,e)}requestAutoQuality(e){this.changeQuality(-1,e)}changeTextTrackMode(e,n,i){this.vb("media-text-track-change-request",i,{index:e,mode:n})}changePlaybackRate(e,n){this.vb("media-rate-change-request",n,e)}resumeControls(e){this.vb("media-resume-controls-request",e)}pauseControls(e){this.vb("media-pause-controls-request",e)}togglePaused(e){const n=this.getPlayer(e?.target);n&&(n.state.paused?this.play(e):this.pause(e))}toggleControls(e){const n=this.getPlayer(e?.target);n&&(n.controls.showing?n.controls.hide(0,e):n.controls.show(0,e))}toggleMuted(e){const n=this.getPlayer(e?.target);n&&(n.state.muted?this.unmute(e):this.mute(e))}toggleFullscreen(e,n){const i=this.getPlayer(n?.target);i&&(i.state.fullscreen?this.exitFullscreen(e,n):this.enterFullscreen(e,n))}togglePictureInPicture(e){const n=this.getPlayer(e?.target);n&&(n.state.pictureInPicture?this.exitPictureInPicture(e):this.enterPictureInPicture(e))}disableCaptions(e){const n=this.getPlayer(e?.target);if(!n)return;const i=n.state.textTracks,r=n.state.textTrack;if(r){const s=i.indexOf(r);this.changeTextTrackMode(s,"disabled",e)}}toggleCaptions(e){const n=this.getPlayer(e?.target);if(!n)return;const i=n.state.textTracks,r=n.state.textTrack;if(r){const s=i.indexOf(r);this.changeTextTrackMode(s,"disabled",e),this.yb=s}else{let s=this.yb;(!i[s]||!en(i[s]))&&(s=-1),s===-1&&(s=i.findIndex(o=>en(o)&&o.default)),s===-1&&(s=i.findIndex(o=>en(o))),s>=0&&this.changeTextTrackMode(s,"showing",e),this.yb=-1}}vb(e,n,i){const r=new $t(e,{bubbles:!0,composed:!0,detail:i,trigger:n});let s=n?.target||null;s&&s instanceof Oe&&(s=s.el),s=!s||s===document||s===window||s===document.body||this.wb?.el&&s instanceof Node&&!this.wb.el.contains(s)?this.U??this.getPlayer()?.el:s??this.U,this.wb?this.wb.canPlayQueue.zb(e,()=>s?.dispatchEvent(r)):s?.dispatchEvent(r)}xb(e){}}class Fs extends zn{}class F4 extends Fs{constructor(){super(...arguments),this.Db=-2,this.Ab=!1,this.Bb=null,this.defaultDelay=2e3}get showing(){return this.$state.controlsVisible()}show(e=0,n){this.Eb(),this.Ab||this.Cb(!0,e,n)}hide(e=this.defaultDelay,n){this.Eb(),this.Ab||this.Cb(!1,e,n)}pause(e){this.Ab=!0,this.Eb(),this.Cb(!0,0,e)}resume(e){this.Ab=!1,!this.$state.paused()&&this.Cb(!1,this.defaultDelay,e)}onConnect(){z(this.Fb.bind(this));const e=this.Gb.bind(this),n=this.Hb.bind(this);this.listen("can-play",i=>this.show(0,i)),this.listen("play",e),this.listen("pause",n),this.listen("autoplay-fail",n)}Fb(){const{paused:e,started:n,autoplayError:i}=this.$state;if(e()||i()&&!n())return;const r=this.Ib.bind(this);z(()=>{const s=this.$state.pointer(),o=s==="coarse",l=[o?"touchend":"pointerup","keydown"];for(const a of l)fe(this.el,a,r,{passive:!1});o||fe(this.el,"pointermove",r)})}Gb(e){this.show(0,e),this.hide(this.defaultDelay,e)}Hb(e){this.show(0,e)}Eb(){window.clearTimeout(this.Db),this.Db=-1}Ib(e){e.MEDIA_GESTURE||this.Ab||Xf(e)||(Sl(e)&&(e.key==="Escape"?(this.el?.focus(),this.Bb=null):this.Bb&&(e.preventDefault(),requestAnimationFrame(()=>{this.Bb?.focus(),this.Bb=null}))),this.show(0,e),this.hide(this.defaultDelay,e))}Cb(e,n,i){if(n===0){this.mb(e,i);return}this.Db=window.setTimeout(()=>{this.scope&&this.mb(e&&!this.Ab,i)},n)}mb(e,n){this.$state.controlsVisible()!==e&&(this.$state.controlsVisible.set(e),!e&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.Bb=document.activeElement,requestAnimationFrame(()=>this.el?.focus())),this.dispatch("controls-change",{detail:e,trigger:n}))}}class B4{constructor(){this.priority=0,this.ai=!0,this.ya=null,this.Ub=null,this.$h=new Set}canRender(){return!0}attach(e){this.ya=e,e.textTracks.onchange=this.mb.bind(this)}addTrack(e){this.$h.add(e),this.ci(e)}removeTrack(e){e[Ke.kb]?.remove?.(),e[Ke.kb]=null,this.$h.delete(e)}changeTrack(e){const n=e?.[Ke.kb];n&&n.track.mode!=="showing"&&(n.track.mode="showing"),this.Ub=e}setDisplay(e){this.ai=e,this.mb()}detach(){this.ya&&(this.ya.textTracks.onchange=null);for(const e of this.$h)this.removeTrack(e);this.$h.clear(),this.ya=null,this.Ub=null}ci(e){if(!this.ya)return;const n=e[Ke.kb]??=this.di(e);n instanceof HTMLElement&&(this.ya.append(n),n.track.mode=n.default?"showing":"hidden")}di(e){const n=document.createElement("track"),i=e.default||e.mode==="showing",r=e.src&&e.type==="vtt";return n.id=e.id,n.src=r?e.src:"https://cdn.jsdelivr.net/npm/vidstack@next/empty.vtt",n.label=e.label,n.kind=e.kind,n.default=i,e.language&&(n.srclang=e.language),i&&!r&&this.bi(e,n.track),n}bi(e,n){if(!(e.src&&e.type==="vtt"||n.cues?.length))for(const i of e.cues)n.addCue(i)}mb(e){for(const n of this.$h){const i=n[Ke.kb]?.track;if(!i)continue;if(!this.ai){i.mode="disabled";continue}const r=i.mode==="showing";r&&this.bi(n,i),n.setMode(r?"showing":"disabled",e)}}}class U4{constructor(e){this.ya=null,this.Mb=[],this.Ob=!1,this.Jb=null,this.Kb=null,this.b=e;const n=e.textTracks;this.Nb=n,z(this.Rb.bind(this)),et(this.Pb.bind(this)),fe(n,"add",this.ib.bind(this)),fe(n,"remove",this.Sb.bind(this)),fe(n,"mode-change",this.Lb.bind(this))}Rb(){const{$state:e,$iosControls:n}=this.b;this.Ob=e.controls()||n(),this.Lb()}add(e){this.Mb.push(e),this.Lb()}remove(e){e.detach(),this.Mb.splice(this.Mb.indexOf(e),1),this.Lb()}S(e){requestAnimationFrame(()=>{if(this.ya=e,e){this.Jb=new B4,this.Jb.attach(e);for(const n of this.Nb)this.Qb(n)}this.Lb()})}Qb(e){en(e)&&this.Jb?.addTrack(e)}Tb(e){en(e)&&this.Jb?.removeTrack(e)}ib(e){this.Qb(e.detail)}Sb(e){this.Tb(e.detail)}Lb(){if(!this.ya){this.Pb();return}const e=this.Nb.selected;if(this.Ob||e?.[Ke.lb]){this.Kb?.changeTrack(null),this.Jb?.setDisplay(!0),this.Jb?.changeTrack(e);return}if(this.Jb?.setDisplay(!1),this.Jb?.changeTrack(null),!e){this.Kb?.changeTrack(null);return}const n=this.Mb.sort((i,r)=>i.priority-r.priority).find(i=>i.canRender(e));this.Kb!==n&&(this.Kb?.detach(),n?.attach(this.ya),this.Kb=n??null),n?.changeTrack(e)}Pb(){this.Jb?.detach(),this.Jb=null,this.Kb?.detach(),this.Kb=null}}class j4 extends o1{constructor(){super(...arguments),this.ac=!1,this.hc={},this.ic=this.jc.bind(this)}get selected(){return this.W.find(n=>n.mode==="showing"&&en(n))??null}add(e,n){const i=e instanceof Sh,r=i?e:new Sh(e);return this.hc[e.kind]&&e.default&&delete e.default,r.addEventListener("mode-change",this.ic),this[dt._](r,n),r[Ke.gc]=this[Ke.gc],this.ac&&r[Ke.ac](),e.default&&(this.hc[e.kind]=r,r.mode="showing"),this}remove(e,n){if(this.W.includes(e))return e===this.hc[e.kind]&&delete this.hc[e.kind],e.mode="disabled",e[Ke.Za]=null,e.removeEventListener("mode-change",this.ic),this[dt.Y](e,n),this}clear(e){for(const n of[...this.W])this.remove(n,e);return this}getById(e){return this.W.find(n=>n.id===e)??null}getByKind(e){const n=Array.isArray(e)?e:[e];return this.W.filter(i=>n.includes(i.kind))}[Ke.ac](){if(!this.ac){for(const e of this.W)e[Ke.ac]();this.ac=!0}}jc(e){const n=e.detail;if(n.mode==="showing"){const i=en(n)?["captions","subtitles"]:[n.kind];for(const r of this.W)r.mode==="showing"&&r!=n&&i.includes(r.kind)&&(r.mode="disabled")}this.dispatchEvent(new $t("mode-change",{detail:e.detail,trigger:e}))}}const Ys=Symbol(0);class f1 extends o1{get selected(){return this.W.find(e=>e.selected)??null}get selectedIndex(){return this.W.findIndex(e=>e.selected)}[dt.$](e,n){this[dt.Va](e,!1,n)}[dt._](e,n){e[Ys]=!1,Object.defineProperty(e,"selected",{get(){return this[Ys]},set:i=>{this.readonly||(this[dt.tb]?.(),this[dt.Va](e,i))}}),super[dt._](e,n)}[dt.Va](e,n,i){if(n===e[Ys])return;const r=this.selected;e[Ys]=n,(n?r!==e:r===e)&&(r&&(r[Ys]=!1),this.dispatchEvent(new $t("change",{detail:{prev:r,current:this.selected},trigger:i})))}}class H4 extends f1{getById(e){return e===""?null:this.W.find(n=>n.id===e)??null}}class V4 extends f1{constructor(){super(...arguments),this.sc=!1,this.switch="current"}get auto(){return this.sc||this.readonly}[dt.tb](){this[Vr._a](!1)}[dt.aa](e){this[Vr._a](!1,e)}autoSelect(e){this.readonly||this.sc||!this[Vr.Pa]||(this[Vr.Pa]?.(),this[Vr._a](!0,e))}[Vr._a](e,n){this.sc!==e&&(this.sc=e,this.dispatchEvent(new $t("auto-change",{detail:e,trigger:n})))}}function K4(t){return t?.$$PROVIDER_TYPE==="HLS"}function q4(t){return t instanceof HTMLAudioElement}function z4(t){return t instanceof HTMLVideoElement}function W4(t){return q4(t)||z4(t)}const G4={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},Eb=new Set(["Shift","Alt","Meta","Control"]),Y4='button, [role="button"]',$b='input, textarea, select, [contenteditable], [role^="menuitem"]';class Q4 extends Fs{constructor(e){super(),this.tc=null,this.b=e}onConnect(){z(this.xc.bind(this))}xc(){const{keyDisabled:e,keyTarget:n}=this.$props;if(e())return;const i=n()==="player"?this.el:document,r=Be(!1);i===this.el?(this.listen("focusin",()=>r.set(!0)),this.listen("focusout",s=>{this.el.contains(s.target)||r.set(!1)})):(ce(r)||r.set(document.querySelector("[data-media-player]")===this.el),fe(document,"focusin",s=>{const o=s.composedPath().find(l=>l instanceof Element&&l.localName==="media-player");o!==void 0&&r.set(this.el===o)})),z(()=>{r()&&(fe(i,"keyup",this.yc.bind(this)),fe(i,"keydown",this.zc.bind(this)),fe(i,"keydown",this.Ac.bind(this),{capture:!0}))})}yc(e){const n=document.activeElement;if(!e.key||!this.$state.canSeek()||n?.matches($b))return;let{method:i,value:r}=this.vc(e);if(!Pt(r)&&!Dn(r)){r?.callback(e);return}i?.startsWith("seek")&&(e.preventDefault(),e.stopPropagation(),this.tc?(this.wc(e,i==="seekForward"),this.tc=null):(this.b.remote.seek(this.uc,e),this.uc=void 0)),i?.startsWith("volume")&&this.el.querySelector("[data-media-volume-slider]")?.dispatchEvent(new KeyboardEvent("keyup",{key:i==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}))}zc(e){if(!e.key||Eb.has(e.key))return;const n=document.activeElement;if(n?.matches($b)||jw(e)&&n?.matches(Y4))return;let{method:i,value:r}=this.vc(e);if(!Pt(r)&&!Dn(r)){r?.callback(e);return}if(!i&&!e.metaKey&&/[0-9]/.test(e.key)){e.preventDefault(),e.stopPropagation(),this.b.remote.seek(this.$state.duration()/10*Number(e.key),e);return}if(i)switch(e.preventDefault(),e.stopPropagation(),i){case"seekForward":case"seekBackward":this.i(e,i,i==="seekForward");break;case"volumeUp":case"volumeDown":const s=this.el.querySelector("[data-media-volume-slider]");if(s)s.dispatchEvent(new KeyboardEvent("keydown",{key:i==="volumeUp"?"Up":"Down",shiftKey:e.shiftKey,trigger:e}));else{const l=e.shiftKey?.1:.05;this.b.remote.changeVolume(this.$state.volume()+(i==="volumeUp"?+l:-l),e)}break;case"toggleFullscreen":this.b.remote.toggleFullscreen("prefer-media",e);break;case"speedUp":case"slowDown":const o=this.$state.playbackRate();this.b.remote.changePlaybackRate(Math.max(.25,Math.min(2,o+(i==="speedUp"?.25:-.25))),e);break;default:this.b.remote[i]?.(e)}}Ac(e){W4(e.target)&&this.vc(e).method&&e.preventDefault()}vc(e){const n={...this.$props.keyShortcuts(),...this.b.ariaKeys},i=Object.keys(n).find(r=>{const s=n[r],o=Dn(s)?s.join(" "):Pt(s)?s:s?.keys;return(Dn(o)?o:o?.split(" "))?.some(l=>J4(l).replace(/Control/g,"Ctrl").split("+").every(a=>Eb.has(a)?e[a.toLowerCase()+"Key"]:e.key===a.replace("Space"," ")))});return{method:i,value:i?n[i]:null}}Bc(e,n){const i=e.shiftKey?10:5;return this.uc=Math.max(0,Math.min((this.uc??this.$state.currentTime())+(n==="seekForward"?+i:-i),this.$state.duration()))}wc(e,n){this.tc?.dispatchEvent(new KeyboardEvent(e.type,{key:n?"Right":"Left",shiftKey:e.shiftKey,trigger:e}))}i(e,n,i){this.$state.canSeek()&&(this.tc||(this.tc=this.el.querySelector("[data-media-time-slider]")),this.tc?this.wc(e,i):this.b.remote.seeking(this.Bc(e,n),e))}}const X4=["!","@","#","$","%","^","&","*","(",")"];function J4(t){return t.replace(/Shift\+(\d)/g,(e,n)=>X4[n-1])}class Z4 extends zn{constructor(e){super(),this.Cc=e}onAttach(e){const{$props:n,ariaKeys:i}=We(),r=e.getAttribute("aria-keyshortcuts");if(r){i[this.Cc]=r,et(()=>{delete i[this.Cc]});return}const s=n.keyShortcuts()[this.Cc];if(s){const o=Dn(s)?s.join(" "):Pt(s)?s:s?.keys;e.setAttribute("aria-keyshortcuts",Dn(o)?o.join(" "):o)}}}class eO{canPlay({src:e,type:n}){return Pt(e)?T4.test(e)||k4.has(n)||e.startsWith("blob:")&&n==="audio/object":n==="audio/object"}mediaType(){return"audio"}async load(){return new(await W(()=>import("./vidstack-audio-92ad3b76.js"),["assets/vidstack-audio-92ad3b76.js","assets/vidstack-2gN4S9Em-8fb75409.js"])).AudioProvider(this.target)}}class p1{canPlay(e){return Pt(e.src)?P4.test(e.src)||A4.has(e.type)||e.src.startsWith("blob:")&&e.type==="video/object"||ep(e)&&i4():e.type==="video/object"}mediaType(){return"video"}async load(e){return new(await W(()=>import("./vidstack-video-6a594196.js"),["assets/vidstack-video-6a594196.js","assets/vidstack-2gN4S9Em-8fb75409.js"])).VideoProvider(this.target,e)}}class tO{canPlay(e){return Pt(e.src)&&e.type==="video/youtube"}mediaType(){return"video"}async load(e){return new(await W(()=>import("./vidstack-youtube-48f874e0.js"),[])).YouTubeProvider(this.target)}}const Fl=class Fl extends p1{canPlay(e){return Fl.supported&&ep(e)}async load(e){return new(await W(()=>import("./vidstack-hls-8638affd.js"),["assets/vidstack-hls-8638affd.js","assets/vidstack-video-6a594196.js","assets/vidstack-2gN4S9Em-8fb75409.js"])).HLSProvider(this.target,e)}};Fl.supported=s1();let Eh=Fl;const ku=Symbol(0),nO=["autoplay","canFullscreen","canPictureInPicture","canLoad","canPlay","canSeek","ended","fullscreen","loop","live","liveEdge","mediaType","muted","paused","pictureInPicture","playing","playsinline","seeking","started","streamType","viewType","waiting"],iO={autoplay:!1,controls:!1,currentTime:0,crossorigin:null,fullscreenOrientation:"landscape",load:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",controlsDelay:2e3,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:G4,title:""};class rO extends Fs{constructor(e){super(),this.eb=e}async onAttach(e){const n=this.$props.load();if(n==="eager")requestAnimationFrame(this.eb);else if(n==="idle")cA(this.eb);else if(n==="visible"){const i=new IntersectionObserver(r=>{this.scope&&r[0].isIntersecting&&(i.disconnect(),this.eb())});return i.observe(e),i.disconnect.bind(i)}}}class sO{constructor(e,n){this.a=(i,...r)=>{this.$c(new $t(i,{detail:r?.[0],trigger:r?.[1]}))},this.$c=e,this.b=n}async K(e,n){const{$state:i,logger:r}=this.b;if(ce(i.canPlay))return;const s={duration:e?.duration??ce(i.duration),seekable:e?.seekable??ce(i.seekable),buffered:e?.buffered??ce(i.buffered),provider:ce(this.b.$provider)};this.a("can-play",s,n),zi(),i.canPlay()&&i.autoplay()&&!i.started()&&await this.fi(n)}async fi(e){const{player:n,$state:i}=this.b;i.autoplaying.set(!0);const r=new $t("autoplay-attempt",{trigger:e});try{await n.play(r)}catch{}}}class oO{constructor(){this.hi=new Map}zb(e,n){this.hi.has(e)||this.hi.set(e,new Set),this.hi.get(e).add(n)}Qi(e,n){const i=this.hi.get(e);if(i)for(const r of i)n(r);this.hi.delete(e)}li(e){this.hi.delete(e)}lj(e){return this.hi.get(e)?.size??0}A(){this.hi.clear()}}class aO{constructor(){this.i=!1,this.mi=!1,this.ji=!1,this.hi=new oO}}class lO extends Fs{constructor(e,n,i){super(),this.ki=!1,this.Fc=e,this.gi=n,this.b=i,this.Dc=i.$provider,this.ad=new F4,this.ii=new L4,this.$d=new Pl}onAttach(){this.listen("fullscreen-change",this.da.bind(this))}onConnect(){const e=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),n=this.qi.bind(this);for(const i of e)i.startsWith("media-")&&this.listen(i,n);z(this.ri.bind(this)),z(this.si.bind(this)),z(this.ti.bind(this))}qi(e){e.stopPropagation(),ce(this.Dc)&&this[e.type]?.(e)}async Zc(e){const{canPlay:n,paused:i,ended:r,autoplaying:s,seekableStart:o}=this.$state;if(ce(i)){if(e?.type!=="media-play-request"){this.dispatchEvent(this.createEvent("media-play-request",{trigger:e}));return}this.gi.hi.zb("play",e);try{const l=ce(this.Dc);return Pu(l,ce(n)),ce(r)&&(l.currentTime=o()+.1),await l.play()}catch(l){const a=this.createEvent("play-fail",{detail:Cu(l),trigger:e});throw a.autoplay=s(),this.Fc.$c(a),l}}}async Yc(e){const{canPlay:n,paused:i}=this.$state;if(ce(i))return;if(e?.type!=="media-pause-request"){this.dispatchEvent(this.createEvent("media-pause-request",{trigger:e}));return}this.gi.hi.zb("pause",e);const r=ce(this.Dc);return Pu(r,ce(n)),r.pause()}fd(e){const{canPlay:n,live:i,liveEdge:r,canSeek:s,liveSyncPosition:o,seekableEnd:l,userBehindLiveEdge:a}=this.$state;if(a.set(!1),ce(()=>!i()||r()||!s()))return;const c=ce(this.Dc);Pu(c,ce(n)),c.currentTime=o()??l()-2}async bd(e="prefer-media",n){const i=this.ni(e);if(Cb(e,i),!i.active){if(ce(this.$state.pictureInPicture)&&(this.ki=!0,await this.ed(n)),n?.type!=="media-enter-fullscreen-request"){this.dispatchEvent(this.createEvent("media-enter-fullscreen-request",{detail:e,trigger:n}));return}return this.gi.hi.zb("fullscreen",n),i.enter()}}async cd(e="prefer-media",n){const i=this.ni(e);if(Cb(e,i),!!i.active){if(n?.type!=="media-exit-fullscreen-request"){this.dispatchEvent(this.createEvent("media-exit-fullscreen-request",{detail:e,trigger:n}));return}try{this.gi.hi.zb("fullscreen",n);const r=await i.exit();return this.ki&&ce(this.$state.canPictureInPicture)&&await this.dd(),r}finally{this.ki=!1}}}ni(e){const n=ce(this.Dc);return e==="prefer-media"&&this.ii.supported||e==="media"?this.ii:n?.fullscreen}async dd(e){if(this.oi(),!this.$state.pictureInPicture()){if(e?.type!=="media-enter-pip-request"){this.dispatchEvent(this.createEvent("media-enter-pip-request",{trigger:e}));return}return this.gi.hi.zb("pip",e),await this.Dc().pictureInPicture.enter()}}async ed(e){if(this.oi(),!!this.$state.pictureInPicture()){if(e?.type!=="media-exit-pip-request"){this.dispatchEvent(this.createEvent("media-exit-pip-request",{trigger:e}));return}return this.gi.hi.zb("pip",e),await this.Dc().pictureInPicture.exit()}}oi(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}ri(){this.ad.defaultDelay=this.$props.controlsDelay()}si(){const{canLoad:e,canFullscreen:n}=this.$state,i=this.ii.supported||this.Dc()?.fullscreen?.supported||!1;e()&&ce(n)===i||n.set(i)}ti(){const{canLoad:e,canPictureInPicture:n}=this.$state,i=this.Dc()?.pictureInPicture?.supported||!1;e()&&ce(n)===i||n.set(i)}"media-audio-track-change-request"(e){if(this.b.audioTracks.readonly)return;const n=e.detail,i=this.b.audioTracks[n];i&&(this.gi.hi.zb("audioTrack",e),i.selected=!0)}async"media-enter-fullscreen-request"(e){try{await this.bd(e.detail,e)}catch(n){this.ea(n,e)}}async"media-exit-fullscreen-request"(e){try{await this.cd(e.detail,e)}catch(n){this.ea(n,e)}}async da(e){const n=ce(this.$props.fullscreenOrientation),i=e.detail;if(!(vn(n)||!this.$d.supported))if(i){if(this.$d.locked)return;this.dispatch("media-orientation-lock-request",{detail:n,trigger:e})}else this.$d.locked&&this.dispatch("media-orientation-unlock-request",{trigger:e})}ea(e,n){this.Fc.$c(this.createEvent("fullscreen-error",{detail:Cu(e)}))}async"media-orientation-lock-request"(e){try{this.gi.hi.zb("orientation",e),await this.$d.lock(e.detail)}catch{this.gi.hi.li("orientation")}}async"media-orientation-unlock-request"(e){try{this.gi.hi.zb("orientation",e),await this.$d.unlock()}catch{this.gi.hi.li("orientation")}}async"media-enter-pip-request"(e){try{await this.dd(e)}catch(n){this.pi(n,e)}}async"media-exit-pip-request"(e){try{await this.ed(e)}catch(n){this.pi(n,e)}}pi(e,n){this.Fc.$c(this.createEvent("picture-in-picture-error",{detail:Cu(e)}))}"media-live-edge-request"(e){const{live:n,liveEdge:i,canSeek:r}=this.$state;if(!(!n()||i()||!r())){this.gi.hi.zb("seeked",e);try{this.fd()}catch{}}}"media-loop-request"(e){window.requestAnimationFrame(async()=>{try{this.gi.mi=!0,this.gi.ji=!0,await this.Zc(e)}catch{this.gi.mi=!1,this.gi.ji=!1}})}async"media-pause-request"(e){if(!this.$state.paused())try{await this.Yc(e)}catch{this.gi.hi.li("pause")}}async"media-play-request"(e){if(this.$state.paused())try{await this.Zc(e)}catch{}}"media-rate-change-request"(e){this.$state.playbackRate()!==e.detail&&(this.gi.hi.zb("rate",e),this.Dc().playbackRate=e.detail)}"media-quality-change-request"(e){if(this.b.qualities.readonly)return;this.gi.hi.zb("quality",e);const n=e.detail;if(n<0)this.b.qualities.autoSelect(e);else{const i=this.b.qualities[n];i&&(i.selected=!0)}}"media-pause-controls-request"(e){this.gi.hi.zb("controls",e),this.ad.pause(e)}"media-resume-controls-request"(e){this.gi.hi.zb("controls",e),this.ad.resume(e)}"media-seek-request"(e){const{seekableStart:n,seekableEnd:i,ended:r,canSeek:s,live:o,userBehindLiveEdge:l}=this.$state;r()&&(this.gi.ji=!0),this.gi.i=!1,this.gi.hi.li("seeking");const a=Math.min(Math.max(n()+.1,e.detail),i()-.1);!Number.isFinite(a)||!s()||(this.gi.hi.zb("seeked",e),this.Dc().currentTime=a,o()&&e.isOriginTrusted&&Math.abs(i()-a)>=2&&l.set(!0))}"media-seeking-request"(e){this.gi.hi.zb("seeking",e),this.$state.seeking.set(!0),this.gi.i=!0}"media-start-loading"(e){this.$state.canLoad()||(this.gi.hi.zb("load",e),this.Fc.$c(this.createEvent("can-load")))}"media-text-track-change-request"(e){const{index:n,mode:i}=e.detail,r=this.b.textTracks[n];r&&(this.gi.hi.zb("textTrack",e),r.setMode(i,e))}"media-mute-request"(e){this.$state.muted()||(this.gi.hi.zb("volume",e),this.Dc().muted=!0)}"media-unmute-request"(e){const{muted:n,volume:i}=this.$state;n()&&(this.gi.hi.zb("volume",e),this.b.$provider().muted=!1,i()===0&&(this.gi.hi.zb("volume",e),this.Dc().volume=.25))}"media-volume-change-request"(e){const{muted:n,volume:i}=this.$state,r=e.detail;i()!==r&&(this.gi.hi.zb("volume",e),this.Dc().volume=r,r>0&&n()&&(this.gi.hi.zb("volume",e),this.Dc().muted=!1))}}function Pu(t,e){if(!(t&&e))throw Error("[vidstack] media not ready")}function Cb(t,e){if(!e?.supported)throw Error("[vidstack] no fullscreen support")}var g1=cO;function cO(t,e,n){var i=null,r=null,s=function(){i&&(clearTimeout(i),r=null,i=null)},o=function(){var a=r;s(),a&&a()},l=function(){if(!e)return t.apply(this,arguments);var a=this,c=arguments,u=n&&!i;if(s(),r=function(){t.apply(a,c)},i=setTimeout(function(){if(i=null,!u){var h=r;return r=null,h()}},e),u)return r()};return l.cancel=s,l.flush=o,l}var Pc=uO;function uO(t,e,n){var i=null,r=null,s=n&&n.leading,o=n&&n.trailing;s==null&&(s=!0),o==null&&(o=!s),s==!0&&(o=!1);var l=function(){i&&(clearTimeout(i),i=null)},a=function(){var u=r;l(),u&&u()},c=function(){var u=s&&!i,h=this,d=arguments;if(r=function(){return t.apply(h,d)},i||(i=setTimeout(function(){if(i=null,o)return r()},e)),u)return u=!1,r()};return c.cancel=l,c.flush=a,c}const hO=new Set(["autoplay","autoplay-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class dO extends Fs{constructor(e,n){super(),this.ui=new Map,this.zi=!1,this.yi=!1,this.seeking=Pc(i=>{const{seeking:r,currentTime:s,paused:o}=this.$state;r.set(!0),s.set(i.detail),this.vi("seeking",i),o()&&(this.wi=i,this.Bi())},150,{leading:!0}),this.Bi=g1(()=>{if(!this.wi)return;this.zi=!0;const{waiting:i,playing:r}=this.$state;i.set(!0),r.set(!1);const s=this.createEvent("waiting",{trigger:this.wi});this.ui.set("waiting",s),this.dispatch(s),this.wi=void 0,this.zi=!1},300),this.gi=e,this.b=n}onAttach(e){e.setAttribute("aria-busy","true"),this.listen("fullscreen-change",this["fullscreen-change"].bind(this)),this.listen("fullscreen-error",this["fullscreen-error"].bind(this)),this.listen("orientation-change",this["orientation-change"].bind(this))}onConnect(e){this.Ii(),this.Ji(),this.Ki(),this.Li(),et(this.Mi.bind(this))}$c(e){if(!this.scope)return;const n=e.type;this[e.type]?.(e),hO.has(n)&&this.ui.set(n,e),this.dispatch(e)}Li(){this.yi&&(this.b.$provider()?.paused&&requestAnimationFrame(()=>{this.scope&&this.b.remote.play(new $t("dom-connect"))}),this.yi=!1)}Mi(){this.yi||(this.yi=!this.b.$state.paused(),this.b.$provider()?.pause())}xi(){this.Ci(),this.gi.ji=!1,this.gi.mi=!1,this.zi=!1,this.wi=void 0,this.ui.clear()}vi(e,n){this.gi.hi.Qi(e,i=>{n.request=i,n.triggers.add(i)})}Ii(){this.Ai(),this.Di();const e=this.b.textTracks;fe(e,"add",this.Ai.bind(this)),fe(e,"remove",this.Ai.bind(this)),fe(e,"mode-change",this.Di.bind(this))}Ji(){const e=this.b.qualities;fe(e,"add",this.Ei.bind(this)),fe(e,"remove",this.Ei.bind(this)),fe(e,"change",this.Ra.bind(this)),fe(e,"auto-change",this.Ni.bind(this)),fe(e,"readonly-change",this.Oi.bind(this))}Ki(){const e=this.b.audioTracks;fe(e,"add",this.Fi.bind(this)),fe(e,"remove",this.Fi.bind(this)),fe(e,"change",this.Pi.bind(this))}Ai(e){const{textTracks:n}=this.$state;n.set(this.b.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:n(),trigger:e})}Di(e){e&&this.vi("textTrack",e);const n=this.b.textTracks.selected,{textTrack:i}=this.$state;i()!==n&&(i.set(n),this.dispatch("text-track-change",{detail:n,trigger:e}))}Fi(e){const{audioTracks:n}=this.$state;n.set(this.b.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:n(),trigger:e})}Pi(e){const{audioTrack:n}=this.$state;n.set(this.b.audioTracks.selected),this.vi("audioTrack",e),this.dispatch("audio-track-change",{detail:n(),trigger:e})}Ei(e){const{qualities:n}=this.$state;n.set(this.b.qualities.toArray()),this.dispatch("qualities-change",{detail:n(),trigger:e})}Ra(e){const{quality:n}=this.$state;n.set(this.b.qualities.selected),this.vi("quality",e),this.dispatch("quality-change",{detail:n(),trigger:e})}Ni(){this.$state.autoQuality.set(this.b.qualities.auto)}Oi(){this.$state.canSetQuality.set(!this.b.qualities.readonly)}"provider-change"(e){const n=this.b.$provider(),i=e.detail;n?.type!==i?.type&&(n?.destroy?.(),n?.scope?.dispose(),this.b.$provider.set(e.detail),n&&e.detail===null&&this.Gi(e))}"provider-loader-change"(e){}autoplay(e){this.$state.autoplayError.set(null)}"autoplay-fail"(e){this.$state.autoplayError.set(e.detail),this.xi()}"can-load"(e){this.$state.canLoad.set(!0),this.ui.set("can-load",e),this.vi("load",e),this.b.textTracks[Ke.ac]()}"media-type-change"(e){const n=this.ui.get("source-change");n&&e.triggers.add(n);const i=ce(this.$state.viewType);this.$state.mediaType.set(e.detail);const r=ce(this.$state.providedViewType),s=r==="unknown"?e.detail:r;i!==s&&setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(e.detail),this.dispatch("view-type-change",{detail:s,trigger:e}))})},0)}"stream-type-change"(e){const n=this.ui.get("source-change");n&&e.triggers.add(n);const{streamType:i,inferredStreamType:r}=this.$state;r.set(e.detail),e.detail=i()}"rate-change"(e){this.$state.playbackRate.set(e.detail),this.vi("rate",e)}"sources-change"(e){this.$state.sources.set(e.detail)}"source-change"(e){const n=this.ui.get("sources-change");n&&e.triggers.add(n),this.Gi(e),this.ui.set(e.type,e),this.$state.source.set(e.detail),this.el?.setAttribute("aria-busy","true")}Gi(e){this.b.audioTracks[dt.A](e),this.b.qualities[dt.A](e),this.xi(),l4(this.b.$state)}abort(e){const n=this.ui.get("source-change");n&&e.triggers.add(n);const i=this.ui.get("can-load");i&&!e.triggers.hasType("can-load")&&e.triggers.add(i)}"load-start"(e){const n=this.ui.get("source-change");n&&e.triggers.add(n)}error(e){this.$state.error.set(e.detail);const n=this.ui.get("abort");n&&e.triggers.add(n)}"loaded-metadata"(e){const n=this.ui.get("load-start");n&&e.triggers.add(n)}"loaded-data"(e){const n=this.ui.get("load-start");n&&e.triggers.add(n)}"can-play"(e){const n=this.ui.get("loaded-metadata");n&&e.triggers.add(n),this.Hi(e.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(e){this.Hi(e.detail);const n=this.ui.get("can-play");n&&e.triggers.add(n)}Hi(e){const{seekable:n,seekableEnd:i,buffered:r,duration:s,canPlay:o}=this.$state;o.set(!0),r.set(e.buffered),n.set(e.seekable),s.set(i())}"duration-change"(e){const{live:n,duration:i}=this.$state,r=e.detail;n()||i.set(Number.isNaN(r)?0:r)}progress(e){const{buffered:n,seekable:i,live:r,duration:s,seekableEnd:o}=this.$state,l=e.detail;n.set(l.buffered),i.set(l.seekable),r()&&(s.set(o),this.dispatch("duration-change",{detail:o(),trigger:e}))}play(e){const{paused:n,autoplayError:i,ended:r,autoplaying:s,playsinline:o,pointer:l,muted:a}=this.$state;if(e.autoplay=s(),this.gi.mi||!n()){e.stopImmediatePropagation();return}const c=this.ui.get("waiting");c&&e.triggers.add(c),this.vi("play",e),this.ui.set("play",e),n.set(!1),i.set(null),s()&&(this.$c(this.createEvent("autoplay",{detail:{muted:a()},trigger:e})),s.set(!1)),(r()||this.gi.ji)&&(this.gi.ji=!1,r.set(!1),this.$c(this.createEvent("replay",{trigger:e}))),!o()&&l()==="coarse"&&this.b.remote.enterFullscreen("prefer-media",e)}"play-fail"(e){const{muted:n,autoplaying:i}=this.$state,r=this.ui.get("play");r&&e.triggers.add(r),this.vi("play",e);const{paused:s,playing:o}=this.$state;s.set(!0),o.set(!1),this.xi(),this.ui.set("play-fail",e),i()&&(this.$c(this.createEvent("autoplay-fail",{detail:{muted:n(),error:e.detail},trigger:e})),i.set(!1))}playing(e){const n=this.ui.get("play"),i=this.ui.get("seeked");n?e.triggers.add(n):i&&e.triggers.add(i),setTimeout(()=>this.xi(),0);const{paused:r,playing:s,live:o,liveSyncPosition:l,seekableEnd:a,started:c,currentTime:u,seeking:h,ended:d}=this.$state;if(r.set(!1),s.set(!0),h.set(!1),d.set(!1),this.gi.mi){e.stopImmediatePropagation(),this.gi.mi=!1;return}if(o()&&!c()&&u()===0){const g=l()??a()-2;Number.isFinite(g)&&(this.b.$provider().currentTime=g)}this.started(e)}started(e){const{started:n}=this.$state;n()||(n.set(!0),this.$c(this.createEvent("started",{trigger:e})))}pause(e){if(this.el?.isConnected||(this.yi=!0),this.gi.mi){e.stopImmediatePropagation();return}const n=this.ui.get("seeked");n&&e.triggers.add(n),this.vi("pause",e);const{paused:i,playing:r,seeking:s}=this.$state;i.set(!0),r.set(!1),s.set(!1),this.xi()}"time-update"(e){const{currentTime:n,played:i,waiting:r}=this.$state,s=e.detail;n.set(s.currentTime),i.set(s.played),r.set(!1);for(const o of this.b.textTracks)o[Ke.$b](s.currentTime,e)}"volume-change"(e){const{volume:n,muted:i}=this.$state,r=e.detail;n.set(r.volume),i.set(r.muted||r.volume===0),this.vi("volume",e)}seeked(e){const{seeking:n,currentTime:i,paused:r,duration:s,ended:o}=this.$state;if(this.gi.i)n.set(!0),e.stopImmediatePropagation();else if(n()){const l=this.ui.get("waiting");l&&e.triggers.add(l);const a=this.ui.get("seeking");a&&!e.triggers.hasType("seeking")&&e.triggers.add(a),r()&&this.Ci(),n.set(!1),e.detail!==s()&&o.set(!1),i.set(e.detail),this.vi("seeked",e);const c=a?.originEvent;c?.isTrusted&&!/seek/.test(c.type)&&this.started(e)}}waiting(e){this.zi||this.gi.i||(e.stopImmediatePropagation(),this.wi=e,this.Bi())}ended(e){if(this.gi.mi){e.stopImmediatePropagation();return}const{paused:n,playing:i,seeking:r,ended:s}=this.$state;n.set(!0),i.set(!1),r.set(!1),s.set(!0),this.xi()}Ci(){this.Bi.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(e){this.$state.fullscreen.set(e.detail),this.vi("fullscreen",e)}"fullscreen-error"(e){this.vi("fullscreen",e)}"orientation-change"(e){this.vi("orientation",e)}"picture-in-picture-change"(e){this.$state.pictureInPicture.set(e.detail),this.vi("pip",e)}"picture-in-picture-error"(e){this.vi("pip",e)}"title-change"(e){e.stopImmediatePropagation(),this.$state.inferredTitle.set(e.detail)}"poster-change"(e){e.stopImmediatePropagation(),this.$state.inferredPoster.set(e.detail)}}class fO extends Fs{onSetup(){this.Ri(),z(this.Ti.bind(this)),z(this.Hc.bind(this)),z(this.Ui.bind(this)),z(this.z.bind(this)),z(this.Vi.bind(this)),z(this.Rb.bind(this)),z(this.Wi.bind(this)),z(this.Vc.bind(this)),z(this.Xi.bind(this)),z(this.Yi.bind(this)),z(this.Zi.bind(this))}Ri(){const e={poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"};for(const n of Object.keys(this.$props))this.$state[e[n]??n]?.set(this.$props[n]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}Ti(){const{viewType:e,streamType:n,title:i,poster:r}=this.$props;this.$state.providedPoster.set(r()),this.$state.providedStreamType.set(n()),this.$state.providedViewType.set(e()),this.$state.providedTitle.set(this.el?.getAttribute("data-title")||i())}Si(){}Hc(){const{title:e}=this.$state;this.dispatch("title-change",{detail:e()})}Ui(){const e=this.$props.autoplay();this.$state.autoplay.set(e),this.dispatch("autoplay-change",{detail:e})}Vi(){const e=this.$props.loop();this.$state.loop.set(e),this.dispatch("loop-change",{detail:e})}Rb(){const e=this.$props.controls();this.$state.controls.set(e)}z(){const{poster:e}=this.$state;this.dispatch("poster-change",{detail:e()})}Wi(){const e=this.$props.crossorigin();this.$state.crossorigin.set(e===!0?"":e)}Vc(){const e=this.$props.playsinline();this.$state.playsinline.set(e),this.dispatch("playsinline-change",{detail:e})}Yi(){this.dispatch("live-change",{detail:this.$state.live()})}Xi(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}Zi(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}let $h=Be(!1);fe(document,"pointerdown",()=>{$h.set(!1)}),fe(document,"keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||$h.set(!0)});class Wn extends zn{constructor(){super(...arguments),this.cj=Be(!1)}onConnect(e){z(()=>{if(!$h()){this.cj.set(!1),Ma(e,!1),this.listen("pointerenter",this.dj.bind(this)),this.listen("pointerleave",this.ej.bind(this));return}const n=document.activeElement===e;this.cj.set(n),Ma(e,n),this.listen("focus",this.fj.bind(this)),this.listen("blur",this.gj.bind(this))})}focused(){return this.cj()}fj(){this.cj.set(!0),Ma(this.el,!0)}gj(){this.cj.set(!1),Ma(this.el,!1)}dj(){Tb(this.el,!0)}ej(){Tb(this.el,!1)}}function Ma(t,e){Se(t,"data-focus",e),Se(t,"data-hocus",e)}function Tb(t,e){Se(t,"data-hocus",e),Se(t,"data-hover",e)}class pO{constructor(){this.hj=!1,this.ij=_h(),this.hi=new Map}get lj(){return this.hi.size}get mj(){return this.hj}async nj(){this.hj||await this.ij.promise}zb(e,n){if(this.hj){n();return}this.hi.delete(e),this.hi.set(e,n)}Qi(e){this.hi.get(e)?.(),this.hi.delete(e)}Wa(){this.jj(),this.hj=!0,this.hi.size>0&&this.jj()}Xa(){this.hj=!1}A(){this.Xa(),this.hi.clear(),this.kj()}jj(){for(const e of this.hi.keys())this.Qi(e);this.kj()}kj(){this.ij.resolve(),this.ij=_h()}}var gO=Object.defineProperty,mO=Object.getOwnPropertyDescriptor,Et=(t,e,n,i)=>{for(var r=i>1?void 0:i?mO(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&gO(e,n,r),r},xi;const wt=(xi=class extends Oe{constructor(){super(),this.canPlayQueue=new pO,new fO;const e={player:this,scope:Ec(),qualities:new V4,audioTracks:new H4,$provider:Be(null),$props:this.$props,$state:this.$state};e.remote=new N4(void 0),e.remote.setPlayer(this),e.$iosControls=li(this.Pc.bind(this)),e.textTracks=new j4,e.textTracks[Ke.gc]=this.$state.crossorigin,e.textRenderers=new U4(e),e.ariaKeys={},this.b=e,Nn(a1,e),this.orientation=new Pl,new Wn,new Q4(e);const n=new aO;this.Fc=new dO(n,e),this.Ec=new lO(this.Fc,n,e),e.delegate=new sO(this.Fc.$c.bind(this.Fc),e),new rO(this.startLoading.bind(this))}get Dc(){return this.b.$provider()}onSetup(){this.Qc(),z(this.Rc.bind(this)),z(this.Sc.bind(this)),z(this.Fb.bind(this)),z(this.Tc.bind(this)),z(this.Uc.bind(this)),z(this.Vc.bind(this)),z(this.Wc.bind(this))}onAttach(e){e.setAttribute("data-media-player",""),ut(e,"tabindex","0"),ut(e,"role","region"),z(this.Hc.bind(this)),z(this.Ic.bind(this)),fe(e,"find-media-player",this.Xc.bind(this))}onConnect(e){fb&&Se(e,"data-iphone",""),r4().then(this.$state.canSetVolume.set);const n=window.matchMedia("(pointer: coarse)");this.Jc(n),n.onchange=this.Jc.bind(this);const i=new ResizeObserver(ua(this.Gc.bind(this)));i.observe(e),z(this.Gc.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),et(()=>{i.disconnect(),n.onchange=null})}onDestroy(){this.b.player=null,this.canPlayQueue.A()}Hc(){const{title:e,providedTitle:n,live:i,viewType:r}=this.$state,s=i(),o=sA(r()),l=o!=="Unknown"?`${s?"Live ":""}${o}`:s?"Live":"Media";this.el?.setAttribute("data-title",n());const a=e();Se(this.el,"aria-label",a?`${l} - ${a}`:l+" Player"),this.el?.removeAttribute("title")}Ic(){const e=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(e),Se(this.el,"data-orientation",e),this.Gc()}Rc(){this.$state.canPlay()&&this.Dc?this.canPlayQueue.Wa():this.canPlayQueue.Xa()}Qc(){if(xi[ku]){this.setAttributes(xi[ku]);return}const e={"data-captions":function(){const i=this.$state.textTrack();return!!i&&en(i)},"data-ios-controls":function(){return this.b.$iosControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){const{canPlay:i,waiting:r}=this.$state;return!i()||r()},"data-error":function(){const{error:i}=this.$state;return!!i()},"data-autoplay-error":function(){const{autoplayError:i}=this.$state;return!!i()}},n={canPictureInPicture:"can-pip",pictureInPicture:"pip"};for(const i of nO){const r="data-"+(n[i]??zf(i));e[r]=function(){return this.$state[i]()}}delete e.title,xi[ku]=e,this.setAttributes(e)}Xc(e){e.detail(this)}Gc(){if(!this.el)return;const e=this.el.clientWidth,n=this.el.clientHeight;this.$state.width.set(e),this.$state.height.set(n),ln(this.el,"--player-width",e+"px"),ln(this.el,"--player-height",n+"px")}Jc(e){const n=e.matches?"coarse":"fine";Se(this.el,"data-pointer",n),this.$state.pointer.set(n),this.Gc()}Pc(){const{playsinline:e,fullscreen:n}=this.$state;return fb&&!M4()&&this.$state.mediaType()==="video"&&(!e()||n())}get provider(){return this.Dc}get controls(){return this.Ec.ad}get qualities(){return this.b.qualities}get audioTracks(){return this.b.audioTracks}get textTracks(){return this.b.textTracks}get textRenderers(){return this.b.textRenderers}get paused(){return this.Dc?.paused??!0}set paused(e){this.Kc(e)}Fb(){this.Kc(this.$props.paused())}Kc(e){e?this.canPlayQueue.zb("paused",()=>this.Ec.Yc()):this.canPlayQueue.zb("paused",()=>this.Ec.Zc())}get muted(){return this.Dc?.muted??!1}set muted(e){this.Lc(e)}Sc(){this.Lc(this.$props.muted())}Lc(e){this.canPlayQueue.zb("muted",()=>this.Dc.muted=e)}get currentTime(){return this.Dc?.currentTime??0}set currentTime(e){this.Mc(e)}Uc(){this.Mc(this.$props.currentTime())}Mc(e){this.canPlayQueue.zb("currentTime",()=>{const n=this.Dc;e!==n.currentTime&&ce(()=>{const i=Math.min(Math.max(this.$state.seekableStart()+.1,e),this.$state.seekableEnd()-.1);Number.isFinite(i)&&(n.currentTime=i)})})}get volume(){return this.Dc?.volume??1}set volume(e){this.Nc(e)}Tc(){this.Nc(this.$props.volume())}Nc(e){const n=tp(0,e,1);this.canPlayQueue.zb("volume",()=>this.Dc.volume=n)}get playbackRate(){return this.Dc?.playbackRate??1}set playbackRate(e){this.Oc(e)}Wc(){this.Oc(this.$props.playbackRate())}Oc(e){this.canPlayQueue.zb("rate",()=>this.Dc.playbackRate=e)}Vc(){this._c(this.$props.playsinline())}_c(e){this.canPlayQueue.zb("playsinline",()=>this.Dc.playsinline=e)}async play(e){return this.Ec.Zc(e)}async pause(e){return this.Ec.Yc(e)}async enterFullscreen(e,n){return this.Ec.bd(e,n)}async exitFullscreen(e,n){return this.Ec.cd(e,n)}enterPictureInPicture(e){return this.Ec.dd(e)}exitPictureInPicture(e){return this.Ec.ed(e)}seekToLiveEdge(e){this.Ec.fd(e)}startLoading(e){this.b.delegate.a("can-load",void 0,e)}matchQuery(e){return Zt(()=>ms.create(e),this.scope)}destroy(){this.b.remote.setPlayer(null),this.dispatch("destroy")}},xi.props=iO,xi.state=Qf,xi);Et([Fe],wt.prototype,"canPlayQueue",2);Et([Fe],wt.prototype,"provider",1);Et([Fe],wt.prototype,"controls",1);Et([Fe],wt.prototype,"orientation",2);Et([Fe],wt.prototype,"qualities",1);Et([Fe],wt.prototype,"audioTracks",1);Et([Fe],wt.prototype,"textTracks",1);Et([Fe],wt.prototype,"textRenderers",1);Et([Fe],wt.prototype,"paused",1);Et([Fe],wt.prototype,"muted",1);Et([Fe],wt.prototype,"currentTime",1);Et([Fe],wt.prototype,"volume",1);Et([Fe],wt.prototype,"playbackRate",1);Et([It],wt.prototype,"play",1);Et([It],wt.prototype,"pause",1);Et([It],wt.prototype,"enterFullscreen",1);Et([It],wt.prototype,"exitFullscreen",1);Et([It],wt.prototype,"enterPictureInPicture",1);Et([It],wt.prototype,"exitPictureInPicture",1);Et([It],wt.prototype,"seekToLiveEdge",1);Et([It],wt.prototype,"startLoading",1);Et([It],wt.prototype,"matchQuery",1);let bO=wt;function m1(t,e){return fetch(t,e).then(n=>n.text()).then(n=>{const i=yO(n);if(i)return m1(/^https?:/.test(i)?i:new URL(i,t).href,e);const r=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(n)?"on-demand":"live";return r==="live"&&vO(n)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(n)||n.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":r})}function yO(t){const e=t.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split(`
`)[1].trim():null}function vO(t){const e=t.split(`
`);for(const n of e)if(n.startsWith("#EXT-X-TARGETDURATION")){const i=parseFloat(n.split(":")[1]);if(!isNaN(i))return i}return-1}const kb=Symbol(0),b1=new Map;class wO{constructor(e,n,i){this.oj=!1,this.kd=e,this.b=n,this.gd=i;const r=new Eh,s=new p1,o=new eO,l=new tO;this.pj=li(()=>n.$props.preferNativeHLS()?[s,o,r,l]:[r,s,o,l]);const{$state:a}=n;a.sources.set(Pb(n.$props.src()));for(const c of a.sources()){const u=this.pj().find(d=>d.canPlay(c));if(!u)continue;const h=u.mediaType(c);this.b.$state.source.set(c),this.b.$state.mediaType.set(h),this.b.$state.inferredViewType.set(h),this.gd.set(u),this.oj=!0}}get a(){return this.b.delegate.a}connect(){const e=this.gd();this.oj&&(this.qj(this.b.$state.source(),e),this.rj(e),this.oj=!1),z(this.tj.bind(this)),z(this.uj.bind(this)),z(this.vj.bind(this)),z(this.wj.bind(this))}tj(){this.a("sources-change",[...Pb(this.b.$props.src()),...this.kd()])}uj(){const{$state:e}=this.b,n=e.sources(),i=ce(e.source),r=this.sj(i,n);if(n[0]?.src&&!r.src&&!r.type){const{crossorigin:o}=e,l=Cl(o()),a=new AbortController;return Promise.all(n.map(c=>Pt(c.src)&&c.type==="?"?fetch(c.src,{method:"HEAD",credentials:l,signal:a.signal}).then(u=>(c.type=u.headers.get("content-type")||"??",b1.set(c.src,c.type),c)).catch(()=>c):c)).then(c=>{a.signal.aborted||(this.sj(ce(e.source),c),zi())}),()=>a.abort()}zi()}sj(e,n){let i={src:"",type:""},r=null;for(const s of n){const o=ce(this.pj).find(l=>l.canPlay(s));o&&(i=s,r=o)}return Ab(e,i)||this.qj(i,r),r!==ce(this.gd)&&this.rj(r),i}qj(e,n){this.a("source-change",e),this.a("media-type-change",n?.mediaType(e)||"unknown")}rj(e){this.a("provider-change",null),e&&ce(()=>e.preconnect?.(this.b)),this.gd.set(e),this.a("provider-loader-change",e)}vj(){const e=this.b.$provider();if(!(!e||e[kb])){if(this.b.$state.canLoad()){Zt(()=>e.setup(this.b),e.scope),e[kb]=!0;return}ce(()=>e.preconnect?.(this.b))}}wj(){const e=this.b.$provider(),n=this.b.$state.source(),i=ce(this.b.$state.crossorigin);if(!Ab(e?.currentSrc,n)){if(this.b.$state.canLoad()){const r=new AbortController;return ep(n)?s1()||m1(n.src,{credentials:Cl(i),signal:r.signal}).then(s=>{this.a("stream-type-change",s)}).catch(Kf):this.a("stream-type-change","on-demand"),ce(()=>e?.loadSource(n,ce(this.b.$state.preload))),()=>r.abort()}try{Pt(n.src)&&l1(new URL(n.src).origin,"preconnect")}catch{}}}}function Pb(t){return(Dn(t)?t:[!Pt(t)&&"src"in t?t:{src:t}]).map(({src:e,type:n})=>({src:e,type:n??(Pt(e)?b1.get(e):null)??(!Pt(e)||e.startsWith("blob:")?"video/object":e.includes("youtube")?"video/youtube":e.includes("vimeo")?"video/vimeo":"?")}))}function Ab(t,e){return t?.src===e?.src&&t?.type===e?.type}class _O{constructor(e,n){this.xj=[],this.ld=e,this.b=n,z(this.yj.bind(this))}yj(){const e=this.ld();for(const n of this.xj)if(!e.some(i=>i.id===n.id)){const i=n.id&&this.b.textTracks.getById(n.id);i&&this.b.textTracks.remove(i)}for(const n of e){const i=n.id||Sh.createId(n);this.b.textTracks.getById(i)||(n.id=i,this.b.textTracks.add(n))}this.xj=e}}var xO=Object.defineProperty,SO=Object.getOwnPropertyDescriptor,EO=(t,e,n,i)=>{for(var r=i>1?void 0:i?SO(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&xO(e,n,r),r};const hp=class hp extends Oe{constructor(){super(...arguments),this.kd=Be([]),this.ld=Be([]),this.gd=null,this.hd=-1}onSetup(){this.b=We(),this.jd=new wO(this.kd,this.b,this.$state.loader)}onAttach(e){e.setAttribute("data-media-provider","")}onConnect(e){this.jd.connect(),new _O(this.ld,this.b);const n=new ResizeObserver(ua(this.Gc.bind(this)));n.observe(e);const i=new MutationObserver(this.md.bind(this));i.observe(e,{attributes:!0,childList:!0}),this.Gc(),this.md(),et(()=>{n.disconnect(),i.disconnect()})}load(e){window.cancelAnimationFrame(this.hd),this.hd=requestAnimationFrame(()=>this.od(e)),et(()=>{window.cancelAnimationFrame(this.hd)})}od(e){if(!this.scope)return;const n=this.$state.loader(),{$provider:i}=this.b;this.gd===n&&n?.target===e&&ce(i)||(this.nd(),this.gd=n,n&&(n.target=e||null),!(!n||!e)&&n.load(this.b).then(r=>{this.scope&&ce(this.$state.loader)===n&&(r&&ce(()=>{const{muted:s,volume:o,playsinline:l}=this.b.$state;r.muted=s(),r.volume=o(),r.playsinline=l()}),this.b.delegate.a("provider-change",r))}))}onDestroy(){this.gd=null,this.nd()}nd(){this.b.delegate.a("provider-change",null)}Gc(){if(!this.el)return;const e=this.b.player,n=this.el.offsetWidth,i=this.el.offsetHeight;e&&(e.$state.mediaWidth.set(n),e.$state.mediaHeight.set(i),e.el&&(ln(e.el,"--media-width",n+"px"),ln(e.el,"--media-height",i+"px")))}md(){const e=[],n=[],i=this.el.children;for(const r of i)r instanceof HTMLSourceElement?e.push({src:r.src,type:r.type}):r instanceof HTMLTrackElement&&n.push({id:r.id,src:r.src,kind:r.track.kind,language:r.srclang,label:r.label,default:r.default,type:r.getAttribute("data-type")});this.kd.set(e),this.ld.set(n),zi()}};hp.state=new Ur({loader:null});let Al=hp;EO([It],Al.prototype,"load",1);const dp=class dp extends Oe{onSetup(){this.b=We(),z(this.pd.bind(this))}onAttach(e){const{pictureInPicture:n,fullscreen:i}=this.b.$state;ln(e,"pointer-events","none"),ut(e,"role","group"),this.setAttributes({"data-visible":this.id.bind(this),"data-fullscreen":i,"data-pip":n}),z(()=>{this.dispatch("change",{detail:this.id()})}),z(this.qd.bind(this)),z(()=>{const r=i();for(const s of["top","right","bottom","left"])ln(e,`padding-${s}`,r&&`env(safe-area-inset-${s})`)})}qd(){if(!this.el)return;const{$iosControls:e}=this.b,{controls:n}=this.b.$state,i=n()||e();Se(this.el,"aria-hidden",i?"true":null),ln(this.el,"display",i?"none":null)}pd(){const{controls:e}=this.b.player,{hideDelay:n}=this.$props;e.defaultDelay=n()===2e3?this.b.$props.controlsDelay():n()}id(){const{controlsVisible:e}=this.b.$state;return e()}};dp.props={hideDelay:2e3};let Ch=dp;class y1 extends zn{constructor(e){super(),this.Aj=-1,this.Bj=-1,this.zj=null,this.Vd=e,z(this.Cj.bind(this))}onDestroy(){this.zj?.(),this.zj=null}Cj(){const e=this.Vd.rd();if(!e){this.hide();return}const n=this.show.bind(this),i=this.hide.bind(this);this.Vd.Ad(e,n,i)}show(e){window.cancelAnimationFrame(this.Bj),this.Bj=-1,this.zj?.(),this.zj=null,this.Aj=window.setTimeout(()=>{this.Aj=-1;const n=this.Vd.sd();n&&n.style.removeProperty("display"),ce(()=>this.Vd.mb(!0,e))},this.Vd.zd?.()??0)}hide(e){window.clearTimeout(this.Aj),this.Aj=-1,ce(()=>this.Vd.mb(!1,e)),this.Bj=requestAnimationFrame(()=>{this.Bj=-1;const n=this.Vd.sd();if(n){const i=E4(n),r=()=>{n.style.display="none",this.zj=null};if(i){this.zj?.();const s=fe(n,"animationend",r,{once:!0});this.zj=s}else r()}})}}const rs=ar();let $O=0;var Io;let CO=(Io=class extends Oe{constructor(){super(),this.td=`media-tooltip-${++$O}`,this.rd=Be(null),this.sd=Be(null),new Wn;const{showDelay:e}=this.$props;new y1({rd:this.rd,sd:this.sd,zd:e,Ad(n,i,r){fe(n,"touchstart",s=>s.preventDefault(),{passive:!1}),fe(n,"focus",i),fe(n,"blur",r),fe(n,"mouseenter",i),fe(n,"mouseleave",r)},mb:this.yd.bind(this)})}onAttach(e){e.style.setProperty("display","contents")}onSetup(){Nn(rs,{rd:this.rd,sd:this.sd,ud:this.ud.bind(this),vd:this.vd.bind(this),wd:this.wd.bind(this),xd:this.xd.bind(this)})}ud(e){this.rd.set(e);let n=e.getAttribute("data-media-tooltip");n&&this.el?.setAttribute(`data-media-${n}-tooltip`,""),Se(e,"data-describedby",this.td)}vd(e){e.removeAttribute("data-describedby"),e.removeAttribute("aria-describedby"),this.rd.set(null)}wd(e){e.setAttribute("id",this.td),e.style.display="none",ut(e,"role","tooltip"),this.sd.set(e)}xd(e){e.removeAttribute("id"),e.removeAttribute("role"),this.sd.set(null)}yd(e){const n=this.rd(),i=this.sd();n&&Se(n,"aria-describedby",e?this.td:null);for(const r of[this.el,n,i])r&&Se(r,"data-visible",e)}},Io.props={showDelay:500},Io);const fp=class fp extends Oe{constructor(){super(),new Wn;const{placement:e}=this.$props;this.setAttributes({"data-placement":e})}onAttach(e){this.Cd(e),Object.assign(e.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(e){this.Cd(e);const n=Ct(rs);et(()=>n.xd(e)),et(bs(()=>{this.connectScope&&z(this.Dd.bind(this))}))}Cd(e){Ct(rs).wd(e)}Dd(){const{placement:e,offset:n,alignOffset:i}=this.$props;return d1(this.el,this.Ed(),e(),{offsetVarName:"media-tooltip",xOffset:i(),yOffset:n()})}Ed(){return Ct(rs).rd()}};fp.props={placement:"top center",offset:0,alignOffset:0};let Th=fp;const pp=class pp extends zn{constructor(e){super(),this.Vd=e,new Wn,e.Jd&&new Z4(e.Jd)}onSetup(){const{disabled:e}=this.$props;this.setAttributes({"data-pressed":this.Vd.Gd,"aria-pressed":this.Dj.bind(this),"aria-disabled":()=>e()?"true":null})}onAttach(e){ut(e,"tabindex","0"),ut(e,"role","button"),ut(e,"type","button")}onConnect(e){kr(e,this.Ej.bind(this))}Dj(){return El(this.Vd.Gd())}Fj(e){eA(this.Vd.Gd)&&this.Vd.Gd.set(n=>!n)}Ej(e){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){e.stopImmediatePropagation();return}e.preventDefault(),(this.Vd.Hd??this.Fj).call(this,e)}};pp.props={disabled:!1};let xn=pp;var TO=Object.defineProperty,kO=Object.getOwnPropertyDescriptor,PO=(t,e,n,i)=>{for(var r=i>1?void 0:i?kO(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&TO(e,n,r),r};const gp=class gp extends Oe{constructor(){super(),this.Fd=Be(!1),new xn({Gd:this.Fd})}get pressed(){return this.Fd()}};gp.props={disabled:!1,defaultPressed:!1};let Ol=gp;PO([Fe],Ol.prototype,"pressed",1);var Ro;let AO=(Ro=class extends Oe{constructor(){super(),new xn({Gd:this.Gd.bind(this),Jd:"togglePaused",Hd:this.Hd.bind(this)})}onSetup(){this.b=We();const{paused:e,ended:n}=this.b.$state;this.setAttributes({"data-paused":e,"data-ended":n})}onAttach(e){e.setAttribute("data-media-tooltip","play"),Ns(e,this.Id.bind(this))}Hd(e){const n=this.b.remote;this.Gd()?n.pause(e):n.play(e)}Gd(){const{paused:e}=this.b.$state;return!e()}Id(){const{paused:e}=this.b.$state;return e()?"Play":"Pause"}},Ro.props=xn.props,Ro);function OO(t){return t?"true":"false"}function Bn(t){return()=>OO(t())}var Lo;let DO=(Lo=class extends Oe{constructor(){super(),new xn({Gd:this.Gd.bind(this),Jd:"toggleCaptions",Hd:this.Hd.bind(this)})}onSetup(){this.b=We(),this.setAttributes({"data-active":this.Gd.bind(this),"data-supported":()=>!this.Kd(),"aria-hidden":Bn(this.Kd.bind(this))})}onAttach(e){e.setAttribute("data-media-tooltip","caption"),Ns(e,this.Id.bind(this))}Hd(e){this.b.remote.toggleCaptions(e)}Gd(){const{textTrack:e}=this.b.$state,n=e();return!!n&&en(n)}Kd(){const{textTracks:e}=this.b.$state;return e().filter(en).length==0}Id(){const{textTrack:e}=this.b.$state;return e()?"Closed-Captions Off":"Closed-Captions On"}},Lo.props=xn.props,Lo);var Mo;let IO=(Mo=class extends Oe{constructor(){super(),new xn({Gd:this.Gd.bind(this),Jd:"toggleFullscreen",Hd:this.Hd.bind(this)})}onSetup(){this.b=We();const{fullscreen:e}=this.b.$state,n=this.Ld.bind(this);this.setAttributes({"data-active":e,"data-supported":n,"aria-hidden":Bn(()=>!n())})}onAttach(e){e.setAttribute("data-media-tooltip","fullscreen"),Ns(e,this.Id.bind(this))}Hd(e){const n=this.b.remote,i=this.$props.target();this.Gd()?n.exitFullscreen(i,e):n.enterFullscreen(i,e)}Gd(){const{fullscreen:e}=this.b.$state;return e()}Ld(){const{canFullscreen:e}=this.b.$state;return e()}Id(){const{fullscreen:e}=this.b.$state;return e()?"Exit Fullscreen":"Enter Fullscreen"}},Mo.props={...xn.props,target:"prefer-media"},Mo);var No;let RO=(No=class extends Oe{constructor(){super(),new xn({Gd:this.Gd.bind(this),Jd:"toggleMuted",Hd:this.Hd.bind(this)})}onSetup(){this.b=We(),this.setAttributes({"data-muted":this.Gd.bind(this),"data-state":this.Md.bind(this)})}onAttach(e){e.setAttribute("data-media-mute-button",""),e.setAttribute("data-media-tooltip","mute"),Ns(e,this.Id.bind(this))}Hd(e){const n=this.b.remote;this.Gd()?n.unmute(e):n.mute(e)}Gd(){const{muted:e,volume:n}=this.b.$state;return e()||n()===0}Id(){return this.Gd()?"Unmute":"Mute"}Md(){const{muted:e,volume:n}=this.b.$state,i=n();if(e()||i===0)return"muted";if(i>=.5)return"high";if(i<.5)return"low"}},No.props=xn.props,No);var Fo;let LO=(Fo=class extends Oe{constructor(){super(),new xn({Gd:this.Gd.bind(this),Jd:"togglePictureInPicture",Hd:this.Hd.bind(this)})}onSetup(){this.b=We();const{pictureInPicture:e}=this.b.$state,n=this.Ld.bind(this);this.setAttributes({"data-active":e,"data-supported":n,"aria-hidden":Bn(()=>!n())})}onAttach(e){e.setAttribute("data-media-tooltip","pip"),Ns(e,this.Id.bind(this))}Hd(e){const n=this.b.remote;this.Gd()?n.exitPictureInPicture(e):n.enterPictureInPicture(e)}Gd(){const{pictureInPicture:e}=this.b.$state;return e()}Ld(){const{canPictureInPicture:e}=this.b.$state;return e()}Id(){const{pictureInPicture:e}=this.b.$state;return e()?"Exit Picture In Picture":"Enter Picture In Picture"}},Fo.props=xn.props,Fo);const mp=class mp extends Oe{constructor(){super(),new Wn}onSetup(){this.b=We();const{seeking:e}=this.b.$state,{seconds:n}=this.$props,i=this.Ld.bind(this);this.setAttributes({seconds:n,"data-seeking":e,"data-supported":i,"aria-hidden":Bn(()=>!i())})}onAttach(e){ut(e,"tabindex","0"),ut(e,"role","button"),ut(e,"type","button"),e.setAttribute("data-media-tooltip","seek"),Ns(e,this.Id.bind(this))}onConnect(e){kr(e,this.Hd.bind(this))}Ld(){const{canSeek:e}=this.b.$state;return e()}Id(){const{seconds:e}=this.$props;return`Seek ${e()>0?"forward":"backward"} ${e()} seconds`}Hd(e){const{seconds:n,disabled:i}=this.$props;if(i())return;const{currentTime:r}=this.b.$state,s=r()+n();this.b.remote.seek(s,e)}};mp.props={disabled:!1,seconds:30};let kh=mp;const bp=class bp extends Oe{constructor(){super(),new Wn}onSetup(){this.b=We();const{disabled:e}=this.$props,{live:n,liveEdge:i}=this.b.$state,r=()=>!n();this.setAttributes({"data-edge":i,"data-hidden":r,"aria-disabled":Bn(()=>e()||i()),"aria-hidden":Bn(r)})}onAttach(e){ut(e,"tabindex","0"),ut(e,"role","button"),ut(e,"type","button"),e.setAttribute("data-media-tooltip","live")}onConnect(e){kr(e,this.Hd.bind(this))}Hd(e){const{disabled:n}=this.$props,{liveEdge:i}=this.b.$state;n()||i()||this.b.remote.seekToLiveEdge(e)}};bp.props={disabled:!1};let Ph=bp;const np=new Ur({min:0,max:100,value:0,pointerValue:0,focused:!1,dragging:!1,pointing:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return Ob(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return Ob(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function Ob(t,e,n){const i=e-t,r=n-t;return i>0?r/i:0}function MO(t,e,n,i){return tp(t,cn(n,I4(i)),e)}function NO(t,e,n,i){const r=tp(0,n,1),s=e-t,o=s*r,l=o/i,a=i*l;return t+a}const Db={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class FO extends zn{constructor(e,n){super(),this.Dc=null,this.Gj=null,this.Ij=null,this.Wj=Pc(i=>{this.Hj(this.Jj(i),i)},20,{leading:!0}),this.Vd=e,this.b=n}onConnect(){if(z(this.Pj.bind(this)),z(this.Qj.bind(this)),this.Vd.Fe){const e=this.b.player.el?.querySelector("media-provider,[data-media-provider]");e&&(this.Dc=e,fe(e,"touchstart",this.Rj.bind(this),{passive:!0}),fe(e,"touchmove",this.Sj.bind(this),{passive:!1}))}}Rj(e){this.Gj=e.touches[0]}Sj(e){if(or(this.Gj)||Xf(e))return;const n=e.touches[0],i=n.clientX-this.Gj.clientX,r=n.clientY-this.Gj.clientY,s=this.$state.dragging();!s&&Math.abs(r)>20||s||Math.abs(i)>20&&(this.Gj=n,this.Ij=this.$state.value(),this.Kj(this.Ij,e))}Pj(){this.Vd.Ud()||(this.listen("focus",this.fj.bind(this)),this.listen("pointerenter",this.dj.bind(this)),this.listen("pointermove",this.Tj.bind(this)),this.listen("pointerleave",this.ej.bind(this)),this.listen("pointerdown",this.Uj.bind(this)),this.listen("keydown",this.zc.bind(this)),this.listen("keyup",this.yc.bind(this)))}Qj(){this.Vd.Ud()||!this.$state.dragging()||(fe(document,"pointerup",this.Vj.bind(this)),fe(document,"pointermove",this.Wj.bind(this)),t4&&fe(document,"touchmove",this.Xj.bind(this),{passive:!1}))}fj(){this.Hj(this.$state.value())}Lj(e,n){const{value:i,min:r,max:s,dragging:o}=this.$state,l=Math.max(r(),Math.min(e,s()));i.set(l);const a=this.createEvent("value-change",{detail:l,trigger:n});if(this.dispatch(a),this.Vd.oe?.(a),o()){const c=this.createEvent("drag-value-change",{detail:l,trigger:n});this.dispatch(c),this.Vd.ne?.(c)}}Hj(e,n){const{pointerValue:i,dragging:r}=this.$state;i.set(e),this.dispatch("pointer-value-change",{detail:e,trigger:n}),r()&&this.Lj(e,n)}Jj(e){let n,i=this.el.getBoundingClientRect(),{min:r,max:s}=this.$state;if(this.$props.orientation()==="vertical"){const{bottom:o,height:l}=i;n=(o-e.clientY)/l}else if(this.Gj&&xl(this.Ij)){const{width:o}=this.Dc.getBoundingClientRect(),l=(e.clientX-this.Gj.clientX)/o,a=s()-r(),c=a*Math.abs(l);n=(l<0?this.Ij-c:this.Ij+c)/a}else{const{left:o,width:l}=i;n=(e.clientX-o)/l}return Math.max(r(),Math.min(s(),this.Vd.Td(NO(r(),s(),n,this.Vd.Rd()))))}dj(e){this.$state.pointing.set(!0)}Tj(e){const{dragging:n}=this.$state;n()||this.Hj(this.Jj(e),e)}ej(e){this.$state.pointing.set(!1)}Uj(e){if(e.button!==0)return;const n=this.Jj(e);this.Kj(n,e),this.Hj(n,e)}Kj(e,n){const{dragging:i}=this.$state;if(i())return;i.set(!0),this.b.remote.pauseControls(n);const r=this.createEvent("drag-start",{detail:e,trigger:n});this.dispatch(r),this.Vd.we?.(r)}Nj(e,n){const{dragging:i}=this.$state;if(!i())return;i.set(!1),this.b.remote.resumeControls(n);const r=this.createEvent("drag-end",{detail:e,trigger:n});this.dispatch(r),this.Vd.te?.(r),this.Gj=null,this.Ij=null}zc(e){const{key:n}=e,{min:i,max:r}=this.$state;let s;if(n==="Home"||n==="PageUp"?s=i():n==="End"||n==="PageDown"?s=r():!e.metaKey&&/[0-9]/.test(n)&&(s=(r()-i())/10*Number(n)),!vn(s)){this.Hj(s,e),this.Lj(s,e);return}const o=this.Oj(e);if(vn(o))return;const l=n===this.Mj;!this.$state.dragging()&&l&&this.Kj(o,e),this.Hj(o,e),l||this.Lj(o,e),this.Mj=n}yc(e){this.Mj="";const{dragging:n,value:i}=this.$state;if(!n())return;const r=this.Oj(e)??i();this.Hj(r),this.Nj(r,e)}Oj(e){const{key:n,shiftKey:i}=e;if(!Object.keys(Db).includes(n))return;e.preventDefault(),e.stopPropagation();const{shiftKeyMultiplier:s}=this.$props,{value:o,min:l,max:a}=this.$state,c=this.Vd.Rd(),u=this.Vd.Sd(),h=i?u*s():u,d=Number(Db[n]),g=h*d,p=(o()+g)/c;return Math.max(l(),Math.min(a(),Number((c*p).toFixed(3))))}Vj(e){if(e.button!==0)return;const n=this.Jj(e);this.Hj(n,e),this.Nj(n,e)}Xj(e){e.preventDefault()}}const Po=ar(()=>({})),ip=ar(),yp=class yp extends zn{constructor(e){super(),this._d=ua((n,i)=>{this.el?.style.setProperty("--slider-fill",n+"%"),this.el?.style.setProperty("--slider-pointer",i+"%")}),this.Vd=e}onSetup(){this.b=We();const e=new Wn;e.attach(this),this.$state.focused=e.focused.bind(e),fi(Po)||Nn(Po,{default:"value"}),Nn(ip,{$d:this.$props.orientation,ae:this.Vd.Ud,be:Be(null)}),z(this.Pd.bind(this)),z(this.Xd.bind(this)),this.Yd(),new FO(this.Vd,this.b).attach(this)}onAttach(e){ut(e,"role","slider"),ut(e,"tabindex","0"),ut(e,"autocomplete","off"),z(this.Wd.bind(this))}Pd(){const{dragging:e,value:n,min:i,max:r}=this.$state;ce(e)||n.set(MO(i(),r(),n(),this.Vd.Rd()))}Xd(){if(!this.Vd.Ud())return;const{dragging:e,pointing:n}=this.$state;e.set(!1),n.set(!1)}Zd(){return El(this.Vd.Ud())}Yd(){const{orientation:e}=this.$props,{dragging:n,active:i,pointing:r}=this.$state;this.setAttributes({"data-dragging":n,"data-pointing":r,"data-active":i,"aria-disabled":this.Zd.bind(this),"aria-valuemin":this.$state.min,"aria-valuemax":this.$state.max,"aria-valuenow":this.Vd.Nd,"aria-valuetext":this.Vd.Od,"aria-orientation":e})}Wd(){const{fillPercent:e,pointerPercent:n}=this.$state;this._d(cn(e(),3),cn(n(),3))}};yp.props={disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};let ir=yp;const Bl=class Bl extends Oe{constructor(){super(),new ir({Rd:this.$props.step,Sd:this.$props.keyStep,Td:Math.round,Ud:this.$props.disabled,Nd:this.Nd.bind(this),Od:this.Od.bind(this)})}onSetup(){z(this.Pd.bind(this)),z(this.Qd.bind(this))}Nd(){const{value:e}=this.$state;return Math.round(e())}Od(){const{value:e,max:n}=this.$state;return cn(e()/n()*100,2)+"%"}Pd(){const{value:e}=this.$props;this.$state.value.set(e())}Qd(){const{min:e,max:n}=this.$props;this.$state.min.set(e()),this.$state.max.set(n())}};Bl.props={...ir.props,min:0,max:100,value:0},Bl.state=np;let Pr=Bl;const vi=new Map,Au=new Set,Ou=new Set;class rp{constructor(e,n){this.$cues=Be([]),this.$src=e,this.b=n,z(this.Pg.bind(this)),Ou.add(this),et(()=>Ou.delete(this))}static create(e){const n=We();return new rp(e,n)}Pg(){const{canLoad:e}=this.b.$state;if(!e())return;const n=new AbortController,{crossorigin:i}=this.b.$state,r=this.$src();if(r){if(vi.has(r)){const s=vi.get(r);if(vi.delete(r),vi.set(r,s),vi.size>30){const o=vi.keys().next().value;vi.delete(o)}this.$cues.set(vi.get(r))}else Au.has(r)||(Au.add(r),W(()=>import("./prod-bb9d3c61.js").then(s=>s.d),[]).then(async({parseResponse:s})=>{try{const o=await fetch(r,{signal:n.signal,credentials:Cl(i())});if(o.headers.get("content-type")==="application/json"){try{const{cues:c}=c1(await o.text(),window.VTTCue);this.Og(r,c)}catch{}return}const{cues:a}=await s(o);this.Og(r,a)}catch{}}));return()=>{n.abort(),this.$cues.set([])}}}Og(e,n){this.$cues.set(n);for(const i of Ou)ce(i.$src)===e&&i.$cues.set(n);vi.set(e,n),Au.delete(e)}}const Ul=class Ul extends Oe{constructor(){super(...arguments),this.Gg=[],this.Hg=ua(this.Ng.bind(this))}onSetup(){this.b=We(),this.Fg=rp.create(this.$props.src),this.setAttributes({"data-loading":this.fe.bind(this),"data-error":this.de.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":Bn(this.$state.hidden)})}onConnect(e){z(this.Cg.bind(this)),z(this.he.bind(this)),z(this.bb.bind(this)),z(this.Ig.bind(this)),z(this.Jg.bind(this))}Cg(){const e=this.$state.img();e&&(fe(e,"load",this.cb.bind(this)),fe(e,"error",this.Ja.bind(this)))}bb(){const{src:e,loading:n,error:i}=this.$state;e(),n.set(!0),i.set(null)}cb(){const{loading:e,error:n}=this.$state;e.set(!1),n.set(null),this.Hg()}Ja(e){const{loading:n,error:i}=this.$state;n.set(!1),i.set(e)}fe(){const{loading:e,hidden:n}=this.$state;return!n()&&e()}de(){const{error:e}=this.$state;return!or(e())}he(){const{hidden:e}=this.$state,{duration:n}=this.b.$state,i=this.Fg.$cues();e.set(this.de()||!Number.isFinite(n())||i.length===0)}ce(){return this.$props.time()}Ig(){const e=this.ce(),{activeCue:n}=this.$state,{duration:i}=this.b.$state,r=this.Fg.$cues();if(!r||!Number.isFinite(i())){n.set(null);return}n.set(x4(r,e))}Jg(){let{activeCue:e}=this.$state,n=e(),i=ce(this.$props.src);if(/^https?:/.test(i)||(i=location.href),!i||!n){this.$state.src.set(""),this.Kg();return}const[r,s=""]=(n.text||"").split("#");this.$state.coords.set(this.Lg(s)),this.$state.src.set(this.Mg(r,i)),this.Hg()}Mg(e,n){return/^https?:/.test(e)?e:new URL(e,n).href}Lg(e){const[n,i]=e.split("="),r={},s=i?.split(",");if(!n||!i)return null;for(let o=0;o<n.length;o++)r[n[o]]=+s[o];return r}Ng(){if(!this.scope)return;const e=this.$state.img(),n=this.$state.coords();if(!e||!this.el)return;const i=n?.w??e.naturalWidth,r=n?.h??e.naturalHeight,{maxWidth:s,maxHeight:o,minWidth:l,minHeight:a}=getComputedStyle(this.el),c=Math.max(parseInt(l)/i,parseInt(a)/r),u=Math.min(parseInt(s)/i,parseInt(o)/r),h=u<1?u:c>1?c:1;this.Eg(this.el,"--thumbnail-width",`${i*h}px`),this.Eg(this.el,"--thumbnail-height",`${r*h}px`),this.Eg(e,"width",`${e.naturalWidth*h}px`),this.Eg(e,"height",`${e.naturalHeight*h}px`),this.Eg(e,"transform",n?`translate(-${n.x*h}px, -${n.y*h}px)`:""),this.Eg(e,"max-width","none")}Eg(e,n,i){e.style.setProperty(n,i),this.Gg.push(()=>e.style.removeProperty(n))}Kg(){for(const e of this.Gg)e();this.Gg=[]}};Ul.props={src:"",time:0},Ul.state=new Ur({src:"",img:null,coords:null,activeCue:null,loading:!1,error:null,hidden:!1});let Ah=Ul;var BO=Object.defineProperty,UO=Object.getOwnPropertyDescriptor,jO=(t,e,n,i)=>{for(var r=i>1?void 0:i?UO(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&BO(e,n,r),r};const jl=class jl extends Oe{get video(){return this.$state.video()}onSetup(){this.b=We(),this.wa=ca(Pr.state),this.setAttributes({"data-loading":this.fe.bind(this),"data-hidden":this.$state.hidden,"data-error":this.de.bind(this),"aria-hidden":Bn(this.$state.hidden)})}onAttach(e){z(this.ge.bind(this)),z(this.gb.bind(this)),z(this.he.bind(this)),z(this.ie.bind(this)),z(this.je.bind(this))}ge(){const e=this.$state.video();e&&(e.readyState>=2&&this.ee(),fe(e,"canplay",this.ee.bind(this)),fe(e,"error",this.Ja.bind(this)))}gb(){const{src:e}=this.$state,{canLoad:n}=this.b.$state;e.set(n()?this.$props.src():null)}fe(){const{canPlay:e,hidden:n}=this.$state;return!e()&&!n()}de(){const{error:e}=this.$state;return!or(e)}he(){const{src:e,hidden:n}=this.$state,{canLoad:i,duration:r}=this.b.$state;n.set(i()&&(!e()||this.de()||!Number.isFinite(r())))}ie(){const{src:e,canPlay:n,error:i}=this.$state;e(),n.set(!1),i.set(null)}ee(e){const{canPlay:n,error:i}=this.$state;n.set(!0),i.set(null),this.dispatch("can-play",{trigger:e})}Ja(e){const{canPlay:n,error:i}=this.$state;n.set(!1),i.set(e),this.dispatch("error",{trigger:e})}je(){const{video:e,canPlay:n}=this.$state,{duration:i}=this.b.$state,{pointerRate:r}=this.wa,s=e();n()&&s&&Number.isFinite(i())&&Number.isFinite(r())&&(s.currentTime=r()*i())}};jl.props={src:null},jl.state=new Ur({video:null,src:null,canPlay:!1,error:null,hidden:!1});let Dl=jl;jO([Fe],Dl.prototype,"video",1);function Du(t,e){const n=String(t),i=n.length;if(i<e){const s=e-i;return`${"0".repeat(s)}${t}`}return n}function v1(t){const e=Math.trunc(t/3600),n=Math.trunc(t%3600/60),i=Math.trunc(t%60),r=Number((t-Math.trunc(t)).toPrecision(3));return{hours:e,minutes:n,seconds:i,fraction:r}}function Ac(t,e=null,n=null,i=!1){const{hours:r,minutes:s,seconds:o}=v1(t),l=e?Du(r,2):r,a=n||or(n)&&t>=3600?Du(s,2):s,c=Du(o,2);return r>0||i?`${l}:${a}:${c}`:`${a}:${c}`}function Oh(t){const e=[],{hours:n,minutes:i,seconds:r}=v1(t);return n>0&&e.push(`${n} hour`),i>0&&e.push(`${i} min`),(r>0||e.length===0)&&e.push(`${r} sec`),e.join(" ")}var HO=Object.defineProperty,VO=Object.getOwnPropertyDescriptor,KO=(t,e,n,i)=>{for(var r=i>1?void 0:i?VO(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&HO(e,n,r),r};const vp=class vp extends Oe{onSetup(){this.wa=ca(Pr.state),this.ke=Ct(Po),this.le=li(this.getValueText.bind(this))}getValueText(){const{type:e,format:n,decimalPlaces:i,padHours:r,padMinutes:s,showHours:o}=this.$props,{value:l,pointerValue:a,min:c,max:u}=this.wa,h=n()??this.ke.default,d=e()==="current"?l():a();if(h==="percent"){const g=u()-c(),p=d/g*100;return(this.ke.percent??cn)(p,i())+""}else return h==="time"?(this.ke.time??Ac)(d,r(),s(),o()):this.ke.value?.(d)??d.toFixed(2)}};vp.props={type:"pointer",format:null,showHours:!1,padHours:null,padMinutes:null,decimalPlaces:2};let Il=vp;KO([It],Il.prototype,"getValueText",1);var Bo;let qO=(Bo=class extends Oe{onSetup(){this.wa=Ct(ip);const{active:e}=ca(Pr.state);this.setAttributes({"data-visible":e})}onAttach(e){Object.assign(e.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(e){const{be:n}=this.wa;n.set(e),et(()=>n.set(null)),z(this.me.bind(this));const i=new ResizeObserver(this.me.bind(this));i.observe(e),et(()=>i.disconnect())}me(){const{ae:e,$d:n}=this.wa;if(e())return;const i=this.el,{offset:r,noClamp:s}=this.$props;zO(i,{clamp:!s(),offset:r(),orientation:n()})}},Bo.props={offset:0,noClamp:!1},Bo);function zO(t,{clamp:e,offset:n,orientation:i}){const{width:r,height:s}=t.getBoundingClientRect(),o={top:null,right:null,bottom:null,left:null};if(o[i==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${n}px))`,i==="horizontal"){const l=r/2;if(!e)o.left=`calc(var(--slider-pointer) - ${l}px)`;else{const a=`max(0px, calc(var(--slider-pointer) - ${l}px))`,c=`calc(100% - ${r}px)`;o.left=`min(${a}, ${c})`}}else{const l=s/2;if(!e)o.bottom=`calc(var(--slider-pointer) - ${l}px)`;else{const a=`max(${l}px, calc(var(--slider-pointer) - ${l}px))`,c=`calc(100% - ${s}px)`;o.bottom=`min(${a}, ${c})`}}Object.assign(t.style,o)}var xs;let WO=(xs=class extends Oe{constructor(){super(...arguments),this.pe=Pc(this.qe.bind(this),25)}onSetup(){this.b=We(),Nn(Po,{default:"percent"}),new ir({Rd:this.$props.step,Sd:this.$props.keyStep,Ud:this.$props.disabled,Td:Math.round,Nd:this.Nd.bind(this),Od:this.Od.bind(this),ne:this.ne.bind(this),oe:this.oe.bind(this)}).attach(this),z(this.Tc.bind(this))}onAttach(e){e.setAttribute("data-media-volume-slider",""),ut(e,"aria-label","Volume");const{canSetVolume:n}=this.b.$state;this.setAttributes({"data-supported":n,"aria-hidden":Bn(()=>!n())})}Nd(){const{value:e}=this.$state;return Math.round(e())}Od(){const{value:e,max:n}=this.$state;return cn(e()/n()*100,2)+"%"}Tc(){const{muted:e,volume:n}=this.b.$state,i=e()?0:n()*100;this.$state.value.set(i),this.dispatch("value-change",{detail:i})}qe(e){if(!e.trigger)return;const n=cn(e.detail/100,3);this.b.remote.changeVolume(n,e)}oe(e){this.pe(e)}ne(e){this.pe(e)}},xs.props={...ir.props,keyStep:5,shiftKeyMultiplier:2},xs.state=np,xs);var Ss;let w1=(Ss=class extends Oe{constructor(){super(),this.ve=Be(null),this.ue=!1,new ir({Fe:!0,Rd:this.Rd.bind(this),Sd:this.Sd.bind(this),Ud:this.Ud.bind(this),Td:this.Td,Nd:this.Nd.bind(this),Od:this.Od.bind(this),we:this.we.bind(this),ne:this.ne.bind(this),te:this.te.bind(this),oe:this.oe.bind(this)})}onSetup(){this.b=We(),Nn(Po,{default:"time",value:this.xe.bind(this),time:this.ye.bind(this)}),this.setAttributes({"data-chapters":this.ze.bind(this)}),this.setStyles({"--slider-progress":this.Ae.bind(this)}),z(this.Uc.bind(this)),z(this.Be.bind(this))}onAttach(e){e.setAttribute("data-media-time-slider",""),ut(e,"aria-label","Seek")}onConnect(e){z(this.Ce.bind(this)),kc(this.b.textTracks,"chapters",this.ve.set)}Ae(){const{bufferedEnd:e,duration:n}=this.b.$state;return cn(Math.min(e()/Math.max(n(),1),1)*100,3)+"%"}ze(){const{duration:e}=this.b.$state;return this.ve()?.cues.length&&Number.isFinite(e())&&e()>0}Be(){this.se=Pc(this.i.bind(this),this.$props.seekingRequestThrottle())}Uc(){const{currentTime:e}=this.b.$state,{value:n,dragging:i}=this.$state,r=this.De(e());ce(i)||(n.set(r),this.dispatch("value-change",{detail:r}))}Ce(){const e=this.b.player.el,{be:n}=Ct(ip);e&&n()&&Se(e,"data-preview",this.$state.active())}i(e,n){this.b.remote.seeking(e,n)}Ee(e,n,i){this.se.cancel();const{live:r}=this.b.$state;if(r()&&n>=99){this.b.remote.seekToLiveEdge(i);return}this.b.remote.seek(e,i)}we(e){const{pauseWhileDragging:n}=this.$props;if(n()){const{paused:i}=this.b.$state;this.ue=!i(),this.b.remote.pause(e)}}ne(e){this.se(this.re(e.detail),e)}te(e){const n=e.detail;this.Ee(this.re(n),n,e);const{pauseWhileDragging:i}=this.$props;i()&&this.ue&&(this.b.remote.play(e),this.ue=!1)}oe(e){const{dragging:n}=this.$state;n()||!e.trigger||this.te(e)}Rd(){const e=this.$props.step()/this.b.$state.duration()*100;return Number.isFinite(e)?e:1}Sd(){const e=this.$props.keyStep()/this.b.$state.duration()*100;return Number.isFinite(e)?e:1}Td(e){return cn(e,3)}Ud(){const{canSeek:e}=this.b.$state;return this.$props.disabled()||!e()}Nd(){const{value:e}=this.$state;return Math.round(e())}Od(){const e=this.re(this.$state.value()),{duration:n}=this.b.$state;return Number.isFinite(e)?`${Oh(e)} out of ${Oh(n())}`:"live"}re(e){const{duration:n}=this.b.$state;return Math.round(e/100*n())}De(e){const{liveEdge:n,duration:i}=this.b.$state,r=Math.max(0,Math.min(1,n()?1:Math.min(e,i())/i()));return Number.isNaN(r)?0:Number.isFinite(r)?r*100:100}xe(e){const n=this.re(e),{live:i,duration:r}=this.b.$state;return Number.isFinite(n)?(i()?n-r():n).toFixed(0):"LIVE"}ye(e,n,i,r){const s=this.re(e),{live:o,duration:l}=this.b.$state,a=o()?s-l():s;return Number.isFinite(s)?`${a<0?"-":""}${Ac(Math.abs(a),n,i,r)}`:"LIVE"}},Ss.props={...ir.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,seekingRequestThrottle:100},Ss.state=np,Ss);var GO=Object.defineProperty,YO=Object.getOwnPropertyDescriptor,Oc=(t,e,n,i)=>{for(var r=i>1?void 0:i?YO(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&GO(e,n,r),r},Uo;let da=(Uo=class extends Oe{constructor(){super(...arguments),this.Ie=null,this.Ge=[],this.Ke=Be(null),this.He=Be([]),this.Je=Be(-1),this.Le=Be(-1),this.Oe=0,this._e=ua(e=>{let n,i=this.He();for(let r=this.Oe;r<this.Ge.length;r++)if(n=this.Qe(i[r],e),this.Ge[r]?.style.setProperty("--chapter-progress",n+"%"),n<100){this.Oe=r;break}}),this.$e=li(this.af.bind(this)),this.cf=g1(()=>{const e=ce(this.Ke);!this.scope||!e||!e.cues.length||(this.He.set(this.bf(e.cues)),this.Je.set(0))},150,!0)}get cues(){return this.He()}get activeCue(){return this.He()[this.Je()]||null}get activePointerCue(){return this.He()[this.Le()]||null}onSetup(){this.b=We(),this.Me=ca(w1.state)}onAttach(e){kc(this.b.textTracks,"chapters",this.Re.bind(this)),z(this.Ue.bind(this))}onConnect(){et(()=>this.A.bind(this))}onDestroy(){this.Re(null)}setRefs(e){if(this.Ge=e,this.Ne?.dispose(),this.Ge.length===1){const n=this.Ge[0];n.style.width="100%",n.style.setProperty("--chapter-fill","var(--slider-fill)"),n.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.Ge.length>0&&Zt(()=>this.Ve(),this.Ne=_l())}Re(e){ce(this.Ke)!==e&&(this.A(),this.Ke.set(e))}A(){this.Ge=[],this.He.set([]),this.Je.set(-1),this.Le.set(-1),this.Oe=0,this.Ne?.dispose()}Ve(){this.Ge.length&&(z(this.We.bind(this)),z(this.Xe.bind(this)),z(this.Ye.bind(this)),z(this.Ze.bind(this)))}We(){let e,n=this.He(),i=n[n.length-1].endTime;for(let r=0;r<n.length;r++)e=n[r],this.Ge[r]&&(this.Ge[r].style.width=cn((e.endTime-e.startTime)/i*100,3)+"%")}Xe(){let{liveEdge:e,ended:n}=this.b.$state,{fillPercent:i,value:r}=this.Me,s=this.He(),o=e(),l=ce(this.Je),a=s[l],c=o?this.He.length-1:this.Se(a&&a.startTime<=ce(r)?l:0,i());o||n()||!a?this.Pe(0,s.length,"100%"):c>l?this.Pe(l,c,"100%"):c<l&&this.Pe(c+1,l+1,"0%");const u=o?"100%":this.Qe(s[c],i())+"%";this.Te(this.Ge[c],u),this.Je.set(c)}Ye(){let{pointing:e,pointerPercent:n}=this.Me;if(!e()){this.Le.set(-1);return}const i=this.Se(0,n());this.Le.set(i)}Pe(e,n,i){for(let r=e;r<n;r++)this.Te(this.Ge[r],i)}Te(e,n){e&&e.style.setProperty("--chapter-fill",n)}Se(e,n){let i=0,r=this.He();for(let s=e;s<r.length;s++)if(i=this.Qe(r[s],n),i>=0&&i<100)return s;return 0}Ze(){this._e(this.$e())}af(){const{bufferedEnd:e,duration:n}=this.b.$state;return cn(Math.min(e()/Math.max(n(),1),1),3)*100}Qe(e,n){const i=this.He();if(i.length===0)return 0;const r=i[i.length-1],s=e.startTime/r.endTime*100,o=e.endTime/r.endTime*100;return Math.max(0,cn(n>=o?100:(n-s)/(o-s)*100,3))}bf(e){const n=[];e[0].startTime!==0&&n.push(new window.VTTCue(0,e[0].startTime,""));for(let i=0;i<e.length-1;i++){const r=e[i],s=e[i+1];if(n.push(r),s){const o=s.startTime-r.endTime;o>0&&n.push(new window.VTTCue(r.endTime,r.endTime+o,""))}}return n.push(e[e.length-1]),n}Ue(){if(!this.scope)return;const{disabled:e}=this.$props;if(e())return;const n=this.Ke();if(n){const i=this.cf.bind(this);i(),et(fe(n,"add-cue",i)),et(fe(n,"remove-cue",i))}return this.Ie=this.df(),this.Ie&&z(this.ef.bind(this)),()=>{this.Ie&&(this.Ie.textContent="",this.Ie=null)}}ef(){const e=this.activePointerCue||this.activeCue;this.Ie&&(this.Ie.textContent=e?.text||"")}ff(){let e=this.el;for(;e&&e.getAttribute("role")!=="slider";)e=e.parentElement;return e}df(){const e=this.ff();return e?e.querySelector('[data-part="chapter-title"]'):null}},Uo.props={disabled:!1},Uo);Oc([Fe],da.prototype,"cues",1);Oc([Fe],da.prototype,"activeCue",1);Oc([Fe],da.prototype,"activePointerCue",1);Oc([It],da.prototype,"setRefs",1);const zt=ar(),QO=["a[href]","[tabindex]","input","select","button"].map(t=>`${t}:not([aria-hidden])`).join(","),Ib=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class XO{constructor(e){this.dg=0,this.Zj=null,this.Yj=[],this.Vd=e}get W(){return this.Yj}Bf(e){return fe(e,"focus",this.fj.bind(this)),this.Zj=e,et(()=>{this.Zj=null}),this}Ad(){this.Zj&&(this.Lb(),fe(this.Zj,"keyup",this.yc.bind(this)),fe(this.Zj,"keydown",this.zc.bind(this)),et(()=>{this.dg=0,this.Yj=[]}))}Lb(){this.dg=0,this.Yj=this.bk()}Tf(e=this.ak()){const n=this.Yj[e],i=this.Vd.Nf();n&&i&&requestAnimationFrame(()=>{i.scrollTop=n.offsetTop-i.offsetHeight/2+n.offsetHeight/2})}_j(e){this.dg=e,this.Yj[e]?.focus(),this.Tf(e)}ak(){return this.Yj.findIndex(e=>e.getAttribute("aria-checked")==="true")}fj(){this.Lb(),setTimeout(()=>{const e=this.ak();this._j(e>=0?e:0)},100)}yc(e){Ib.has(e.key)&&(e.stopPropagation(),e.preventDefault())}zc(e){if(Ib.has(e.key))switch(e.stopPropagation(),e.preventDefault(),e.key){case"Escape":this.Vd.Of(e);break;case"Tab":this._j(this.$j(e.shiftKey?-1:1));break;case"ArrowUp":this._j(this.$j(-1));break;case"ArrowDown":this._j(this.$j(1));break;case"Home":case"PageUp":this._j(0);break;case"End":case"PageDown":this._j(this.Yj.length-1);break}}$j(e){let n=this.dg;do n=(n+e+this.Yj.length)%this.Yj.length;while(this.Yj[n]?.offsetParent===null);return n}bk(){if(!this.Zj)return[];const e=this.Zj.querySelectorAll(QO),n=[],i=r=>r.getAttribute("role")==="menu";for(const r of e)r instanceof HTMLElement&&r.offsetParent!==null&&u1(this.Zj,r,i)&&n.push(r);return n}}var JO=Object.defineProperty,ZO=Object.getOwnPropertyDescriptor,fa=(t,e,n,i)=>{for(var r=i>1?void 0:i?ZO(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&JO(e,n,r),r};let eD=0;var jo;let Bs=(jo=class extends Oe{constructor(){super(),this.gf=Be(!1),this.ae=Be(!1),this.rd=Be(null),this.sd=Be(null),this.qf=Be(!1),this.jf=new Set,this.kf=null,this.Jf=this.Kf.bind(this),this.Hf=this.Lf.bind(this),this.If=this.Mf.bind(this);const{showDelay:e}=this.$props;this.lf=new y1({rd:this.rd,sd:this.sd,zd:e,Ad:(n,i,r)=>{kr(n,o=>{this.gf()?r(o):i(o)});const s=this.yf();s&&kr(s,o=>{o.stopPropagation(),r(o)})},mb:this.zf.bind(this)})}get triggerElement(){return this.rd()}get contentElement(){return this.sd()}get isSubmenu(){return!!this.of}onSetup(){this.b=We();const e=++eD;this.mf=`media-menu-${e}`,this.nf=`media-menu-button-${e}`,this.hf=new XO({Nf:this.Af.bind(this),Of:this.close.bind(this)}),fi(zt)&&(this.of=Ct(zt)),this.setAttributes({"data-open":this.gf,"data-submenu":this.isSubmenu,"data-disabled":this.Ud.bind(this)}),Nn(zt,{Pf:this.rd,gf:this.gf,Qf:Be(""),rf:this.rf.bind(this),sf:this.sf.bind(this),tf:this.tf.bind(this),uf:this.uf.bind(this),vf:this.vf.bind(this),pf:this.pf.bind(this)})}onAttach(e){e.style.setProperty("display","contents"),this.hf.Bf(e)}onConnect(e){z(this.Cf.bind(this)),this.isSubmenu&&this.of?.pf(this),requestAnimationFrame(()=>{this.Gc()})}onDestroy(){this.rd.set(null),this.sd.set(null),this.kf=null}Cf(){const e=this.Df();this.Gc(),this.wf(e),e&&(z(()=>{const{height:n}=this.b.$state,i=this.sd();i&&ln(i,"--player-height",n()+"px")}),this.hf.Ad(),this.listen("pointerup",this.Ef.bind(this)),fe(window,"pointerup",this.Ff.bind(this)))}sf(e){const n=e.el,i=this.isSubmenu,r=Bn(this.Ud.bind(this));ut(n,"tabindex",i?"-1":"0"),ut(n,"role",i?"menuitem":"button"),Se(n,"id",this.nf),Se(n,"aria-haspopup","menu"),Se(n,"aria-expanded","false"),Se(n,"data-submenu",this.isSubmenu),this.isSubmenu||this.xf(n),z(()=>{Se(n,"data-open",this.gf()),Se(n,"aria-disabled",r())}),this.rd.set(n),et(()=>{this.rd.set(null)})}tf(e){const n=e.el;n.style.setProperty("display","none"),Se(n,"id",this.mf),ut(n,"role","menu"),ut(n,"tabindex","-1"),Se(n,"data-submenu",this.isSubmenu),this.sd.set(n),et(()=>this.sd.set(null)),this.isSubmenu||this.xf(n),z(()=>{Se(n,"data-open",this.gf())}),this.hf.Bf(n),this.wf(!1),requestAnimationFrame(this.Gc.bind(this))}uf(e){this.kf=e}xf(e){fe(e,"click",n=>n.stopPropagation()),fe(e,"pointerup",n=>n.stopPropagation())}wf(e){const n=ce(this.sd);n&&Se(n,"aria-hidden",El(!e))}vf(e){this.qf.set(e)}zf(e,n){if(n?.stopPropagation(),this.gf()===e)return;if(this.Ud()){e&&this.lf.hide(n);return}const i=this.rd(),r=this.sd();if(i&&(Se(i,"aria-controls",e&&this.mf),Se(i,"aria-expanded",El(e))),r&&Se(r,"aria-labelledby",e&&this.nf),this.gf.set(e),this.Gf(n),zi(),Sl(n)){e?r?.focus():i?.focus();for(const s of[this.el,r])s&&s.setAttribute("data-keyboard","")}else for(const s of[this.el,r])s&&s.removeAttribute("data-keyboard");this.dispatch(e?"open":"close",{trigger:n}),e?(!this.isSubmenu&&this.b.activeMenu!==this&&(this.b.activeMenu?.close(n),this.b.activeMenu=this),this.kf?.Rf?.(n)):(this.isSubmenu?setTimeout(()=>{for(const s of this.jf)s.close(n)},300):this.b.activeMenu=null,this.kf?.Sf?.(n)),e&&!Sl(n)&&requestAnimationFrame(()=>{this.hf.Lb(),setTimeout(()=>{this.hf.Tf()},100)})}Df(){return!this.Ud()&&this.gf()}Ud(){return this.ae()||this.qf()}rf(e){this.ae.set(e)}Ef(e){e.stopPropagation()}Ff(e){if(this.isSubmenu)return setTimeout(this.close.bind(this,e),800);this.close(e)}yf(){const e=this.el.querySelector('[data-part="close-target"]');return u1(this.el,e,n=>n.getAttribute("role")==="menu")?e:null}Af(){if(this.isSubmenu){let e=this.el;for(;e&&e.tagName!=="media-menu"&&e.hasAttribute("data-submenu");)e=e.parentNode;return e}else return ce(this.sd)||null}Gf(e){this.isSubmenu||(this.gf()?this.b.remote.pauseControls(e):this.b.remote.resumeControls(e))}pf(e){this.jf.add(e),fe(e,"open",this.Hf),fe(e,"close",this.If),et(this.Jf)}Kf(e){this.jf.delete(e)}Lf(e){for(const n of this.jf)if(n!==e.target)for(const i of[n.el,n.triggerElement])i?.setAttribute("aria-hidden","true");requestAnimationFrame(()=>{this.Gc()})}Mf(){for(const e of this.jf)for(const n of[e.el,e.triggerElement])n?.setAttribute("aria-hidden","false");requestAnimationFrame(()=>{this.Gc()})}Gc(){const e=ce(this.sd);if(!e)return;let{paddingTop:n,paddingBottom:i,borderTopWidth:r,borderBottomWidth:s}=getComputedStyle(e),o=parseFloat(n)+parseFloat(i)+parseFloat(r)+parseFloat(s),l=[...e.children];for(const a of l)a instanceof HTMLElement&&a.style.display==="contents"?l.push(...a.children):a.nodeType===3?o+=parseInt(window.getComputedStyle(a).fontSize,10):o+=a.offsetHeight||0;requestAnimationFrame(()=>{e&&(Se(e,"data-resizing",""),setTimeout(()=>{e&&Se(e,"data-resizing",!1)},400),ln(e,"--menu-height",o+"px"))})}open(e){ce(this.gf)||(this.lf.show(e),zi())}close(e){ce(this.gf)&&(this.lf.hide(e),zi())}},jo.props={showDelay:0},jo);fa([Fe],Bs.prototype,"triggerElement",1);fa([Fe],Bs.prototype,"contentElement",1);fa([Fe],Bs.prototype,"isSubmenu",1);fa([It],Bs.prototype,"open",1);fa([It],Bs.prototype,"close",1);var tD=Object.defineProperty,nD=Object.getOwnPropertyDescriptor,iD=(t,e,n,i)=>{for(var r=i>1?void 0:i?nD(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&tD(e,n,r),r};const wp=class wp extends Oe{constructor(){super(),new Wn}get expanded(){return this.Uf?.gf()??!1}onSetup(){this.Uf=Ct(zt)}onAttach(e){this.Uf.sf(this),z(this.Xd.bind(this)),ut(e,"type","button")}onConnect(e){const n=Array.from(e.querySelectorAll('[data-part="hint"]')).pop();n&&z(()=>{const i=this.Uf.Qf();i&&(n.textContent=i)}),kr(e,i=>{this.dispatch("select",{trigger:i})})}Xd(){this.Uf.vf(this.$props.disabled())}};wp.props={disabled:!1};let Ao=wp;iD([Fe],Ao.prototype,"expanded",1);const _p=class _p extends Oe{constructor(){super(...arguments),this.U=null}onSetup(){this.b=We(),Nn(za,{Cd:this.Wf.bind(this)})}onAttach(e){e.style.setProperty("display","contents")}onConnect(e){}onDestroy(){this.U?.remove(),this.U=null}Wf(e){this.Vf(!1),this.U=e,bs(()=>{bs(()=>{this.connectScope&&z(this.Xd.bind(this))})})}Xd(){const{fullscreen:e}=this.b.$state,{disabled:n}=this.$props,i=n();this.Vf(i==="fullscreen"?!e():!i)}Vf(e){if(!this.U)return;let n=this.Xf(this.$props.container());if(!n)return;const i=this.U.parentElement===n;Se(this.U,"data-portal",e),e?i||(this.U.remove(),n.append(this.U)):i&&this.U.parentElement===n&&(this.U.remove(),this.el?.append(this.U))}Xf(e){return e instanceof HTMLElement?e:e?document.querySelector(e):document.body}};_p.props={container:null,disabled:!1};let Dh=_p;const za=ar(),xp=class xp extends Oe{constructor(){super(),new Wn;const{placement:e}=this.$props;this.setAttributes({"data-placement":e})}onAttach(e){if(this.Uf=Ct(zt),this.Uf.tf(this),fi(za)){const n=Ct(za);n&&(Nn(za,null),n.Cd(e),et(()=>n.Cd(null)))}}onConnect(e){z(this.Dd.bind(this))}Dd(){if(!this.el)return;const e=this.$props.placement();if(e){Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});const{offset:n,alignOffset:i}=this.$props;return d1(this.el,this.Bd(),e,{offsetVarName:"media-menu",xOffset:i(),yOffset:n()})}else this.el.removeAttribute("style"),this.el.style.display="none"}Bd(){return this.Uf.Pf()}};xp.props={placement:null,offset:0,alignOffset:0};let Ih=xp;const Rh=ar();class Us extends zn{constructor(){super(...arguments),this.ck=new Set,this.cg=Be(""),this.M=null,this.gk=this.mb.bind(this)}get Yf(){return Array.from(this.ck).map(e=>e.cg())}get value(){return this.cg()}set value(e){this.mb(e)}onSetup(){Nn(Rh,{add:this.ek.bind(this),remove:this.fk.bind(this)})}onAttach(e){fi(zt)||ut(e,"role","radiogroup"),this.setAttributes({value:this.cg})}onDestroy(){this.ck.clear()}ek(e){this.ck.has(e)||(this.ck.add(e),e.$f=this.gk,e._f(e.cg()===this.cg()))}fk(e){e.$f=null,this.ck.delete(e)}mb(e,n){const i=ce(this.cg);if(!e||e===i)return;const r=this.dk(i),s=this.dk(e);r?._f(!1,n),s?._f(!0,n),this.cg.set(e),this.oe?.(e,n)}dk(e){for(const n of this.ck)if(e===ce(n.cg))return n;return null}}var rD=Object.defineProperty,sD=Object.getOwnPropertyDescriptor,_1=(t,e,n,i)=>{for(var r=i>1?void 0:i?sD(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&rD(e,n,r),r};const Sp=class Sp extends Oe{constructor(){super(),this.M=new Us,this.M.oe=this.oe.bind(this)}get values(){return this.M.Yf}get value(){return this.M.value}set value(e){this.M.value=e}onSetup(){z(this.Pd.bind(this))}Pd(){this.M.value=this.$props.value()}oe(e,n){const i=this.createEvent("change",{detail:e,trigger:n});this.dispatch(i)}};Sp.props={value:""};let Oo=Sp;_1([Fe],Oo.prototype,"values",1);_1([Fe],Oo.prototype,"value",1);var oD=Object.defineProperty,aD=Object.getOwnPropertyDescriptor,lD=(t,e,n,i)=>{for(var r=i>1?void 0:i?aD(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&oD(e,n,r),r};const Ep=class Ep extends Oe{constructor(){super(),this.Zf=Be(!1),this.M={cg:this.$props.value,_f:this._f.bind(this),$f:null},new Wn}get checked(){return this.Zf()}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.Zf,"aria-checked":Bn(this.Zf)})}onAttach(e){const n=fi(zt);ut(e,"tabindex",n?"-1":"0"),ut(e,"role",n?"menuitemradio":"radio"),z(this.Pd.bind(this))}onConnect(e){this.ag(),kr(e,this.Hd.bind(this)),et(this.V.bind(this))}V(){Zt(()=>{Ct(Rh).remove(this.M)},this.connectScope)}ag(){Ct(Rh).add(this.M)}Pd(){const{value:e}=this.$props,n=e();ce(this.Zf)&&this.M.$f?.(n)}Hd(e){ce(this.Zf)||(this.mb(!0,e),this.bg(e),this.M.$f?.(ce(this.$props.value),e))}_f(e,n){ce(this.Zf)!==e&&this.mb(e,n)}mb(e,n){this.Zf.set(e),this.dispatch("change",{detail:e,trigger:n})}bg(e){this.dispatch("select",{trigger:e})}};Ep.props={value:""};let Rl=Ep;lD([Fe],Rl.prototype,"checked",1);var cD=Object.defineProperty,uD=Object.getOwnPropertyDescriptor,sp=(t,e,n,i)=>{for(var r=i>1?void 0:i?uD(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&cD(e,n,r),r};const $p=class $p extends Oe{constructor(){super(),this.dg=Be(0),this.Ub=Be(null),this.M=new Us,this.M.oe=this.oe.bind(this)}get value(){return this.M.value}get disabled(){const e=this.Ub();return!e||!e.cues.length}onSetup(){this.b=We(),fi(zt)&&(this.Uf=Ct(zt));const{thumbnails:e}=this.$props;this.setAttributes({"data-thumbnails":()=>!!e()})}onAttach(e){this.Uf?.uf({Rf:this.Rf.bind(this)})}getOptions(){const e=this.Ub();return e?e.cues.map((n,i)=>({cue:n,value:i+"",label:n.text,startTime:Ac(n.startTime,!1),duration:Oh(n.endTime-n.startTime)})):[]}Rf(){ce(()=>this.Uc())}onConnect(e){z(this.Pd.bind(this)),z(this.Uc.bind(this)),z(this.eg.bind(this)),kc(this.b.textTracks,"chapters",this.Ub.set)}Pd(){this.M.value=this.fg()}Uc(){if(!this.Uf?.gf())return;const e=this.Ub();if(!e){this.dg.set(-1);return}const{currentTime:n}=this.b.$state,i=n(),r=e.cues.findIndex(s=>Tl(s,i));if(this.dg.set(r),r>=0){const s=e.cues[r],o=this.el.querySelector("[aria-checked='true']"),l=(i-s.startTime)/(s.endTime-s.startTime)*100;o&&ln(o,"--progress",cn(l,3)+"%")}}eg(){this.Uf?.rf(this.disabled)}fg(){return this.dg()+""}oe(e,n){if(this.disabled||!n)return;const i=+e,r=this.Ub()?.cues;xl(i)&&r?.[i]&&(this.dg.set(i),this.b.remote.seek(r[i].startTime,n),this.dispatch("change",{detail:r[i],trigger:n}))}};$p.props={thumbnails:""};let ys=$p;sp([Fe],ys.prototype,"value",1);sp([Fe],ys.prototype,"disabled",1);sp([It],ys.prototype,"getOptions",1);var hD=Object.defineProperty,dD=Object.getOwnPropertyDescriptor,op=(t,e,n,i)=>{for(var r=i>1?void 0:i?dD(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&hD(e,n,r),r};const Cp=class Cp extends Oe{constructor(){super(),this.M=new Us,this.M.oe=this.oe.bind(this)}get value(){return this.M.value}get disabled(){const{audioTracks:e}=this.b.$state;return e().length===0}onSetup(){this.b=We(),fi(zt)&&(this.Uf=Ct(zt))}onConnect(e){z(this.Pd.bind(this)),z(this.eg.bind(this)),z(this.gg.bind(this))}getOptions(){const{audioTracks:e}=this.b.$state;return e().map(n=>({track:n,label:n.label,value:n.label.toLowerCase()}))}Pd(){this.M.value=this.fg()}gg(){const{emptyLabel:e}=this.$props,{audioTrack:n}=this.b.$state,i=n();this.Uf?.Qf.set(i?.label??e())}eg(){this.Uf?.rf(this.disabled)}fg(){const{audioTrack:e}=this.b.$state,n=e();return n?n.label.toLowerCase():""}oe(e,n){if(this.disabled)return;const i=this.b.audioTracks.toArray().findIndex(r=>r.label.toLowerCase()===e);if(i>=0){const r=this.b.audioTracks[i];this.b.remote.changeAudioTrack(i,n),this.dispatch("change",{detail:r,trigger:n})}}};Cp.props={emptyLabel:"Default"};let vs=Cp;op([Fe],vs.prototype,"value",1);op([Fe],vs.prototype,"disabled",1);op([It],vs.prototype,"getOptions",1);var fD=Object.defineProperty,pD=Object.getOwnPropertyDescriptor,ap=(t,e,n,i)=>{for(var r=i>1?void 0:i?pD(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&fD(e,n,r),r};const Tp=class Tp extends Oe{constructor(){super(),this.M=new Us,this.M.oe=this.oe.bind(this)}get value(){return this.M.value}get disabled(){const{textTracks:e}=this.b.$state;return e().filter(en).length===0}onSetup(){this.b=We(),fi(zt)&&(this.Uf=Ct(zt))}onConnect(e){super.onConnect?.(e),z(this.Pd.bind(this)),z(this.eg.bind(this)),z(this.gg.bind(this))}getOptions(){const{offLabel:e}=this.$props,{textTracks:n}=this.b.$state;return[{value:"off",label:e},...n().filter(en).map(i=>({track:i,label:i.label,value:i.label.toLowerCase()}))]}Pd(){this.M.value=this.fg()}gg(){const{offLabel:e}=this.$props,{textTrack:n}=this.b.$state,i=n();this.Uf?.Qf.set(i&&en(i)&&i.mode==="showing"?i.label:e())}eg(){this.Uf?.rf(this.disabled)}fg(){const{textTrack:e}=this.b.$state,n=e();return n&&en(n)&&n.mode==="showing"?n.label.toLowerCase():"off"}oe(e,n){if(this.disabled)return;if(e==="off"){const r=this.b.textTracks.selected;if(r){const s=this.b.textTracks.toArray().indexOf(r);this.b.remote.changeTextTrackMode(s,"disabled",n),this.dispatch("change",{detail:null,trigger:n})}return}const i=this.b.textTracks.toArray().findIndex(r=>r.label.toLowerCase()===e);if(i>=0){const r=this.b.textTracks[i];this.b.remote.changeTextTrackMode(i,"showing",n),this.dispatch("change",{detail:r,trigger:n})}}};Tp.props={offLabel:"Off"};let ws=Tp;ap([Fe],ws.prototype,"value",1);ap([Fe],ws.prototype,"disabled",1);ap([It],ws.prototype,"getOptions",1);var gD=Object.defineProperty,mD=Object.getOwnPropertyDescriptor,x1=(t,e,n,i)=>{for(var r=i>1?void 0:i?mD(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&gD(e,n,r),r};const kp=class kp extends Oe{constructor(){super(),this.M=new Us,this.M.oe=this.oe.bind(this)}get value(){return this.M.value}onSetup(){this.b=We(),fi(zt)&&(this.Uf=Ct(zt))}onConnect(e){z(this.Pd.bind(this)),z(this.gg.bind(this))}getOptions(){const{rates:e,normalLabel:n}=this.$props;return e().map(i=>({label:i===1?n:i+"",value:i+""}))}Pd(){this.M.value=this.fg()}gg(){const{normalLabel:e}=this.$props,{playbackRate:n}=this.b.$state,i=n();this.Uf?.Qf.set(i===1?e():i+"")}fg(){const{playbackRate:e}=this.b.$state;return e()+""}oe(e,n){const i=+e;this.b.remote.changePlaybackRate(i,n),this.dispatch("change",{detail:i,trigger:n})}};kp.props={normalLabel:"Normal",rates:[.25,.5,.75,1,1.25,1.5,1.75,2]};let Do=kp;x1([Fe],Do.prototype,"value",1);x1([It],Do.prototype,"getOptions",1);var bD=Object.defineProperty,yD=Object.getOwnPropertyDescriptor,lp=(t,e,n,i)=>{for(var r=i>1?void 0:i?yD(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&bD(e,n,r),r};const Pp=class Pp extends Oe{constructor(){super(),this.ig=li(()=>{const{qualities:e}=this.b.$state;return[...e()].sort((n,i)=>i.height===n.height?i.bitrate-n.bitrate:i.height-n.height)}),this.M=new Us,this.M.oe=this.oe.bind(this)}get value(){return this.M.value}get disabled(){const{canSetQuality:e,qualities:n}=this.b.$state;return!e()||n().length===0}onSetup(){this.b=We(),fi(zt)&&(this.Uf=Ct(zt))}onConnect(e){z(this.Pd.bind(this)),z(this.eg.bind(this)),z(this.gg.bind(this))}getOptions(){const{autoLabel:e,hideBitrate:n}=this.$props;return[{value:"auto",label:e},...this.ig().map(i=>{const r=`${cn(i.bitrate/1e6,2)} Mbps`;return{quality:i,label:i.height+"p",value:this.hg(i),bitrate:()=>n()?null:r}})]}Pd(){this.M.value=this.fg()}gg(){const{autoLabel:e}=this.$props,{autoQuality:n,quality:i}=this.b.$state,r=i()?i().height+"p":"";this.Uf?.Qf.set(n()?e()+` (${r})`:r)}eg(){const{qualities:e}=this.b.$state;this.Uf?.rf(e().length===0)}oe(e,n){if(this.disabled)return;if(e==="auto"){this.b.remote.changeQuality(-1,n),this.dispatch("change",{detail:"auto",trigger:n});return}const{qualities:i}=this.b.$state,r=ce(i).findIndex(s=>this.hg(s)===e);if(r>=0){const s=ce(i)[r];this.b.remote.changeQuality(r,n),this.dispatch("change",{detail:s,trigger:n})}}fg(){const{quality:e,autoQuality:n}=this.b.$state;if(n())return"auto";const i=e();return i?this.hg(i):"auto"}hg(e){return e.height+"_"+e.bitrate}};Pp.props={autoLabel:"Auto",hideBitrate:!1};let _s=Pp;lp([Fe],_s.prototype,"value",1);lp([Fe],_s.prototype,"disabled",1);lp([It],_s.prototype,"getOptions",1);const Ap=class Ap extends Oe{constructor(){super(...arguments),this.Dc=null,this.jg=0,this.kg=-1}onSetup(){this.b=We();const{event:e,action:n}=this.$props;this.setAttributes({event:e,action:n})}onAttach(e){e.setAttribute("data-media-gesture",""),e.style.setProperty("pointer-events","none")}onConnect(e){this.Dc=this.b.player.el?.querySelector("[data-media-provider]"),z(this.mg.bind(this))}mg(){let e=this.$props.event();!this.Dc||!e||(/^dbl/.test(e)&&(e=e.split(/^dbl/)[1]),(e==="pointerup"||e==="pointerdown")&&this.b.$state.pointer()==="coarse"&&(e=e==="pointerup"?"touchend":"touchstart"),fe(this.Dc,e,this.ng.bind(this),{passive:!1}))}ng(e){if(lb(e)&&(e.button!==0||this.b.activeMenu)||qa(e)&&this.b.activeMenu||Xf(e)||!this.og(e))return;if(e.MEDIA_GESTURE=!0,e.preventDefault(),!ce(this.$props.event)?.startsWith("dbl"))this.jg===0&&setTimeout(()=>{this.jg===1&&this.lg(e)},250);else if(this.jg===1){queueMicrotask(()=>this.lg(e)),clearTimeout(this.kg),this.jg=0;return}this.jg===0&&(this.kg=window.setTimeout(()=>{this.jg=0},275)),this.jg++}lg(e){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.pg()&&this.qg(ce(this.$props.action),e),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}og(e){if(!this.el)return!1;if(lb(e)||XP(e)||qa(e)){const n=qa(e)?e.changedTouches[0]??e.touches[0]:void 0,i=n?.clientX??e.clientX,r=n?.clientY??e.clientY,s=this.el.getBoundingClientRect(),o=r>=s.top&&r<=s.bottom&&i>=s.left&&i<=s.right;return e.type.includes("leave")?!o:o}return!0}pg(){const e=this.b.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(e).sort((n,i)=>+getComputedStyle(i).zIndex-+getComputedStyle(n).zIndex)[0]===this.el}qg(e,n){if(!e)return;const i=new $t("will-trigger",{detail:e,cancelable:!0,trigger:n});if(this.dispatchEvent(i),i.defaultPrevented)return;const[r,s]=e.replace(/:([a-z])/,"-$1").split(":");e.includes(":fullscreen")?this.b.remote.toggleFullscreen("prefer-media",n):e.includes("seek:")?this.b.remote.seek(ce(this.b.$state.currentTime)+(+s||0),n):this.b.remote[Vw(r)](n),this.dispatch("trigger",{detail:e,trigger:n})}};Ap.props={event:void 0,action:void 0};let Lh=Ap;class vD{constructor(e){this.priority=10,this.Ub=null,this.Da=Kw(),this.sg=e}attach(){}canRender(){return!0}detach(){this.Da.empty(),this.sg.reset(),this.Ub=null}changeTrack(e){!e||this.Ub===e||(this.Da.empty(),e.readyState<2?(this.sg.reset(),this.Da.add(fe(e,"load",()=>this.hk(e),{once:!0}))):this.hk(e),this.Da.add(fe(e,"add-cue",n=>{this.sg.addCue(n.detail)}),fe(e,"remove-cue",n=>{this.sg.removeCue(n.detail)})),this.Ub=e)}hk(e){this.sg.changeTrack({cues:[...e.cues],regions:[...e.regions]})}}var Ho;let wD=(Ho=class extends Oe{onSetup(){this.b=We(),this.setAttributes({"aria-hidden":Bn(this.Kd.bind(this))})}onAttach(e){e.style.setProperty("pointer-events","none")}onConnect(e){if(this.sg){z(this.tg.bind(this));return}W(()=>import("./prod-bb9d3c61.js").then(n=>n.d),[]).then(n=>{this.connectScope&&Zt(()=>{this.$a=n;const{CaptionsRenderer:i}=this.$a;this.sg=new i(e),this.rg=new vD(this.sg),z(this.tg.bind(this))},this.connectScope)})}onDestroy(){this.rg&&(this.rg.detach(),this.b.textRenderers.remove(this.rg)),this.sg?.destroy()}Kd(){const{textTrack:e}=this.b.$state,n=e();return this.b.$iosControls()||!n||!en(n)}tg(){const{viewType:e}=this.b.$state;return e()==="audio"?this.vg():this.wg()}vg(){return z(this.Ue.bind(this)),()=>{this.el.textContent=""}}Ue(){if(this.Kd())return;const{textTrack:e}=this.b.$state;this.ug(),fe(e(),"cue-change",this.ug.bind(this)),z(this.xg.bind(this))}ug(){this.el.textContent="";const{currentTime:e,textTrack:n}=this.b.$state,i=ce(e),r=ce(n).activeCues,{renderVTTCueString:s}=this.$a;for(const o of r){const l=document.createElement("div");l.setAttribute("data-part","cue"),l.innerHTML=s(o,i),this.el.append(l)}}xg(){const{currentTime:e}=this.b.$state,{updateTimedVTTCueNodes:n}=this.$a;n(this.el,e())}wg(){return z(this.yg.bind(this)),z(this.zg.bind(this)),this.b.textRenderers.add(this.rg),()=>{this.el.textContent="",this.rg.detach(),this.b.textRenderers.remove(this.rg)}}yg(){this.sg.dir=this.$props.textDir()}zg(){if(this.Kd())return;const{currentTime:e}=this.b.$state;this.sg.currentTime=e()}},Ho.props={textDir:"ltr"},Ho);const Hl=class Hl extends Oe{onSetup(){this.b=We(),this.Ag(),this.Bg(),this.he()}onAttach(e){e.style.setProperty("pointer-events","none"),z(this.Cg.bind(this)),z(this.Ag.bind(this)),z(this.Bg.bind(this)),z(this.he.bind(this));const{started:n}=this.b.$state;this.setAttributes({"data-visible":()=>!n(),"data-loading":this.fe.bind(this),"data-error":this.de.bind(this),"data-hidden":this.$state.hidden})}onConnect(e){const{canLoad:n,poster:i}=this.b.$state;window.requestAnimationFrame(()=>{n()||l1(i())}),z(this.bb.bind(this))}de(){const{error:e}=this.$state;return!or(e())}he(){const{src:e}=this.$props,{$iosControls:n}=this.b,{poster:i}=this.b.$state;this.el&&Se(this.el,"display",n()?"none":null),this.$state.hidden.set(this.de()||!(e()||i())||n())}fe(){const{loading:e,hidden:n}=this.$state;return!n()&&e()}Cg(){const e=this.$state.img();e&&(fe(e,"load",this.J.bind(this)),fe(e,"error",this.Ja.bind(this)))}Ag(){const{canLoad:e,poster:n}=this.b.$state,i=this.$props.src(),r=i||n();i&&n()!==i&&this.b.$state.providedPoster.set(i),this.$state.src.set(e()&&r.length?r:null)}Bg(){const{src:e,alt:n}=this.$state;n.set(e()?this.$props.alt():null)}bb(){const{loading:e,error:n}=this.$state,{canLoad:i,poster:r}=this.b.$state;e.set(i()&&!!r()),n.set(null)}J(){const{loading:e,error:n}=this.$state;e.set(!1),n.set(null)}Ja(e){const{loading:n,error:i}=this.$state;n.set(!1),i.set(e)}};Hl.props={src:void 0,alt:void 0},Hl.state=new Ur({img:null,src:null,alt:null,loading:!0,error:null,hidden:!1});let Mh=Hl;const Vl=class Vl extends Oe{onSetup(){this.b=We(),this.xa();const{type:e,remainder:n}=this.$props;this.setAttributes({"data-type":e,"data-remainder":n})}onAttach(e){z(this.xa.bind(this))}xa(){const{type:e,remainder:n,padHours:i,padMinutes:r,showHours:s}=this.$props,o=this.Dg(e()),l=this.b.$state.duration();if(!Number.isFinite(o+l)){this.$state.timeText.set("LIVE");return}const a=n()?Math.max(0,l-o):o,c=Ac(a,i(),r(),s());this.$state.timeText.set(c)}Dg(e){const{bufferedEnd:n,duration:i,currentTime:r}=this.b.$state;switch(e){case"buffered":return n();case"duration":return i();default:return r()}}};Vl.props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1},Vl.state=new Ur({timeText:""});let Nh=Vl;var _D=Object.defineProperty,xD=Object.getOwnPropertyDescriptor,cp=(t,e,n,i)=>{for(var r=i>1?void 0:i?xD(e,n):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(r=(i?o(e,n,r):o(r))||r);return i&&r&&_D(e,n,r),r};const Op=class Op extends Oe{constructor(){super(...arguments),this.menuContainer=null}get isMatch(){return this.Rg.matches}get isSmallLayout(){return this.Qg.matches}onSetup(){const{when:e,smallWhen:n,thumbnails:i,translations:r,menuGroup:s,noModal:o}=this.$props;this.Rg=ms.create(e),this.Qg=ms.create(n),this.setAttributes({"data-match":this.Rg.$matches,"data-size":()=>this.Qg.matches?"sm":null});const l=this;Nn(SD,{smQueryList:this.Qg,thumbnails:i,translations:r,menuGroup:s,noModal:o,get menuContainer(){return l.menuContainer}})}};Op.props={when:"",smallWhen:"",thumbnails:"",customIcons:!1,translations:null,menuGroup:"bottom",noModal:!1};let Ar=Op;cp([Fe],Ar.prototype,"menuContainer",2);cp([Fe],Ar.prototype,"isMatch",1);cp([Fe],Ar.prototype,"isSmallLayout",1);const oo=class oo extends Ar{};oo.props={...Kc(oo,oo,"props"),when:"(view-type: audio)",smallWhen:"(width < 576)"};let Rb=oo;const ao=class ao extends Ar{};ao.props={...Kc(ao,ao,"props"),when:"(view-type: video)",smallWhen:"(width < 576) or (height < 380)"};let Lb=ao;const SD=ar(),Dp=class Dp extends De(HTMLElement,Al){constructor(){super(...arguments),this.U=null,this.la=null}onSetup(){this.b=We(),this.setAttribute("keep-alive","")}onDestroy(){this.la?.remove(),this.la=null,this.U?.remove(),this.U=null}onConnect(){z(()=>{const e=this.$state.loader(),n=e?.canPlay({src:"",type:"video/youtube"}),i=e?.canPlay({src:"",type:"video/vimeo"}),r=n||i,s=e?r?this.ma():e.mediaType()==="audio"?this.na():this.oa():null;if(this.U!==s){const o=this.U?.parentElement??this;this.U?.remove(),this.U=s,s&&o.prepend(s),r&&s&&z(()=>{const{$iosControls:l}=this.b,{controls:a}=this.b.$state,c=a()||l();c?(this.la?.remove(),this.la=null):(this.la=this.querySelector(".vds-blocker")??document.createElement("div"),this.la.classList.add("vds-blocker"),s.after(this.la)),Se(s,"data-no-controls",!c)})}n?s?.classList.add("vds-youtube"):i&&s?.classList.add("vds-vimeo"),r||(this.la?.remove(),this.la=null),this.load(s)})}na(){const e=this.U instanceof HTMLAudioElement?this.U:document.createElement("audio");Se(e,"preload","none"),Se(e,"aria-hidden","true");const{controls:n,crossorigin:i}=this.b.$state;return z(()=>{Se(e,"controls",n()),Se(e,"crossorigin",i())}),e}oa(){const e=this.U instanceof HTMLVideoElement?this.U:document.createElement("video"),{controls:n,crossorigin:i,poster:r}=this.b.$state,{$iosControls:s}=this.b,o=li(()=>n()||s()?"":null),l=li(()=>r()&&(n()||s())?r():null);return z(()=>{Se(e,"controls",o()),Se(e,"crossorigin",i()),Se(e,"poster",l())}),e}ma(){return this.U instanceof HTMLIFrameElement?this.U:document.createElement("iframe")}};Dp.tagName="media-provider";let Fh=Dp;const Kl=class Kl extends De(HTMLElement,bO){};Kl.tagName="media-player",Kl.attrs={preferNativeHLS:"prefer-native-hls"};let Bh=Kl;Pe(Bh);Pe(Fh);class ED extends Oe{onAttach(e){ln(e,"pointer-events","auto")}}class $D extends Oe{constructor(){super(),new Wn}onConnect(e){et(bs(()=>{if(!this.connectScope)return;this.Cd();const n=Ct(rs);et(()=>{const i=this.Bd();i&&n.vd(i)})}))}Cd(){const e=this.Bd(),n=Ct(rs);e&&n.ud(e)}Bd(){const e=this.el.firstElementChild;return e?.localName==="button"||e?.getAttribute("role")==="button"?e:this.el}}class CD extends Ao{}const Ip=class Ip extends De(HTMLElement,wD){};Ip.tagName="media-captions";let Uh=Ip;const Rp=class Rp extends De(HTMLElement,Lh){};Rp.tagName="media-gesture";let jh=Rp;const Lp=class Lp extends De(HTMLElement,Mh){constructor(){super(...arguments),this.pa=document.createElement("img")}onSetup(){this.b=We(),this.$state.img.set(this.pa)}onConnect(){const{src:e,alt:n}=this.$state,{crossorigin:i}=this.b.$state;this.pa.parentNode!==this&&this.prepend(this.pa),z(()=>{Se(this.pa,"src",e()),Se(this.pa,"alt",n()),Se(this.pa,"crossorigin",/ytimg\.com|vimeo/.test(e()||"")?null:i())})}};Lp.tagName="media-poster";let Hh=Lp;const TD=Jf('<img loading="eager" decoding="async" aria-hidden="true">'),Mp=class Mp extends De(HTMLElement,Ah){constructor(){super(...arguments),this.pa=this.qa()}onSetup(){this.b=We(),this.$state.img.set(this.pa)}onConnect(){const{src:e}=this.$state,{crossorigin:n}=this.b.$props;this.pa.parentNode!==this&&this.prepend(this.pa),z(()=>{Se(this.pa,"src",e()),Se(this.pa,"crossorigin",n())})}qa(){return Zf(TD)}};Mp.tagName="media-thumbnail";let Ll=Mp;const Np=class Np extends De(HTMLElement,Nh){onConnect(){z(()=>{this.textContent=this.$state.timeText()})}};Np.tagName="media-time";let Vh=Np;const Fp=class Fp extends De(HTMLElement,Ch){};Fp.tagName="media-controls";let Kh=Fp;const Bp=class Bp extends De(HTMLElement,ED){};Bp.tagName="media-controls-group";let qh=Bp,kD=class extends Oe{};const Up=class Up extends De(HTMLElement,kD){onSetup(){this.b=We(),this.ra=Be(""),this.sa=li(this.ta.bind(this))}onConnect(){kc(this.b.textTracks,"chapters",e=>{if(!e){this.ra.set("");return}const n=()=>{const i=e?.activeCues[0];this.ra.set(i?.text||"")};n(),fe(e,"cue-change",n)}),z(()=>{this.textContent=this.sa()})}ta(){const{title:e,started:n}=this.b.$state,i=e(),r=this.ra();return n()?r||i:i||r}};Up.tagName="media-chapter-title";let zh=Up;const jp=class jp extends Oe{};jp.props={when:""};let Wh=jp;const Hp=class Hp extends De(HTMLElement,Wh){onSetup(){this.query=ms.create(this.$props.when)}onConnect(){z(this.ua.bind(this))}ua(){const e=this.firstElementChild,n=e?.localName==="template",i=e instanceof HTMLElement;if(!this.query.matches){if(n)for(const r of this.children)r.localName!=="template"&&r.remove();else i&&(e.style.display="none");return}n?this.append(e.content.cloneNode(!0)):i&&(e.style.display="")}};Hp.tagName="media-layout";let Gh=Hp;const Vp=class Vp extends De(HTMLElement,AO){};Vp.tagName="media-play-button";let Yh=Vp;const Kp=class Kp extends De(HTMLElement,RO){};Kp.tagName="media-mute-button";let Qh=Kp;const qp=class qp extends De(HTMLElement,DO){};qp.tagName="media-caption-button";let Xh=qp;const zp=class zp extends De(HTMLElement,IO){};zp.tagName="media-fullscreen-button";let Jh=zp;const Wp=class Wp extends De(HTMLElement,LO){};Wp.tagName="media-pip-button";let Zh=Wp;const Gp=class Gp extends De(HTMLElement,kh){};Gp.tagName="media-seek-button";let ed=Gp;const Yp=class Yp extends De(HTMLElement,Ol){};Yp.tagName="media-toggle-button";let td=Yp;const Qp=class Qp extends De(HTMLElement,Ph){};Qp.tagName="media-live-button";let nd=Qp;const Xp=class Xp extends De(HTMLElement,CO){};Xp.tagName="media-tooltip";let id=Xp;const Jp=class Jp extends De(HTMLElement,$D){onConnect(){this.style.display="contents"}};Jp.tagName="media-tooltip-trigger";let rd=Jp;const Zp=class Zp extends De(HTMLElement,Th){};Zp.tagName="media-tooltip-content";let sd=Zp;function pa(t,e){bs(()=>{if(!t.connectScope)return;const n=t.querySelector("template");n&&z(()=>{const i=t.getOptions();h1(n,i.length,(r,s)=>{const{label:o,value:l}=i[s],a=r.querySelector('[data-part="label"]');r.setAttribute("value",l),a&&(Pt(o)?a.textContent=o:z(()=>{a.textContent=o()})),e?.(r,i[s],s)})})})}const eg=class eg extends De(HTMLElement,vs){onConnect(){pa(this)}};eg.tagName="media-audio-radio-group";let od=eg;const tg=class tg extends De(HTMLElement,ws){onConnect(){pa(this)}};tg.tagName="media-captions-radio-group";let ad=tg;const ng=class ng extends De(HTMLElement,Bs){};ng.tagName="media-menu";let ld=ng;const ig=class ig extends De(HTMLElement,Ao){};ig.tagName="media-menu-button";let cd=ig;const ql=class ql extends De(HTMLElement,Dh){};ql.tagName="media-menu-portal",ql.attrs={disabled:{converter(e){return Pt(e)?e:e!==null}}};let ud=ql;const rg=class rg extends De(HTMLElement,CD){};rg.tagName="media-menu-item";let hd=rg;const sg=class sg extends De(HTMLElement,Ih){};sg.tagName="media-menu-items";let dd=sg;const og=class og extends De(HTMLElement,ys){onConnect(){pa(this,(e,n)=>{const{cue:i,startTime:r,duration:s}=n,o=e.querySelector(".vds-thumbnail,media-thumbnail"),l=e.querySelector('[data-part="start-time"]'),a=e.querySelector('[data-part="duration"]');l&&(l.textContent=r),a&&(a.textContent=s),o&&(o.setAttribute("time",i.startTime+""),z(()=>{const{thumbnails:c}=this.$props;o.setAttribute("src",c())}))})}};og.tagName="media-chapters-radio-group";let fd=og;const ag=class ag extends De(HTMLElement,Do){onConnect(){pa(this)}};ag.tagName="media-speed-radio-group";let pd=ag;const lg=class lg extends De(HTMLElement,_s){onConnect(){pa(this,(e,n)=>{const i=n.bitrate,r=e.querySelector('[data-part="bitrate"]');i&&r&&z(()=>{r.textContent=i()||""})})}};lg.tagName="media-quality-radio-group";let gd=lg;const cg=class cg extends De(HTMLElement,Rl){};cg.tagName="media-radio";let md=cg;const ug=class ug extends De(HTMLElement,Oo){};ug.tagName="media-radio-group";let bd=ug;const hg=class hg extends De(HTMLElement,Pr){};hg.tagName="media-slider";let yd=hg;const dg=class dg extends Ll{onSetup(){super.onSetup(),this.wa=ca(Pr.state)}onConnect(){super.onConnect(),z(this.xa.bind(this))}xa(){const{duration:e}=this.b.$state;this.time=this.wa.pointerRate()*e()}};dg.tagName="media-slider-thumbnail";let vd=dg;const zl=class zl extends De(HTMLElement,Il){onConnect(){z(()=>{this.textContent=this.getValueText()})}};zl.tagName="media-slider-value",zl.attrs={padMinutes:{converter:t1}};let wd=zl;const PD=Jf('<video muted playsinline preload="none" style="max-width: unset;"></video>'),fg=class fg extends De(HTMLElement,Dl){constructor(){super(...arguments),this.ya=this.oa()}onSetup(){this.b=We(),this.$state.video.set(this.ya)}onConnect(){const{crossorigin:e,canLoad:n}=this.b.$state,{src:i}=this.$state;this.ya.parentNode!==this&&this.prepend(this.ya),z(()=>{Se(this.ya,"src",i()),Se(this.ya,"crossorigin",e()),Se(this.ya,"preload",n()?"auto":"none")})}oa(){return Zf(PD)}};fg.tagName="media-slider-video";let _d=fg;const pg=class pg extends De(HTMLElement,w1){};pg.tagName="media-time-slider";let xd=pg;const gg=class gg extends De(HTMLElement,qO){};gg.tagName="media-slider-preview";let Sd=gg;const mg=class mg extends De(HTMLElement,WO){};mg.tagName="media-volume-slider";let Ed=mg;const bg=class bg extends De(HTMLElement,da){constructor(){super(...arguments),this.za=null}onConnect(){bs(()=>{if(!this.connectScope)return;const e=this.querySelector("template");e&&(this.za=e,z(this.Aa.bind(this)))})}Aa(){if(!this.za)return;const e=h1(this.za,this.cues.length||1);this.setRefs(e)}};bg.tagName="media-slider-chapters";let $d=bg;Pe(Gh);Pe(Kh);Pe(qh);Pe(Hh);Pe(Xh);Pe(Jh);Pe(Qh);Pe(Zh);Pe(Yh);Pe(ed);Pe(td);Pe(yd);Pe(Ed);Pe(xd);Pe($d);Pe(Sd);Pe(wd);Pe(vd);Pe(_d);Pe(ld);Pe(cd);Pe(ud);Pe(dd);Pe(hd);Pe(od);Pe(ad);Pe(pd);Pe(gd);Pe(fd);Pe(bd);Pe(md);Pe(id);Pe(rd);Pe(sd);Pe(jh);Pe(Ll);Pe(Uh);Pe(nd);Pe(Vh);Pe(zh);const Mb={"add-note":()=>W(()=>import("./add-note-aea8ce93.js"),[]),"add-playlist":()=>W(()=>import("./add-playlist-311c7461.js"),[]),"add-user":()=>W(()=>import("./add-user-c02e7586.js"),[]),add:()=>W(()=>import("./add-a792ae6f.js"),[]),airplay:()=>W(()=>import("./airplay-1ed397fc.js"),[]),"arrow-collapse-in":()=>W(()=>import("./arrow-collapse-in-b90c2a85.js"),[]),"arrow-collapse":()=>W(()=>import("./arrow-collapse-08d04594.js"),[]),"arrow-down":()=>W(()=>import("./arrow-down-2391bbee.js"),[]),"arrow-expand-out":()=>W(()=>import("./arrow-expand-out-2c38ee2f.js"),[]),"arrow-expand":()=>W(()=>import("./arrow-expand-6f3fb0a0.js"),[]),"arrow-left":()=>W(()=>import("./arrow-left-dbe0d33e.js"),[]),"arrow-right":()=>W(()=>import("./arrow-right-33eeea14.js"),[]),"arrow-up":()=>W(()=>import("./arrow-up-3fb75d3a.js"),[]),bookmark:()=>W(()=>import("./bookmark-f3df39b3.js"),[]),camera:()=>W(()=>import("./camera-bcd1c8e7.js"),[]),chapters:()=>W(()=>import("./chapters-47ad562e.js"),[]),"chat-collapse":()=>W(()=>import("./chat-collapse-07ec7b96.js"),[]),chat:()=>W(()=>import("./chat-1bc87327.js"),[]),"chevron-down":()=>W(()=>import("./chevron-down-efd0e3f1.js"),[]),"chevron-left":()=>W(()=>import("./chevron-left-e3651bf6.js"),[]),"chevron-right":()=>W(()=>import("./chevron-right-c23fb9cc.js"),[]),"chevron-up":()=>W(()=>import("./chevron-up-1ee1a5d6.js"),[]),chromecast:()=>W(()=>import("./chromecast-d06cd890.js"),[]),clip:()=>W(()=>import("./clip-8f207923.js"),[]),"closed-captions-on":()=>W(()=>import("./closed-captions-on-57c0024c.js"),[]),"closed-captions":()=>W(()=>import("./closed-captions-3e2e1a2b.js"),[]),comment:()=>W(()=>import("./comment-f8838025.js"),[]),computer:()=>W(()=>import("./computer-06accdfe.js"),[]),device:()=>W(()=>import("./device-8ddeaf07.js"),[]),download:()=>W(()=>import("./download-28d9bbee.js"),[]),episodes:()=>W(()=>import("./episodes-ac5299c6.js"),[]),eye:()=>W(()=>import("./eye-01dd650b.js"),[]),"fast-backward":()=>W(()=>import("./fast-backward-e64ba82c.js"),[]),"fast-forward":()=>W(()=>import("./fast-forward-61bf2dca.js"),[]),flag:()=>W(()=>import("./flag-ccf75905.js"),[]),"fullscreen-arrow-exit":()=>W(()=>import("./fullscreen-arrow-exit-7c96e69a.js"),[]),"fullscreen-arrow":()=>W(()=>import("./fullscreen-arrow-8ed20d9d.js"),[]),"fullscreen-exit":()=>W(()=>import("./fullscreen-exit-f9e43826.js"),[]),fullscreen:()=>W(()=>import("./fullscreen-5940abb2.js"),[]),heart:()=>W(()=>import("./heart-3528bb70.js"),[]),info:()=>W(()=>import("./info-143a99f9.js"),[]),language:()=>W(()=>import("./language-d20cebb0.js"),[]),link:()=>W(()=>import("./link-744b4ccc.js"),[]),"lock-closed":()=>W(()=>import("./lock-closed-a121a053.js"),[]),"lock-open":()=>W(()=>import("./lock-open-d00d2e9e.js"),[]),"menu-horizontal":()=>W(()=>import("./menu-horizontal-f264944d.js"),[]),"menu-vertical":()=>W(()=>import("./menu-vertical-1d213ccd.js"),[]),microphone:()=>W(()=>import("./microphone-e71a2de2.js"),[]),mobile:()=>W(()=>import("./mobile-487b99ee.js"),[]),moon:()=>W(()=>import("./moon-7d1740b1.js"),[]),"music-off":()=>W(()=>import("./music-off-20339c46.js"),[]),music:()=>W(()=>import("./music-99152f5d.js"),[]),mute:()=>W(()=>import("./mute-f3fd30ef.js"),[]),next:()=>W(()=>import("./next-f62f26b2.js"),[]),notification:()=>W(()=>import("./notification-e0dc35e5.js"),[]),odometer:()=>W(()=>import("./odometer-68be8246.js"),[]),pause:()=>W(()=>import("./pause-751938fc.js"),[]),"picture-in-picture-exit":()=>W(()=>import("./picture-in-picture-exit-716881c9.js"),[]),"picture-in-picture":()=>W(()=>import("./picture-in-picture-b4bffeef.js"),[]),play:()=>W(()=>import("./play-80dbbc66.js"),[]),"playback-speed-circle":()=>W(()=>import("./playback-speed-circle-0bf80f35.js"),[]),playlist:()=>W(()=>import("./playlist-2bd30557.js"),[]),previous:()=>W(()=>import("./previous-20bc87b6.js"),[]),"question-mark":()=>W(()=>import("./question-mark-b0618164.js"),[]),"queue-list":()=>W(()=>import("./queue-list-7a58ac23.js"),[]),"radio-button-selected":()=>W(()=>import("./radio-button-selected-ffbd87d1.js"),[]),"radio-button":()=>W(()=>import("./radio-button-ccc5a13c.js"),[]),"repeat-on":()=>W(()=>import("./repeat-on-0e0f1a69.js"),[]),"repeat-square-on":()=>W(()=>import("./repeat-square-on-8f45fa45.js"),[]),"repeat-square":()=>W(()=>import("./repeat-square-d57e3e7f.js"),[]),repeat:()=>W(()=>import("./repeat-91008d67.js"),[]),replay:()=>W(()=>import("./replay-813257d0.js"),[]),rotate:()=>W(()=>import("./rotate-f438b1a8.js"),[]),search:()=>W(()=>import("./search-20b04e5d.js"),[]),"seek-backward-10":()=>W(()=>import("./seek-backward-10-c588dcd3.js"),[]),"seek-backward-15":()=>W(()=>import("./seek-backward-15-e83d7b7d.js"),[]),"seek-backward-30":()=>W(()=>import("./seek-backward-30-0d0dd089.js"),[]),"seek-backward":()=>W(()=>import("./seek-backward-3bee4a59.js"),[]),"seek-forward-10":()=>W(()=>import("./seek-forward-10-ca8ba0b1.js"),[]),"seek-forward-15":()=>W(()=>import("./seek-forward-15-222541fd.js"),[]),"seek-forward-30":()=>W(()=>import("./seek-forward-30-ec9721fb.js"),[]),"seek-forward":()=>W(()=>import("./seek-forward-7061baa9.js"),[]),send:()=>W(()=>import("./send-832a6e98.js"),[]),"settings-menu":()=>W(()=>import("./settings-menu-9b3fa758.js"),[]),"settings-switch":()=>W(()=>import("./settings-switch-d0dd45b5.js"),[]),settings:()=>W(()=>import("./settings-dbff07e8.js"),[]),"share-arrow":()=>W(()=>import("./share-arrow-d0f267b6.js"),[]),share:()=>W(()=>import("./share-10614161.js"),[]),"shuffle-on":()=>W(()=>import("./shuffle-on-228a3e81.js"),[]),shuffle:()=>W(()=>import("./shuffle-b8eafe6f.js"),[]),stop:()=>W(()=>import("./stop-017c2591.js"),[]),subtitles:()=>W(()=>import("./subtitles-093d44a7.js"),[]),sun:()=>W(()=>import("./sun-75635f63.js"),[]),"theatre-mode-exit":()=>W(()=>import("./theatre-mode-exit-424f1878.js"),[]),"theatre-mode":()=>W(()=>import("./theatre-mode-08ec10fb.js"),[]),"thumbs-down":()=>W(()=>import("./thumbs-down-7eac064c.js"),[]),"thumbs-up":()=>W(()=>import("./thumbs-up-1d0fd52d.js"),[]),timer:()=>W(()=>import("./timer-9a7b8c05.js"),[]),transcript:()=>W(()=>import("./transcript-f6c3e132.js"),[]),tv:()=>W(()=>import("./tv-51cf0a79.js"),[]),user:()=>W(()=>import("./user-c8c6ba54.js"),[]),"volume-high":()=>W(()=>import("./volume-high-9e9b5d4a.js"),[]),"volume-low":()=>W(()=>import("./volume-low-7149c886.js"),[]),"x-mark":()=>W(()=>import("./x-mark-9c79edd1.js"),[])},AD=Jf('<svg width="100%" height="100%" viewBox="0 0 32 32" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg"></svg>'),yg=class yg extends HTMLElement{constructor(){super(...arguments),this.Ba=this.Ea(),this.Ca=Be(""),this.ga=Be(null),this.Da=[]}static get observedAttributes(){return["type"]}get type(){return this.ga()}set type(e){this.ga.set(e),e?this.setAttribute("type",e):this.removeAttribute("type")}attributeChangedCallback(e,n,i){e==="type"&&this.ga.set(i||null)}connectedCallback(){this.classList.add("vds-icon"),this.Ba.parentNode!==this&&this.prepend(this.Ba),this.Da.push(z(this.Fa.bind(this)),z(()=>{this.Ba.innerHTML=this.Ca()}))}disconnectedCallback(){for(const e of this.Da)e();this.Da.length=0}Ea(){return Zf(AD)}Fa(){const e=this.ga();e&&Mb[e]?Mb[e]().then(({default:n})=>{e===ce(this.ga)&&this.Ca.set(n)}):this.Ca.set("")}};yg.tagName="media-icon";let Cd=yg;Pe(Cd);function Nb(t){const e=t.split(":");let n="",i=0;for(let r of e)i++,r=r.length==1?`0${r}`:r,n+=`${r}${i==e.length?"":":"}`;return e.length==3?n:`00:${n}`}function OD(t,e){const n=new Date(e*1e3).toISOString().slice(11,22);let i="",r=0;for(const s of t){r++,r==1&&s.seconds!==0&&(console.warn("First chapter definition began before 0. Resetting"),s.timestamp="0:00",s.seconds=0);const o=r==t.length?n:Nb(t[r].timestamp);i+=`${Nb(s.timestamp)} --> ${o}
${s.name}

`}return i}async function DD(t,e){const n=await fetch(t),i=ID(await n.text(),e),r=new Blob([i],{type:"text/plain"});return{srtUrl:URL.createObjectURL(r),srtText:i}}function ID(t,e){const n=t.match(/ttp:frameRate="(\d+)"/),i=t.match(/ttp:frameRateMultiplier="(\d+) (\d+)"/),r=n?parseInt(n[1],10):0,s=i?parseInt(i[1],10):1,o=i?parseInt(i[2],10):1;let l=r*s/o;l=e??l,Number.isInteger(l)||(l=parseFloat(l.toFixed(3)));const a=t.match(/ttp:frameRate="ttp:subFrameRate="(\d+)"/),c=a?parseInt(a[1],10):1,u=t.match(/ttp:tickRate="(\d+)"/),h=u?parseInt(u[1],10):1,d=l>0?l:`UNKNOWN
[WARN] TIMING MAY BE INCORRECT`;console.info(`[INFO] FRAMERATE IS ${d}`);let g="",p=0,b="",$="";const E=new RegExp("<p (.*?)>(.*?)</p>","g");let S;for(;(S=E.exec(t))!==null;){const[m,x,_]=S,C=x.trim().match(/[^\s]*="?[^"]*/g).map(P=>P.split("=")).reduce((P,[O,R])=>(P[O]=(R||"").replace(/^"/,""),P),{});if(!C.begin||!C.end){console.warn("[WARN] Some string was not parsed, start/end time attribute was missing!");continue}const w=Fb(C.begin,l,c,h),k=Fb(C.end,l,c,h),D=_.replace(/<\/br>/g,"").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/<span>(.*?)<\/span>/g,"$1").replace(/(<br.*?>)+/g,`\r
`).replace(/<[^>]*\/>/g,"").replace(/<(\S*?) (.*?)>(.*?)<\/.*?>/g,RD);D.trim()!==""&&($=`${w} --> ${k}`,b!==$?(b=$,p++,g!==""&&(g+=`\r
\r
`),g+=`${p}\r
${$}\r
`):g+=`\r
`,g+=D)}return g+=`\r
\r
`,`\uFEFF${g}`}function Fb(t,e,n,i){let r=t.match(/(\d*:\d*:\d*)(.*)$/);if(!r){r=t.match(/([0-9.]*)(.*)/);const o={h:3600,m:60,s:1,ms:.001,f:1/e,t:1/i};let l=parseFloat(r[1])*o[r[2]||""],a=Math.floor(l/3600).toString().padStart(2,"0"),c=Math.floor(l%3600/60).toString().padStart(2,"0"),u=Math.floor(l%60).toString().padStart(2,"0"),h=Math.round((l-Math.floor(l))*1e3).toString().padEnd(3,"0").slice(0,3);return`${a}:${c}:${u},${h}`}let s=r[2]||"";if(s.length===0)return`${r[1]},000`;if(s[0]==="."){let o=s.slice(1).padEnd(3,"0").slice(0,3);return`${r[1]},${o}`}if(s[0]===":"){let o=s.slice(1).split("."),l=parseInt(o[0]);o.length>1&&(l+=parseInt(o[1])/n);let a=Math.floor(l*1e3/e).toString().padEnd(3,"0").slice(0,3);return`${r[1]},${a}`}return`${r[1]},000`}function RD(t,e,n,i){if(e!=="span")return i;const r=n.replace(/\s*=\s*/g,"=").split(" ").filter(o=>o.trim()),s={};for(const o of r){let l;if(l=o.match(/tts:color="(.*?)"/)){s.color=l[1];continue}switch(o){case'tts:fontStyle="italic"':s.fontStyle="italic";break;case'tts:textDecoration="underline"':s.textDecoration="underline";break;case'tts:fontWeight="bold"':s.fontWeight="bold";break}}return s.color&&(i=`<font color="${s.color}">${i.trim()}</font>`),s.fontStyle&&(i=`<i>${i.trim()}</i>`),s.textDecoration&&(i=`<u>${i.trim()}</u>`),s.fontWeight&&(i=`<b>${i.trim()}</b>`),i}var S1={exports:{}};/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */(function(t){(function(e,n){t.exports?t.exports=n():e.numeral=n()})(jn,function(){var e,n,i="2.0.6",r={},s={},o={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},l={currentLocale:o.currentLocale,zeroFormat:o.zeroFormat,nullFormat:o.nullFormat,defaultFormat:o.defaultFormat,scalePercentBy100:o.scalePercentBy100};function a(c,u){this._input=c,this._value=u}return e=function(c){var u,h,d,g;if(e.isNumeral(c))u=c.value();else if(c===0||typeof c>"u")u=0;else if(c===null||n.isNaN(c))u=null;else if(typeof c=="string")if(l.zeroFormat&&c===l.zeroFormat)u=0;else if(l.nullFormat&&c===l.nullFormat||!c.replace(/[^0-9]+/g,"").length)u=null;else{for(h in r)if(g=typeof r[h].regexps.unformat=="function"?r[h].regexps.unformat():r[h].regexps.unformat,g&&c.match(g)){d=r[h].unformat;break}d=d||e._.stringToNumber,u=d(c)}else u=Number(c)||null;return new a(c,u)},e.version=i,e.isNumeral=function(c){return c instanceof a},e._=n={numberToFormat:function(c,u,h){var d=s[e.options.currentLocale],g=!1,p=!1,b=0,$="",E=1e12,S=1e9,m=1e6,x=1e3,_="",C=!1,w,k,D,P,O,R,B;if(c=c||0,k=Math.abs(c),e._.includes(u,"(")?(g=!0,u=u.replace(/[\(|\)]/g,"")):(e._.includes(u,"+")||e._.includes(u,"-"))&&(O=e._.includes(u,"+")?u.indexOf("+"):c<0?u.indexOf("-"):-1,u=u.replace(/[\+|\-]/g,"")),e._.includes(u,"a")&&(w=u.match(/a(k|m|b|t)?/),w=w?w[1]:!1,e._.includes(u," a")&&($=" "),u=u.replace(new RegExp($+"a[kmbt]?"),""),k>=E&&!w||w==="t"?($+=d.abbreviations.trillion,c=c/E):k<E&&k>=S&&!w||w==="b"?($+=d.abbreviations.billion,c=c/S):k<S&&k>=m&&!w||w==="m"?($+=d.abbreviations.million,c=c/m):(k<m&&k>=x&&!w||w==="k")&&($+=d.abbreviations.thousand,c=c/x)),e._.includes(u,"[.]")&&(p=!0,u=u.replace("[.]",".")),D=c.toString().split(".")[0],P=u.split(".")[1],R=u.indexOf(","),b=(u.split(".")[0].split(",")[0].match(/0/g)||[]).length,P?(e._.includes(P,"[")?(P=P.replace("]",""),P=P.split("["),_=e._.toFixed(c,P[0].length+P[1].length,h,P[1].length)):_=e._.toFixed(c,P.length,h),D=_.split(".")[0],e._.includes(_,".")?_=d.delimiters.decimal+_.split(".")[1]:_="",p&&Number(_.slice(1))===0&&(_="")):D=e._.toFixed(c,0,h),$&&!w&&Number(D)>=1e3&&$!==d.abbreviations.trillion)switch(D=String(Number(D)/1e3),$){case d.abbreviations.thousand:$=d.abbreviations.million;break;case d.abbreviations.million:$=d.abbreviations.billion;break;case d.abbreviations.billion:$=d.abbreviations.trillion;break}if(e._.includes(D,"-")&&(D=D.slice(1),C=!0),D.length<b)for(var F=b-D.length;F>0;F--)D="0"+D;return R>-1&&(D=D.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+d.delimiters.thousands)),u.indexOf(".")===0&&(D=""),B=D+_+($||""),g?B=(g&&C?"(":"")+B+(g&&C?")":""):O>=0?B=O===0?(C?"-":"+")+B:B+(C?"-":"+"):C&&(B="-"+B),B},stringToNumber:function(c){var u=s[l.currentLocale],h=c,d={thousand:3,million:6,billion:9,trillion:12},g,p,b;if(l.zeroFormat&&c===l.zeroFormat)p=0;else if(l.nullFormat&&c===l.nullFormat||!c.replace(/[^0-9]+/g,"").length)p=null;else{p=1,u.delimiters.decimal!=="."&&(c=c.replace(/\./g,"").replace(u.delimiters.decimal,"."));for(g in d)if(b=new RegExp("[^a-zA-Z]"+u.abbreviations[g]+"(?:\\)|(\\"+u.currency.symbol+")?(?:\\))?)?$"),h.match(b)){p*=Math.pow(10,d[g]);break}p*=(c.split("-").length+Math.min(c.split("(").length-1,c.split(")").length-1))%2?1:-1,c=c.replace(/[^0-9\.]+/g,""),p*=Number(c)}return p},isNaN:function(c){return typeof c=="number"&&isNaN(c)},includes:function(c,u){return c.indexOf(u)!==-1},insert:function(c,u,h){return c.slice(0,h)+u+c.slice(h)},reduce:function(c,u){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof u!="function")throw new TypeError(u+" is not a function");var h=Object(c),d=h.length>>>0,g=0,p;if(arguments.length===3)p=arguments[2];else{for(;g<d&&!(g in h);)g++;if(g>=d)throw new TypeError("Reduce of empty array with no initial value");p=h[g++]}for(;g<d;g++)g in h&&(p=u(p,h[g],g,h));return p},multiplier:function(c){var u=c.toString().split(".");return u.length<2?1:Math.pow(10,u[1].length)},correctionFactor:function(){var c=Array.prototype.slice.call(arguments);return c.reduce(function(u,h){var d=n.multiplier(h);return u>d?u:d},1)},toFixed:function(c,u,h,d){var g=c.toString().split("."),p=u-(d||0),b,$,E,S;return g.length===2?b=Math.min(Math.max(g[1].length,p),u):b=p,E=Math.pow(10,b),S=(h(c+"e+"+b)/E).toFixed(b),d>u-b&&($=new RegExp("\\.?0{1,"+(d-(u-b))+"}$"),S=S.replace($,"")),S}},e.options=l,e.formats=r,e.locales=s,e.locale=function(c){return c&&(l.currentLocale=c.toLowerCase()),l.currentLocale},e.localeData=function(c){if(!c)return s[l.currentLocale];if(c=c.toLowerCase(),!s[c])throw new Error("Unknown locale : "+c);return s[c]},e.reset=function(){for(var c in o)l[c]=o[c]},e.zeroFormat=function(c){l.zeroFormat=typeof c=="string"?c:null},e.nullFormat=function(c){l.nullFormat=typeof c=="string"?c:null},e.defaultFormat=function(c){l.defaultFormat=typeof c=="string"?c:"0.0"},e.register=function(c,u,h){if(u=u.toLowerCase(),this[c+"s"][u])throw new TypeError(u+" "+c+" already registered.");return this[c+"s"][u]=h,h},e.validate=function(c,u){var h,d,g,p,b,$,E,S;if(typeof c!="string"&&(c+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",c)),c=c.trim(),c.match(/^\d+$/))return!0;if(c==="")return!1;try{E=e.localeData(u)}catch{E=e.localeData(e.locale())}return g=E.currency.symbol,b=E.abbreviations,h=E.delimiters.decimal,E.delimiters.thousands==="."?d="\\.":d=E.delimiters.thousands,S=c.match(/^[^\d]+/),S!==null&&(c=c.substr(1),S[0]!==g)||(S=c.match(/[^\d]+$/),S!==null&&(c=c.slice(0,-1),S[0]!==b.thousand&&S[0]!==b.million&&S[0]!==b.billion&&S[0]!==b.trillion))?!1:($=new RegExp(d+"{2}"),c.match(/[^\d.,]/g)?!1:(p=c.split(h),p.length>2?!1:p.length<2?!!p[0].match(/^\d+.*\d$/)&&!p[0].match($):p[0].length===1?!!p[0].match(/^\d+$/)&&!p[0].match($)&&!!p[1].match(/^\d+$/):!!p[0].match(/^\d+.*\d$/)&&!p[0].match($)&&!!p[1].match(/^\d+$/)))},e.fn=a.prototype={clone:function(){return e(this)},format:function(c,u){var h=this._value,d=c||l.defaultFormat,g,p,b;if(u=u||Math.round,h===0&&l.zeroFormat!==null)p=l.zeroFormat;else if(h===null&&l.nullFormat!==null)p=l.nullFormat;else{for(g in r)if(d.match(r[g].regexps.format)){b=r[g].format;break}b=b||e._.numberToFormat,p=b(h,d,u)}return p},value:function(){return this._value},input:function(){return this._input},set:function(c){return this._value=Number(c),this},add:function(c){var u=n.correctionFactor.call(null,this._value,c);function h(d,g,p,b){return d+Math.round(u*g)}return this._value=n.reduce([this._value,c],h,0)/u,this},subtract:function(c){var u=n.correctionFactor.call(null,this._value,c);function h(d,g,p,b){return d-Math.round(u*g)}return this._value=n.reduce([c],h,Math.round(this._value*u))/u,this},multiply:function(c){function u(h,d,g,p){var b=n.correctionFactor(h,d);return Math.round(h*b)*Math.round(d*b)/Math.round(b*b)}return this._value=n.reduce([this._value,c],u,1),this},divide:function(c){function u(h,d,g,p){var b=n.correctionFactor(h,d);return Math.round(h*b)/Math.round(d*b)}return this._value=n.reduce([this._value,c],u),this},difference:function(c){return Math.abs(e(this._value).subtract(c).value())}},e.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(c){var u=c%10;return~~(c%100/10)===1?"th":u===1?"st":u===2?"nd":u===3?"rd":"th"},currency:{symbol:"$"}}),function(){e.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(c,u,h){var d=e._.includes(u," BPS")?" ":"",g;return c=c*1e4,u=u.replace(/\s?BPS/,""),g=e._.numberToFormat(c,u,h),e._.includes(g,")")?(g=g.split(""),g.splice(-1,0,d+"BPS"),g=g.join("")):g=g+d+"BPS",g},unformat:function(c){return+(e._.stringToNumber(c)*1e-4).toFixed(15)}})}(),function(){var c={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},u={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},h=c.suffixes.concat(u.suffixes.filter(function(g){return c.suffixes.indexOf(g)<0})),d=h.join("|");d="("+d.replace("B","B(?!PS)")+")",e.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(d)},format:function(g,p,b){var $,E=e._.includes(p,"ib")?u:c,S=e._.includes(p," b")||e._.includes(p," ib")?" ":"",m,x,_;for(p=p.replace(/\s?i?b/,""),m=0;m<=E.suffixes.length;m++)if(x=Math.pow(E.base,m),_=Math.pow(E.base,m+1),g===null||g===0||g>=x&&g<_){S+=E.suffixes[m],x>0&&(g=g/x);break}return $=e._.numberToFormat(g,p,b),$+S},unformat:function(g){var p=e._.stringToNumber(g),b,$;if(p){for(b=c.suffixes.length-1;b>=0;b--){if(e._.includes(g,c.suffixes[b])){$=Math.pow(c.base,b);break}if(e._.includes(g,u.suffixes[b])){$=Math.pow(u.base,b);break}}p*=$||1}return p}})}(),function(){e.register("format","currency",{regexps:{format:/(\$)/},format:function(c,u,h){var d=e.locales[e.options.currentLocale],g={before:u.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:u.match(/([\+|\-|\)|\s|\$]*)$/)[0]},p,b,$;for(u=u.replace(/\s?\$\s?/,""),p=e._.numberToFormat(c,u,h),c>=0?(g.before=g.before.replace(/[\-\(]/,""),g.after=g.after.replace(/[\-\)]/,"")):c<0&&!e._.includes(g.before,"-")&&!e._.includes(g.before,"(")&&(g.before="-"+g.before),$=0;$<g.before.length;$++)switch(b=g.before[$],b){case"$":p=e._.insert(p,d.currency.symbol,$);break;case" ":p=e._.insert(p," ",$+d.currency.symbol.length-1);break}for($=g.after.length-1;$>=0;$--)switch(b=g.after[$],b){case"$":p=$===g.after.length-1?p+d.currency.symbol:e._.insert(p,d.currency.symbol,-(g.after.length-(1+$)));break;case" ":p=$===g.after.length-1?p+" ":e._.insert(p," ",-(g.after.length-(1+$)+d.currency.symbol.length-1));break}return p}})}(),function(){e.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(c,u,h){var d,g=typeof c=="number"&&!e._.isNaN(c)?c.toExponential():"0e+0",p=g.split("e");return u=u.replace(/e[\+|\-]{1}0/,""),d=e._.numberToFormat(Number(p[0]),u,h),d+"e"+p[1]},unformat:function(c){var u=e._.includes(c,"e+")?c.split("e+"):c.split("e-"),h=Number(u[0]),d=Number(u[1]);d=e._.includes(c,"e-")?d*=-1:d;function g(p,b,$,E){var S=e._.correctionFactor(p,b),m=p*S*(b*S)/(S*S);return m}return e._.reduce([h,Math.pow(10,d)],g,1)}})}(),function(){e.register("format","ordinal",{regexps:{format:/(o)/},format:function(c,u,h){var d=e.locales[e.options.currentLocale],g,p=e._.includes(u," o")?" ":"";return u=u.replace(/\s?o/,""),p+=d.ordinal(c),g=e._.numberToFormat(c,u,h),g+p}})}(),function(){e.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(c,u,h){var d=e._.includes(u," %")?" ":"",g;return e.options.scalePercentBy100&&(c=c*100),u=u.replace(/\s?\%/,""),g=e._.numberToFormat(c,u,h),e._.includes(g,")")?(g=g.split(""),g.splice(-1,0,d+"%"),g=g.join("")):g=g+d+"%",g},unformat:function(c){var u=e._.stringToNumber(c);return e.options.scalePercentBy100?u*.01:u}})}(),function(){e.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(c,u,h){var d=Math.floor(c/60/60),g=Math.floor((c-d*60*60)/60),p=Math.round(c-d*60*60-g*60);return d+":"+(g<10?"0"+g:g)+":"+(p<10?"0"+p:p)},unformat:function(c){var u=c.split(":"),h=0;return u.length===3?(h=h+Number(u[0])*60*60,h=h+Number(u[1])*60,h=h+Number(u[2])):u.length===2&&(h=h+Number(u[0])*60,h=h+Number(u[1])),Number(h)}})}(),e})})(S1);var LD=S1.exports;const Td=vw(LD);var MD=(t,e)=>t.length>0?()=>t(nt(e)):t;function ND(t,e){let n=0;const i=t.map((r,s)=>te(()=>(n=s,r()),void 0,V2));return te(()=>i.map(r=>r())[n],void 0,e)}function FD(t,e,n){let i=()=>e;const[r,s]=G(e),o=te(MD(t,()=>i()),e);return[i=ND([r,o],n),l=>s(()=>typeof l=="function"?l(nt(i)):l)]}var Iu=(t,e,n)=>{const i=n(t,e);return me(()=>clearInterval(i))},BD=(t,e,n)=>{if(typeof e=="number"){Iu(t,e,n);return}let i=!1,r=performance.now(),s=0,o=!1;const l=()=>{nt(t),r=performance.now(),i=n===setTimeout};ne(a=>{if(i)return;const c=e();if(c===!1)return a&&(s+=(performance.now()-r)/a),c;if(a===!1&&(r=performance.now()),o){if(a&&(s+=(performance.now()-r)/a),r=performance.now(),s>=1)s=0,l();else if(s>0){const[u,h]=G(void 0,{equals:!1});return u(),Iu(()=>{s=0,o=!1,h(),l()},(1-s)*c,setTimeout),c}}return o=!0,Iu(l,c,n),c})};function UD(t,e,n,i){const[r,s]=G(nt(t.bind(void 0,n)),i),o=()=>s(t);return BD(o,e,setInterval),br(o),r}var jD=1e3,Dc=6e4,kd=36e5,HD=864e5,VD=6048e5,KD=2592e6,qD=31536e6,zD=[{max:6e4,value:jD,name:"second"},{max:276e4,value:Dc,name:"minute"},{max:72e6,value:kd,name:"hour"},{max:5184e5,value:HD,name:"day"},{max:24192e5,value:VD,name:"week"},{max:28512e6,value:KD,name:"month"},{max:1/0,value:qD,name:"year"}],E1={justNow:"just now",past:t=>t.match(/\d/)?`${t} ago`:t,future:t=>t.match(/\d/)?`in ${t}`:t,month:(t,e)=>t===1?e?"last month":"next month":`${t} month${t>1?"s":""}`,year:(t,e)=>t===1?e?"last year":"next year":`${t} year${t>1?"s":""}`,day:(t,e)=>t===1?e?"yesterday":"tomorrow":`${t} day${t>1?"s":""}`,week:(t,e)=>t===1?e?"last week":"next week":`${t} week${t>1?"s":""}`,hour:t=>`${t} hour${t>1?"s":""}`,minute:t=>`${t} minute${t>1?"s":""}`,second:t=>`${t} second${t>1?"s":""}`},Bb=t=>t instanceof Date?t:new Date(t),WD=(t,e)=>e.getTime()-t.getTime(),GD=t=>t.toISOString().slice(0,10);function YD(t,e){const n={...E1,...e},i=Math.abs(t);for(const o of zD)if(i<o.max)return s(o);return n.justNow;function r(o,l,a){const c=n[o];return typeof c=="function"?c(l,a):c.replace("{0}",l.toString())}function s(o){const l=Math.round(i/o.value),a=t<0,c=r(o.name,l,a);return r(a?"past":"future",c,a)}}var Ub=t=>{const[e,n]=FD(()=>Bb(K(t)));return[e,r=>n(s=>Bb(S0(r,s)))]};function QD(t=Dc/2){const[e,n]=G(void 0,{equals:!1});return[UD(()=>(e(),new Date),t,void 0,{equals:(r,s)=>r.getTime()===s.getTime()}),n]}function XD(t,e){const[n]=Ub(t),[i]=Ub(e);return[te(()=>WD(n(),i())),{from:n,to:i}]}function JD(t,e=n=>Math.abs(n)<=kd?Dc/2:kd/2){const n=typeof e=="function"?()=>e(s()):e,[i,r]=QD(n),[s,{to:o}]=XD(i,t);return[s,{update:r,target:o,now:i}]}function jb(t,e={}){const{min:n=Dc,max:i=1/0,dateFormatter:r=GD,messages:s,relativeFormatter:o=(u,h,d)=>YD(d,s)}=e,[l,a]=JD(t,e.interval);return[te(()=>{const u=Math.abs(l());return u<n?s?.justNow??E1.justNow:u>i?r(a.target()):o(a.now(),a.target(),l())}),{...a,difference:l}]}function ZD(t){return _e({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="M10.354 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708 0z"/><path d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"/>'},t)}function eI(t){return _e({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="M3.112 5.112a3.125 3.125 0 0 0-.17.613C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13H11l-1-1H3.781C2.231 12 1 10.785 1 9.318c0-1.365 1.064-2.513 2.46-2.666l.446-.05v-.447c0-.075.006-.152.018-.231l-.812-.812zm2.55-1.45-.725-.725A5.512 5.512 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773a3.2 3.2 0 0 1-1.516 2.711l-.733-.733C14.498 11.378 15 10.626 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3c-.875 0-1.678.26-2.339.661z"/><path d="m13.646 14.354-12-12 .708-.708 12 12-.707.707z"/>'},t)}function tI(t){return _e({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M12.096 6.223A4.92 4.92 0 0 0 13 5.698V7c0 .289-.213.654-.753 1.007a4.493 4.493 0 0 1 1.753.25V4c0-1.007-.875-1.755-1.904-2.223C11.022 1.289 9.573 1 8 1s-3.022.289-4.096.777C2.875 2.245 2 2.993 2 4v9c0 1.007.875 1.755 1.904 2.223C4.978 15.71 6.427 16 8 16c.536 0 1.058-.034 1.555-.097a4.525 4.525 0 0 1-.813-.927C8.5 14.992 8.252 15 8 15c-1.464 0-2.766-.27-3.682-.687C3.356 13.875 3 13.373 3 13v-1.302c.271.202.58.378.904.525C4.978 12.71 6.427 13 8 13h.027a4.552 4.552 0 0 1 0-1H8c-1.464 0-2.766-.27-3.682-.687C3.356 10.875 3 10.373 3 10V8.698c.271.202.58.378.904.525C4.978 9.71 6.427 10 8 10c.262 0 .52-.008.774-.024a4.525 4.525 0 0 1 1.102-1.132C9.298 8.944 8.666 9 8 9c-1.464 0-2.766-.27-3.682-.687C3.356 7.875 3 7.373 3 7V5.698c.271.202.58.378.904.525C4.978 6.711 6.427 7 8 7s3.022-.289 4.096-.777ZM3 4c0-.374.356-.875 1.318-1.313C5.234 2.271 6.536 2 8 2s2.766.27 3.682.687C12.644 3.125 13 3.627 13 4c0 .374-.356.875-1.318 1.313C10.766 5.729 9.464 6 8 6s-2.766-.27-3.682-.687C3.356 4.875 3 4.373 3 4Z"/><path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm-.646-4.854.646.647.646-.647a.5.5 0 0 1 .708.708l-.647.646.647.646a.5.5 0 0 1-.708.708l-.646-.647-.646.647a.5.5 0 0 1-.708-.708l.647-.646-.647-.646a.5.5 0 0 1 .708-.708Z"/>'},t)}function cL(t){return _e({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M10.804 8 5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"/>'},t)}function nI(t){return _e({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>'},t)}function uL(t){return _e({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M9.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM6 5.5l-4.535-.442A.531.531 0 0 1 1.531 4H14.47a.531.531 0 0 1 .066 1.058L10 5.5V9l.452 6.42a.535.535 0 0 1-1.053.174L8.243 9.97c-.064-.252-.422-.252-.486 0l-1.156 5.624a.535.535 0 0 1-1.053-.174L6 9V5.5Z"/>'},t)}const iI=t=>v(q$,{get defaultValue(){return t.value},get value(){return t.value},get onChange(){return t.onChange},get placeholder(){return t.placeholder},optionValue:"value",optionTextValue:"label",optionDisabled:"disabled",gutter:0,get options(){return t.options},itemComponent:e=>v(y$,{class:"cursor-pointer w-full border-bg2 last:border-b-0 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg2 focus-visible:ring-4 focus-visible:ring-primary focus-visible:outline-none data-[disabled]:text-gray-600 data-[disabled]:cursor-not-allowed ",get item(){return e.item},get children(){return[v(j$,{class:"max-w-xs truncate",get children(){return e.item.rawValue?.label}}),v(v$,{class:"inline-flex absolute left-0",get children(){return v(ev,{fill:"currentColor",class:"h-4 w-4 mx-1 text-text1"})}})]}}),class:"relative",get children(){return[v(z$,{class:" p-1 outline-none bg-bg2 ring-1 ring-bg2 inline-flex items-center justify-between py-2 px-3 focus-visible:ring-2 focus-visible:ring-primary rounded-md",get children(){return[v(G$,{children:e=>e.selectedOption()?.label}),v(U$,{get children(){return v(NC,{fill:"currentColor",class:"h-3 w-3 text-text1 relative left-1"})}})]}}),v(V$,{get children(){return v(B$,{class:"bg-bg1 p-1 rounded-md z-[999999] ",get children(){return[v(rc,{}),v(H$,{class:"overflow-y-auto max-h-[40vh] p-2 "})]}})}})]}}),rI=V('<div class="flex items-center gap-2"><!#><!/><div class="text-text1">Add to playlist'),sI=V('<div class="flex items-center gap-2"><!#><!/><div class="text-text1">Watch later'),oI=V('<div class="flex items-center gap-2"><!#><!/><div class="text-text1">Mark as watched'),aI=V('<div class="flex items-center gap-2"><!#><!/><div class="text-text1">Remove from history'),lI=V('<div class="flex items-center gap-2"><!#><!/><div class="text-text1">Share'),cI=V('<img class="w-6 h-6 rounded-full">'),uI=V('<span class="text-text2 max-w-xs truncate">'),hI=V('<div class="flex items-center gap-2"><!#><!/><!#><!/><div class="text-text1">'),dI=V('<div class="flex items-center gap-2"><!#><!/><div class="text-text1">Block'),fI=V('<div class="flex items-center gap-2"><!#><!/><div class="text-text1">Debug info'),pI=V('<pre class="break-all text-text1 max-w-full min-w-0 overflow-auto z-[9999999]">'),gI=V(`<div class="flex items-center gap-2"><div class="text-text1">You don't have any playlists yet.`),mI=V('<div class="text-text1">Select a playlist to add this video to:'),bI=V('<div class=" w-full flex justify-center items-center mb-2">'),yI=V('<div class="flex flex-col gap-4">'),vI=V('<div class="flex items-center justify-center gap-4 my-2"><!#><!/><!#><!/>');function wI(t){const[e,n]=G(!1),[i,r]=G(!1),s=js(),[o,l]=G(!1);return[v(Ky,{overlap:!0,get open(){return e()},onOpenChange:n,gutter:0,modal:!0,hideWhenDetached:!0,get children(){return[v(Hy,{class:"p-1 outline-none focus-visible:ring-2 focus-visible:ring-primary rounded-md",get children(){return v(nI,{fill:"currentColor",class:"text-text2 w-6 h-6 group-hover:text-text1"})}}),v(Uy,{get children(){return v(Vy,{onTouchEnd:async a=>{await yo(),a.preventDefault(),a.stopPropagation()},class:`bg-bg1 border border-bg2 shadow p-2 rounded-md z-50
                -translate-y-4
                animate-in
                fade-in
                slide-in-from-top-10
                duration-200
                `,get children(){return[v(rc,{}),v(Bi,{onClick:a=>{a.stopPropagation()},onPointerUp:a=>{a.stopPropagation()},onSelect:()=>{l(!0)},class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",get children(){const a=H(rI),c=a.firstChild,[u,h]=ee(c.nextSibling);return u.nextSibling,U(a,v(LC,{class:""}),u,h),a}}),v(Bi,{onClick:a=>{a.stopPropagation()},onPointerUp:a=>{a.stopPropagation()},onSelect:()=>{try{s.setStore("watchLater",{[ht(t.v)]:{title:t.v.title,url:t.v.url,duration:t.v.duration,uploaderName:t.v.uploaderName,uploaderUrl:t.v.uploaderUrl,uploaderAvatar:t.v.uploaderAvatar,views:t.v.views,uploaded:t.v.uploaded,thumbnail:t.v.thumbnail,uploaderVerified:t.v.uploaderVerified}}),qi.success(`Added "${t.v.title.length>20?t.v.title.slice(0,20)+"...":t.v.title}" to watch later.`)}catch(a){qi.error("Failed to add to watch later. "+a.message),console.error(a)}},class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",get children(){const a=H(sI),c=a.firstChild,[u,h]=ee(c.nextSibling);return u.nextSibling,U(a,v(cT,{class:""}),u,h),a}}),v(he,{get when(){return t.progress===void 0},get children(){return v(Bi,{class:"cursor-pointer z-50 w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onClick:async a=>{await yo(),a.stopPropagation()},onPointerUp:a=>{a.stopPropagation()},as:"button",onTouchEnd:a=>{a.preventDefault(),a.stopPropagation()},onSelect:()=>{if(!t.v)return;const a={[ht(t.v)]:{title:t.v.title,url:t.v.url,duration:t.v.duration,uploaderName:t.v.uploaderName,uploaderUrl:t.v.uploaderUrl,uploaderAvatar:t.v.uploaderAvatar,views:t.v.views,uploaded:t.v.uploaded,thumbnail:t.v.thumbnail,uploaderVerified:t.v.uploaderVerified,currentTime:t.v.duration,watchedAt:Date.now()}};s.setStore("history",a),console.log("added to history")},get children(){const a=H(oI),c=a.firstChild,[u,h]=ee(c.nextSibling);return u.nextSibling,U(a,v(EC,{fill:"currentColor"}),u,h),a}})}}),v(he,{get when(){return t.progress!==void 0},get children(){return v(Bi,{class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onClick:a=>{a.stopPropagation()},onTouchEnd:a=>{a.preventDefault(),a.stopPropagation()},onSelect:()=>{s.setStore("history",{[ht(t.v)]:void 0})},get children(){const a=H(aI),c=a.firstChild,[u,h]=ee(c.nextSibling);return u.nextSibling,U(a,v(SC,{fill:"currentColor"}),u,h),a}})}}),v(Bi,{class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onClick:a=>{a.stopPropagation()},onPointerUp:a=>{a.stopPropagation()},onSelect:()=>{},get children(){const a=H(lI),c=a.firstChild,[u,h]=ee(c.nextSibling);return u.nextSibling,U(a,v(MC,{}),u,h),a}}),v(he,{get when(){return t.v.uploaderName&&t.v.uploaderUrl},get children(){return v(By,{class:"mt-2",get children(){return[v(T$,{class:"flex items-center gap-2",get children(){return[(()=>{const a=H(cI);return Le(()=>ct(a,"src",t.v.uploaderAvatar??"")),a})(),(()=>{const a=H(uI);return U(a,()=>t.v.uploaderName),a})()]}}),v(Bi,{class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border- hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onClick:a=>{a.stopPropagation()},onPointerUp:a=>{a.stopPropagation()},onSelect:()=>{const a=t.v.uploaderUrl.split("/channel/")[1];s.store.subscriptions[a]?(s.setStore("subscriptions",a,void 0),qi.success(`Unsubscribed from ${t.v.uploaderName}.`)):(s.setStore("subscriptions",a,{subscribedAt:Date.now()}),qi.success(`Subscribed to ${t.v.uploaderName}.`))},get children(){const a=H(hI),c=a.firstChild,[u,h]=ee(c.nextSibling),d=u.nextSibling,[g,p]=ee(d.nextSibling),b=g.nextSibling;return U(a,v(he,{get when(){return s.store.subscriptions[t.v.uploaderUrl.split("/channel/")[1]]},get children(){return v(IC,{})}}),u,h),U(a,v(he,{get when(){return!s.store.subscriptions[t.v.uploaderUrl.split("/channel/")[1]]},get children(){return v(RC,{})}}),g,p),U(b,()=>s.store.subscriptions[t.v.uploaderUrl.split("/channel/")[1]]?"Unsubscribe":"Subscribe"),a}}),v(Bi,{class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onClick:a=>{a.stopPropagation()},onPointerUp:a=>{a.stopPropagation()},onSelect:()=>{},get children(){const a=H(dI),c=a.firstChild,[u,h]=ee(c.nextSibling);return u.nextSibling,U(a,v(CC,{}),u,h),a}})]}})}}),v(Bi,{class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded  hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onSelect:()=>r(!0),get children(){const a=H(fI),c=a.firstChild,[u,h]=ee(c.nextSibling);return u.nextSibling,U(a,v(kC,{fill:"currentColor"}),u,h),a}})]}})}})]}}),v(lf,{get isOpen(){return i()},setIsOpen:r,title:"Debug info",get children(){const a=H(pI);return U(a,()=>JSON.stringify(t.v,null,2)),a}}),v(_I,{get isOpen(){return o()},setIsOpen:l,get v(){return t.v}})]}const _I=t=>{const e=js(),n=()=>{const s=prompt("Playlist name");if(!s)return;const o=`conduit-${Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}`,l={name:s,relatedStreams:[],videos:0,uploader:"You",description:"",bannerUrl:"",uploaderAvatar:"",uploaderUrl:"",thumbnailUrl:"",nextpage:""};e.setStore("playlists",{[o]:l})},[i,r]=G({value:"",label:"",disabled:!1});return v(lf,{get isOpen(){return t.isOpen},get setIsOpen(){return t.setIsOpen},title:"Add to playlist",get children(){return[(()=>{const s=H(yI);return U(s,v(qo,{get children(){return[v(sn,{get when(){return Object.keys(e.store.playlists).length===0},get children(){return H(gI)}}),v(sn,{get when(){return Object.keys(e.store.playlists).length>0},get children(){return[H(mI),(()=>{const o=H(bI);return U(o,v(iI,{get options(){return Object.entries(e.store.playlists).map(([l,a])=>({value:l,label:a.name,disabled:a.relatedStreams?.some(c=>c.url===t.v.url)}))},get value(){return i()},onChange:r,placeholder:"Select a playlist..."})),o})()]}})]}})),s})(),(()=>{const s=H(vI),o=s.firstChild,[l,a]=ee(o.nextSibling),c=l.nextSibling,[u,h]=ee(c.nextSibling);return U(s,v(fr,{appearance:"subtle",label:"Create a playlist",onClick:()=>n()}),l,a),U(s,v(fr,{onClick:()=>{console.log(t.v,i(),e.store.playlists[i().value]?.relatedStreams);try{const d=e.store.playlists[i().value],g=d?.relatedStreams.length||0;e.setStore("playlists",i().value,"relatedStreams",[...d.relatedStreams,{url:t.v.url,title:t.v.title,type:t.v.type,duration:t.v.duration,thumbnail:t.v.thumbnail,uploaderName:t.v.uploaderName,uploaderUrl:t.v.uploaderUrl,uploaderAvatar:t.v.uploaderAvatar,views:t.v.views,uploaded:t.v.uploaded,uploaderVerified:t.v.uploaderVerified,shortDescription:"",uploadedDate:t.v.uploadedDate,isShort:t.v.isShort,order:g,timeAdded:Date.now()}]),qi.success(`Added "${t.v.title.length>20?t.v.title.slice(0,20)+"...":t.v.title}" to playlist "${d.name}".`),t.setIsOpen(!1)}catch(d){qi.error("Failed to add to playlist. "+d.message),console.error(d)}},label:"Add",get isDisabled(){return!i().value},appearance:"primary"}),u,h),s})()]}})};function ga(t){const e=()=>{switch(t.placement){case"top":return"tooltip animate-out fade-out slide-out-to-bottom-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-bottom-4";case"bottom":return"tooltip animate-out fade-out slide-out-to-top-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-top-4";case"left":return"tooltip animate-out fade-out slide-out-to-right-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-right-4";case"right":return"tooltip animate-out fade-out slide-out-to-left-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-left-4";case"top-end":return"tooltip animate-out fade-out slide-out-to-bottom-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-bottom-4";case"left-end":return"tooltip animate-out fade-out slide-out-to-right-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-right-4";case"right-end":return"tooltip animate-out fade-out slide-out-to-left-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-left-4";case"bottom-end":return"tooltip animate-out fade-out slide-out-to-top-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-top-4";case"top-start":return"tooltip animate-out fade-out slide-out-to-bottom-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-bottom-4";case"left-start":return"tooltip animate-out fade-out slide-out-to-right-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-right-4";case"right-start":return"tooltip animate-out fade-out slide-out-to-left-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-left-4";case"bottom-start":return"tooltip animate-out fade-out slide-out-to-top-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-top-4";default:return"tooltip animate-out fade-out slide-out-to-bottom-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-bottom-4"}},[n,i]=G(t.open??!1);ne(()=>{s(t.open??!1)});let r=null;const s=a=>{if(!t.disabled){if(r&&clearTimeout(r),a===!1)return i(!1);r=setTimeout(()=>{i(a)},t.openDelay??0)}},[o,l]=G(!1);return v(vC,{get placement(){return t.placement},get gutter(){return t.gutter??8},get open(){return n()},get onOpenChange(){return t.onOpenChange},get children(){return[v(wC,{get as(){return t.as??"button"},get onFocus(){return t.onFocus},onFocusIn:async a=>{await yo(),!o()&&s(!0)},onFocusOut:()=>s(!1),onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onPointerDown:()=>{l(!0),setTimeout(()=>l(!1),500)},get disabled(){return t.disabled},get class(){return t.class},get onClick(){return t.onClick},get children(){return t.triggerSlot}}),v(mC,{get children(){return v(gC,{get class(){return`${e()} z-[99999999] break-words max-w-xs rounded-sm bg-black/90 px-2 py-0.5 text-sm font-medium font-sans text-white`},get children(){return t.contentSlot}})}})]}})}const xI=V('<div><div></div><div><div><!#><!/><!#><!/></div><div class="flex flex-col justify-between">'),SI=V('<div class="flex flex-col gap-1"><div aria-hidden="true" class="animate-pulse bg-bg2 w-full rounded-lg h-4 text-transparent">placeholder placeholder placeholder placeholder pla</div><div aria-hidden="true" class="animate-pulse bg-bg2 w-1/2 h-4 rounded-lg ">'),EI=V('<img width="2560" height="1440" alt="" loading="lazy">'),$I=V('<div class="relative h-0 w-0 "><div class="absolute flex items-center left-2 bottom-2 bg-bg1/90 rounded px-1 py-px border border-bg2 w-max h-max text-xs"><!#><!/><!#><!/>'),CI=V('<div class="absolute left-2 bottom-2 bg-bg1/90 rounded px-1 py-px border border-bg2 w-max h-max text-xs">Watched'),TI=V('<div class="relative h-0 w-12 place-self-end lg:w-16 "><div class="absolute bottom-2 right-2 bg-bg1/90 rounded px-1 py-px border border-bg2 text-xs"><!#><!/><!#><!/>'),kI=V('<div class="relative h-0 w-full"><div class="absolute bottom-0 h-1 bg-highlight">'),PI=V('<div class="relative flex aspect-video w-full flex-col rounded-lg overflow-hidden max-w-md"><div class="animate-pulse bg-bg2 aspect-video h-full max-w-max w-full"><div class="bg-bg2 animate-pulse aspect-auto h-96 max-w-fit w-full invisible" aria-hidden="true">placeholder placeholder placeholder placeh placeholder placeholder placeholder placeh placeholder placeholder placeholder placeh placeholder placeholder placeholder placeh</div>'),AI=V('<img width="32" height="32" class="rounded-full" alt="">'),OI=V('<div class="group mb-1 w-max underline ">'),DI=V('<div class="peer w-fit ">'),II=V('<div class="w-fit"> <!#><!/> views'),RI=V('<div class="mx-1">'),LI=V('<div class=""><!#><!/> '),MI=V('<div class="flex gap-2 text-text2"><!#><!/><div class="flex w-full flex-col text-xs"><!#><!/><div class="flex flex-wrap"><!#><!/><!#><!/><!#><!/>'),NI=V('<div class="flex flex-col gap-2 pr-2 w-full "><div class="flex gap-2 text-text2"><div class="animate-pulse bg-bg2 w-8 h-8 aspect-square rounded-full"></div><div class="flex w-full flex-col gap-2 justify-center"><div class="animate-pulse bg-bg2 w-32 h-4 rounded-lg">');function FI(t,e){const n=Math.floor((t.getTime()-e.getTime())/1e3),i=60,r=i*60,s=r*24,o=s*30,l=s*365;return n>=l?`${Math.floor(n/l)}Y`:n>=o?`${Math.floor(n/o)}M`:n>=s?`${Math.floor(n/s)}d`:n>=r?`${Math.floor(n/r)}h`:n>=i?`${Math.floor(n/i)}m`:"now"}const BI=t=>{const e=js(),n=()=>e.store.history[ht(t.v)]?.watchedAt,[i,r]=G(void 0);ne(()=>{const[c]=jb(n()??new Date,{interval:6e4,relativeFormatter:FI});r(c())});const[s]=t.v?jb(t.v.uploaded,{interval:0}):[()=>""],o=()=>ht(t.v),l=()=>o()?e.store.history[o()]:void 0,[a]=Dr();return(()=>{const c=H(xI),u=c.firstChild,h=u.nextSibling,d=h.firstChild,g=d.firstChild,[p,b]=ee(g.nextSibling),$=p.nextSibling,[E,S]=ee($.nextSibling),m=d.nextSibling;return on(c,{"flex w-full sm:max-w-max mx-1 items-start rounded-xl bg-bg1 p-2 sm:flex-col sm:w-72 flex-row gap-2 sm:gap-0 min-w-full sm:min-w-0":!0}),on(u,{"max-w-sm max-h-44 aspect-video sm:max-h-full overflow-hidden min-w-min sm:w-full":!0}),U(u,v(he,{get when(){return t.v},get fallback(){return v(jI,{})},get children(){return v(UI,{get url(){return`/watch?v=${o()}${a.fullscreen?`&fullscreen=${a.fullscreen}`:""}`},get src(){return t.v.thumbnail},get duration(){return t.v.duration},get watched(){return!!l()},get watchedAt(){return i()},get currentTime(){return l()?.currentTime}})}})),on(h,{"flex w-full min-w-0 max-w-full justify-between h-full sm:mt-2 sm:max-h-20":!0}),on(d,{"flex flex-col flex-1 gap-2 pr-2 h-full":!0}),U(d,v(he,{get when(){return t.v},get fallback(){return H(SI)},get children(){return v(ga,{as:"div",placement:"top",openDelay:1e3,get triggerSlot(){return v(ho,{get href(){return`/watch?v=${o()}${a.fullscreen?`&fullscreen=${a.fullscreen}`:""}`},class:"text-start two-line-ellipsis min-w-0 py-1 outline-none focus-visible:ring-2 focus-visible:ring-primary",get children(){return t.v.title}})},get contentSlot(){return t.v.title}})}}),p,b),U(d,v(he,{get when(){return t.v},get fallback(){return v(VI,{})},get children(){return v(HI,{get url(){return t.v.url},get title(){return t.v.title},get uploaderName(){return t.v.uploaderName},get uploaderUrl(){return t.v.uploaderUrl},get uploaderAvatar(){return t.v.uploaderAvatar},get views(){return t.v.views},get uploaded(){return s()},get live(){return t.v.uploaded===-1}})}}),E,S),U(m,v(he,{get when(){return t.v},get children(){return v(wI,{get v(){return t.v},get progress(){return l()?.currentTime}})}})),c})()},UI=t=>v(ho,{get href(){return t.url},class:"relative flex aspect-video w-full flex-col overflow-hidden rounded min-w-min text-text1 outline-none focus-visible:ring-2 focus-visible:ring-primary",get children(){return[(()=>{const e=H(EI);return Le(n=>{const i={"cursor-pointer w-full min-w-[10rem] aspect-video max-w-md break-words ":!0,"saturate-[0.35] opacity-75":t.watched},r=t.src;return n._v$=on(e,i,n._v$),r!==n._v$2&&ct(e,"src",n._v$2=r),n},{_v$:void 0,_v$2:void 0}),e})(),v(qo,{get children(){return[v(sn,{get when(){return t.watched&&t.watchedAt},get children(){const e=H($I),n=e.firstChild,i=n.firstChild,[r,s]=ee(i.nextSibling),o=r.nextSibling,[l,a]=ee(o.nextSibling);return U(n,v(OC,{title:"Watched",class:"inline-block h-3 w-3 mr-1"}),r,s),U(n,()=>t.watchedAt,l,a),e}}),v(sn,{get when(){return t.watched&&!t.watchedAt},get children(){return H(CI)}})]}}),(()=>{const e=H(TI),n=e.firstChild,i=n.firstChild,[r,s]=ee(i.nextSibling),o=r.nextSibling,[l,a]=ee(o.nextSibling);return U(n,v(he,{get when(){return t.duration===-1},children:"Live"}),r,s),U(n,v(he,{get when(){return t.duration!==-1},get children(){return Td(t.duration).format("00:00:00").replace(/^0:/,"")}}),l,a),e})(),v(he,{get when(){return t.currentTime},get children(){const e=H(kI),n=e.firstChild;return Le(()=>`clamp(0%, ${t.currentTime/t.duration*100}%, 100%`!=null?n.style.setProperty("width",`clamp(0%, ${t.currentTime/t.duration*100}%, 100%`):n.style.removeProperty("width")),e}})]}}),jI=()=>H(PI),HI=t=>(()=>{const e=H(MI),n=e.firstChild,[i,r]=ee(n.nextSibling),s=i.nextSibling,o=s.firstChild,[l,a]=ee(o.nextSibling),c=l.nextSibling,u=c.firstChild,[h,d]=ee(u.nextSibling),g=h.nextSibling,[p,b]=ee(g.nextSibling),$=p.nextSibling,[E,S]=ee($.nextSibling);return U(e,v(he,{get when(){return t.uploaderAvatar},get children(){const m=H(OI);return U(m,v(ho,{tabindex:-1,"aria-hidden":"true",get href(){return t.uploaderUrl||""},class:"flex max-w-max items-center gap-2 outline-none focus-visible:ring-2 focus-visible:ring-primary",get children(){const x=H(AI);return Le(()=>ct(x,"src",t.uploaderAvatar)),x}})),m}}),i,r),U(s,v(ho,{get href(){return t.uploaderUrl||""},class:"outline-none focus-visible:ring-2 focus-visible:ring-primary",get children(){const m=H(DI);return U(m,()=>t.uploaderName),m}}),l,a),U(c,v(he,{get when(){return t.views},get children(){const m=H(II),x=m.firstChild,_=x.nextSibling,[C,w]=ee(_.nextSibling);return C.nextSibling,U(m,()=>Td(t.views).format("0a").toUpperCase(),C,w),Le(()=>ct(m,"title",`${Td(t.views).format("0,0")} views`)),m}}),h,d),U(c,v(he,{get when(){return!t.live},get children(){return H(RI)}}),p,b),U(c,v(he,{get when(){return!t.live},get children(){const m=H(LI),x=m.firstChild,[_,C]=ee(x.nextSibling);return _.nextSibling,U(m,()=>t.uploaded,_,C),Le(()=>ct(m,"title",new Date(t.uploaded).toLocaleString())),m}}),E,S),e})(),VI=()=>H(NI);let Hb=class{next=null;prev=null;constructor(e){this.value=e}};class $1{head=G(null);tail=G(null);current=G(null);_length=G(0);videoIdSet=new Set;get currentVideo(){return this.current[0]()?.value}constructor(e=[]){e.forEach(n=>this.add(n))}[Symbol.iterator](){let e=this.head[0]()?.value;return{next:()=>{if(e){const n=e;return e=this.head[0]()?.next?.value,{value:n,done:!1}}else return{value:void 0,done:!0}}}}add(e){const n=ht(e);if(console.log("adding",n),!n||this.videoIdSet.has(n))return;const i=new Hb(e),r=this.tail[0]();r?(r.next=i,i.prev=r,this.tail[1](i)):(this.head[1](i),this.tail[1](i),this.current[0]()||this.current[1](i)),this.videoIdSet.add(n),this._length[1](this._length[0]()+1)}list(){const e=[];let n=this.head[0]();for(;n;)e.push(n.value),n=n.next;return e}enqueueNext(e){const n=ht(e);if(!n||this.videoIdSet.has(n))return;const i=this.current[0]();if(!i){this.add(e);return}const r=new Hb(e),s=i.next;i.next=r,r.prev=i,r.next=s,s&&(s.prev=r),i===this.tail[0]()&&this.tail[1](r),this.videoIdSet.add(n),this._length[1](this._length[0]()+1)}next(){const e=this.current[0]();return e?.next?(this.current[1](e.next),e.next.value):null}peekNext(){return this.current[0]()?.next?.value||null}prev(){const e=this.current[0]();return e?.prev?(this.current[1](e.prev),e.prev.value):null}peekPrev(){return this.current[0]()?.prev?.value||null}length(){return this._length[0]()}has(e){return this.videoIdSet.has(e)}isEmpty(){return this._length[0]()===0}setCurrentVideo(e){let n=this.head[0]();for(;n;){if(ht(n.value)===e)return this.current[1](n),!0;n=n.next}return!1}remove(e){let n=this.head[0]();for(;n;){if(ht(n.value)===e)return n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),n===this.head[0]()&&this.head[1](n.next),n===this.tail[0]()&&this.tail[1](n.prev),n===this.current[0]()&&this.current[1](n.next),this._length[1](this._length[0]()-1),!0;n=n.next}return this.videoIdSet.delete(e),!1}clear(){this.head[1](null),this.tail[1](null),this.current[1](null),this._length[1](0),this.videoIdSet.clear()}getTotalDuration(){let e=this.head[0](),n=0;for(;e;)n+=e.value.duration,e=e.next;return n}}const C1=Ue(new $1);function KI(t){const e=new $1;return v(C1.Provider,{value:e,get children(){return t.children}})}function T1(){const t=Me(C1);if(!t)throw new Error("useQueue must be used within a QueueProvider");return t}const k1=Ue(null);function qI(t){const e=G();return v(k1.Provider,{value:e,get children(){return t.children}})}const zI=()=>{const t=Me(k1);if(!t)throw new Error("usePlaylist must be used within a PlaylistProvider");return t},WI="_controls_1xob6_1",P1={controls:WI},GI=V("<media-tooltip><media-tooltip-trigger></media-tooltip-trigger><media-tooltip-content>",!0,!1);function ma(t){const e=()=>t.placement.includes("bottom");return(()=>{const n=H(GI),i=n.firstChild,r=i.nextSibling;return n._$owner=ie(),i._$owner=ie(),U(i,()=>t.triggerSlot),r._$owner=ie(),U(r,()=>t.contentSlot),Le(s=>{const o=t.class,l={"tooltip animate-out fade-out slide-out-to-bottom-2 data-[visible]:animate-in data-[visible]:fade-in data-[visible]:slide-in-from-bottom-4 z-10 rounded-sm bg-black/90 px-2 py-0.5 text-sm font-medium text-white":!0,"!top-12":e()},a=t.placement;return o!==s._v$&&zo(n,s._v$=o),s._v$2=on(r,l,s._v$2),a!==s._v$3&&(r.placement=s._v$3=a),s},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()}const YI=V('<media-caption-button class="ring-primary group relative mr-0.5 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 data-[focus]:ring-4 aria-hidden:hidden"><media-icon class="media-captions:block hidden h-8 w-8" type="closed-captions-on" aria-label="Closed-Captions On"></media-icon><media-icon class="media-captions:hidden h-8 w-8" type="closed-captions" aria-label="Closed-Captions Off">',!0,!1),QI=V('<span class="media-captions:block hidden">Closed-Captions Off'),XI=V('<span class="media-captions:hidden">Closed-Captions On');function A1(t){return v(ma,{get placement(){return t.tooltipPlacement},get triggerSlot(){return(()=>{const e=H(YI),n=e.firstChild,i=n.nextSibling;return e._$owner=ie(),n._$owner=ie(),i._$owner=ie(),e})()},get contentSlot(){return[H(QI),H(XI)]}})}const JI=V('<media-icon class="h-8 w-8" type="fullscreen-exit" aria-label="Exit Fullscreen">',!0,!1),ZI=V('<media-icon class="h-8 w-8" type="fullscreen" aria-label="Enter Fullscreen">',!0,!1),e5=V('<span class="">Exit Fullscreen'),t5=V('<span class="">Enter Fullscreen');function n5(t){const[e,n]=Dr();ne(()=>{document.onfullscreenchange=()=>{document.fullscreenElement?n({fullscreen:!0}):n({fullscreen:void 0})}});const i=()=>!!e.fullscreen;return v(ga,{as:"div",placement:"top",gutter:28,openDelay:500,get triggerSlot(){return v(Jy,{get pressed(){return i()},role:"button",class:"ring-primary group relative mr-0.5 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 focus-visible:ring-4 aria-hidden:hidden",onChange:r=>{r?(console.log("fullscreen button pressed, entering fullscreen"),document.documentElement.requestFullscreen(),screen.orientation.lock("landscape").catch(()=>{}),n({fullscreen:!0},{replace:!0}),document.body.scroll({top:0,left:0,behavior:"smooth"})):(document.exitFullscreen(),screen.orientation.unlock(),n({fullscreen:void 0},{replace:!0}))},get children(){return[v(he,{get when(){return e.fullscreen},get children(){const r=H(JI);return r._$owner=ie(),r}}),v(he,{get when(){return!e.fullscreen},get children(){const r=H(ZI);return r._$owner=ie(),r}})]}})},get contentSlot(){return[v(he,{get when(){return e.fullscreen},get children(){return H(e5)}}),v(he,{get when(){return!e.fullscreen},get children(){return H(t5)}})]}})}const i5=V(`<media-mute-button class="ring-primary group relative -mr-1.5 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 data-[focus]:ring-4"><media-icon aria-label="Muted" class="hidden h-8 w-8 group-data-[state='muted']:block" type="mute"></media-icon><media-icon aria-label="Unmuted" class="hidden h-8 w-8 group-data-[state='low']:block" type="volume-low"></media-icon><media-icon aria-label="Unmuted" class="hidden h-8 w-8 group-data-[state='high']:block" type="volume-high">`,!0,!1),r5=V('<span class="media-muted:hidden">Mute'),s5=V('<span class="media-muted:block hidden">Unmute');function O1(t){return v(ma,{class:"peer",get placement(){return t.tooltipPlacement},get triggerSlot(){return(()=>{const e=H(i5),n=e.firstChild,i=n.nextSibling,r=i.nextSibling;return e._$owner=ie(),n._$owner=ie(),i._$owner=ie(),r._$owner=ie(),e})()},get contentSlot(){return[H(r5),H(s5)]}})}const o5=V('<media-pip-button class="ring-primary group relative mr-0.5 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 data-[focus]:ring-4 aria-hidden:hidden"><media-icon aria-label="Enter Picture in Picture" class="media-pip:hidden h-8 w-8" type="picture-in-picture"></media-icon><media-icon aria-label="Exit Picture in Picture" class="media-pip:block hidden h-8 w-8" type="picture-in-picture-exit">',!0,!1),a5=V('<span class="media-pip:hidden">Enter PIP'),l5=V('<span class="media-pip:block hidden">Exit PIP');function c5(t){return v(ma,{get placement(){return t.tooltipPlacement},get triggerSlot(){return(()=>{const e=H(o5),n=e.firstChild,i=n.nextSibling;return e._$owner=ie(),n._$owner=ie(),i._$owner=ie(),e})()},get contentSlot(){return[H(a5),H(l5)]}})}const u5=V('<media-play-button class="ring-primary relative inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 data-[focus]:ring-4"><media-icon class="media-paused:block hidden h-8 w-8" type="play"></media-icon><media-icon class="media-paused:hidden h-8 w-8" type="pause">',!0,!1),h5=V('<span class="media-paused:block hidden">Play'),d5=V('<span class="media-paused:hidden">Pause');function f5(t){return v(ma,{get placement(){return t.tooltipPlacement},get triggerSlot(){return(()=>{const e=H(u5),n=e.firstChild,i=n.nextSibling;return e._$owner=ie(),n._$owner=ie(),i._$owner=ie(),e})()},get contentSlot(){return[H(h5),H(d5)]}})}const p5="_captions_jw0nu_1",g5={captions:p5},m5=V("<media-captions>",!0,!1);function D1(){return(()=>{const t=H(m5);return t._$owner=ie(),Le(()=>zo(t,`${g5.captions} media-preview:opacity-0 media-controls:bottom-[85px] media-captions:opacity-100 absolute inset-0 bottom-2 z-10 select-none break-words opacity-0 transition-[opacity,bottom] duration-300`)),t})()}const b5=V('<span class="inline-block flex-1 w-full overflow-hidden text-ellipsis whitespace-nowrap px-2 text-sm font-medium text-white"><span class="mr-2"></span><media-chapter-title>',!0,!1);function y5(){return(()=>{const t=H(b5),e=t.firstChild,n=e.nextSibling;return n._$owner=ie(),t})()}const v5=V('<media-gesture class="absolute inset-0 z-0 block h-full w-full" event="dblpointerup" action="toggle:paused">',!0,!1),w5=V('<media-gesture class="absolute inset-0 z-0 block h-full w-full" event="pointerup" action="toggle:controls">',!0,!1),_5=V('<media-gesture class="absolute left-0 top-0 z-10 block h-full w-1/5" event="dblpointerup" action="seek:-10">',!0,!1),x5=V('<media-gesture class="absolute right-0 top-0 z-10 block h-full w-1/5" event="dblpointerup" action="seek:10">',!0,!1);function S5(){return[(()=>{const t=H(v5);return t._$owner=ie(),t})(),(()=>{const t=H(w5);return t._$owner=ie(),t})(),(()=>{const t=H(_5);return t._$owner=ie(),t})(),(()=>{const t=H(x5);return t._$owner=ie(),t})()]}const E5=V('<media-radio class="ring-primary group relative flex w-full cursor-pointer select-none items-center justify-start rounded-sm p-2.5 outline-none data-[hocus]:bg-white/10 data-[focus]:ring-[3px]"><media-icon class="h-4 w-4 text-white group-data-[checked]:hidden" type="radio-button"></media-icon><media-icon class="text-primary hidden h-4 w-4 group-data-[checked]:block" type="radio-button-selected"></media-icon><span class="ml-2" data-part="label"></span><span class="ml-auto text-white/50 text-xs" data-part="bitrate">',!0,!1);function Ic(){return(()=>{const t=H(E5),e=t.firstChild,n=e.nextSibling;return t._$owner=ie(),e._$owner=ie(),n._$owner=ie(),t})()}const $5=V('<media-menu-button class="ring-primary parent left-0 z-10 flex w-full cursor-pointer select-none items-center justify-start rounded-sm p-2.5 bg-black/95 outline-none ring-inset data-[open]:sticky data-[open]:top-0 data-[hocus]:bg-neutral-800/80 data-[focus]:ring-[3px] aria-hidden:hidden"><media-icon class="parent-data-[open]:block -ml-0.5 mr-1.5 hidden h-[18px] w-[18px]" type="chevron-left"></media-icon><div class="contents parent-data-[open]:hidden"></div><span class="ml-1.5 parent-data-[open]:ml-0"></span><span class="ml-auto text-sm text-white/50" data-part="hint"></span><media-icon class="parent-data-[open]:hidden ml-0.5 h-[18px] w-[18px] text-sm text-white/50" type="chevron-right">',!0,!1);function C5(t){return(()=>{const e=H($5),n=e.firstChild,i=n.nextSibling,r=i.nextSibling,s=r.nextSibling,o=s.nextSibling;return e._$owner=ie(),n._$owner=ie(),U(i,()=>t.children),U(r,()=>t.label),o._$owner=ie(),e})()}const T5=V('<media-menu><!#><!/><media-menu-items class="hidden w-full flex-col items-start justify-center outline-none data-[keyboard]:mt-[3px] data-[open]:inline-block data-[open]:mt-0">',!0,!1);function Rc(t){return(()=>{const e=H(T5),n=e.firstChild,[i,r]=ee(n.nextSibling),s=i.nextSibling;return e._$owner=ie(),U(e,v(C5,{get label(){return t.label},get children(){return t.iconSlot}}),i,r),s._$owner=ie(),U(s,()=>t.children),e})()}const k5=V('<media-audio-radio-group class="w-full flex flex-col"><template>',!0,!1),P5=V('<media-icon class="h-5 w-5" type="volume-high">',!0,!1);function A5(){return v(Rc,{label:"Audio",get iconSlot(){return(()=>{const t=H(P5);return t._$owner=ie(),t})()},get children(){const t=H(k5),e=t.firstChild;return t._$owner=ie(),U(e,v(Ic,{})),t}})}const O5=V('<media-speed-radio-group class="w-full flex flex-col"><template>',!0,!1),D5=V('<media-icon class="h-5 w-5" type="playback-speed-circle">',!0,!1);function I5(){return v(Rc,{label:"Speed",get iconSlot(){return(()=>{const t=H(D5);return t._$owner=ie(),t})()},get children(){const t=H(O5),e=t.firstChild;return t._$owner=ie(),U(e,v(Ic,{})),t}})}const R5=V('<media-captions-radio-group class="w-full flex flex-col"><template>',!0,!1),L5=V('<media-icon class="h-5 w-5" type="closed-captions">',!0,!1);function M5(){return v(Rc,{label:"Captions",get iconSlot(){return(()=>{const t=H(L5);return t._$owner=ie(),t})()},get children(){const t=H(R5),e=t.firstChild;return t._$owner=ie(),U(e,v(Ic,{})),t}})}const N5=V('<div class="w-full bg-black/90 mb-2 sticky -top-3 p-2 z-20"><div class="text-white/80 max-w-[calc(var(--media-width)-20px)] uppercase truncate">'),F5=V("<media-menu><!#><!/><media-menu-items><!#><!/><!#><!/>",!0,!1),B5=V('<media-menu-button class="group ring-primary relative mr-0.5 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 data-[focus]:ring-4 aria-hidden:hidden">',!0,!1);function up(t){const e=()=>t.placement.includes("bottom"),[n]=Dr();return(()=>{const i=H(F5),r=i.firstChild,[s,o]=ee(r.nextSibling),l=s.nextSibling,a=l.firstChild,[c,u]=ee(a.nextSibling),h=c.nextSibling,[d,g]=ee(h.nextSibling);return i._$owner=ie(),U(i,v(ma,{get triggerSlot(){return(()=>{const p=H(B5);return p._$owner=ie(),U(p,()=>t.buttonSlot),p})()},get contentSlot(){return t.tooltipSlot},get placement(){return t.tooltipPlacement}}),s,o),l._$owner=ie(),U(l,v(he,{get when(){return t.title},get children(){const p=H(N5),b=p.firstChild;return U(b,()=>t.title),p}}),c,u),U(l,()=>t.children,d,g),Le(p=>{const b={"animate-out fade-out slide-out-to-bottom-2 data-[open]:animate-in data-[open]:fade-in data-[open]:slide-in-from-bottom-4 flex h-[var(--menu-height)]  min-w-[260px] flex-col overflow-y-auto overscroll-y-contain rounded-md border border-white/10 bg-black/95 p-2.5 font-sans text-sm font-medium outline-none backdrop-blur-sm transition-[height] duration-300 will-change-[height] data-[resizing]:overflow-hidden z-10 !fixed !bottom-[4.2rem] !left-0 !right-0 !top-auto sm:!bottom-auto sm:!left-auto sm:max-w-[calc(var(--media-width)-20px)] max-h-[60vh] sm:max-h-[var(--media-height)] mx-auto sm:ml-[unset] sm:mr-[unset]":!0,"sm:!top-[5.4rem]":e()&&!n.fullscreen,"sm:!top-12":!!(e()&&n.fullscreen),"sm:!left-4  sm:!right-auto":t.placement.includes("start"),"sm:!right-4 sm:!left-auto":t.placement.includes("end")},$=t.placement;return p._v$=on(l,b,p._v$),$!==p._v$2&&(l.placement=p._v$2=$),p},{_v$:void 0,_v$2:void 0}),i})()}const U5=V('<media-quality-radio-group class="w-full flex flex-col"><template>',!0,!1),j5=V('<media-icon class="h-5 w-5" type="settings">',!0,!1);function H5(){return v(Rc,{label:"Quality",get iconSlot(){return(()=>{const t=H(j5);return t._$owner=ie(),t})()},get children(){const t=H(U5),e=t.firstChild;return t._$owner=ie(),U(e,v(Ic,{})),t}})}const V5=V('<media-icon class="h-8 w-8 transform transition-transform duration-200 ease-out group-data-[open]:rotate-90" type="settings" aria-label="Settings">',!0,!1),K5=V("<span>Settings");function q5(t){return v(up,{get placement(){return t.placement},get buttonSlot(){return(()=>{const e=H(V5);return e._$owner=ie(),e})()},get tooltipPlacement(){return t.tooltipPlacement},get tooltipSlot(){return H(K5)},get children(){return[v(H5,{}),v(M5,{}),v(A5,{}),v(I5,{})]}})}const z5=V('<media-slider-chapters class="relative flex h-full w-full items-center rounded-[1px]"><template>',!0,!1),W5=V('<div class="last-child:mr-0 relative mr-0.5 flex h-full w-full items-center rounded-[1px]"><div class="ring-primary relative z-0 h-[5px] w-full rounded-sm bg-white/30 group-data-[focus]:ring-[3px]"><div class="bg-primary z-10 absolute h-full w-[var(--chapter-fill)] rounded-sm will-change-[width]"></div><div class="absolute z-0 h-full w-[var(--chapter-progress)] rounded-sm bg-white/50 will-change-[width]">');function G5(){return(()=>{const t=H(z5),e=t.firstChild;return t._$owner=ie(),U(e,v(Y5,{})),t})()}function Y5(){return(()=>{const t=H(W5);return t.style.setProperty("contain","layout style"),t})()}const Q5=V('<media-slider-thumbnail class="block h-[var(--thumbnail-height)] max-h-[160px] min-h-[80px] w-[var(--thumbnail-width)] min-w-[120px] max-w-[180px] overflow-hidden border border-white bg-black">',!0,!1),X5=V('<media-slider-preview class="flex flex-col pointer-events-none items-center opacity-0 transition-opacity duration-200 data-[visible]:opacity-100"><!#><!/><!#><!/>',!0,!1);function I1(t){return(()=>{const e=H(X5),n=e.firstChild,[i,r]=ee(n.nextSibling),s=i.nextSibling,[o,l]=ee(s.nextSibling);return e._$owner=ie(),U(e,v(he,{get when(){return t?.thumbnails},get children(){const a=H(Q5);return a._$owner=ie(),Le(()=>a.src=t?.thumbnails),a}}),i,r),U(e,()=>t?.children,o,l),Le(()=>e.noclamp=t?.noClamp),e})()}const J5=V('<div class="absolute left-[var(--slider-fill)] top-1/2 z-20 h-[15px] w-[15px] -translate-x-1/2 -translate-y-1/2 rounded-full border border-[#cacaca] bg-white opacity-0 ring-white/40 transition-opacity group-data-[active]:opacity-100 group-data-[dragging]:ring-4 will-change-[left]">');function R1(){return H(J5)}const Z5=V('<div class="mt-2 text-sm" data-part="chapter-title">'),e6=V('<media-slider-value class="text-[13px]" type="pointer" format="time">',!0,!1),t6=V('<media-time-slider class="group relative mx-[7.5px] inline-flex h-1 mb-2 py-2 w-full cursor-pointer touch-none select-none items-center outline-none"><!#><!/><!#><!/><!#><!/>',!0,!1);function L1(t){return(()=>{const e=H(t6),n=e.firstChild,[i,r]=ee(n.nextSibling),s=i.nextSibling,[o,l]=ee(s.nextSibling),a=o.nextSibling,[c,u]=ee(a.nextSibling);return e._$owner=ie(),U(e,v(G5,{}),i,r),U(e,v(R1,{}),o,l),U(e,v(I1,{get thumbnails(){return t.thumbnails},get children(){return[H(Z5),(()=>{const h=H(e6);return h._$owner=ie(),h})()]}}),c,u),e})()}const n6=V('<media-slider-value class="rounded-sm bg-black px-2 py-px text-[13px] font-medium" type="pointer" format="percent">',!0,!1),i6=V('<media-volume-slider class="group relative mx-[7.5px] transition-all duration-200 inline-flex h-10 w-full cursor-pointer touch-none select-none items-center outline-none aria-hidden:hidden max-w-0 hover:max-w-[5rem] peer-hover:max-w-[5rem] data-[hocus]:max-w-[5rem]"><div class="ring-primary relative z-0 h-[5px] w-full rounded-sm bg-white/30 group-data-[focus]:ring-[3px]"><div class="bg-primary absolute h-full w-[var(--slider-fill)] rounded-sm will-change-[width]"></div></div><!#><!/><!#><!/>',!0,!1);function r6(){return(()=>{const t=H(i6),e=t.firstChild,n=e.nextSibling,[i,r]=ee(n.nextSibling),s=i.nextSibling,[o,l]=ee(s.nextSibling);return t._$owner=ie(),U(t,v(R1,{}),i,r),U(t,v(I1,{noClamp:!0,get children(){const a=H(n6);return a._$owner=ie(),a}}),o,l),t})()}const s6=V('<div class="ml-1.5 flex items-center text-sm font-medium"><media-time class="time" type="current"></media-time><div class="mx-1 text-white/80">/</div><media-time class="time" type="duration">',!0,!1);function M1(){return(()=>{const t=H(s6),e=t.firstChild,n=e.nextSibling,i=n.nextSibling;return e._$owner=ie(),i._$owner=ie(),t})()}const o6=V('<span class="">Loop Off'),a6=V('<span class="">Loop On');function l6(t){return v(ga,{as:"span",placement:"top",gutter:28,openDelay:500,get triggerSlot(){return v(Jy,{role:"button",class:`ring-primary group relative mr-0.5 inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 focus-visible:ring-4 aria-hidden:hidden 
          `,get defaultPressed(){return t.loop},get onChange(){return t.onChange},get children(){return[v(hT,{"aria-label":"Loop On",class:"h-7 w-7 hidden group-data-[pressed]:block "}),v(uT,{"aria-label":"Loop Off",class:"h-7 w-7 block group-data-[pressed]:hidden "})]}})},get contentSlot(){return[v(he,{get when(){return t.loop},get children(){return H(o6)}}),v(he,{get when(){return!t.loop},get children(){return H(a6)}})]}})}const c6=V('<media-icon aria-label="Next" class="h-10 w-10" type="chevron-right">',!0,!1),u6=V("<span>Next (Shift+N)");function h6(t){return v(ga,{get onClick(){return t.onClick},get placement(){return t.tooltipPlacement},get disabled(){return t.disabled},openDelay:500,class:"ring-primary relative inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 focus-visible:ring-4 disabled:text-gray-300 disabled:cursor-not-allowed",get triggerSlot(){return(()=>{const e=H(c6);return e._$owner=ie(),e})()},get contentSlot(){return H(u6)}})}const d6=V('<media-icon aria-label="Prev" class="h-10 w-10" type="chevron-left">',!0,!1),f6=V("<span>Previous (Shift+P)");function p6(t){return v(ga,{get onClick(){return t.onClick},get placement(){return t.tooltipPlacement},get disabled(){return t.disabled},openDelay:500,class:"ring-primary relative inline-flex h-10 w-10 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 focus-visible:ring-4 disabled:text-gray-300 disabled:cursor-not-allowed",get triggerSlot(){return(()=>{const e=H(d6);return e._$owner=ie(),e})()},get contentSlot(){return H(f6)}})}const g6=V("<template>"),m6=V('<media-chapters-radio-group class="flex flex-col space-y-1">',!0,!1),b6=V('<media-icon aria-label="Chapters" class="h-8 w-8" type="chapters">',!0,!1),y6=V("<span>Chapters"),v6=V(`<media-radio class="group flex cursor-pointer items-center p-2.5 data-[hocus]:bg-white/10 data-[focus]:ring-2 data-[focus]:m-1 data-[focus]:ring-blue-400 border-b border-b-white/20 last:border-b-0 relative aria-checked:after:content-[' '] aria-checked:after:w-[var(--progress)] aria-checked:after:h-[3px] aria-checked:after:absolute aria-checked:after:bottom-0 after:left-0 after:bg-primary"><media-thumbnail data-part="thumbnail" class="mr-3 overflow-hidden aspect-video rounded min-w-[120px] min-h-[56px] max-w-[120px] max-h-[68px]"></media-thumbnail><div class="flex flex-col "><span data-part="label" class="text-white text-[15px] font-medium whitespace-nowrap"></span><span data-part="start-time" class="inline-block py-px px-1 w-max rounded-sm text-[rgb(168,169,171)] text-xs font-medium bg-[rgba(156,163,175,0.2)] mt-1.5"></span><span data-part="duration" class="text-xs text-white/50 font-medium rounded-sm mt-1.5">`,!0,!1);function w6(t){return console.log("chapters menu",t.thumbnails),v(up,{get placement(){return t.placement},get buttonSlot(){return(()=>{const e=H(b6);return e._$owner=ie(),e})()},get tooltipPlacement(){return t.tooltipPlacement},get tooltipSlot(){return H(y6)},get children(){const e=H(m6);return e._$owner=ie(),U(e,v(o0,{fallback:"Something went wrong",get children(){const n=H(g6);return U(n,v(_6,{})),n}})),Le(()=>e.thumbnails=t.thumbnails),e}})}const _6=()=>(()=>{const t=H(v6),e=t.firstChild;return t._$owner=ie(),e._$owner=ie(),t})(),x6=V('<media-icon class="h-8 w-8" type="queue-list" aria-label="Queue">',!0,!1),S6=V("<span>Playlist"),E6=V('<button role="menuitem" tabindex="-1"><img class="h-18 w-32 shrink-0 rounded-md bg-bg1 aspect-video"><div class="ml-2 flex grow flex-col overflow-hidden whitespace-pre-wrap"><div class="text-sm text-text1 truncate"></div><div class="text-xs text-text1/50">'),$6=t=>{const e=T1(),n=Ts();return console.log("RecommendedVideosMenu",t.videos),v(up,{get placement(){return t.placement},get buttonSlot(){return(()=>{const i=H(x6);return i._$owner=ie(),i})()},get tooltipPlacement(){return t.tooltipPlacement},get tooltipSlot(){return H(S6)},get title(){return t.title??"Queue"},get children(){return v(Gi,{get each(){return t.videos},children:i=>(()=>{const r=H(E6),s=r.firstChild,o=s.nextSibling,l=o.firstChild,a=l.nextSibling;return r.$$click=()=>{const c=new URLSearchParams(window.location.search);c.set("v",ht(i));const u=`${window.location.pathname}?${c.toString()}`;n(u)},U(l,()=>i.title),U(a,()=>i.uploaderName),Le(c=>{const u={"text-start max-w-[calc(var(--media-width)-20px)] ring-primary parent left-0 flex w-full cursor-pointer select-none items-center justify-start rounded-sm p-2.5 bg-black/95 outline-none ring-inset  hover:bg-neutral-800/80 focus-visible:bg-neutral-800/80 focus-visible:ring-[3px] aria-hidden:hidden":!0,"border-l-2 border-primary":ht(e.currentVideo)===ht(i)},h=i.thumbnail;return c._v$=on(r,u,c._v$),h!==c._v$2&&ct(s,"src",c._v$2=h),c},{_v$:void 0,_v$2:void 0}),Ht(),r})()})}})};Di(["click"]);const C6=V('<media-controls><media-controls-group class="flex w-full items-center px-2 my-2 justify-between h-[30px]"><div class="flex items-center justify-between"><!#><!/><div class="w-24 flex items-center justify-between"><!#><!/><div class="w-px h-6 bg-text1/50"></div><!#><!/></div></div><div class="flex items-center justify-between"><!#><!/><!#><!/></div></media-controls-group><div class="flex-1"></div><media-controls-group class="flex w-full items-center px-2"></media-controls-group><media-controls-group class="-mt-0.5 flex w-full items-center px-2 pb-2"><!#><!/><!#><!/><!#><!/><!#><!/><!#><!/><!#><!/><!#><!/><!#><!/><!#><!/>',!0,!1);function T6(t){return[v(S5,{}),v(D1,{}),(()=>{const e=H(C6),n=e.firstChild,i=n.firstChild,r=i.firstChild,[s,o]=ee(r.nextSibling),l=s.nextSibling,a=l.firstChild,[c,u]=ee(a.nextSibling),h=c.nextSibling,d=h.nextSibling,[g,p]=ee(d.nextSibling),b=i.nextSibling,$=b.firstChild,[E,S]=ee($.nextSibling),m=E.nextSibling,[x,_]=ee(m.nextSibling),C=n.nextSibling,w=C.nextSibling,k=w.nextSibling,D=k.firstChild,[P,O]=ee(D.nextSibling),R=P.nextSibling,[B,F]=ee(R.nextSibling),X=B.nextSibling,[re,be]=ee(X.nextSibling),Re=re.nextSibling,[ue,gt]=ee(Re.nextSibling),at=ue.nextSibling,[tt,ge]=ee(at.nextSibling),J=tt.nextSibling,[Ne,ae]=ee(J.nextSibling),je=Ne.nextSibling,[it,ft]=ee(je.nextSibling),Ge=it.nextSibling,[Xe,_t]=ee(Ge.nextSibling),xe=Xe.nextSibling,[Ce,N]=ee(xe.nextSibling);return e._$owner=ie(),n._$owner=ie(),U(i,v($6,{tooltipPlacement:"bottom",placement:"bottom start",get videos(){return t.playlist}}),s,o),U(l,v(p6,{tooltipPlacement:"bottom",get onClick(){return t.navigatePrev},get disabled(){return!t.navigatePrev}}),c,u),U(l,v(h6,{tooltipPlacement:"bottom",get onClick(){return t.navigateNext},get disabled(){return!t.navigateNext}}),g,p),U(b,v(he,{get when(){return t.chapters},get children(){return v(w6,{placement:"bottom end",tooltipPlacement:"bottom",get thumbnails(){return t.thumbnails}})}}),E,S),U(b,v(q5,{placement:"bottom end",tooltipPlacement:"bottom"}),x,_),w._$owner=ie(),U(w,v(L1,{get thumbnails(){return t.thumbnails}})),k._$owner=ie(),U(k,v(f5,{tooltipPlacement:"top start"}),P,O),U(k,v(O1,{tooltipPlacement:"top"}),B,F),U(k,v(r6,{}),re,be),U(k,v(M1,{}),ue,gt),U(k,v(y5,{}),tt,ge),U(k,v(l6,{tooltipPlacement:"top",get loop(){return t.loop},get onChange(){return t.onLoopChange}}),Ne,ae),U(k,v(A1,{tooltipPlacement:"top"}),it,ft),U(k,v(c5,{tooltipPlacement:"top"}),Xe,_t),U(k,v(n5,{tooltipPlacement:"top-end"}),Ce,N),Le(()=>zo(e,`${P1.controls} font-sans media-controls:opacity-100 invisible media-controls:visible  absolute inset-0 z-10 flex h-full w-full flex-col bg-gradient-to-t from-black/10 to-transparent opacity-0 transition-opacity`)),e})()]}const k6=(t,e,n,i)=>{if(!(!t||!e||!n)){t.metadata=new MediaMetadata({title:e.title,artist:e.artist,artwork:[{src:e.thumbnailUrl,sizes:"128x128",type:"image/png"}]});for(const r in i)if(Object.prototype.hasOwnProperty.call(i,r)){const s=r;t.setActionHandler(s,i[s])}}},P6=(t,e,n)=>({title:n.title,duration:n.duration,thumbnail:n.thumbnailUrl,uploaderName:n.uploader,uploaderAvatar:n.uploaderAvatar,uploaderUrl:n.uploaderUrl,url:`/watch?v=${t}`,currentTime:e??n.duration,watchedAt:new Date().getTime(),type:"stream",uploaded:new Date(n.uploadDate).getTime(),uploaderVerified:n.uploaderVerified,views:n.views}),Vb=async(t,e,n,i)=>{if(!t||!e)return;const r=ht(t);if(!r)return;console.time("updating progress");const s=P6(r,n,t);console.log("updating progress",s),await yo(),await(async(l,a,c,u)=>{l.store.history[a]?(l.setStore("history",a,"currentTime",c),l.setStore("history",a,"watchedAt",new Date().getTime())):l.setStore("history",a,u)})(i,r,n??0,s),console.timeEnd("updating progress")},N1={fetchVideo:async(t,e)=>{if(!t)throw new Error("videoId is undefined");let n=await fetch(e+"/streams/"+t);if(!n.ok)throw new Error("video not found");return n.json()}},A6=V('<div><media-gesture class="absolute inset-0 z-0 block h-full w-full" event="pointerup" action="toggle:controls"></media-gesture><div class="lg:flex"></div><media-controls><media-controls-group class="flex w-full items-center px-2 my-2 justify-between h-[30px]"><div class="flex items-center justify-between"></div><div class="flex items-center justify-between h-4"></div></media-controls-group><media-controls-group><div class="absolute inset-0 pointer-events-none flex items-center justify-center"><media-play-button class="ring-primary relative pointer-events-auto inline-flex h-16 w-16 cursor-pointer items-center justify-center rounded-md outline-none ring-inset hover:bg-white/20 data-[focus]:ring-4"><media-icon class="media-paused:block hidden h-12 w-12" type="play"></media-icon><media-icon class="media-paused:hidden h-12 w-12" type="pause"></media-icon></media-play-button></div></media-controls-group><div class="flex-1"></div><media-controls-group class="lg:flex w-full items-center px-2 hidden "></media-controls-group><media-controls-group class="-mt-0.5 flex w-full justify-between lg:justify-center gap-1 items-center px-2 pb-2"><!#><!/><div class="hidden lg:inline-flex"></div><!#><!/>',!0,!1);function O6(){const[t,e]=Is(),n=Ts(),[i,r]=G(void 0),[s]=Dr();return ta(),ne(()=>{console.log(s.v,"searchParams.v"),s.v&&r(s.v)}),(()=>{const o=H(A6),l=o.firstChild,a=l.nextSibling,c=a.nextSibling,u=c.firstChild,h=u.firstChild,d=h.nextSibling,g=u.nextSibling,p=g.firstChild,b=p.firstChild,$=b.firstChild,E=$.nextSibling,S=g.nextSibling,m=S.nextSibling,x=m.nextSibling,_=x.firstChild,[C,w]=ee(_.nextSibling),k=C.nextSibling,D=k.nextSibling,[P,O]=ee(D.nextSibling);return l._$owner=ie(),U(a,v(D1,{})),c._$owner=ie(),u._$owner=ie(),U(h,v(fr,{appearance:"subtle",class:"hover:bg-white/20 rounded-md p-0 w-10 h-10 flex items-center justify-center",get icon(){return v(lh,{class:"h-8 w-8 text-white "})},onClick:()=>{document.querySelector("media-player")?.pause(),e("player","dismissed",!0)}})),U(d,v(fr,{appearance:"subtle",class:"hover:bg-white/20 rounded-md p-0 h-10 w-10 flex items-center justify-center",get icon(){return v(gv,{class:"text-white w-8 h-8 min-w-max"})},onClick:()=>{i()&&n(`/watch?v=${i()}`)}})),g._$owner=ie(),b._$owner=ie(),$._$owner=ie(),E._$owner=ie(),m._$owner=ie(),U(m,v(L1,{})),x._$owner=ie(),U(x,v(O1,{tooltipPlacement:"top"}),C,w),U(k,v(M1,{})),U(x,v(A1,{tooltipPlacement:"top"}),P,O),Le(R=>{const B=!!(t.player.dismissed||!t.player.small),F=`${P1.controls} font-sans media-controls:opacity-100 invisible media-controls:visible  absolute inset-0 z-10 flex h-full w-full flex-col bg-black/10 to-transparent opacity-0 transition-opacity`;return B!==R._v$&&o.classList.toggle("hidden",R._v$=B),F!==R._v$2&&zo(c,R._v$2=F),R},{_v$:void 0,_v$2:void 0}),o})()}const D6=V('<source type="application/x-mpegurl">'),I6=V('<div class="absolute z-50 top-0 right-0 w-full h-full opacity-100 pointer-events-auto bg-black/50"><div class="flex flex-col items-center justify-center w-full h-full gap-3"><div class="text-2xl font-bold text-white"><!#><!/> <!#><!/></div><div class="flex flex-col"><div class="text-lg text-white"></div><div class="text-lg text-white">Please try switching to a different instance or refresh the page.</div></div><div class="flex justify-center gap-2"><button class="px-4 py-2 text-lg text-white border border-white rounded-md">Close'),R6=V('<div class="absolute z-50 scale-50 sm:scale-75 md:scale-100 top-0 right-0 w-full h-full pointer-events-auto"><div class="flex flex-col items-center justify-center w-full h-full gap-3"><div class="text-2xl font-bold text-white">Playing next in <!#><!/> seconds</div><div class="flex flex-col"><div class="text-lg text-white w-72"></div></div><div class="flex justify-center gap-2"><button class="px-4 py-2 text-lg text-black bg-white rounded-md">Play now (Shift + N)</button><button class="px-4 py-2 text-lg text-white bg-black rounded-md">Dismiss (Esc)'),L6=V('<media-player playsinline keep-alive id="player" key-disabled tabindex="-1" crossorigin="anonymous"><media-provider class="max-h-screen max-w-screen [&amp;>video]:max-h-screen [&amp;>video]:max-w-screen"><media-poster aria-hidden="true" class="absolute inset-0 block h-full w-full rounded-md opacity-0 transition-opacity data-[visible]:opacity-100 [&amp;>img]:h-full [&amp;>img]:w-full [&amp;>img]:object-cover"></media-poster><!#><!/><!#><!/></media-provider><!#><!/><!#><!/><!#><!/><!#><!/>',!0,!1),M6=V("<track>");function N6(t){console.log("player render");const e=Fd();let n;const i=js(),[r,s]=ta(),[o,l]=G(void 0);ne(()=>{e.query.v&&l(e.query.v)});const a=fc(()=>["streams",o(),r.instance.api_url],()=>N1.fetchVideo(o(),r.instance.api_url),{get enabled(){return!!(r.instance?.api_url&&!$s&&o())},refetchOnReconnect:!1,refetchOnMount:!1,cacheTime:1/0,staleTime:100*60*1e3}),[c]=zI(),u=T1();ne(async()=>{if(o()){if(!u.has(o())){const L=async()=>{a.isLoading&&(await new Promise(Y=>{setTimeout(()=>{Y()},100)}),await L())};await L(),u.add({url:`/watch?v=${o()}`,title:a.data.title,thumbnail:a.data.thumbnailUrl,duration:a.data.duration,uploaderName:a.data.uploader,uploaderAvatar:a.data.uploaderAvatar,uploaderUrl:a.data.uploaderUrl,isShort:!1,shortDescription:"",type:"video",uploaded:new Date(a.data.uploadDate).getTime(),views:a.data.views,uploadedDate:a.data.uploadDate,uploaderVerified:a.data.uploaderVerified})}u.setCurrentVideo(o())}}),ne(()=>{a.data&&(console.log(u.isEmpty(),"queue is empty"),u.isEmpty()&&(console.log("adding video to queue"),u.add({url:`/watch?v=${ht(a.data)}`,title:a.data.title,thumbnail:a.data.thumbnailUrl,duration:a.data.duration,uploaderName:a.data.uploader,uploaderAvatar:a.data.uploaderAvatar,uploaderUrl:a.data.uploaderUrl,isShort:!1,shortDescription:"",type:"video",uploaded:new Date(a.data.uploadDate).getTime(),views:a.data.views,uploadedDate:a.data.uploadDate,uploaderVerified:a.data.uploaderVerified}),console.log(u,"queue 1",u.list(),u.isEmpty())))});const[h,d]=G(void 0),[g,p]=G([]),b=async L=>{console.time("fetching subtitles");const Y=await Promise.all(L.map(async Q=>Q.url?Q.mimeType!=="application/ttml+xml"?{id:`track-${Q.code}`,key:Q.url,kind:"subtitles",src:Q.url,srcLang:Q.code,label:`${Q.name} - ${Q.autoGenerated?"Auto":""}`,dataType:Q.mimeType}:{id:`track-${Q.code}`,key:Q.url,kind:"subtitles",src:"",srcLang:Q.code,label:`${Q.name} - ${Q.autoGenerated?"Auto":""}`,dataType:"srt",metadata:{url:Q.url}}:null));console.timeEnd("fetching subtitles"),p(Y.filter(Q=>Q!==null))},$=async()=>{if(!a.data)throw new Error("No video");console.time("init");const L={title:a.data?.title||"",artist:a.data?.uploader||"",thumbnailUrl:a.data?.thumbnailUrl||""},Y={play:()=>n.play(),pause:()=>n.pause(),seekbackward:()=>{n.currentTime-=10},seekforward:()=>{n.currentTime+=10},previoustrack:()=>{n.currentTime-=10},nexttrack:()=>{n.currentTime+=10},stop:()=>console.log("stop")};k6(navigator.mediaSession,L,n,Y),b(a.data.subtitles);let Q=[];for(let ye=0;ye<a.data.chapters.length;ye++){const Je=a.data.chapters[ye],lt=Je.title,Tt=new Date(Je.start*1e3).toISOString().slice(11,22),Ye=a.data.chapters[ye+1]?.start-Je.start;Q.push({name:lt,timestamp:Tt,seconds:Ye})}console.time("chapters vtt"),d(OD(Q,a.data.duration)),h()&&n.textTracks.add({kind:"chapters",default:!0,content:h(),type:"vtt"}),console.timeEnd("chapters vtt")},[E,S]=G(0),m=e.query.t,[x,_]=G(!1),C=L=>{if(ft([]),$(),!!a.data?.chapters&&n&&m){let Y=0;if(/^[\d]*$/g.test(m))Y=parseInt(m);else{const Q=/([\d]*)h/gi.exec(m)?.[1],ye=/([\d]*)m/gi.exec(m)?.[1],Je=/([\d]*)s/gi.exec(m)?.[1];Q&&(Y+=parseInt(Q)*60*60),ye&&(Y+=parseInt(ye)*60),Je&&(Y+=parseInt(Je))}S(Y)}},[w,k]=G();ne(()=>{console.log(D(),O()),c()?Array.isArray(c().videos)?k(c().videos):k(c().relatedStreams):(k(u.list()),console.log(u,"queue 2 list"))}),ne(()=>{if(!a.data||!n||m)return;const L=ht(a.data);if(!L)return;const Y=i.store.history[L]?.currentTime;Y&&Y<a.data.duration*.9&&S(Y)});const[D,P]=G(null),[O,R]=G(null);ne(()=>{const L=a.data?.relatedStreams?.[0];L&&n&&a.data&&(console.log("adding ",L),u.peekNext()||(console.log("adding next video to queue",L),u.add(L),console.log("queue 3",u)),c()?Array.isArray(c().videos)?k(c().videos):k(c().relatedStreams):(k(u.list()),console.log(u,"queue 2 list")),re(),be())});const[B,F]=Dr(),X=()=>{if(console.log("playing next",D()),!D())return;const L=new URL(window.location.origin+D().url);L.searchParams.set("fullscreen",B.fullscreen),j(L.pathname+L.search.toString()),P(null)};function re(){console.log("setting next queue video"),console.log("playlist",c());const L=new URLSearchParams(window.location.search);let Y=new URL(window.location.href);const Q=new URLSearchParams(Y.search);for(let lt of Q.keys())L.set(lt,Q.get(lt));if(console.log(L,"playing"),L.delete("t"),c()){const lt="videos"in c(),Tt=L.get("list")??c().id;let Ye;if(L.get("index")?Ye=parseInt(L.get("index")):lt?(Ye=c().videos.findIndex(kt=>ht(kt)===ht(a.data)),Ye!==-1&&Ye++):(Ye=c().relatedStreams.findIndex(kt=>ht(kt)===ht(a.data)),Ye!==-1&&Ye++),Ye<c().relatedStreams?.length){const kt=c().relatedStreams[Ye],pi=ht(kt);if(!pi)return;L.set("v",pi),L.set("list",Tt),L.set("index",(Ye+1).toString()),Y.search=L.toString(),P({url:Y.pathname+Y.search.toString(),info:kt})}else if(Ye<c().videos?.length){const kt=c().videos[Ye],pi=ht(kt);if(!pi)return;L.set("v",pi),L.set("list",Tt),L.set("index",(Ye+1).toString()),Y.search=L.toString(),P({url:Y.pathname+Y.search.toString(),info:kt})}return}const ye=u.peekNext();if(console.log(ye,"next",u),!ye)return;const Je=ht(ye);Je&&(L.set("v",Je),Y.search=L.toString(),console.log(Y.pathname+Y.search.toString(),"next video"),P({url:Y.pathname+Y.search.toString(),info:ye}))}const be=()=>{console.log("setting prev queue video");const L=new URLSearchParams(window.location.search);let Y=new URL(window.location.href);const Q=new URLSearchParams(Y.search);for(let lt of Q.keys())L.set(lt,Q.get(lt));if(L.delete("t"),L.get("list")){if(L.get("index")){const lt=parseInt(L.get("index"));if(lt>1)if(Array.isArray(c().videos)){const Tt=c().videos[lt-2],Ye=ht(Tt);if(!Ye)return;L.set("v",Ye),L.set("index",(lt-1).toString()),Y.search=L.toString(),R({url:Y.pathname+Y.search.toString(),info:Tt})}else{const Tt=c().relatedStreams[lt-2],Ye=ht(Tt);if(!Ye)return;L.set("v",Ye),L.set("index",(lt-1).toString()),Y.search=L.toString(),R({url:Y.pathname+Y.search.toString(),info:Tt})}}return}const ye=u.peekPrev();if(!ye)return;const Je=ht(ye);Je&&(L.set("v",Je),Y.search=L.toString(),R({url:Y.pathname+Y.search.toString(),info:ye}))},Re=()=>{console.log("ended"),n&&a.data&&(Ne(),Vb(a.data,x(),n.currentTime,i))},[ue,gt]=G(!1),at=5,[tt,ge]=G(at);let J;function Ne(){if(console.log("showing toast"),ge(at),tt()<1){console.log("counter less than 1"),X();return}J&&clearInterval(J),J=setInterval(()=>{console.log("counting",tt()),ge(L=>L-1),tt()===0&&(ae(),X())},1e3),console.log("showing end screen"),gt(!0),me(()=>{clearInterval(J)})}function ae(){console.log("dismiss"),clearInterval(J),gt(!1)}const je=async L=>{console.log(L,"provider change");const Y=L.detail;K4(Y)&&(Y.library=async()=>await W(()=>import("./hls-b5bde42a.js"),[]),console.log(Y),Y.config={maxBufferSize:30*1e3*1e3,maxBufferLength:30,maxMaxBufferLength:120,maxLoadingDelay:4,lowLatencyMode:!1,testBandwidth:!1,abrBandWidthFactor:.75,abrBandWidthUpFactor:.5,abrEwmaDefaultEstimate:1e6,startLevel:-1,capLevelToPlayerSize:!0,minAutoBitrate:1e6})},[it,ft]=G([]),[Ge,Xe]=G({show:!1,dismissed:!1}),_t=L=>{L.detail.fatal&&(Xe(Y=>({...Y,show:!0})),it().length<10?ft(Y=>[...Y,{name:L.detail.error.name,code:L.detail.response?.code,details:L.detail.details,fatal:L.detail.fatal,message:L.detail.error.message}]):ft(Y=>[...Y.slice(1),{name:L.detail.error.name,code:L.detail.response?.code,details:L.detail.details,fatal:L.detail.fatal,message:L.detail.error.message}])),console.log(it())};function xe(){let L=1080;if(!n)return;console.log(n.qualities);const Y=n.qualities?.toArray().find(Q=>Q.height>=L);console.log(Y),Y&&(Y.selected=!0)}ne(()=>{n&&a.data&&xe()});const Ce=()=>{!n||!a.data||Vb(a.data,x(),n.currentTime,i)};ui(()=>{document.addEventListener("visibilitychange",Ce),document.addEventListener("pagehide",Ce),document.addEventListener("keydown",A),window.addEventListener("beforeunload",Ce),window.addEventListener("unload",Ce),document.addEventListener("media-enter-fullscreen-request",L=>{L.preventDefault(),L.stopPropagation(),console.log("Full screen request intercepted. Element will not go full screen.")},{capture:!0}),me(()=>{document.removeEventListener("keydown",A),document.removeEventListener("visibilitychange",Ce),document.removeEventListener("pagehide",Ce),document.removeEventListener("media-enter-fullscreen-request",L=>{L.preventDefault(),L.stopPropagation()})})}),ne(()=>{x()&&Ce()});const N=d2(),j=Ts();ne(()=>{N()&&Ce()});let Z;const le=()=>{n&&(n.controls.show(),clearTimeout(Z),Z=setTimeout(()=>{n.controls.hide()},3e3))},A=L=>{if(document.activeElement?.tagName!=="INPUT")switch(L.key){case"f":console.log(`f key pressed, fullscreen: ${document.fullscreenElement}`),document.fullscreenElement?(document.exitFullscreen(),screen.orientation.unlock(),F({fullscreen:void 0},{replace:!0})):(document.documentElement.requestFullscreen(),screen.orientation.lock("landscape").catch(()=>{}),F({fullscreen:!0},{replace:!0}),document.body.scroll({top:0,left:0,behavior:"smooth"})),L.preventDefault();break;case"m":n.muted=!n.muted,L.preventDefault();break;case"j":n.currentTime=Math.max(n.currentTime-10,0),le(),L.preventDefault();break;case"l":if(!a.data?.duration)return;n.currentTime=Math.min(n.currentTime+10,a.data.duration),le(),L.preventDefault();break;case"c":const Y=n.textTracks.toArray().find(Q=>Q.id.startsWith("track-")&&(Q.language==="en"||Q.language==="en_US"||Q.language==="en_GB"));if(Y){console.log(Y.id);const Q=g().find(ye=>ye.id===Y.id)?.metadata.url;console.log(Q,"track url"),Q&&DD(Q,null).then(({srtUrl:ye})=>{Y.src=ye,Y.mode=Y.mode==="showing"?"hidden":"showing"})}L.preventDefault();break;case"k":n.paused?(n.play(),setTimeout(()=>{n.controls.hide(0)},100)):(n.pause(),le()),L.preventDefault();break;case" ":if(L.preventDefault(),console.log(document.activeElement?.tagName),document.activeElement?.tagName==="BUTTON"){document.activeElement.click();return}if(document.activeElement?.tagName.startsWith("MEDIA-"))return;n.paused?n.play():n.pause();break;case"ArrowUp":L.shiftKey&&(n.volume=Math.min(n.volume+.05,1),L.preventDefault());break;case"ArrowDown":L.shiftKey&&(n.volume=Math.max(n.volume-.05,0),L.preventDefault());break;case"ArrowLeft":if(L.altKey)return;L.shiftKey?M():n.currentTime=Math.max(n.currentTime-5,0),le(),L.preventDefault();break;case"ArrowRight":if(L.altKey)return;L.shiftKey?q():n.currentTime=n.currentTime+5,le(),L.preventDefault();break;case"0":n.currentTime=0,L.preventDefault();break;case"1":if(!a.data?.duration)return;n.currentTime=a.data.duration*.1,L.preventDefault();break;case"2":if(!a.data?.duration)return;n.currentTime=a.data.duration*.2,L.preventDefault();break;case"3":if(!a.data?.duration)return;n.currentTime=a.data.duration*.3,L.preventDefault();break;case"4":if(!a.data?.duration)return;n.currentTime=a.data.duration*.4,L.preventDefault();break;case"5":if(!a.data?.duration)return;n.currentTime=a.data.duration*.5,L.preventDefault();break;case"6":if(!a.data?.duration)return;n.currentTime=a.data.duration*.6,L.preventDefault();break;case"7":if(!a.data?.duration)return;n.currentTime=a.data.duration*.7,L.preventDefault();break;case"8":if(!a.data?.duration)return;n.currentTime=a.data.duration*.8,L.preventDefault();break;case"9":if(!a.data?.duration)return;n.currentTime=a.data.duration*.9,L.preventDefault();break;case"N":L.shiftKey&&(X(),L.preventDefault());break;case"Escape":ue()&&D()?(ae(),L.preventDefault()):Ge().show&&(Xe({show:!1,dismissed:!0}),L.preventDefault());break;case",":n.currentTime-=.04;break;case".":n.currentTime+=.04;break;case"R":L.shiftKey&&(Ce(),t.onReload?.(),L.preventDefault());break}},[f,y]=G([]);ne(()=>{if(!a.data?.chapters)return;const L=[];for(let Y=0;Y<a.data.chapters.length;Y++){const Q=a.data.chapters[Y];Q.title.startsWith("Sponsor")&&L.push({...Q,end:a.data.chapters[Y+1]?.start||a.data.duration,manuallyNavigated:!1,autoSkipped:!1})}y(L)});const T=()=>{if(!n||f().length===0)return;const L=n.currentTime;let Y=f();for(const Q of Y)if(L>=Q.start&&L<Q.end&&!Q.manuallyNavigated&&!Q.autoSkipped){n.currentTime=Q.end,Q.autoSkipped=!0;break}y(Y)},I=()=>{if(!n||f().length===0)return;const L=n.currentTime;let Y=f();for(const Q of Y)if(L>=Q.start&&L<Q.end){Q.manuallyNavigated=!0,Q.autoSkipped=!1;break}else Q.manuallyNavigated=!1,Q.autoSkipped=!1;y(Y)},M=()=>{if(!n||!a.data?.chapters)return;const L=n.currentTime;let Y;for(let ye=0;ye<a.data.chapters.length;ye++){const Je=a.data.chapters[ye];if(L>=Je.start&&L<a.data.chapters[ye+1]?.start){Y=Je;break}}if(!Y)return;const Q=a.data.chapters.slice().reverse().find(ye=>ye.start<Y.start-1);Q&&(n.currentTime=Q.start)},q=()=>{if(!n||!a.data?.chapters)return;const L=n.currentTime;let Y;for(let ye=0;ye<a.data.chapters.length;ye++){const Je=a.data.chapters[ye];if(L>=Je.start&&L<a.data.chapters[ye+1]?.start){Y=Je;break}}if(!Y)return;const Q=a.data.chapters.find(ye=>ye.start>Y.start);Q&&(n.currentTime=Q.start)},[de,Ae]=Is();return ne(()=>{e.pathname!=="/watch"?Ae("player","small",!0):(Ae("player","small",!1),de.player.dismissed&&Ae("player","dismissed",!1))}),v(he,{get when(){return a.data},get children(){const L=H(L6),Y=L.firstChild,Q=Y.firstChild,ye=Q.nextSibling,[Je,lt]=ee(ye.nextSibling),Tt=Je.nextSibling,[Ye,kt]=ee(Tt.nextSibling),pi=Y.nextSibling,[ba,Mc]=ee(pi.nextSibling),Hs=ba.nextSibling,[Fi,Nc]=ee(Hs.nextSibling),Fc=Fi.nextSibling,[Vs,Bc]=ee(Fc.nextSibling),Uc=Vs.nextSibling,[jc,ya]=ee(Uc.nextSibling),va=n;return typeof va=="function"?Gl(va,L):n=L,L.addEventListener("mouseleave",()=>{n?.controls.hide(0)}),L.$$mousemove=()=>{gT()||le()},L.addEventListener("volume-change",Te=>{console.log("volume change",Te.detail),s("volume",Te.detail.volume),s("muted",Te.detail.muted)}),L.addEventListener("time-update",()=>{T()}),L.addEventListener("can-play",C),L.addEventListener("provider-change",je),L.addEventListener("hls-error",_t),L.addEventListener("ended",Re),L.addEventListener("play",()=>{n.controls.hide(0),_(!0),Ce()}),L.addEventListener("seeked",()=>{Ce(),I()}),L.addEventListener("pause",()=>{le(),Ce()}),L.addEventListener("hls-manifest-loaded",Te=>{console.log(Te.detail,"levels")}),L.autoplay=!0,L._$owner=ie(),Y._$owner=ie(),Q._$owner=ie(),U(Y,()=>g().map(Te=>(()=>{const Xt=H(M6);return Le(rt=>{const Un=Te.id,Gn=Te.kind,Yn=Te.src,gi=Te.srcLang,Qn=Te.label,mi=Te.dataType;return Un!==rt._v$9&&ct(Xt,"id",rt._v$9=Un),Gn!==rt._v$10&&ct(Xt,"kind",rt._v$10=Gn),Yn!==rt._v$11&&ct(Xt,"src",rt._v$11=Yn),gi!==rt._v$12&&ct(Xt,"srclang",rt._v$12=gi),Qn!==rt._v$13&&ct(Xt,"label",rt._v$13=Qn),mi!==rt._v$14&&ct(Xt,"data-type",rt._v$14=mi),rt},{_v$9:void 0,_v$10:void 0,_v$11:void 0,_v$12:void 0,_v$13:void 0,_v$14:void 0}),Xt})()),Je,lt),U(Y,v(he,{get when(){return a.data?.hls},get children(){const Te=H(D6);return Le(()=>ct(Te,"src",a.data?.hls)),Te}}),Ye,kt),U(L,v(he,{get when(){return te(()=>!!(it().length>0&&Ge().show))()&&!Ge().dismissed},get children(){const Te=H(I6),Xt=Te.firstChild,rt=Xt.firstChild,Un=rt.firstChild,[Gn,Yn]=ee(Un.nextSibling),gi=Gn.nextSibling,Qn=gi.nextSibling,[mi,Hc]=ee(Qn.nextSibling),Ks=rt.nextSibling,Vc=Ks.firstChild,W1=Ks.nextSibling,vg=W1.firstChild;return U(rt,()=>it()[it().length-1]?.name,Gn,Yn),U(rt,()=>it()[it().length-1]?.details,mi,Hc),U(Vc,()=>it()[it().length-1]?.message),vg.$$click=()=>{Xe({show:!1,dismissed:!0})},vg.$$keydown=G1=>{G1.key==="Escape"&&Xe({show:!1,dismissed:!0})},Ht(),Te}}),ba,Mc),U(L,v(he,{get when(){return te(()=>!!ue())()&&D()},get children(){const Te=H(R6),Xt=Te.firstChild,rt=Xt.firstChild,Un=rt.firstChild,Gn=Un.nextSibling,[Yn,gi]=ee(Gn.nextSibling);Yn.nextSibling;const Qn=rt.nextSibling,mi=Qn.firstChild,Hc=Qn.nextSibling,Ks=Hc.firstChild,Vc=Ks.nextSibling;return U(rt,tt,Yn,gi),U(mi,v(BI,{get v(){return D()?.info??void 0}})),Ks.$$click=()=>{ae(),X()},Vc.$$click=()=>{ae()},Ht(),Te}}),Fi,Nc),U(L,v(he,{get when(){return e.pathname==="/watch"},get children(){return v(T6,{get thumbnails(){return fT(a.data?.previewFrames?.[1])},get loop(){return r.loop},get chapters(){return h()},onLoopChange:Te=>{s("loop",Te)},get navigateNext(){return D()?.url?X:void 0},get navigatePrev(){return O()?.url?()=>{j(O().url),R(null)}:void 0},get playlist(){return w()}})}}),Vs,Bc),U(L,v(O6,{}),jc,ya),Le(Te=>{const Xt={" z-[99999] aspect-video bg-black text-white font-sans overflow-hidden ring-primary data-[focus]:ring-4":!0,"!absolute inset-0 w-screen h-screen":!!B.fullscreen,"!sticky sm:!relative !top-0":!B.fullscreen,"!sticky !top-10 !left-1 !w-56 sm:!w-72 lg:!w-96 ":de.player.small,"!hidden":de.player.dismissed},rt=E(),Un=r.speed,Gn=r.muted,Yn=r.volume,gi=a.data?.title??"",Qn=a.data?.thumbnailUrl??"",mi=a.data?.thumbnailUrl??"";return Te._v$=on(L,Xt,Te._v$),rt!==Te._v$2&&(L.currentTime=Te._v$2=rt),Un!==Te._v$3&&(L.playbackrate=Te._v$3=Un),Gn!==Te._v$4&&(L.muted=Te._v$4=Gn),Yn!==Te._v$5&&(L.volume=Te._v$5=Yn),gi!==Te._v$6&&(L.title=Te._v$6=gi),Qn!==Te._v$7&&(L.poster=Te._v$7=Qn),mi!==Te._v$8&&(Q.src=Te._v$8=mi),Te},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),Ht(),L}})}Di(["mousemove","keydown","click"]);const F6=V('<svg fill="none" viewBox="0 0 120 120" aria-hidden="true"><circle class="opacity-25" cx="60" cy="60" r="54" stroke="currentColor" stroke-width="8"></circle><circle class="opacity-75" cx="60" cy="60" r="54" stroke="currentColor" stroke-width="10" pathLength="100">'),B6=V('<div class="pointer-events-none aspect-video bg-black flex h-fit w-full max-w-full items-center justify-center">'),F1=t=>(()=>{const e=H(F6),n=e.firstChild,i=n.nextSibling;return i.style.setProperty("stroke-dasharray","50"),i.style.setProperty("stroke-dashoffset","50"),Le(r=>on(e,{"h-24 w-24 text-white duration-300 animate-spin":!0,[t.class]:!!t.class},r)),e})(),B1=()=>(()=>{const t=H(B6);return U(t,v(F1,{})),t})(),U6=V('<div class="flex item-center w-full justify-center align-bottom"><!#><!/><!#><!/><!#><!/><div><!#><!/><!#><!/><!#><!/></div><!#><!/>');function Lc(t){return v(Xy,{get toastId(){return t.toastId},classList:{"flex flex-col justify-between outline-none border-0 items-center gap-2 rounded p-3 bg-bg2 shadow ring-2 ring-inset ring-bg1 text-text1 data-[opened]:animate-in data-[opened]:fade-in data-[opened]:slide-in-from-right data-[closed]:animate-out data-[closed]:transition-[transform] data-[closed]:translate-x-[var(--kb-toast-swipe-end-x)] data-[closed]:fade-out-25 data-[swipe=cancel]:translate-x-0 data-[swipe=cancel]:transition-[transform] data-[swipe=move]:translate-x-[var(--kb-toast-swipe-move-x)] data-[swipe=end]:animate-out data-[swipe=end]:fade-out data-[swipe=end]:slide-out-to-right":!0},get children(){return[(()=>{const e=H(U6),n=e.firstChild,[i,r]=ee(n.nextSibling),s=i.nextSibling,[o,l]=ee(s.nextSibling),a=o.nextSibling,[c,u]=ee(a.nextSibling),h=c.nextSibling,d=h.firstChild,[g,p]=ee(d.nextSibling),b=g.nextSibling,[$,E]=ee(b.nextSibling),S=$.nextSibling,[m,x]=ee(S.nextSibling),_=h.nextSibling,[C,w]=ee(_.nextSibling);return U(e,v(he,{get when(){return t.success},get children(){return v(PC,{class:"h-5 w-5 text-green-600 mr-2 "})}}),i,r),U(e,v(he,{get when(){return t.error},get children(){return v(AC,{class:"h-5 w-5 text-red-600 mr-2 "})}}),o,l),U(e,v(he,{get when(){return t.loading},get children(){return v(F1,{class:"w-5 h-5 mr-2"})}}),c,u),U(h,v(fC,{class:"",get children(){return t.title}}),g,p),U(h,v(tC,{class:"",get children(){return t.description}}),$,E),U(h,()=>t.children,m,x),U(e,v(eC,{class:"ml-auto rounded",get children(){return v(tv,{class:"h-4 w-4"})}}),C,w),e})(),v(sC,{class:"w-full h-1 bg-bg1",get children(){return v(rC,{class:"bg-primary h-full rounded w-[var(--kb-toast-progress-fill-width)] transition-[width]"})}})]}})}function j6(t){return As.show(e=>v(Lc,{get toastId(){return e.toastId},title:t}))}function H6(t){return As.show(e=>v(Lc,{get toastId(){return e.toastId},title:t,success:!0}))}function V6(t){return As.show(e=>v(Lc,{get toastId(){return e.toastId},title:t,error:!0}))}function K6(t,e){return As.promise(t,n=>v(Lc,{get toastId(){return n.toastId},get loading(){return n.state==="pending"},get success(){return n.state==="fulfilled"},get error(){return n.state==="rejected"},get children(){return v(qo,{get children(){return[v(sn,{get when(){return n.state==="pending"},get children(){return e.loading}}),v(sn,{get when(){return n.state==="fulfilled"},get children(){return e.success?.(n.data)}}),v(sn,{get when(){return n.state==="rejected"},get children(){return e.error?.(n.error)}})]}})}}))}function q6(t){return As.show(e=>v(Xy,{get toastId(){return e.toastId},get children(){return t()}}))}function z6(t){return As.dismiss(t)}const qi={show:j6,success:H6,error:V6,promise:K6,custom:q6,dismiss:z6};var Hn=function(t){return t.DISCONNECTED="disconnected",t.CONNECTING="connecting",t.CONNECTED="connected",t}(Hn||{});const[W6]=hi({playlists:{},history:{},subscriptions:{},preferences:{},watchLater:{}}),Pd=new Li({guid:"test"}),[U1,j1]=NP(Pd,W6,!1),H1=Ue({store:U1,setStore:j1}),G6=t=>{const[e,n]=G("localStorage"in globalThis?JSON.parse(localStorage.getItem("room")||"{}"):{});let i=null,r=null;const s=async()=>{if(!e().id){o("sync","providers","webrtc",Hn.DISCONNECTED);return}i&&(console.log("disconnecting"),i.disconnect()),o("sync","providers","webrtc",Hn.CONNECTING),i=new AP(e().id,Pd,{signaling:["wss://signaling.fly.dev"],...e().password&&{password:e().password}}),console.log(i,"webrtc provider"),i.connect()};ne(async()=>{if(await s(),o("sync","providers","webrtc",Hn.DISCONNECTED),!i)return;i.awareness.setLocalStateField("user",{name:e().name});let l=[];i.awareness.states.forEach((a,c)=>{console.log(a,c),l.push({id:c,name:a.user.name})}),o("sync","users",l),i?.awareness.on("change",({added:a,updated:c,removed:u})=>{let h=[];i.awareness.states.forEach((d,g)=>{console.log(d,g),h.push({id:g,name:d.user.name})}),o("sync","users",h),o("sync","lastSync",new Date().getTime()),o("sync","providers","webrtc",i.connected?Hn.CONNECTED:Hn.DISCONNECTED),console.log("Awareness changed",a,c,u,h)})});const[,o]=Is();return ne(async()=>{if(!e().id){o("sync","providers","idb",Hn.DISCONNECTED);return}o("sync","providers","idb",Hn.DISCONNECTED),r=new jP(e().id,Pd,!0),o("sync","providers","opfs",Hn.CONNECTING);try{await r.sync(),o("sync","providers","opfs",Hn.CONNECTED)}catch(l){console.error("Error syncing with OPFSx",l),o("sync","providers","opfs",Hn.DISCONNECTED),qi.error("Error syncing with OPFS")}me(()=>{r?.destroy()})}),me(()=>{i?.disconnect()}),v(H1.Provider,{value:{store:U1,setStore:j1},get children(){return t.children}})},js=()=>{const t=Me(H1);if(!t)throw new Error("No SyncedStoreProvider!");return t};function Y6(t){return _e({a:{baseProfile:"tiny",version:"1.2",viewBox:"0 0 24 24"},c:'<path d="M12 3s-6.186 5.34-9.643 8.232A1.041 1.041 0 0 0 2 12a1 1 0 0 0 1 1h2v7a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-4h4v4a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-7h2a1 1 0 0 0 1-1 .98.98 0 0 0-.383-.768C18.184 8.34 12 3 12 3z"/>'},t)}function Q6(t){return _e({a:{baseProfile:"tiny",version:"1.2",viewBox:"0 0 24 24"},c:'<path d="M17.414 6.586a2 2 0 0 0-2.828 0L12 9.172 9.414 6.586a2 2 0 1 0-2.828 2.828L9.171 12l-2.585 2.586a2 2 0 1 0 2.828 2.828L12 14.828l2.586 2.586c.39.391.902.586 1.414.586s1.024-.195 1.414-.586a2 2 0 0 0 0-2.828L14.829 12l2.585-2.586a2 2 0 0 0 0-2.828z"/>'},t)}const X6=V('<img src="/logo.svg" alt="Conduit" class="h-8 w-8 aspect-square min-w-max ">'),J6=V('<div class="flex items-start flex-col gap-2 text-text1"><details class="text-xs"><summary class="link">Users: <!#><!/></summary><!#><!/></details><div>Syncing: <!#><!/></div><div>IndexedDB: <!#><!/></div><div>WebRTC: <!#><!/></div><div>OPFS: <!#><!/>'),Z6=V('<div class="w-full h-full bg-bg1"><div class="p-4 flex flex-col items-center justify-center gap-2"><!#><!/><!#><!/><!#><!/><!#><!/>'),eR=V('<nav class="fixed top-0 left-0 bg-bg2 w-full z-[99999] h-10 px-2 flex items-center justify-between"><button class="sr-only focus:not-sr-only absolute top-0 left-0">Skip navigation</button><div class="flex items-center justify-between w-full max-w-full min-w-0"><!#><!/><ul class="hidden md:inline"></ul><!#><!/><div class="flex items-center gap-2 "><!#><!/><!#><!/><!#><!/></div></div><!#><!/>'),tR=V('<div class="flex items-center gap-2">ID: <!#><!/>Name: <!#><!/> <!#><!/>');var wi=function(t){return t.DISCONNECTED="disconnected",t.OFFLINE="offline",t.ONLINE="online",t.VOLATILE="volatile",t}(wi||{});let Kr=function(t){return t.DISCONNECTED="disconnected",t.CONNECTING="connecting",t.CONNECTED="connected",t}({});const nR=()=>{const[t,e]=Me(V1),[,n]=H2("theme","monokai");js();const i=[{href:"/feed",label:"Feed"},{href:"/trending",label:"Trending"},{href:"/library",label:"Library"},{href:"/import",label:"Import"}],r=fc(()=>["instances"],async()=>{const w=await fetch("https://piped-instances.kavin.rocks/");if(!w.ok)throw new Error("Failed to fetch instances");return await w.json()},{get initialData(){return x0("instances",[],"json","localStorage")},select:w=>(Bd("instances",w,"localStorage"),w),retry:w=>w<3}),[s,o]=ta(),l=["Alice","Bob","Charlie","Dave","Eve","Frank","Grace","Heidi","Ivan","Judy","Kevin","Larry","Mallory","Nancy","Oscar","Peggy","Quentin","Rupert","Sybil","Trent","Ursula","Victor","Walter","Xavier","Yvonne","Zelda"],[a]=Is();Ts();const[c,u]=G(!1),[h,d]=G(l[Math.floor(Math.random()*l.length)]),[g,p]=G(""),[b,$]=G("");ne(()=>{const w=JSON.parse(localStorage.getItem("room")||"{}");w.name&&d(w.name),p(w.id||""),$(w.password||"")});const[E,S]=G(!1),[m,x]=G(!1);function _(w,k){return w===Kr.CONNECTED&&k===Kr.CONNECTED?wi.ONLINE:w===Kr.CONNECTED&&k!==Kr.CONNECTED?wi.OFFLINE:w!==Kr.CONNECTED&&k===Kr.CONNECTED?wi.VOLATILE:wi.DISCONNECTED}const C=()=>{if(!r.data)return;const w=r.data;let k=w.findIndex(P=>P.api_url===s.instance.api_url);k=k>-1?k:0;const D=(k+1)%w.length;o("instance",w[D]),qi.show(`You are now connected to ${w[D].name}`)};return ui(()=>{document.addEventListener("keydown",w=>{w.key==="I"&&w.shiftKey&&!w.ctrlKey&&!w.altKey&&(C(),w.preventDefault())})}),me(()=>{document.removeEventListener("keydown",w=>{w.key==="I"&&w.shiftKey&&!w.ctrlKey&&!w.altKey&&(C(),w.preventDefault())})}),(()=>{const w=H(eR),k=w.firstChild,D=k.nextSibling,P=D.firstChild,[O,R]=ee(P.nextSibling),B=O.nextSibling,F=B.nextSibling,[X,re]=ee(F.nextSibling),be=X.nextSibling,Re=be.firstChild,[ue,gt]=ee(Re.nextSibling),at=ue.nextSibling,[tt,ge]=ee(at.nextSibling),J=tt.nextSibling,[Ne,ae]=ee(J.nextSibling),je=D.nextSibling,[it,ft]=ee(je.nextSibling);return k.$$click=()=>{const Xe=document.querySelector("main")?.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])");Xe&&Xe[0].focus()},U(D,v(Bu,{href:"/",class:"text-text1 mx-2 w-8 h-8",get children(){return H(X6)}}),O,R),U(B,v(Gi,{each:i,children:Ge=>v(Bu,{get href(){return Ge.href},class:"link text-sm p-1 text-left transition ",get children(){return Ge.label}})})),U(D,v(ST,{}),X,re),U(be,v(N$,{get children(){return[v(F$,{class:"p-1 outline-none focus-visible:ring-2 focus-visible:ring-primary rounded-md",get children(){return v(qo,{get children(){return[v(sn,{get when(){return a.sync.syncing},get children(){return v($C,{class:"w-6 h-6 text-yellow-500"})}}),v(sn,{get when(){return _(a.sync.providers.opfs,a.sync.providers.webrtc)===wi.ONLINE},get children(){return v(ZD,{class:"w-7 h-7 text-green-500"})}}),v(sn,{get when(){return _(a.sync.providers.opfs,a.sync.providers.webrtc)===wi.DISCONNECTED},get children(){return v(Q6,{class:"w-9 h-9 text-red-500"})}}),v(sn,{get when(){return _(a.sync.providers.opfs,a.sync.providers.webrtc)===wi.OFFLINE},get children(){return v(eI,{class:"w-7 h-7 text-text1"})}}),v(sn,{get when(){return _(a.sync.providers.opfs,a.sync.providers.webrtc)===wi.VOLATILE},get children(){return v(tI,{class:"w-6 h-6 text-text1"})}})]}})}}),v(M$,{get children(){return v(R$,{class:`bg-bg1 border border-bg3/80 p-2 rounded-md
                animate-in
                fade-in
                slide-in-from-top-10
                duration-200
                z-[99999]
                `,get children(){return[v(rc,{}),v(L$,{get class(){return`text-sm p-1 text-left flex flex-col gap-2 items-center ${g()?"text-green-600":"text-red-600"}`},get children(){return[v(he,{get when(){return g()},get children(){return["Connected: ",te(()=>g()),(()=>{const Ge=H(J6),Xe=Ge.firstChild,_t=Xe.firstChild,xe=_t.firstChild,Ce=xe.nextSibling,[N,j]=ee(Ce.nextSibling),Z=_t.nextSibling,[le,A]=ee(Z.nextSibling),f=Xe.nextSibling,y=f.firstChild,T=y.nextSibling,[I,M]=ee(T.nextSibling),q=f.nextSibling,de=q.firstChild,Ae=de.nextSibling,[L,Y]=ee(Ae.nextSibling),Q=q.nextSibling,ye=Q.firstChild,Je=ye.nextSibling,[lt,Tt]=ee(Je.nextSibling),Ye=Q.nextSibling,kt=Ye.firstChild,pi=kt.nextSibling,[ba,Mc]=ee(pi.nextSibling);return U(_t,()=>a.sync.users.length,N,j),U(Xe,v(Gi,{get each(){return a.sync.users},children:Hs=>(()=>{const Fi=H(tR),Nc=Fi.firstChild,Fc=Nc.nextSibling,[Vs,Bc]=ee(Fc.nextSibling),Uc=Vs.nextSibling,jc=Uc.nextSibling,[ya,va]=ee(jc.nextSibling),Te=ya.nextSibling,Xt=Te.nextSibling,[rt,Un]=ee(Xt.nextSibling);return U(Fi,()=>Hs.id,Vs,Bc),U(Fi,()=>Hs.name,ya,va),U(Fi,()=>Hs.name===h()&&"(You)",rt,Un),Fi})()}),le,A),U(f,()=>a.sync.syncing?"true":"false",I,M),U(q,()=>a.sync.providers.idb,L,Y),U(Q,()=>a.sync.providers.webrtc,lt,Tt),U(Ye,()=>a.sync.providers.opfs,ba,Mc),Ge})(),v(fr,{label:"Leave",onClick:()=>{localStorage.removeItem("room"),location.reload()}})]}}),v(he,{get when(){return!g()},get children(){return["Disconnected",v(fr,{label:"Join room",onClick:()=>u(!0)})]}})]}})]}})}})]}}),ue,gt),U(be,v(vm,{get isOpen(){return E()},onOpenChange:S,onChange:Ge=>{e(Ge),n(Ge)},options:[{value:"monokai",label:"Monokai"},{value:"dracula",label:"Dracula"},{value:"discord",label:"Discord"},{value:"github",label:"Github"}],get selectedValue(){return t()},get triggerIcon(){return v(TC,{fill:"currentColor",class:"h-5 w-5 text-text1"})}}),tt,ge),U(be,v(vm,{get isOpen(){return m()},onOpenChange:x,get selectedValue(){return s.instance.api_url},onChange:Ge=>{let Xe=r.data.find(_t=>_t.api_url===Ge);Xe&&o("instance",Xe)},get options(){return r.data.map(Ge=>({label:Ge.name,value:Ge.api_url}))},get triggerIcon(){return v(DC,{fill:"currentColor",class:"h-5 w-5 text-text1"})}}),Ne,ae),U(w,v(lf,{get isOpen(){return c()},title:"Join Room",setIsOpen:u,get children(){const Ge=H(Z6),Xe=Ge.firstChild,_t=Xe.firstChild,[xe,Ce]=ee(_t.nextSibling),N=xe.nextSibling,[j,Z]=ee(N.nextSibling),le=j.nextSibling,[A,f]=ee(le.nextSibling),y=A.nextSibling,[T,I]=ee(y.nextSibling);return U(Xe,v(au,{name:"name",get value(){return h()},onInput:M=>d(M),placeholder:"Name",type:"text",class:"w-full"}),xe,Ce),U(Xe,v(au,{name:"room",type:"text",placeholder:"Room ID",get value(){return g()},onInput:M=>p(M)}),j,Z),U(Xe,v(au,{name:"password",type:"password",placeholder:"Password",get value(){return b()},onInput:M=>$(M)}),A,f),U(Xe,v(fr,{onClick:()=>{localStorage.setItem("room",JSON.stringify({name:h(),id:g(),password:b()})),location.reload()},label:"Join"}),T,I),Ge}}),it,ft),Ht(),w})()};Di(["click"]);const iR=Ue({}),rR=t=>{const[e,n]=hi({}),[i,r]=G();ne(()=>{i()||r(document.querySelector("media-player"))});let s;return ne(()=>{i()&&i().onAttach(()=>{s=i().subscribe(({paused:o})=>{console.log("playerStateStore.tsx:39",o),n({paused:o})}),s?.()})}),me(()=>{s?.()}),v(iR.Provider,{value:e,get children(){return t.children}})},sR=V('<nav class="flex gap-2 px-2 py-2 justify-evenly">'),oR=V('<div class="w-6 h-6">'),aR=V('<span class="mt-1 text-xs font-semibold ">');function lR(t){return(()=>{const e=H(sR);return U(e,v(Gi,{get each(){return t.items},children:n=>v(ho,{activeClass:"text-primary",inactiveClass:"text-text2",get href(){return n.href},class:"flex flex-col items-center justify-center text-sm ",get children(){return[(()=>{const i=H(oR);return U(i,()=>n.icon),i})(),(()=>{const i=H(aR);return U(i,()=>n.label),i})()]}})})),e})()}function cR(t){return _e({a:{viewBox:"0 0 1024 1024"},c:'<path d="M834.1 469.2A347.49 347.49 0 0 0 751.2 354l-29.1-26.7a8.09 8.09 0 0 0-13 3.3l-13 37.3c-8.1 23.4-23 47.3-44.1 70.8-1.4 1.5-3 1.9-4.1 2-1.1.1-2.8-.1-4.3-1.5-1.4-1.2-2.1-3-2-4.8 3.7-60.2-14.3-128.1-53.7-202C555.3 171 510 123.1 453.4 89.7l-41.3-24.3c-5.4-3.2-12.3 1-12 7.3l2.2 48c1.5 32.8-2.3 61.8-11.3 85.9-11 29.5-26.8 56.9-47 81.5a295.64 295.64 0 0 1-47.5 46.1 352.6 352.6 0 0 0-100.3 121.5A347.75 347.75 0 0 0 160 610c0 47.2 9.3 92.9 27.7 136a349.4 349.4 0 0 0 75.5 110.9c32.4 32 70 57.2 111.9 74.7C418.5 949.8 464.5 959 512 959s93.5-9.2 136.9-27.3A348.6 348.6 0 0 0 760.8 857c32.4-32 57.8-69.4 75.5-110.9a344.2 344.2 0 0 0 27.7-136c0-48.8-10-96.2-29.9-140.9zM713 808.5c-53.7 53.2-125 82.4-201 82.4s-147.3-29.2-201-82.4c-53.5-53.1-83-123.5-83-198.4 0-43.5 9.8-85.2 29.1-124 18.8-37.9 46.8-71.8 80.8-97.9a349.6 349.6 0 0 0 58.6-56.8c25-30.5 44.6-64.5 58.2-101a240 240 0 0 0 12.1-46.5c24.1 22.2 44.3 49 61.2 80.4 33.4 62.6 48.8 118.3 45.8 165.7a74.01 74.01 0 0 0 24.4 59.8 73.36 73.36 0 0 0 53.4 18.8c19.7-1 37.8-9.7 51-24.4 13.3-14.9 24.8-30.1 34.4-45.6 14 17.9 25.7 37.4 35 58.4 15.9 35.8 24 73.9 24 113.1 0 74.9-29.5 145.4-83 198.4z"/>'},t)}function uR(t){return _e({a:{viewBox:"0 0 1024 1024"},c:'<path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"/>'},t)}const hR=V('<div aria-hidden="true" class="h-10">'),dR=V('<div class="fixed h-1 w-full -mx-2 top-0 z-[9999999]"><div class="h-1 bg-gradient-to-r from-accent1 via-primary to-accent1 bg-repeat-x w-full animate-stripe">'),fR=V("<main><!#><!/><!#><!/>"),pR=V('<div class="fixed bottom-0 left-0 w-full md:hidden pb-2 sm:pb-5 bg-bg2 z-50">'),gR=V('<div class="h-20 md:h-0">'),Kb=V("<div>Loading..."),mR=V('<div role="alert" aria-live="assertive" aria-atomic="true" class="sr-only">Current page: <!#><!/> '),bR=Rt(()=>W(()=>import("./ReloadPrompt-2f19b5fb.js"),["assets/ReloadPrompt-2f19b5fb.js","assets/ReloadPrompt-b6db258c.css"])),[Ad,Od]=G(""),V1=Ue([Ad,Od]),[K1,Dd]=G(!1),q1=Ue([K1,Dd]),dL=()=>{const t=Me(q1);if(!t)throw new Error("TheaterContext not found");return t},z1=hi({value:void 0,error:void 0}),yR=Ue(z1);function vR(){console.time("feed root"),$2(),Le(()=>{const i=()=>N2(document.cookie),r=i().theme??"monokai";Od(r);const s=i().theater??"false";Dd(s==="true")});const[t]=Is(),e=new XC({defaultOptions:{queries:{cacheTime:1e3*60*60*24,refetchOnMount:!0,refetchOnReconnect:!0,refetchOnWindowFocus:!1,retry:i=>i<3,suspense:!0}}});Rt(()=>W(()=>import("./feed-25fee3fb.js"),["assets/feed-25fee3fb.js","assets/Error-408ec9a7.js","assets/useIntersectionObserver-f51346de.js","assets/EmptyState-636701be.js"]));const n=js();return ne(()=>{console.log(n.store,"sync store")}),v(I2,{lang:"en",get children(){return[v(R2,{get children(){return[v(W_,{children:"Conduit"}),v(Dg,{charset:"utf-8"}),v(Dg,{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"}),v(Ig,{rel:"manifest",href:"manifest.webmanifest"}),v(Ig,{rel:"icon",href:"favicon.png"})]}}),v(rT,{client:e,get children(){return v(V1.Provider,{value:[Ad,Od],get children(){return v(q1.Provider,{value:[K1,Dd],get children(){return v(oT,{get children(){return v(aT,{get children(){return v(qI,{get children(){return v(KI,{get children(){return v(yR.Provider,{value:z1,get children(){return v(rR,{get children(){return v(G6,{get children(){return v(L2,{get class(){return`${Ad()} bg-bg1 font-manrope text-sm scrollbar text-text1 selection:bg-accent2 selection:text-text3 overflow-x-hidden`},get children(){return[v(_a,{get fallback(){return H(Kb)},get children(){return v(Yc,{get children(){return v(nR,{})}})}}),H(hR),v(_a,{get fallback(){return v(B1,{})},get children(){return v(wR,{})}}),v(_a,{get children(){return v(Yc,{get children(){return[v(he,{get when(){return t.loading},get children(){const i=H(dR);return i.firstChild,i}}),v(rr,{get children(){return v(aC,{get children(){return v(iC,{class:"fixed bottom-0 right-0 p-4 flex flex-col gap-2 z-[999999] w-[400px] max-w-[100vw] outline-none"})}})}}),(()=>{const i=H(fR),r=i.firstChild,[s,o]=ee(r.nextSibling),l=s.nextSibling,[a,c]=ee(l.nextSibling);return U(i,v(C2,{get children(){return v(E2,{})}}),s,o),U(i,v(_a,{get fallback(){return H(Kb)},get children(){return v(Yc,{get children(){return v(he,{when:!$s,get children(){return v(bR,{})}})}})}}),a,c),i})(),(()=>{const i=H(pR);return U(i,v(lR,{get items(){return[{href:"/feed",label:"Feed",icon:v(Y6,{fill:"currentColor",class:"w-6 h-6 "})},{href:"/trending",label:"Trending",icon:v(cR,{fill:"currentColor",class:"w-6 h-6 "})},{href:"/library",label:"Library",icon:v(uR,{fill:"currentColor",class:"w-6 h-6 "})}]}})),i})(),H(gR),v(_R,{})]}})}}),v(D2,{})]}})}})}})}})}})}})}})}})}})}})}})]}})}const wR=()=>{const[t]=Dr(),[e]=ta();console.log(e.instance.api_url,"api url");const[n,i]=G(void 0);ne(()=>{t.v&&i(t.v)});const r=fc(()=>["streams",n(),e.instance.api_url],()=>N1.fetchVideo(n(),e.instance.api_url),{get enabled(){return!!(e.instance?.api_url&&!$s&&n())},refetchOnReconnect:!1,refetchOnMount:!1,cacheTime:1/0,staleTime:100*60*1e3}),s=Fd();return v(he,{get when(){return r.data},get fallback(){return te(()=>s.pathname==="/watch")()?v(B1,{}):null},get children(){return v(N6,{onReload:()=>r.refetch()})}})},_R=()=>{const t=Fd();return v(rr,{get children(){const e=H(mR),n=e.firstChild,i=n.nextSibling,[r,s]=ee(i.nextSibling);return r.nextSibling,U(e,()=>t.pathname,r,s),e}})},qb=Object.values(Object.assign({}))[0],xR=qb?qb.default:void 0,SR=()=>{let t={get request(){},get clientAddress(){},get locals(){},get prevUrl(){},get responseHeaders(){},get tags(){},get env(){},get routerContext(){},setStatusCode(n){},getStatusCode(){},$type:T2,fetch};function e(n){return v(w2,n)}return v(Nd.Provider,{value:t,get children(){return v(q_,{get children(){return v(e,{get base(){return"/"},data:xR,get children(){return v(vR,{})}})}})}})};V_(()=>v(SR,{}),document);export{Sn as $,ho as A,fr as B,BP as C,ct as D,a0 as E,$C as F,kC as G,Fd as H,ui as I,te as J,Ue as K,Ig as L,lf as M,TR as N,Me as O,rc as P,Ps as Q,Wt as R,he as S,vC as T,$e as U,BI as V,we as W,ot as X,pe as Y,Ie as Z,W as _,v as a,P2 as a$,yt as a0,$0 as a1,vr as a2,vt as a3,me as a4,Ln as a5,_x as a6,F0 as a7,Yo as a8,B0 as a9,B$ as aA,H$ as aB,q$ as aC,IR as aD,N1 as aE,yR as aF,dL as aG,zI as aH,on as aI,ht as aJ,jb as aK,QR as aL,Yd as aM,Vt as aN,yx as aO,tc as aP,ZS as aQ,bt as aR,vE as aS,wE as aT,cy as aU,ox as aV,St as aW,nt as aX,Wa as aY,$R as aZ,kR as a_,M0 as aa,K as ab,qd as ac,Wc as ad,iI as ae,sn as af,au as ag,qo as ah,tv as ai,Dr as aj,x0 as ak,o0 as al,Bu as am,YR as an,Td as ao,$s as ap,GR as aq,y$ as ar,j$ as as,v$ as at,ev as au,z$ as av,G$ as aw,U$ as ax,NC as ay,V$ as az,ee as b,et as b$,JC as b0,QC as b1,UR as b2,jR as b3,hi as b4,km as b5,br as b6,sT as b7,rr as b8,CR as b9,$u as bA,l1 as bB,z as bC,_h as bD,Pt as bE,ZR as bF,xl as bG,eL as bH,fe as bI,ce as bJ,sL as bK,s1 as bL,$t as bM,Vr as bN,Sh as bO,Ke as bP,dt as bQ,nL as bR,vn as bS,Cu as bT,oL as bU,Ci as bV,zf as bW,Zt as bX,rL as bY,iL as bZ,i4 as b_,FR as ba,Ub as bb,ga as bc,LR as bd,WR as be,zR as bf,gT as bg,DR as bh,OR as bi,BR as bj,MR as bk,MC as bl,PR as bm,RR as bn,NR as bo,ss as bp,AR as bq,Ts as br,qR as bs,VR as bt,KR as bu,cL as bv,uL as bw,HR as bx,_l as by,Be as bz,G as c,Se as c0,aL as c1,tL as c2,t4 as c3,ep as c4,I4 as c5,JR as c6,Le as d,zo as e,Di as f,H as g,js as h,U as i,fc as j,bo as k,ne as l,Is as m,F1 as n,wC as o,mC as p,gC as q,Ht as r,W_ as s,V as t,ta as u,Gi as v,Gl as w,_a as x,qi as y,Mf as z};
//# sourceMappingURL=entry-client-0a6ac3a6.js.map
